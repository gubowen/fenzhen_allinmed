webpackJsonp([1],{"+omm":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("3SZ7"),i=n.n(s),a=n("e1G8"),o=n.n(a),r=(n("CaOM"),n("q/Kx")),c=n("2zeX"),l=n.n(c),u={getUrl:"/call/customer/patient/case/history/getMapList/",saveUrl:"/call/customer/patient/case/history/saveOrUpdate/"};t.default={name:"oldSick",data:function(){return{oldSickOut:"",responsePK:"",userMessage:{},id:"",sickHistory:"",sickHistoryID:"",medicineHistory:"",medicineHistoryID:"",operationHistory:"",operationHistoryID:"",outSickHistory:"",outSickHistoryID:"",allergyHistory:"",allergyHistoryID:"",plague:"",plagueID:"",popupShow:!1,popupObj:{}}},components:{popup:l.a},watch:{"$store.state.currentItem":function(){this.init()}},activated:function(){this.userMessage=this.$store.state.currentItem,this.init()},methods:{init:function(){this.userMessage=JSON.parse(this.$route.params.num),this.getData(),o()(document.querySelectorAll(".J-textArea"))},getData:function(){var e=this,t={patientId:this.userMessage.patientId,caseId:this.userMessage.caseId,firstResult:0,maxResult:100};r.a.ajax({url:u.getUrl,method:"POST",data:t,beforeSend:function(e){},done:function(t){if(t.responseObject.responseData.dataList&&1==t.responseObject.responseStatus){for(var n=t.responseObject.responseData.dataList,s=0;s<n.length;s++)if(1==n[s].operatorType){switch(n[s].caseHistoryType){case"0":e.sickHistory=n[s].caseHistoryDesc,e.sickHistoryID=n[s].id;break;case"1":e.operationHistory=n[s].caseHistoryDesc,e.operationHistoryID=n[s].id;break;case"2":e.medicineHistory=n[s].caseHistoryDesc,e.medicineHistoryID=n[s].id;break;case"3":e.outSickHistory=n[s].caseHistoryDesc,e.outSickHistoryID=n[s].id;break;case"4":e.allergyHistory=n[s].caseHistoryDesc,e.allergyHistoryID=n[s].id;break;case"5":e.plague=n[s].caseHistoryDesc,e.plagueID=n[s].id}setTimeout(function(){o.a.update(document.querySelectorAll(".J-textArea"))},200)}}else console.log("无数据!")},fail:function(e){console.log("请求失败"+e)}})},saveData:function(){var e=this,t=[],n={id:this.sickHistoryID,caseHistoryType:0,caseHistoryDesc:this.sickHistory};t.push(n);var s={id:this.operationHistoryID,caseHistoryType:1,caseHistoryDesc:this.operationHistory};t.push(s);var a={id:this.medicineHistoryID,caseHistoryType:2,caseHistoryDesc:this.medicineHistory};t.push(a);var o={id:this.outSickHistoryID,caseHistoryType:3,caseHistoryDesc:this.outSickHistory};t.push(o);var c={id:this.allergyHistoryID,caseHistoryType:4,caseHistoryDesc:this.allergyHistory};t.push(c);var l={id:this.plagueID,caseHistoryType:5,caseHistoryDesc:this.plague};t.push(l),t=i()(t).toString();var d={patientId:this.userMessage.patientId,caseId:this.userMessage.caseId,operatorId:this.$store.state.userId,operatorType:1,caseHistoryList:t};r.a.ajax({url:u.saveUrl,method:"POST",data:d,beforeSend:function(e){},done:function(t){t.responseObject.responseStatus?(e.popupShow=!0,e.popupObj={text:"保存成功"},e.getData()):(e.popupShow=!0,e.popupObj={text:"保存失败"})},fail:function(e){console.log("请求失败"+e)}})}},mounted:function(){this.init()}}},"/+hK":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("wtEF");t.default={data:function(){return{}},mounted:function(){},computed:{docName:function(){return this.message.custom&&JSON.parse(this.message.custom).docName?JSON.parse(this.message.custom).docName:this.$store.state.userName}},methods:{updateShow:function(){s.a.commit("setPreviewType",2),s.a.commit("setPreviewId",this.message.content.data.length?this.message.content.data[0].diagnosisId:this.message.content.data.diagnosisId),s.a.commit("setPreviewShow",!0)},deleteMsg:function(){this.$emit("deleteMsg")}},props:{message:{type:Object},diagnosisShow:{type:Boolean},diagnosisId:{type:Number}}}},"/Fz+":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("figure",{staticClass:"messageList-item-content"},["1_doctor00001"!=e.message.from?n("figure",{staticClass:"messageList-item-img"},[n("img",{attrs:{src:e.$store.state.currentItem.logoUrl,alt:""}})]):e._e(),e._v(" "),n("figcaption",{staticClass:"messageList-item-text file",class:{"make-photo-box":e.exifFlag}},[n("section",{on:{click:function(t){e.showPDF(e.message.file.url)}}},[e._m(0),e._v(" "),n("figure",{staticClass:"fileInfo"},[n("p",{staticClass:"fileName"},[e._v(e._s(JSON.parse(e.message.custom).name))]),e._v(" "),n("p",{staticClass:"fileSize"},[e._v(e._s(e.getSize(e.message.file)))])])])]),e._v(" "),"1_doctor00001"==e.message.from?n("figure",{staticClass:"messageList-item-img"},[n("div",{staticClass:"messageList-item-nameTop"},[n("p",[e._v(e._s("【分诊医生】"+e.docName))])]),e._v(" "),n("div",{staticClass:"deleteMessage",on:{click:function(t){t.stopPropagation(),e.deleteMsg(t)}}},[e._v("撤回")]),e._v(" "),n("img",{attrs:{src:"/static/image/img00/index/chatting_portrait_system@2x.png",alt:""}})]):e._e()])},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("figure",{staticClass:"fileImg"},[n("img",{attrs:{src:"/static/image/img00/common/folder.jpg",alt:""}})])}]}},"/sA3":function(e,t,s){"use strict";(function(e,i){s.d(t,"a",function(){return a});var a={};"function"==typeof FastClick&&FastClick.attach(document.body),a.isEmptyObject=function(e){for(var t in e)return!1;return!0},a.stopBubble=function(e){e&&e.stopPropagation?e.stopPropagation():window.event.cancelBubble=!0},String.prototype.splice=function(e,t,n){return this.slice(0,e)+n+this.slice(e+Math.abs(t))},Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n,s;if(null==this)throw new TypeError("this is null or not defined");var i=Object(this),a=i.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(n=t),s=0;s<a;){var o;s in i&&(o=i[s],e.call(n,o,s,i)),s++}}),e.fn.extend({textareaAutoHeight:function(t){this._options={minHeight:0,maxHeight:1e3},this.init=function(){for(var n in t)this._options[n]=t[n];0==this._options.minHeight&&(this._options.minHeight=parseFloat(e(this).height()));for(var n in this._options)null==e(this).attr(n)&&e(this).attr(n,this._options[n]);e(this).keydown(this.resetHeight).keyup(this.resetHeight).change(this.resetHeight).focus(this.resetHeight),e(this)[0].onpaste=this.resetHeight},this.resetHeight=function(){var t=parseFloat(e(this).attr("minHeight")),n=parseFloat(e(this).attr("maxHeight"));e.browser.msie||e(this).height(0);var s=parseFloat(this.scrollHeight);s=s<t?t:s>n?n:s,e(this).height(s).scrollTop(s),s>=n?e(this).css("overflow-y","scroll"):e(this).css("overflow-y","hidden")},this.init()}}),Array.remove||(Array.prototype.remove=function(e,t){var n=this.slice((t||e)+1||this.length);return this.length=e<0?this.length+e:e,this.push.apply(this,n)}),a.getStrLen=function(e,t){for(var n=0,s="",i=0;i<e.length;i++)if(s+=e.charAt(i),e.charCodeAt(i)>128){if((n+=2)>=t)return s.substring(0,s.length-1)+"..."}else if((n+=1)>=t)return s.substring(0,s.length-2)+"...";return s},a.getStrByteLen=function(e,t){for(var n="",s=0,i=0;i<e.length&&(e.charCodeAt(i)>128?s+=2:s++,s<=t);i++)n=n.concat(e[i]);return s>t&&(n+="..."),n},a.phoneMask=function(e){return e.substr(0,3)+"****"+e.substr(7,11)},a.getRegisterName=function(e,t){var n="";return e?n=e.substr(0,2)+"****"+e.substring(e.lastIndexOf("@")):t&&(n=t.substr(0,3)+"****"+t.substring(t.length-4)),n},a.htmlToString=function(e){var t=(e+"").replace(/[<>&]/g,function(e){return{"<":"&lt;",">":"&gt;","&":"&amp;"}[e]}),n=t.split("&lt;/a&gt;&lt;a");return t=n.length>=2?n.map(function(e,t){var n=e.replace(/\&lt\;a[\s]*href\=\"?(\S*)\"?\&gt\;([\S\s]*)/gi,'<a href="$1">$2');return n=n.replace(/[\s]*href\=\"?(\S*)\"?\&gt\;([\S\s]*)&lt\;\/a\&gt\;/gi,' href="$1">$2</a>')}).join("</a><a"):(t+"").replace(/\&lt\;a[\s]*href\=\"?(\S*)\"?\&gt\;([\S\s]*)\&lt\;\/a\&gt\;/gi,'<a href="$1">$2</a>'),t=t.replace(/@@/g,"@")},a.checkAccountType=function(e){var t="";return/^(127|13[0-9]|14[0-9]|15[0-9]|18[0-9]|17[0-9])\d{8}$/.test(e)&&(t="mobile"),/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/.test(e)&&(t="email"),t},a.cutLine=function(t,n,s){if(t){var i=t.split(","),a="";return e.each(i,function(e,t){t&&(t.split(n)[1]?a+=t.split(n)[1]+s:a+=t+s)}),a.substring(0,a.length-1)}},a.strHandle={cutDoctorTitle:function(e){var t="";if(e.length>0)for(var n=e.split(","),s=/(医师)/g,i=0;i<n.length;i++)if(s.test(n[i])){t=n[i];break}return t},cutNotDoctorTitle:function(e){var t="";if(e.length>0)for(var n=e.split(","),s=/(医师)/g,i=0;i<n.length;i++)s.test(n[i])||(t+=n[i]+",");return t}},String.prototype.toWK=function(){return isNaN(parseInt(this))?0:parseInt(this)<1e4&&parseInt(this)>999?Math.floor(parseInt(this)/1e3)+"K+":parseInt(this)>9999?Math.floor(parseInt(this)/1e4)+"W+":this},Number.prototype.toWK=function(){return isNaN(parseInt(this))?0:parseInt(this)<1e4&&parseInt(this)>999?Math.floor(parseInt(this)/1e3)+"K+":parseInt(this)>9999?Math.floor(parseInt(this)/1e4)+"W+":this},String.prototype.toInt=function(){return parseInt(this)},String.prototype.toK=function(){return parseInt(this)>999?Math.floor(parseInt(this)/1e3)+"K+":this},Number.prototype.toK=function(){return parseInt(this)>999?Math.floor(parseInt(this)/1e3)+"K+":this},String.prototype.toW=function(){return parseInt(this)>9999?Math.floor(parseInt(this)/1e4)+"W+":this},Number.prototype.toW=function(){return parseInt(this)>9999?Math.floor(parseInt(this)/1e4)+"W+":this},a.getByteLen=function(e){for(var t=0,n=0;n<e.length;n++)null!==e[n].match(/[^\x00-\xff]/gi)?t+=2:t+=1;return t},String.prototype.subByte=function(e,t){for(var n=e;t>0;n++){t-=this.charCodeAt(n)<256?1:2}return this.slice(e,n)},a.textChange=function(t){function n(e){var n=a.getByteLen(e.val());r=2*e.attr("max"),s.noTop||(0==n?(s.$tex.parent().parent().find(".default_name").hide(),s.$tex.parent().css("top",s.minTop)):(s.$tex.parent().parent().find(".default_name").show(),s.$tex.parent().css("top",s.maxTop))),n<r||n==r?(c=Math.ceil((r-n)/2),s.$num&&(void 0!=t.numTip&&t.numTip>0?c<=t.numTip?(s.$num.text(c),s.$num.css("color","#F00")):s.$num.text(""):(s.$num.text(c),0==c?s.$num.css("color","#F00"):s.$num.css("color","#c5c5c5")))):n>r&&(e.val(e.val().subByte(0,r)),s.$num&&s.$num.text(0).css("color","#F00"))}var s={},o={minTop:24,maxTop:32};s=e.extend(o,t);var r=(i.support.htmlSerialize,r),c=0;s.$tex.bind("focus",function(){s.$tex.parent().parent().find(".default_name").css("color","#3d84c6")}),s.$tex.bind("blur",function(){s.$tex.parent().parent().find(".default_name").css("color","#808080")}),window.attachEvent&&-1===navigator.userAgent.indexOf("Opera")?(s.$tex.bind("propertychange",function(){n(e(this))}),s.$tex.bind("keyup",function(){n(e(this))})):s.$tex.bind("keyup keydown change input cut paste drop",function(){n(e(this))})},a.htmlToString=function(e){var t=(e+"").replace(/[<>&]/g,function(e){return{"<":"&lt;",">":"&gt;","&":"&amp;"}[e]}),n=t.split("&lt;/a&gt;&lt;a");return t=n.length>=2?n.map(function(e,t){var n=e.replace(/\&lt\;a[\s]*href\=\"?(\S*)\"?\&gt\;([\S\s]*)/gi,'<a href="$1">$2');return n=n.replace(/[\s]*href\=\"?(\S*)\"?\&gt\;([\S\s]*)&lt\;\/a\&gt\;/gi,' href="$1">$2</a>')}).join("</a><a"):(t+"").replace(/\&lt\;a[\s]*href\=\"?(\S*)\"?\&gt\;([\S\s]*)\&lt\;\/a\&gt\;/gi,'<a href="$1">$2</a>'),t=t.replace(/@@/g,"@")},a.browser={mozilla:/firefox/.test(navigator.userAgent.toLowerCase()),webkit:/webkit/.test(navigator.userAgent.toLowerCase()),opera:/opera/.test(navigator.userAgent.toLowerCase()),msie:/msie/.test(navigator.userAgent.toLowerCase()),versions:function(){var e=navigator.userAgent;navigator.appVersion;return{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&-1==e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/)||!!e.match(/AppleWebKit/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Linux")>-1,iPhone:e.indexOf("iPhone")>-1||e.indexOf("Mac")>-1,iPad:e.indexOf("iPad")>-1,webApp:-1===e.indexOf("Safari")}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},a.getBrowseType=function(){var e=navigator.userAgent;return{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&-1==e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/)||!!e.match(/AppleWebKit/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Linux")>-1,iPhone:e.indexOf("iPhone")>-1,mac:e.indexOf("Mac")>-1,iPad:e.indexOf("iPad")>-1,webApp:-1==e.indexOf("Safari")}},a.ispc=function(){for(var e=navigator.userAgent,t=new Array("Android","iPhone","SymbianOS","Windows Phone","iPod"),n=!0,s=0;s<t.length;s++)if(e.indexOf(t[s])>0){n=!1;break}return n},a.loading={show:function(){0==e(".ev-loading").length?e("body").append('<section class="middle-tip-box ev-loading"><figure class="middle-tip-box-text"><img src="/image/img00/common/save_complete.png" alt="loading..."></figure></section>'):e(".ev-loading").show()},hide:function(){e(".ev-loading").hide()}},a.confirmBox=function(t){if(0===e(".modal-confirm").length){var n='<section class="modal-confirm"><article class="modal-confirm-content">'+function(t){var n="";return e(t).each(function(e,t){n+="<p>"+t.text+"</p>"}),n}(t.textList)+'    </article>    <figure class="modal-confirm-button">        <button class="btn-ensure modal-confirm-ensure">'+t.ensure+'</button>        <button class="btn-primary modal-confirm-cancel">'+t.cancel+"</button>    </figure></section>";console.log(n),t.container.append(n);var s=e(window).height(),i=e(".modal-confirm").offset().top;console.log(s,i),i>s-155&&e(".modal-confirm").addClass("upShow"),setTimeout(function(t){e(".modal-confirm").addClass("show")},50),e(".modal-confirm-ensure").on("click",function(n){return n.stopPropagation(),t.ensureCallback&&t.ensureCallback(),e(".modal-confirm").removeClass("show"),!1}),e(".modal-confirm").on("transitionend",function(t){t.stopPropagation(),e(".modal-confirm").hasClass("show")||e(".modal-confirm").remove()}),e(".modal-confirm-cancel").on("click",function(n){return n.stopPropagation(),t.cancelCallback&&t.cancelCallback(),e(".modal-confirm").removeClass("show"),!1})}else e(".modal-confirm").addClass("show")},a.alertBox=function(t){0===e(".big-confirm").size()&&(e("body").append('<section class="main-masker big-confirm">    <section class="big-confirm-inner">        <header class="big-confirm-title"><h4>'+(t.title?t.title:"")+'</h4>            <i class="icon-close window-close"></i>        </header>'+function(){return t.input?"<textarea class='big-confirm-input' placeholder='"+t.placeholder+"'></textarea>":'        <article class="big-confirm-content" style="text-align:left;padding: 0 40px;line-height: 1.5;;">            <p>'+t.text+"</p>        </article>"}()+'        <footer class="big-confirm-btn">            <button class="btn-primary ensure">'+t.ensure+"</button>        </footer>    </section></section>"),setTimeout(function(){e(".big-confirm").addClass("show")},30),e(".big-confirm-title .window-close").on("click",function(){e(".big-confirm").removeClass("show"),e(".big-confirm").on("transitionend",function(){e(this).remove()})}),e(".big-confirm-btn .ensure").on("click",function(){e(".big-confirm").removeClass("show"),e(".big-confirm").on("transitionend",function(){e(this).remove()}),t.ensureCallback&&t.ensureCallback()}))},a.btnBox=function(t){if(0===e(".btnBox-tips").length){var n='<section class="btnBox-tips maskers " '+t.direction+'>    <section class="'+t.direction+'-box"><article>'+(t.title?"<h2>"+(t.title||"")+"</h2>":"")+"</article>"+function(t){var n="";return e(t).each(function(e,t){n+='<a class="btnBox-btn '+t.className+'" id="'+(t.id?t.id:"")+'" href="'+t.href+'">'+t.content+"</a>"}),n}(t.btn)+"    </section></section>";e("body").append(n),setTimeout(function(t){e(".btnBox-tips").addClass("show")},50),e(".btnBox-tips").on("click",function(t){e(t.target).hasClass("btnBox-btn")||(t.stopPropagation(),e(".btnBox-tips").removeClass("show"),e(".btnBox-tips").on("transitionend WebkitTransitionEnd",function(){e(".btnBox-tips").remove()}))})}else e(".btnBox-tips").addClass("show")},a.popup=function(t){0==e(".popup").length?(e("body").append('<section class="middle-tip-modal popup"><figure class="middle-tip-box-text">'+(t.hasImg?'<img src="/static/image/img00/login/save_loading.png" alt="">':"")+'<p class="popup-text">'+t.text+"</p> </figure></section>"),setTimeout(function(){e(".popup").addClass("show")},100)):(e(".popup").addClass("show"),e(".tipText").text(t.text),t.hasImg?e(".middle-tip-box-text img").show():e(".middle-tip-box-text img").hide()),setTimeout(function(){e(".popup").remove()},3e3)},a.popupRight=function(t){0==e(".popup").length?(e("body").append('<section class="middle-tip-modal popup right"><figure class="middle-tip-box-text">'+(t.hasImg?'<img src="/static/image/img00/login/save_loading.png" alt="">':"")+'<p class="popup-text">'+t.text+"</p> </figure></section>"),setTimeout(function(){e(".popup").addClass("show")},100)):(e(".popup").addClass("show"),e(".tipText").text(t.text),t.hasImg?e(".middle-tip-box-text img").show():e(".middle-tip-box-text img").hide()),setTimeout(function(){e(".popup").removeClass("show")},3e3)},a.bigConfirm=function(t){0===e(".big-confirm").size()&&(e("body").append('<section class="main-masker big-confirm">    <section class="big-confirm-inner">        <header class="big-confirm-title"><h4>'+(t.title?t.title:"")+'</h4>            <i class="icon-close window-close"></i>        </header>'+function(){return t.input?"<textarea class='big-confirm-input' placeholder='"+t.placeholder+"'></textarea>":'        <article class="big-confirm-content">            <p>'+t.text+"</p>        </article>"}()+'        <footer class="big-confirm-btn">            <button class="btn-border cancel">'+t.cancel+'</button>            <button class="btn-primary ensure">'+t.ensure+"</button>        </footer>    </section></section>"),setTimeout(function(){e(".big-confirm").addClass("show")},30),t.input&&0===e(".big-confirm-input").val().length&&e(".btn-primary.ensure").addClass("disabled"),e(".big-confirm-input").on("input propertychange",function(){0===e(this).val().length?e(".btn-primary.ensure").addClass("disabled"):e(this).val().length>t.max?(e(".btn-primary.ensure").addClass("disabled"),e(this).val(e(this).val().substring(0,t.max))):e(".btn-primary.ensure").removeClass("disabled")}),e(".big-confirm-title .window-close").on("click",function(){e(".big-confirm").removeClass("show"),e(".big-confirm").on("transitionend",function(){e(this).remove()})}),e(".big-confirm-btn .cancel").on("click",function(){e(".big-confirm").removeClass("show"),e(".big-confirm").on("transitionend",function(){e(this).remove()}),t.cancelCallback&&t.cancelCallback()}),e(".big-confirm-btn .ensure").on("click",function(){if(e(this).hasClass("disabled"))return!1;e(".big-confirm").removeClass("show"),e(".big-confirm").on("transitionend",function(){e(this).remove()}),t.ensureCallback&&t.ensureCallback()}))},a.getpara=function(e){var t,n,s=document.URL,i={};if(s.lastIndexOf(e||"?")>0){t=s.substring(s.lastIndexOf(e||"?")+1,s.length);for(var a=t.split("&"),o=0;o<a.length;o++)n=a[o].split("="),i[n[0]]=decodeURIComponent(n[1])}return i},a.buildAnchor=function(t){if(t&&null!=t&&!e.isEmptyObject(t)){var n=window.location.pathname+location.search;n.indexOf("#")<0&&(n+="#");for(var s in t)n+="&"+s+"="+t[s];if(n.indexOf(!1)&&(n+="&share=app"),n.indexOf("visitSiteId")>0){n+="&visitSiteId="+a.getparaNew().visitSiteId}window.location.href=n}},a.getparaNew=function(){var e,t,n=document.URL,s={};if(e=n,n.lastIndexOf("?")>0&&(e=n.substring(n.lastIndexOf("?")+1,n.length)),n.lastIndexOf("#")>0&&(e=e.split("#")[1]),"-1"==n.indexOf("="))return!1;if(e.length>0){var i=e.split("&");if(i.length>0){for(var a=0;a<i.length;a++)t=i[a].split("="),s[t[0]]=decodeURIComponent(t[1]);return s}return!1}return!1},a.bindCallApp=function(t){function n(){var e="";navigator.userAgent;return y&&void 0!=t.android&&(e=t.android),b&&void 0!=t.ios&&(e=t.ios),e}function s(){_.forEach(window.clearTimeout),_=[]}function i(t){e(v).off("click").on("click",{url:t||""},function(e){var t=e.data.url;if(h=+new Date,!t)var t=n();o(t)})}function o(e){if(e){if(f)c(e);else{var t=e;setTimeout(function(){g?c(t):r(t)},0)}u()}}function r(e){var t=document.createElement("iframe");t.src=e,t.style.display="none",document.body.appendChild(t),setTimeout(function(){document.body.removeChild(t),t=null},0)}function c(e){window.location.href=e}function l(t){var n;n="android"==t?"/image/android.png":"/image/ios.png";var s=e(".content-page");s.length>0?s.append("<div class='app_download_wx'><img src='"+n+"' /></div>"):e("body").append("<div class='app_download_wx'><img src='"+n+"' /></div>"),e("body").css("overflow","hidden").bind("touchmove",function(e){e.preventDefault()}),e(".app_download_wx").on("click",function(){e(this).remove(),e("body").css("overflow","auto").unbind("touchmove")})}function u(){y?_.push(window.setTimeout(function(){+new Date-h<3100&&(window.location.href="http://a.app.qq.com/o/simple.jsp?pkgname=cn.net.yiding")},3e3)):_.push(window.setTimeout(function(){console.log(Date.now()-h),Date.now()-h<3100&&(window.location.href=m?"http://a.app.qq.com/o/simple.jsp?pkgname=cn.net.yiding":"https://itunes.apple.com/cn/app/yi-ding/id1127209482?mt=8")},3e3))}function d(){console.log('请传入要跳转的APP地址的参数对象，如：{ios:"allinmdios://meettingBroadcast/meetInfo",android:"\'allin://com.allin.social:75235?data=mydata"}')}if("object"!=typeof t)return void d();if(!t.hasOwnProperty("ios")&&!t.hasOwnProperty("android"))return void d();var p=window.navigator.userAgent,m=/MicroMessenger/.test(p),f=!1,g=!1;f=Boolean(navigator.userAgent.match(/OS ([9]_[0-9]|[10|11][_\d])[_\d]* like Mac OS X/i)),g=Boolean(navigator.userAgent.match(/OS ([9]_[0-1])[_\d]* like Mac OS X/i));var h,v,y=p.indexOf("Android")>-1||p.indexOf("Linux")>-1,b=p.indexOf("iPhone")>-1||p.indexOf("Mac")>-1,w=p.indexOf("weibo")>-1||p.indexOf("Weibo")>-1,_=(p.indexOf("QQ")>-1&&p.indexOf("NetType"),[]),S=n();e(window).on("blur pagehide beforeunload",s),void 0!==a.getparaNew().ios9&&o(S),"boolean"==typeof t.runAtOnce&&t.runAtOnce&&(h=+new Date,f?m||w||c(t.ios9):m||w||o(S)),"string"==typeof t.el&&(v=t.el,function(){if(y){if(m||w)return l("android"),!1;i()}if(b)if(f){if(m||w)return l("ios"),!1;i(t.ios9)}else{if(m||w)return l("ios"),!1;i(t.ios)}}())},a.recognizeAppShareLink=function(t){if(a.getparaNew()&&a.getparaNew().share&&"app"==a.getparaNew().share.toLowerCase()){var n=e(".content-page");0==n.size()&&(n=e("body")),n.append("<div class='app_download_wx_jump_app'><div class='bg'></div><div class='center'><img src='/images/img50/callApp/share-app-popup.png' alt='' ></div></div>");var s=document.querySelector('meta[name="viewport"]').getAttribute("content"),i=s.match(/initial\-scale=([\d\.]+)/)||s.match(/maximum\-scale=([\d\.]+)/);if(null!=i&&1==parseInt(i[1])&&e(".app_download_wx_jump_app").addClass("viewport-small"),e("video,input,select,textarea,object").hide(),void 0!==t)t=e.extend(t,{el:".app_download_wx_jump_app .center"});else var t={el:".app_download_wx_jump_app .center",ios:"allinmdios://",ios9:"http://app.allinmd.cn/applinks.html",android:"allin://com.allin.social:75235"};return a.bindCallApp(t),e("body").css("overflow","hidden").on("mousemove touchmove",function(e){return!1}),!0}return!1},a.ajax=function(t){e.ajax({url:t.url,type:t.type,dataType:"json",data:t.data,timeout:1e4,beforeSend:function(){a.loading.show()}}).done(function(n){console.log("success"),e.isEmptyObject(n.responseObject.responseData)?t.noDataCallback&&t.noDataCallback():t.hasDataCallback&&t.hasDataCallback(),t.successCallback&&t.successCallback()}).fail(function(){console.log("XHR error..."),a.loading.hide(),t.failCallback&&t.failCallback()})},a.checkJiangZheHu=function(){if(this.cache)return this.cache;var t=!1,n=e.cookie("accessLoginVersion");return""==n||null==n?e.ajax({url:"/call/log/op/location/getIpArea/",async:!1,success:function(n){n&&n.responseObject&&n.responseObject.responseData&&("1"==n.responseObject.responseData.isNew?(t=!0,e.cookie("accessLoginVersion","planB")):e.cookie("accessLoginVersion","planA"))}}):"planB"==n&&(t=!0),this.cache=t,t},a.checkIsChina=function(){if(this.cache)return this.cache;var t=!1,n=e.cookie("accessLoginCountry");return""==n||null==n?e.ajax({url:"/mcall/log/op/location/getIpArea/",async:!1,success:function(n){n&&n.responseObject&&n.responseObject.responseData&&("CN"==n.responseObject.responseData.countryCode?(t=!0,e.cookie("accessLoginCountry","CN")):e.cookie("accessLoginCountry","NotCN"))}}):"CN"==n&&(t=!0),this.cache=t,t};a.getFileSize=function(e){var t=/msie/i.test(navigator.userAgent)&&!window.opera,n=0;return t&&!e.files||(n=e.files[0].size),n},a.file={},a.file.getFileSize=function(e){var t=/msie/i.test(navigator.userAgent)&&!window.opera,n=0;return e&&(t&&!e.files||(n=e.files[0].size)),n},a.file.getName=function(e){var t=e,n=t.lastIndexOf("/"),s=t.lastIndexOf("\\"),i=Math.max(n,s),a=t.lastIndexOf(".");return{fileName:t.substring(i+1,a),suffixName:t.substring(a+1,t.length)}},a.date={local_time:function(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1;n<10&&(n="0"+n);var s=e.getDate();return s<10&&(s="0"+s),t+"-"+n+"-"+s+" "+e.toTimeString().substr(0,8)},am_pm_data:function(e){var e,t=e.substr(0,4),n=e.substr(5,2),s=e.substr(8,2),i=e.substr(11,2);i<12?day_ampm="上午 ":12==i?day_ampm="中午 ":i>12&&(day_ampm="下午 ");var a=e.substr(14,2);return e=day_ampm+i+":"+a+" "+t+"年"+n+"月"+s+"日"},cut_date_msec:function(e){return e=e.substr(0,19)},isSameDay:function(e,t){return e.substr(0,10)==t.substr(0,10)},diffDay_one:function(e,t){var n=e.substr(0,10),s=t.substr(0,10),i=n.replace(/\-/g,"/"),a=s.replace(/\-/g,"/"),o=Date.parse(i),r=Date.parse(a);if(isNaN(o))return NaN;if(isNaN(r))return NaN;var c=(r-o)/864e5;if(n.substring(0,4)!==a.substring(0,4))return i;if(c<1){var l=new Date(e.replace(/\-/g,"/")),u=new Date(t.replace(/\-/g,"/")),d=(u.getTime()-l.getTime())/1e3;if(d<60)return"刚刚";if((d=parseInt(d/60))<60)return d+"分钟前";if((d=parseInt(d/60))<60)return d+"小时前"}else{if(c<2)return"昨天";if(c<365)return e.replace(/\-/g,"/").substring(5,10)}},diffDay_two:function(e,t){var n=e.substr(0,10),s=t.substr(0,10),i=n.replace(/\-/g,"/"),a=s.replace(/\-/g,"/"),o=Date.parse(i),r=Date.parse(a);return isNaN(o)?NaN:isNaN(r)?NaN:(r-o)/864e5>7?e.substr(0,10):"7天前"},date_word:function(e){var t=e.substr(0,4),n=e.substr(5,2),s=e.substr(8,2);return n<10&&(n=n.substr(1,1)),s<10&&(s=s.substr(1,1)),e=t+"年"+n+"月"+s+"日"},datafomat:function(e){var t,n=e;n.each(function(e){t=date_word(n.eq(e).html()),n.eq(e).html(t.substring(t.indexOf("年")+1))})},dateJoint:function(e,t,n,s){var i=void 0!=n&&""!=n?n:".",a=void 0!=s&&""!=s?s:"-",o=e.substring(0,10).replace(/-/g,i),r=o.toString().split(i),c=t.substring(0,10).replace(/-/g,i),l=c.toString().split(i);return parseInt(l[0])>parseInt(r[0])?o+a+c:parseInt(l[1])>parseInt(r[1])?o+a+c.substring(5,10):o+a+c.substring(8,10)}},a.ymd=function(t){function s(e,t){return t=parseInt(t,10),new Date(e,t,0).getDate()}function i(t){var i=new Date;daysInMonth=s(t.year.val(),t.month.val()),c="",n="",e("option",t.day).each(function(t,s){if(e(s).attr("selected"))return n=e(s).val(),void(n<10&&(n=n.substring(1)))}),t.default1&&t.day.css(t.css);for(var a=5==t.month.val()&&t.startDay?t.startDay:1;a<=(10==t.month.val()&&t.endDay?30:parseInt(daysInMonth));a++)c=a==(n||(t.order?1:i.getDate()))?"<option value="+(a<10?"0"+a:a)+" selected=true>"+(a<10?"0"+a:a)+"</option>":"<option value="+(a<10?"0"+a:a)+">"+(a<10?"0"+a:a)+"</option>",t.day.append(c)}var a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o=new Date,r=o.getFullYear(),c="";t.default1&&t.year.css(t.css);for(var l=r;l>=(t.startYear?t.startYear:1930);l--)c=l==(t.order?1970:r)?"<option value="+l+" selected=true>"+l+"</option>":"<option value="+l+">"+l+"</option>",t.year.append(c),t.defaultYear&&t.year.val(t.defaultYear);if(t.defaultMonth&&t.month.css(t.css),t.month)for(var l=t.startMonth?t.startMonth:1;l<=(t.endMonth?t.endMonth:12);l++)c=l==(t.order?7:o.getMonth()+1)?"<option value="+(l<10?"0"+l:l)+" selected=true>"+(t.en?a[l-1]:l<10?"0"+l:l)+"</option>":"<option value="+(l<10?"0"+l:l)+">"+(t.en?a[l-1]:l<10?"0"+l:l)+"</option>",t.month.append(c);t.defaultMonth&&t.month.val(t.defaultMonth),t.day&&(i(t),t.year.bind("change",function(){"0"!=t.month.val()&&i(t)}),t.month.bind("change",function(){i(t)})),t.defaultDay&&t.day.val(t.defaultDay)},a.numToChinese=function(e){if(!/^\d*(\.\d*)?$/.test(e))return alert("Number is wrong!"),"Number is wrong!";for(var t=new Array("零","一","二","三","四","五","六","七","八","九"),n=new Array("","十","百","千","万","亿","点",""),s=(""+e).replace(/(^0*)/g,"").split("."),i=0,a="",o=s[0].length-1;o>=0;o--){switch(i){case 0:a=n[7]+a;break;case 4:new RegExp("0{4}\\d{"+(s[0].length-o-1)+"}$").test(s[0])||(a=n[4]+a);break;case 8:a=n[5]+a,n[7]=n[5],i=0}i%4==2&&0!=s[0].charAt(o+2)&&0==s[0].charAt(o+1)&&(a=t[0]+a),0!=s[0].charAt(o)&&(a=t[s[0].charAt(o)]+n[i%4]+a),i++}if(s.length>1){a+=n[6];for(var o=0;o<s[1].length;o++)a+=t[s[1].charAt(o)]}return a},a.gbw={},a.gbw.confirmBox=function(t,n){if(0===e(".confirmBox-tips").length){var s='<section class="maskers confirmBox-tips"><section class="confirmBox-inner"><article class="confirmBox-content"><article>'+(t.title?"<h2>"+(t.title||"")+"</h2>":"<h2></h2>")+"<p>"+(t.content||"")+'</p></article></article><footer class="confirmBox-btns"><button class="confirmBox-cancelBtn">'+(t.cancel||"")+'</button><button class="confirmBox-ensureBtn">'+(t.ensure||"")+'</button></footer></section><section class="mask-close"></section></section><section class="mask-background"></section>';e("body").append(s),setTimeout(function(t){e(".confirmBox-tips").addClass("show"),e(".mask-background").addClass("show")},50),e(".confirmBox-cancelBtn").off("click").on("click",function(){return t.cancelCallback&&t.cancelCallback(),e(".confirmBox-tips").removeClass("show"),e(".mask-background").removeClass("show"),e(".confirmBox-tips").on("transitionend WebkitTransitionEnd",function(){e(".confirmBox-tips").remove()}),!1}),e(".confirmBox-ensureBtn").off("click").on("click",function(){return t.ensureCallback&&t.ensureCallback(),e(".confirmBox-tips").removeClass("show"),e(".mask-background").removeClass("show"),e(".confirmBox-tips").on("transitionend WebkitTransitionEnd",function(){e(".confirmBox-tips").remove()}),!1}),e(".mask-close").off("click").on("click",function(){return t.ensureCallback&&t.ensureCallback(),e(".confirmBox-tips").removeClass("show"),e(".mask-background").removeClass("show"),e(".confirmBox-tips").on("transitionend WebkitTransitionEnd",function(){e(".confirmBox-tips").remove()}),!1})}else e(".confirmBox-tips").addClass("show"),e(".mask-background").addClass("show")},a.gbw.infoBox=function(t){if(0===e(".infoBox-tips").length){var n=t.html;e("body").append(n),setTimeout(function(t){e(".infoBox-tips").addClass("show"),e(".mask-background").addClass("show")},50),e(".infoBox-saveBtn").off("click").on("click",function(){return t.ensureCallback&&t.ensureCallback(),e(".infoBox-tips").removeClass("show"),e(".mask-background").removeClass("show"),e(".infoBox-tips").on("transitionend WebkitTransitionEnd",function(){e(".confirmBox-tips").remove()}),!1}),e(".mask-close").off("click").on("click",function(){return t.ensureCallback&&t.ensureCallback(),console.log("close"),e(".infoBox-tips").remove(),e(".mask-background").remove(),e(".infoBox-tips").on("transitionend WebkitTransitionEnd",function(){e(".infoBox-tips").remove()}),!1})}else e(".infoBox-tips").remove("show"),e(".mask-background").addClass("show")}}).call(t,s("bXvV"),s("bXvV"))},0:function(e,t){},"0+YV":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("xY2u"),i=(n.n(s),n("q/Kx")),a={MedicalReport:"/call/customer/patient/case/v1/getMapById/"};t.default={name:"mainSpeak",data:function(){return{name:"",sex:"",logo:"",type:"",age:"",category:"",caseId:this.$store.state.caseId,caseMain:"",caseAlong:"",painNature:"",VASLevelL:"",expectedTime:"",expectedAddress:"",userMessage:{}}},mounted:function(){this.userMessage=this.$route.params.num,this.init()},activated:function(){this.userMessage=this.$route.params.num,this.init()},watch:{"$store.state.currentItem":function(){this.init()}},methods:{init:function(){var e=this;this.userMessage=this.$store.state.currentItem;var t={caseId:this.userMessage.caseId,isOrder:0,attUseFlag:6};e.caseMain="",e.caseAlong="",e.painNature="",e.VASLevelL="",i.a.ajax({url:a.MedicalReport,method:"POST",data:t,beforeSend:function(e){},done:function(t){var n=t.responseObject.responseData.dataList[0];""!=n.patientCasemap.caseMain.caseMain&&(e.caseMain=n.patientCasemap.caseMain.caseMain),n.resultMainList.length>0&&n.resultMainList[0].symptomOptions.forEach(function(t,n){if(t.refQuestionList&&t.refQuestionList.length>0&&(t.refQuestionList[0]&&t.refQuestionList[0].symptomOptions&&t.refQuestionList[0].symptomOptions.length>0&&t.refQuestionList[0].symptomOptions[0].optionName&&t.refQuestionList[0].symptomOptions[0].optionName.length>0&&(e.painNature=t.refQuestionList[0].symptomOptions[0].optionName),t.refQuestionList[1]&&t.refQuestionList[1].symptomOptions&&t.refQuestionList[1].symptomOptions.length>0&&t.refQuestionList[1].symptomOptions[0].optionName&&t.refQuestionList[1].symptomOptions[0].optionName.length>0)){var s=t.refQuestionList[1].symptomOptions[0].optionName;e.VASLevelL=s.substring(0,2)}}),""!=n.patientCasemap.caseMain.caseAlong&&(e.caseAlong=n.patientCasemap.caseMain.caseAlong)},fail:function(e){console.log("请求失败："+e)}})}}}},"0h66":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("L2H5"),i=n.n(s),a=(n("YaEn"),n("T4ej")),o=n.n(a),r=n("2zeX"),c=n.n(r);t.default={name:"app",components:{userList:i.a,Loading:o.a,Popup:c.a},mounted:function(){}}},"1PlK":function(e,t){},"1x5N":function(module,__webpack_exports__,__webpack_require__){"use strict";(function(jQuery){var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__=__webpack_require__("3SZ7"),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_typeof__=__webpack_require__("GxZn"),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_typeof___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_typeof__);/**
 * jQuery JSON plugin 2.4.0
 *
 * @author Brantley Harris, 2009-2011
 * @author Timo Tijhof, 2011-2012
 * @source This plugin is heavily influenced by MochiKit's serializeJSON, which is
 *         copyrighted 2005 by Bob Ippolito.
 * @source Brantley Harris wrote this plugin. It is based somewhat on the JSON.org
 *         website's http://www.json.org/json2.js, which proclaims:
 *         "NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.", a sentiment that
 *         I uphold.
 * @license MIT License <http://www.opensource.org/licenses/mit-license.php>
 */
!function($){var escape=/["\\\x00-\x1f\x7f-\x9f]/g,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},hasOwn=Object.prototype.hasOwnProperty;$.toJSON="object"===("undefined"==typeof JSON?"undefined":__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_typeof___default()(JSON))&&__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default.a?__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default.a:function(e){if(null===e)return"null";var t,n,s,i,a=$.type(e);if("undefined"!==a){if("number"===a||"boolean"===a)return String(e);if("string"===a)return $.quoteString(e);if("function"==typeof e.toJSON)return $.toJSON(e.toJSON());if("date"===a){var o=e.getUTCMonth()+1,r=e.getUTCDate(),c=e.getUTCFullYear(),l=e.getUTCHours(),u=e.getUTCMinutes(),d=e.getUTCSeconds(),p=e.getUTCMilliseconds();return o<10&&(o="0"+o),r<10&&(r="0"+r),l<10&&(l="0"+l),u<10&&(u="0"+u),d<10&&(d="0"+d),p<100&&(p="0"+p),p<10&&(p="0"+p),'"'+c+"-"+o+"-"+r+"T"+l+":"+u+":"+d+"."+p+'Z"'}if(t=[],$.isArray(e)){for(n=0;n<e.length;n++)t.push($.toJSON(e[n])||"null");return"["+t.join(",")+"]"}if("object"===(void 0===e?"undefined":__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_typeof___default()(e))){for(n in e)if(hasOwn.call(e,n)){if("number"===(a=void 0===n?"undefined":__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_typeof___default()(n)))s='"'+n+'"';else{if("string"!==a)continue;s=$.quoteString(n)}a=__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_typeof___default()(e[n]),"function"!==a&&"undefined"!==a&&(i=$.toJSON(e[n]),t.push(s+":"+i))}return"{"+t.join(",")+"}"}}},$.evalJSON="object"===("undefined"==typeof JSON?"undefined":__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_typeof___default()(JSON))&&JSON.parse?JSON.parse:function(str){return eval("("+str+")")},$.secureEvalJSON="object"===("undefined"==typeof JSON?"undefined":__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_typeof___default()(JSON))&&JSON.parse?JSON.parse:function(str){var filtered=str.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(filtered))return eval("("+str+")");throw new SyntaxError("Error parsing JSON, source is not valid.")},$.quoteString=function(e){return e.match(escape)?'"'+e.replace(escape,function(e){var t=meta[e];return"string"==typeof t?t:(t=e.charCodeAt(),"\\u00"+Math.floor(t/16).toString(16)+(t%16).toString(16))})+'"':'"'+e+'"'}}(jQuery)}).call(__webpack_exports__,__webpack_require__("bXvV"))},"24qD":function(e,t,n){"use strict";var s=n("bXvV"),i=n.n(s);n("1x5N");!function(e){e.fn.extend({photoGallery:function(t){function n(){var e=_.width(),t=_.height(),n=e*g.ratio,s=t*g.ratio,o=(n/S*100).toFixed(0);o>k&&(n=S*k/100,s=x*k/100,o=k),_.width(n).height(s),a(o),i(),r(n,s)}function s(){var e=_.width(),t=_.height(),n=e/g.ratio,s=t/g.ratio,o=(n/S*100).toFixed(0);o<I&&(n=S*I/100,s=x*I/100,o=I),_.width(n).height(s),i(),a(o),r(n,s)}function i(){var e=_.width(),n=_.height(),s=t.obj.outerWidth(),i=t.obj.outerHeight(),a=(s-e)/2,o=(i-n)/2;_.css({left:a+"px",top:o+"px"})}function a(e){h.find(".percentTip").remove()}function o(){var t='<div class="scalePic"><div class="demoPic"> <img src="'+_.attr("src")+'"/><div class="demoPicArea"><span></span></div></div></div>';e(".scalePic").remove(),h.append(t),A=e(".demoPicArea",h)}function r(e,t){N&&(e=[t,t=e][0]),e>parseInt(h[0].clientWidth)||t>parseInt(h[0].clientHeight)?(L.show(),c()):L.hide()}function c(){var e=L.find("img")[0].width,t=L.find("img")[0].height;T=_.width(),M=_.height();var n=_.offset(),s=h.offset(),i=s.left,a=s.top,o=n.left-i,r=n.top-a,c="",l="",u="",d="";N&&(e=[t,t=e][0],T=[M,M=T][0]),c=e/(T/D),T<D&&(c=e),l=t/(M/R),M<R&&(l=t),u=(g.scalePicWidth-e)/2+-o*e/T,T<D&&(u=(g.scalePicWidth-e)/2),d=(g.scalePicHeight-t)/2+-r*t/M,M<R&&(d=(g.scalePicHeight-t)/2),A.css({width:c,height:l,top:d,left:u})}function l(){var e=!1;if(void 0!==_.attr("class")&&(e=_.attr("class").match(/(rotate)(\d*)/)),e){var t=(1*e[2]+90)%360;_.removeClass(e[0]).addClass("rotate"+t),F.removeClass(e[0]).addClass("rotate"+t),u(t),d(t),N=90==t||270==t}else _.addClass("rotate90"),F.addClass("rotate90"),u("90"),d("90"),N=!0}function u(e){var n=t.obj.width(),s=t.obj.height(),a=S,o=x;"90"!=e&&"270"!=e||(n=[s,s=n][0],a=x,o=S),S/x>n/s?(a=n,o="auto"):(o=s,a="auto"),_.css({width:a,height:o}),i()}function d(e){"90"!=e&&"270"!=e||(O=[P,O=P][0]),L.css({width:O,height:P}),L.hide()}function p(t){var n,s,i=_.attr("src");0==t?(n=1,s=5):(n=12,s=6),e(".background-stopClick").remove(),e.ajax({url:"/call/customer/patient/case/attachment/create/",type:"POST",data:{paramJson:e.toJSON({caseId:localStorage.getItem("caseId"),extName:"jpg",fileContent:i,caseCategoryId:n,caseAttSource:s})},dataType:"json",beforeSend:function(){},success:function(t){if(t.responseObject.responseData&&t.responseObject.responseData.url.length>0){console.log("成功！");e("body").append('<div class="tip-save-result"><div ><img src="/static/image/img00/employee/picture_success.png"/></div><div class="text">保存成功</div></div>'),e(".tip-save-result").addClass("on"),setTimeout(function(){e(".tip-save-result").remove()},2e3)}},fail:function(){console.log("失败！");e("body").append('<div class="tip-save-result"><div ><img src="/image/img00/employee/picture_fail.png"/></div><div class="text">保存失败</div></div>'),e(".tip-save-result").addClass("on"),setTimeout(function(){e(".tip-save-result").remove()},2e3)}})}function m(t){e(".centerTip").length>0&&e(".background-stopClick").remove();var n="<div class='background-stopClick'><div class='centerTip'><div class='tip-head'>"+t.header+"</div><div class='tip-content'>"+t.content+"</div><div class='tip-close'></div></div></div>";e(".show-big-img").append(n),void 0!==t.callback&&t.callback(),e(".tip-close").on("click",function(){e(".background-stopClick").remove()})}var f={ratio:1.25,scalePicWidth:120,scalePicHeight:120},g=e.extend(f,t),h=e(this),v=e(".bigger-button"),y=e(".smaller-button"),b=e(".rotate-button"),w=e(".download-button"),_="",S="",x="",C="",I="",k="",T="",M="",N=!1,L="",O=g.scalePicWidth,P=g.scalePicHeight,F="",A="",D="",R="",E="",j="";return function(){_=t.obj.find("img").eq(0),o(),L=t.obj.find(".scalePic"),F=L.find("img"),N=!1,I=10,k=500,S=_.width(),x=_.height(),C=S/x,L.css({width:g.scalePicWidth,height:g.scalePicHeight}),D=t.obj.outerWidth(),R=t.obj.outerHeight(),S/D>x/R?_.css({width:D,maxWidth:"none",maxHeight:"none"}).removeClass("rotate0 rotate90 rotate180 rotate270"):_.css({height:R,maxWidth:"none",maxHeight:"none"}).removeClass("rotate0 rotate90 rotate180 rotate270"),i()}(),v.off().on("click",function(){n()}),y.off().on("click",function(){s()}),b.off().on("click",function(){console.log("!!!!"),l()}),w.off().on("click",function(){m({header:"请选择保存位置",content:'<div class="tip-btn J-tip-check">检查资料</div><div class="tip-btn J-tip-patients">患病处照片</div>',callback:function(){e(".J-tip-check").on("click",function(){p(0)}),e(".J-tip-patients").on("click",function(){p(1)})}})}),h.find("img").on("mouseover",function(e){}).on("mouseenter",function(e){E=-1}).on("mouseout",function(e){}).on("mousedown",function(e){E=e.pageX||e.clientX,j=e.pageY||e.clientY,e.stopPropagation(),e.preventDefault()}).on("mousemove",function(e){if(E>0){var t=e.pageX||e.clientX,n=e.pageY||e.clientY,s=_.offset(),i=s.left+(t-E),a=s.top+(n-j),o=_.width(),r=_.height(),l=h.offset(),u=l.left,d=l.top;N&&(o=[r,r=o][0]),o>D?i>u?i=u:i<D+u-o&&(i=D+u-o):i=s.left,r>R?a>d?a=d:a<R+d-r&&(a=R+d-r):a=s.top,_.offset({left:i,top:a}),E=t,j=n,c()}}).on("mouseup",function(e){E=-1}),this}}),e.extend({openPhotoGallery:function(t){function n(){if(e(t).find("img")[0].complete){console.log("图片加载完成:complete = true");if(!e(t).find("img")[0].src)return;s.initGallery(t),clearInterval(i)}else console.log("complete = false")}var s=this;console.log("启动查看大图！"),console.log(e(t).find("img"));var i=setInterval(n,50)},initGallery:function(e){e.photoGallery({obj:e})},bigPicShow:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){bigPicShow.init(e)})})}(i.a)},"26D6":function(e,t){},"299Y":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("q/Kx"),i=n("XAR9"),a=n.n(i),o=n("hA4R"),r=n.n(o),c=n("wtEF");t.default={name:"check-suggestion",data:function(){return{majorData:"/call/comm/data/tag/v1/getMapList/",partList:{dataList:"",placeholderText:"",disabledFlag:!1},partListResult:{id:"",tagName:""},currentSelectorIndex:-1,nextPageShow:!1,nextPageDate:{},homePageShow:!0,sicknessUrl:"/call/comm/data/illness/v1/getMapList/",sickness:{dataList:"",placeholderText:"疾病",disabledFlag:!1},sicknessResult:{},progressList:{dataList:[{progressValue:"0",progressName:"暂不需手术"},{progressValue:"1",progressName:"需手术"},{progressValue:"2",progressName:"急需手术"}],placeholderText:"程度",disabledFlag:!1},progressResult:{},operationUrl:"/call/cms/major/operation/relation/v1/getMapList/",operationList:{dataList:"",placeholderText:"",disabledFlag:!0},operationListResult:{},parentId:"",operationName:"",nextFlag:!1,operationShowFlag:!0,showIconFlag:!1}},props:{},watch:{partListResult:{handler:function(e,t){this.sicknessResult.illnessName&&this.sicknessResult.illnessName.length>0&&this.progressResult&&"暂不需手术"==this.progressResult.progressName&&(this.nextFlag=!1)}},sicknessResult:{handler:function(e,t){}},progressResult:{handler:function(e,t){"暂不需手术"==e.progressName?(this.nextFlag=!1,this.operationList.disabledFlag=!0,this.operationShowFlag=!1):(this.nextFlag=!0,this.operationList.disabledFlag=!1,this.operationShowFlag=!0)}},operationListResult:{handler:function(e,t){this.nextFlag=!1}}},components:{downSelect:a.a,diagnosiSecond:r.a},methods:{init:function(){this.partSelect(),this.sicknessSelect(),this.operationData()},closeSelect:function(e){this.currentSelectorIndex=-1,this.showIconFlag=!1},closeWindow:function(){this.nextPageShow=!1,this.homePageShow=!0,this.$store.commit("setCheckSuggestionFlag",!1)},partSelect:function(){var e=this,t={isValid:1,firstResult:0,maxResult:999,treeLevel:"2"};c.a.commit("startLoading"),s.a.ajax({url:e.majorData,method:"POST",data:t,beforeSend:function(e){},done:function(t){e.partList.dataList=t.responseObject.responseData.data_list,e.partList.placeholderText="专科",c.a.commit("stopLoading")},fail:function(e){console.log("请求失败："+e),c.a.commit("stopLoading")}})},sicknessSelect:function(){var e=this,t={isValid:1,firstResult:0,maxResult:999,illnessName:"",isSolr:1};c.a.commit("startLoading"),s.a.ajax({url:e.sicknessUrl,method:"POST",data:t,beforeSend:function(e){},done:function(t){e.sickness.dataList=t.responseObject.responseData.dataList,e.sickness.placeholderText="疾病",c.a.commit("stopLoading")},fail:function(e){console.log("请求失败："+e),c.a.commit("stopLoading")}})},operationData:function(){var e=this,t={isValid:1,firstResult:0,treeLevel:1,maxResult:999};c.a.commit("startLoading"),s.a.ajax({url:e.operationUrl,method:"POST",data:t,beforeSend:function(e){},done:function(t){t.responseObject.responseData&&(e.operationList.dataList=t.responseObject.responseData.dataList,e.operationList.placeholderText="手术建议"),c.a.commit("stopLoading")},fail:function(e){console.log("请求失败："+e),c.a.commit("stopLoading")}})},toNextPage:function(){var e=this;e.nextPageShow=!0,e.homePageShow=!1;var t="";"暂不需手术"==e.progressResult.progressName?(e.operationListResult.operationId="",e.operationListResult.operationId="",t=0):"需手术"==e.progressResult.progressName?t=1:"急需手术"==e.progressResult.progressName&&(t=2),e.nextPageDate={customerId:e.$store.state.userId,caseId:e.$store.state.caseId,patientId:e.$store.state.patientId,diagnosisType:"1",majorId:e.partListResult.id,majorName:e.partListResult.tagName?-1!=e.partListResult.tagName.indexOf("&")?e.partListResult.tagName.replace(/&/g,","):e.partListResult.tagName:"",illnessId:e.sicknessResult.illnessId,illnessName:e.sicknessResult.illnessName,operationId:e.operationListResult.operationId||"",operationName:e.operationListResult.operationName||"",degreeType:t,positionId:"",positionName:""}}},mounted:function(){this.init()}}},"2BH2":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"jump-box fast-reply show",on:{click:function(e){e.stopPropagation()}}},[n("header",{staticClass:"jump-box-header",on:{click:function(e){e.stopPropagation()}}},[n("h3",[e._v("快捷提问")])]),e._v(" "),n("nav",{staticClass:"jump-box-tabs tabsInner",attrs:{id:"ev-show-tabs"},on:{click:function(e){e.stopPropagation()}}},[n("button",{staticClass:"jump-box-prev jump-box-tabs-controller"},[n("i",{staticClass:"icon-leftArrow",on:{click:function(t){t.stopPropagation(),e.transformBtn("prev")}}})]),e._v(" "),n("article",{ref:"tabItems",staticClass:"jump-tabs-wrapper"},e._l(e.FastReplyList,function(t,s){return n("figure",{staticClass:"jump-box-tabs-item tabsItem",class:{active:s==e.nowIndex},on:{click:function(n){n.stopPropagation(),e.tabShow(t,s)}}},[e._v(e._s(t.questionDesc)+"\n            ")])})),e._v(" "),n("button",{staticClass:"jump-box-next jump-box-tabs-controller"},[n("i",{staticClass:"icon-rightArrow",on:{click:function(t){t.stopPropagation(),e.transformBtn("next")}}})])]),e._v(" "),n("section",{staticClass:"jump-box-viewers viewInner",attrs:{id:"ev-show-inners"}},e._l(e.FastReplyList,function(t,s){return n("section",{staticClass:"jump-box-viewers-item viewItem",class:{active:s==e.nowIndex}},[n("ul",{staticClass:"jump-box-list"},e._l(t.children,function(t){return n("li",{staticClass:"jump-box-list-item"},[n("span",{on:{click:function(n){n.stopPropagation(),e.clickToSendReply(t)}}},[e._v(e._s(t.questionDesc))])])}))])})),e._v(" "),n("button",{staticClass:"jump-box-config-button icon-fast-reply-config",on:{click:function(t){e.showConfig()}}},[n("span",[e._v("编辑快捷提问")])])])},staticRenderFns:[]}},"2cGP":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"footer"}},"2uuT":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var s=n("q/Kx"),i=n("xY2u"),a=(n.n(i),n("KQop")),o=(n.n(a),n("2zeX")),r=n.n(o),c=n("e1G8"),l=n.n(c),u={getDataUrl:"/call/customer/patient/case/attachment/getMapList/",sickDetailUrl:"/call/patient/case/hpi/v1/getMapById/",sickSaveUrl:"/call/patient/case/hpi/v1/save/"};t.default={name:"majorCheck",data:function(){return{userMessage:{},caseAttUrl:[],videoCaseAttUrl:[],videoList:[],visualInspection:"",activityState:"",muscleStrength:"",popupShow:!1,popupObj:{}}},watch:{"$store.state.currentItem":function(){this.init()}},components:{popup:r.a},methods:{init:function(){this.userMessage=this.$store.state.currentItem,this.getData(),l()(document.querySelectorAll(".J-other"))},getData:function(){var t=this;t.caseAttUrl=[],t.videoCaseAttUrl=[];var n={caseId:this.userMessage.caseId,isValid:1,caseAttSpecPic:1,caseAttSpecVideoPic:10,caseAttSpecVideo:9,firstResult:0,maxResult:100,attUseFlag:6};s.a.ajax({url:u.getDataUrl,method:"POST",data:n,done:function(n){if(n.responseObject.responseData.data_list&&1==n.responseObject.responseStatus){var s=n.responseObject.responseData.data_list,i=[],a=[];if(s[0].picMap.length)if(e.each(s[0].picMap,function(e,n){switch(n.caseAttSource){case"0":case"2":case"3":case"5":t.caseAttUrl.length<9&&t.caseAttUrl.push(n.caseAttUrl),i.push({url:n.caseAttUrl});break;case"1":case"4":case"6":t.videoCaseAttUrl.length<4&&t.videoCaseAttUrl.push(n.caseAttUrl),a.push({url:n.caseAttUrl})}}),i.length>0&&a.length>0){var o={};o=t.$store.state.SBIObject,o.checkImage=i,o.diagnoseListImage=a,t.$store.commit("setSBIObject",o)}else if(i.length>0){var r={};r=t.$store.state.SBIObject,r.checkImage=i,t.$store.commit("setSBIObject",r)}else if(a.length>0){var c={};c=t.$store.state.SBIObject,c.diagnoseListImage=a,t.$store.commit("setSBIObject",c)}s[1].videoMap.length&&(t.videoList=[],e.each(s[1].videoMap,function(e,n){t.videoList.push(n)}))}},fail:function(e){console.log("请求失败："+e)}});var i={caseId:t.$store.state.caseId};s.a.ajax({url:u.sickDetailUrl,method:"POST",data:i,beforeSend:function(e){},done:function(e){"NO DATA"!=e.responseObject.responseMessage&&(console.log(e),t.visualInspection=e.responseObject.responseData.dataList[0].visualInspection,t.activityState=e.responseObject.responseData.dataList[0].activityState,t.muscleStrength=e.responseObject.responseData.dataList[0].muscleStrength,t.$store.commit("setNewSickId",e.responseObject.responseData.dataList[0].id),setTimeout(function(){l.a.update(document.querySelectorAll(".J-other"))},200))},fail:function(e){console.log("请求失败："+e)}})},saveData:function(){var e=this,t="";t=e.$store.state.newSickId?e.$store.state.newSickId:"";var n={id:t,visualInspection:e.visualInspection,activityState:e.activityState,muscleStrength:e.muscleStrength,patientId:e.$store.state.patientId,caseId:e.$store.state.caseId};s.a.ajax({url:u.sickSaveUrl,method:"POST",data:n,beforeSend:function(e){},done:function(t){e.getData(),e.popupShow=!0,e.popupObj={text:"保存成功"}},fail:function(e){console.log("请求失败："+e)}})},showBigImgFunction:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;"1"==e?(this.$store.commit("setSBIFlag",!0),this.$store.commit("setSBIType","checkImage"),this.$store.commit("setSBIIndex",t)):(this.$store.commit("setSBIFlag",!0),this.$store.commit("setSBIType","diagnoseListImage"),this.$store.commit("setSBIIndex",t))},showVideoFunction:function(e){this.$store.commit("setVideoObject",e.videoList[0].caseAttUrl),this.$store.commit("setVideoFlag",!0)}},mounted:function(){this.init()}}}.call(t,n("bXvV"))},"2zeX":function(e,t,n){function s(e){n("oxXm")}var i=n("eEuR")(n("TC68"),n("ym7c"),s,"data-v-016a7385",null);e.exports=i.exports},3950:function(e,t,n){function s(e){n("le8T")}var i=n("eEuR")(n("7D43"),n("oynJ"),s,null,null);e.exports=i.exports},"3Ag6":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.$store.state.videoListFlag?n("section",{staticClass:"show-big-img show-big-img-masker full-screen"},[n("div",{staticClass:"background-hidden "},[n("div",{staticClass:"gallery-top"},[n("video",{attrs:{controls:"controls",src:e.currentVideo.url}})]),e._v(" "),n("div",{staticClass:"close",on:{click:function(t){e.close()}}}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.videoList.length>1,expression:"videoList.length>1"}],staticClass:"gallery-thumbs"},[n("div",{staticClass:"swiper-container thumbSwiper"},[n("div",{staticClass:"swiper-wrapper"},e._l(e.videoList,function(e){return n("div",{staticClass:"swiper-slide"},[n("video",{attrs:{src:e.url}})])})),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.videoList.length>6,expression:"videoList.length>6"}],staticClass:"swiper-button-prev",attrs:{slot:"button-prev"},slot:"button-prev"}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.videoList.length>6,expression:"videoList.length>6"}],staticClass:"swiper-button-next",attrs:{slot:"button-next"},slot:"button-next"}),e._v(" "),n("div",{staticClass:"swiper-pagination swiper-pagination-white"})])])])]):e._e()},staticRenderFns:[]}},"4FK/":function(e,t){},"4ZCj":function(e,t){},"4i4+":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"baseInfo"},on:{click:e.hiddenSelect}},[n("section",{staticClass:"viewItem medical-record-form-item "},[n("form",{attrs:{action:""}},[n("section",{staticClass:"base-info medical-record-main"},[n("article",[n("ul",[n("li",[n("span",{staticClass:"base-title"},[e._v("所在地区")]),n("span",{staticClass:"base-text"},[e._v(e._s(e.address))])]),e._v(" "),e._e(),e._v(" "),n("li",[n("span",{staticClass:"base-title"},[e._v("社保类型")]),n("span",{staticClass:"base-text",attrs:{"data-value":e.socialId.value}},[e._v(e._s(e.socialId.text))])]),e._v(" "),n("li",[n("span",{staticClass:"base-title base-title-long"},[e._v("社保所在地")]),n("span",{staticClass:"base-text"},[e._v(e._s(e.socialAddress))])]),e._v(" "),n("li",[n("span",{staticClass:"base-title"},[e._v("民族")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.nationDataSelectValue,expression:"nationDataSelectValue"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.nationDataSelectValue=t.target.multiple?n:n[0]}}},e._l(e.nation,function(t){return n("option",{domProps:{value:t.nationality}},[e._v("\n                "+e._s(t.nationality)+"\n              ")])})),n("span",{staticClass:"base-title ml20"},[e._v("婚姻状况")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.marriageSelectValue,expression:"marriageSelectValue"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.marriageSelectValue=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:""}},[e._v("请选择")]),e._v(" "),n("option",{attrs:{value:"1"}},[e._v("未婚")]),e._v(" "),n("option",{attrs:{value:"2"}},[e._v("已婚")]),e._v(" "),n("option",{attrs:{value:"3"}},[e._v("离异")]),e._v(" "),n("option",{attrs:{value:"4"}},[e._v("丧偶")])])]),e._v(" "),n("li",[n("span",{staticClass:"base-title "},[e._v("籍贯")]),e.childrenShow?n("address-selector",{attrs:{dataListInfo:e.addressResult,conIndex:1,currentIndexNow:e.currentSelectorIndex,dataBack:e.addressResult},on:{"update:dataListInfo":function(t){e.addressResult=t},"update:currentIndexNow":function(t){e.currentSelectorIndex=t},"update:dataBack":function(t){e.addressResult=t}}}):e._e()],1),e._v(" "),n("li",[n("span",{staticClass:"base-title"},[e._v("家庭住址")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.homeAddress,expression:"homeAddress"}],staticClass:"base-input",attrs:{type:"text",maxlength:"50",placeholder:"请填写"},domProps:{value:e.homeAddress},on:{input:function(t){t.target.composing||(e.homeAddress=t.target.value)}}})]),e._v(" "),n("li",[n("span",{staticClass:"base-title"},[e._v("工作单位")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.workplace,expression:"workplace"}],staticClass:"base-input",attrs:{type:"text",maxlength:"50",placeholder:"请填写"},domProps:{value:e.workplace},on:{input:function(t){t.target.composing||(e.workplace=t.target.value)}}})])])]),e._v(" "),n("article",[e._m(0),e._v(" "),n("section",[n("ul",[n("li",[n("span",{staticClass:"base-title"},[e._v("出生地")]),e.childrenShow?n("address-selector",{attrs:{dataListInfo:e.birthResult,dataBack:e.birthResult,conIndex:2,currentIndexNow:e.currentSelectorIndex},on:{"update:dataListInfo":function(t){e.birthResult=t},"update:dataBack":function(t){e.birthResult=t},"update:currentIndexNow":function(t){e.currentSelectorIndex=t}}}):e._e()],1),e._v(" "),n("li",[n("span",{staticClass:"base-title"},[e._v("生育状况")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.fertilityBoySelectValue,expression:"fertilityBoySelectValue"}],staticClass:"select-120",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.fertilityBoySelectValue=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:""}},[e._v("请选择")]),e._v(" "),n("option",{attrs:{value:"0"}},[e._v("0子")]),e._v(" "),n("option",{attrs:{value:"1"}},[e._v("1子")]),e._v(" "),n("option",{attrs:{value:"2"}},[e._v("2子")]),e._v(" "),n("option",{attrs:{value:"3"}},[e._v("3子")]),e._v(" "),n("option",{attrs:{value:"4"}},[e._v("4子")]),e._v(" "),n("option",{attrs:{value:"5"}},[e._v("5子")]),e._v(" "),n("option",{attrs:{value:"6"}},[e._v("6子")]),e._v(" "),n("option",{attrs:{value:"7"}},[e._v("7子")]),e._v(" "),n("option",{attrs:{value:"8"}},[e._v("8子")])]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.fertilityGirlSelectValue,expression:"fertilityGirlSelectValue"}],staticClass:"select-120 ml15",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.fertilityGirlSelectValue=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:""}},[e._v("请选择")]),e._v(" "),n("option",{attrs:{value:"0"}},[e._v("0女")]),e._v(" "),n("option",{attrs:{value:"1"}},[e._v("1女")]),e._v(" "),n("option",{attrs:{value:"2"}},[e._v("2女")]),e._v(" "),n("option",{attrs:{value:"3"}},[e._v("3女")]),e._v(" "),n("option",{attrs:{value:"4"}},[e._v("4女")]),e._v(" "),n("option",{attrs:{value:"5"}},[e._v("5女")]),e._v(" "),n("option",{attrs:{value:"6"}},[e._v("6女")]),e._v(" "),n("option",{attrs:{value:"7"}},[e._v("7女")]),e._v(" "),n("option",{attrs:{value:"8"}},[e._v("8女")])])]),e._v(" "),n("li",[n("span",{staticClass:"base-title"},[e._v("配偶状况")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.spouseStatusSelectValue,expression:"spouseStatusSelectValue"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.spouseStatusSelectValue=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"0"}},[e._v("请选择")]),e._v(" "),n("option",{attrs:{value:"1"}},[e._v("健康")]),e._v(" "),n("option",{attrs:{value:"2"}},[e._v("患病")]),e._v(" "),n("option",{attrs:{value:"3"}},[e._v("严重患病")]),e._v(" "),n("option",{attrs:{value:"4"}},[e._v("身体残疾")])]),n("span",{staticClass:"base-title ml20"},[e._v("子女状况")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.childrenStatusSelectValue,expression:"childrenStatusSelectValue"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.childrenStatusSelectValue=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"0"}},[e._v("请选择")]),e._v(" "),n("option",{attrs:{value:"1"}},[e._v("健康")]),e._v(" "),n("option",{attrs:{value:"2"}},[e._v("患病")]),e._v(" "),n("option",{attrs:{value:"3"}},[e._v("严重患病")]),e._v(" "),n("option",{attrs:{value:"4"}},[e._v("身体残疾")])])]),e._v(" "),n("li",[n("span",{staticClass:"base-title"},[e._v("结婚年龄")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.marriageAgeSelectValue,expression:"marriageAgeSelectValue"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.marriageAgeSelectValue=t.target.multiple?n:n[0]}}},e._l(e.marriageAge,function(t){return n("option",{domProps:{value:t.value}},[e._v("\n                    "+e._s(t.text)+"\n                  ")])})),n("span",{staticClass:"base-title ml20"},[e._v("吸烟史")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.isSmokeSelectValue,expression:"isSmokeSelectValue"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.isSmokeSelectValue=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"0"}},[e._v("请选择")]),e._v(" "),n("option",{attrs:{value:"1"}},[e._v("从不吸烟")]),e._v(" "),n("option",{attrs:{value:"2"}},[e._v("曾经吸烟")]),e._v(" "),n("option",{attrs:{value:"3"}},[e._v("偶尔吸烟")]),e._v(" "),n("option",{attrs:{value:"4"}},[e._v("经常吸烟")])])]),e._v(" "),n("li",[n("span",{staticClass:"base-title"},[e._v("饮酒史")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.isDrinkSelectValue,expression:"isDrinkSelectValue"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.isDrinkSelectValue=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"0"}},[e._v("请选择")]),e._v(" "),n("option",{attrs:{value:"1"}},[e._v("从不喝酒")]),e._v(" "),n("option",{attrs:{value:"2"}},[e._v("曾经喝酒")]),e._v(" "),n("option",{attrs:{value:"3"}},[e._v("偶尔喝酒")]),e._v(" "),n("option",{attrs:{value:"4"}},[e._v("经常喝酒")])]),n("span",{staticClass:"base-title ml20"},[e._v("毒品史")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.isNarcoticsSelectValue,expression:"isNarcoticsSelectValue"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.isNarcoticsSelectValue=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"0"}},[e._v("请选择")]),e._v(" "),n("option",{attrs:{value:"1"}},[e._v("无")]),e._v(" "),n("option",{attrs:{value:"2"}},[e._v("有")])])])])])]),e._v(" "),n("article",[e._m(1),e._v(" "),n("section",[n("ul",[n("li",[n("span",{staticClass:"base-title"},[e._v("父母状况")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.parentStratusSelectValue,expression:"parentStratusSelectValue"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.parentStratusSelectValue=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"0"}},[e._v("请选择")]),e._v(" "),n("option",{attrs:{value:"1"}},[e._v("父母健在")]),e._v(" "),n("option",{attrs:{value:"2"}},[e._v("父亲已故")]),e._v(" "),n("option",{attrs:{value:"3"}},[e._v("母亲已故")]),e._v(" "),n("option",{attrs:{value:"4"}},[e._v("父母已故")])]),n("span",{staticClass:"base-title ml20"},[e._v("兄妹状况")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.siblingsStatusSelectValue,expression:"siblingsStatusSelectValue"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.siblingsStatusSelectValue=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"0"}},[e._v("请选择")]),e._v(" "),n("option",{attrs:{value:"1"}},[e._v("健康")]),e._v(" "),n("option",{attrs:{value:"2"}},[e._v("患病")]),e._v(" "),n("option",{attrs:{value:"3"}},[e._v("严重患病")]),e._v(" "),n("option",{attrs:{value:"4"}},[e._v("身体残疾")])])]),e._v(" "),n("li",[n("span",{staticClass:"base-title"},[e._v("传染病")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.isInfectionSelectValue,expression:"isInfectionSelectValue"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.isInfectionSelectValue=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"0"}},[e._v("请选择")]),e._v(" "),n("option",{attrs:{value:"1"}},[e._v("无")]),e._v(" "),n("option",{attrs:{value:"2"}},[e._v("肝炎")]),e._v(" "),n("option",{attrs:{value:"3"}},[e._v("结核")]),e._v(" "),n("option",{attrs:{value:"4"}},[e._v("非典")]),e._v(" "),n("option",{attrs:{value:"5"}},[e._v("流脑")]),e._v(" "),n("option",{attrs:{value:"6"}},[e._v("其他")])]),n("span",{staticClass:"base-title ml20"},[e._v("遗传病")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.isHeredopathiaSelectValue,expression:"isHeredopathiaSelectValue"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.isHeredopathiaSelectValue=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"0"}},[e._v("请选择")]),e._v(" "),n("option",{attrs:{value:"1"}},[e._v("无")]),e._v(" "),n("option",{attrs:{value:"2"}},[e._v("血友病")]),e._v(" "),n("option",{attrs:{value:"3"}},[e._v("白化病")]),e._v(" "),n("option",{attrs:{value:"4"}},[e._v("红斑狼疮")]),e._v(" "),n("option",{attrs:{value:"5"}},[e._v("美尼尔综合征")]),e._v(" "),n("option",{attrs:{value:"6"}},[e._v("其他")])])])])])]),e._v(" "),n("footer",[n("button",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.userListStatus.second&&(6==e.$store.state.currentItem.consultationState||-1==e.$store.state.currentItem.consultationState||0==e.$store.state.currentItem.consultationState||9==e.$store.state.currentItem.consultationState||10==e.$store.state.currentItem.consultationState),expression:"$store.state.userListStatus.second && ($store.state.currentItem.consultationState == 6||$store.state.currentItem.consultationState == -1||$store.state.currentItem.consultationState ==0||$store.state.currentItem.consultationState ==9||$store.state.currentItem.consultationState ==10)"}],staticClass:"detail-saveBtn",attrs:{type:"button"},on:{click:function(t){e.saveData()}}},[e._v("保存")])])])])]),e._v(" "),n("transition",{attrs:{name:"fade-scale"}},[e.popupShow?n("popup",{attrs:{obj:e.popupObj,payPopupShow:e.popupShow},on:{"update:obj":function(t){e.popupObj=t},"update:payPopupShow":function(t){e.popupShow=t}}}):e._e()],1)],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",[n("h2",[e._v("个人史")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",[n("h2",[e._v("家族史")])])}]}},"4yHy":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.$store.state.previewShow?n("section",{staticClass:"preview-suggestion-box"},[1!=e.$store.state.previewType?n("i",{staticClass:"icon-close window-close",on:{click:e.closePreview}}):e._e(),e._v(" "),n("header",{staticClass:"preview-suggestion-title"},[1==e.$store.state.previewType?n("button",{staticClass:"btn-border-small-pvw btn-cancel fl",attrs:{type:"button"},on:{click:e.reviseSuggest}},[e._v("修改\n        ")]):e._e(),e._v(" "),n("span",[e._v("初诊建议")]),e._v(" "),1==e.$store.state.previewType?n("button",{staticClass:"btn-primary-small-pvw fr ev-send-suggestion",attrs:{type:"button"},on:{click:function(t){e.submitStatus&&e.sendSuggest()}}},[e._v("发送\n        ")]):e._e()]),e._v(" "),n("section",{staticClass:"preview-suggestion-inner"},[n("section",{staticClass:"preview-suggestion-item"},[e._m(0),e._v(" "),n("section",{staticClass:"patient-message"},[n("figure",{staticClass:"patient-message-img"},[n("img",{attrs:{src:e.getLogoImg().patientImg}})]),e._v(" "),n("figcaption",{staticClass:"patient-message-content"},[n("h3",[e._v(e._s(e.getLogoImg().patientName))]),e._v(" "),n("article",{staticClass:"disease-base-msg icon-disease-message"},[n("article",[n("ul",[n("li",[n("span",[e._v("患病专科：")]),n("span",[e._v(e._s(e.previewSendData.diagnoseResult.majorName?e.previewSendData.diagnoseResult.majorName:"暂不确定"))])]),e._v(" "),""!=e.previewSendData.diagnoseResult.illnessName&&"暂不确定"!=e.previewSendData.diagnoseResult.illnessName?n("li",[n("span",[e._v("所患疾病：")]),n("span",{staticClass:"caseIllnessName"},[e._v(e._s(e.previewSendData.diagnoseResult.illnessName))])]):e._e(),e._v(" "),""!=e.previewSendData.diagnoseResult.operationName&&"暂不确定"!=e.previewSendData.diagnoseResult.operationName?n("li",[n("span",[e._v("手术建议：")]),n("span",[e._v(e._s(e.previewSendData.diagnoseResult.operationName))])]):e._e()])])]),e._v(" "),n("p",{staticClass:"time icon-disease-time"},[n("span",[e._v(e._s(e.nowTime))])])])])]),e._v(" "),e.previewSendData.doctorList&&e.previewSendData.doctorList.length>0?n("section",{staticClass:"preview-suggestion-item result_recommendDoctor"},[e._m(1),e._v(" "),e._m(2),e._v(" "),n("section",{staticClass:"doctor-message"},e._l(e.previewSendData.doctorList,function(t){return n("section",{staticClass:"doctor-message-item"},[n("figure",{staticClass:"doctor-message-img"},[n("img",{attrs:{src:t.logoUrl?t.logoUrl:"/static/image/img00/common/default_logo.png"}})]),e._v(" "),n("figcaption",{staticClass:"doctor-message-content"},[n("header",{staticClass:"doctor-message-content-head"},[n("h4",[e._v(e._s(t.fullName))]),e._v(" "),n("span",{staticClass:"netstat"},[e._v(e._s(1==t.adviceStatus?"在线":"休息"))]),e._v(" "),n("figure",{staticClass:"doctor-message-tags"},[1==t.isTop?n("span",{staticClass:"tags"},[e._v("全国TOP10骨科医院")]):e._e(),e._v(" "),1==t.isNearest?n("span",{staticClass:"tags"},[e._v("距离最近")]):e._e(),e._v(" "),0!=t.isFreeTimes?n("span",{staticClass:"tags",staticStyle:{background:"#FFF1D4",color:"#EB9E00"}},[e._v("首次问诊免费")]):e._e()])]),e._v(" "),n("article",{staticClass:"doctor-message-hospital"},[n("span",{staticClass:"hos-ddress"},[e._v(e._s(t.province?t.province:"")+"  "+e._s(t.city?t.city:"")+"  "+e._s(t.district?t.district:""))]),e._v(" "),n("span",{staticClass:"hospital"},[e._v(e._s(t.company))]),e._v(" "),n("span",{staticClass:"medical"},[e._v(e._s(t.medicalTitle))])]),e._v(" "),n("article",{staticClass:"doctor-message-goodAt"},[e._v("擅长："),n("span",{domProps:{innerHTML:e._s(t.illnessNameList)}})]),e._v(" "),n("article",{staticClass:"doctor-message-num"},[n("span",{staticClass:"price"},[n("em",[e._v("¥"+e._s(t.generalPrice))]),e._v("/"+e._s(t.generalTimes)+"次起")]),e._v(" "),t.adviceNum>0?n("span",{staticClass:"lastNum"},[e._v("仅剩"),n("em",[e._v(e._s(t.adviceNum))]),e._v("个名额")]):e._e()]),e._v(" "),n("button",{staticClass:"doctor-message-consult"},[e._v("立即咨询")])])])}))]):e._e(),e._v(" "),e.previewSendData.examineList&&e.previewSendData.examineList.length>0||e.previewSendData.testList&&e.previewSendData.testList.length>0?n("section",{staticClass:"preview-suggestion-item result_examineTestSuggest"},[e._m(3),e._v(" "),e._m(4),e._v(" "),n("section",{staticClass:"preview-project"},[n("section",{staticClass:"preview-project-list"},[e._l(e.previewSendData.examineList,function(t){return n("article",{staticClass:"preview-project-item examine"},[e._v("\n                        "+e._s(t.nodeName||t.checkName)+"\n                    ")])}),e._v(" "),e._l(e.previewSendData.testList,function(t){return n("article",{staticClass:"preview-project-item test"},[e._v("\n                        "+e._s(t.inspectionName)+"\n                    ")])})],2)])]):e._e(),e._v(" "),e.previewSendData.teachingList&&e.previewSendData.teachingList.length>0?n("section",{staticClass:"preview-suggestion-item result_teachingKnowledge"},[e._m(5),e._v(" "),n("section",{staticClass:"disease-teach-box"},e._l(e.previewSendData.teachingList,function(t){return n("section",{staticClass:"disease-teach-item"},[n("figcaption",{staticClass:"disease-teach-content"},[n("h4",[e._v(e._s(t.knowledgeName))])])])}))]):e._e(),e._v(" "),e.previewSendData.disposeList&&e.previewSendData.disposeList.length>0?n("section",{staticClass:"preview-suggestion-item result_disposeSuggest"},[e._m(6),e._v(" "),e._m(7),e._v(" "),n("section",{staticClass:"preview-project"},[n("section",{staticClass:"preview-project-list"},e._l(e.previewSendData.disposeList,function(t){return n("article",{staticClass:"preview-project-item dispose"},[e._v("\n                        "+e._s(t.treatmentName)+"\n                    ")])}))])]):e._e(),e._v(" "),e.previewSendData.diagnoseResult.operationName&&e.previewSendData.diagnoseResult.operationName.length>0?n("section",{staticClass:"preview-suggestion-item result_operationSuggest"},[e._m(8),e._v(" "),e._m(9),e._v(" "),n("section",{staticClass:"preview-project"},[n("section",{staticClass:"preview-project-list"},[n("article",{staticClass:"preview-project-item operation"},[e._v("\n                        "+e._s(e.previewSendData.diagnoseResult.operationName)+"\n                    ")])])])]):e._e()])]):e._e()},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"preview-suggestion-item-title"},[n("span",[e._v("初步诊断")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"preview-suggestion-item-title"},[n("span",[e._v("推荐医生")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"preview-project-title"},[n("span",[e._v("以下医生最擅长解决您的问题。")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"preview-suggestion-item-title"},[n("span",[e._v("建议检查/检验")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"preview-project-title"},[n("span",[e._v("您还可进行以下检查，并上传检查资料，唯医会诊将为您定制更详细建议。")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"preview-suggestion-item-title"},[n("span",[e._v("患教知识")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"preview-suggestion-item-title"},[n("span",[e._v("处置建议")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"preview-project-title"},[n("span",[e._v("请在医生指导下合理进行，咨询医生")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"preview-suggestion-item-title"},[n("span",[e._v("手术建议")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"preview-project-title"},[n("span",[e._v("请在医生指导下合理安排，咨询医生")])])}]}},"4yh2":function(e,t){},"5d7o":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"main-masker examine-check on"},[n("section",{directives:[{name:"show",rawName:"v-show",value:e.nextFlag,expression:"nextFlag"}],staticClass:"check-suggestion-box"},[n("i",{staticClass:"icon-close window-close",on:{click:function(t){e.close()}}}),e._v(" "),n("header",{staticClass:"check-suggestion-title"},[e._m(0),e._v(" "),n("button",{staticClass:"jump-box-add-term",class:{"icon-suggestion-preview":e.isLight,"icon-suggestion-preview-gray forbid":!e.isLight},on:{click:function(t){e.isLight&&e.foresee()}}},[n("span",[e._v("预览")])])]),e._v(" "),n("section",{staticClass:"check-suggestion-inner"},[n("nav",{staticClass:"config-suggestion-tabsBox"},[n("section",{staticClass:"config-suggestion-tabs ec-tabs tabsInner"},[n("figure",{staticClass:"config-suggestion-tabs-item tabsItem ",class:{active:e.tabActive},attrs:{"data-role":"ac-tabs-1"},on:{click:function(t){e.tabActive=!0,e.FirstIndex=-1,e.secondIndex=-1,e.ThirdIndex=-1,e.FourIndex=-1}}},[e._v("检查建议\n                    ")]),e._v(" "),n("figure",{staticClass:"config-suggestion-tabs-item tabsItem",class:{active:!e.tabActive},attrs:{"data-role":"ac-tabs-2"},on:{click:function(t){e.tabActive=!1,e.FirstIndex=-1,e.secondIndex=-1,e.ThirdIndex=-1,e.FourIndex=-1}}},[e._v("检验建议\n                    ")])])]),e._v(" "),n("section",{staticClass:"config-suggestion-viewers ec-views viewInner"},[n("section",{directives:[{name:"show",rawName:"v-show",value:e.tabActive,expression:"tabActive"}],staticClass:"check-suggestion-item viewItem",attrs:{"data-role":"ac-tabs-1"}},[n("section",{staticClass:"check-project"},[n("section",[n("ul",e._l(e.examineSuggest,function(t,s){return n("li",{on:{click:function(t){e.showNext("FirstIndex",s)}}},[n("article",{staticClass:"check-project-item",class:{"icon-downArrow-big":t.children.length>0},attrs:{"data-nodeid":""}},[n("span",[e._v(e._s(t.nodeName))])]),e._v(" "),n("section",{directives:[{name:"show",rawName:"v-show",value:t.children.length>0,expression:"examines.children.length>0"}],staticClass:"check-project-content",class:{on:e.FirstIndex==s}},[n("ul",e._l(t.children,function(t,i){return n("li",{on:{click:function(t){t.stopPropagation(),e.showNext("SecondIndex",i)}}},[n("article",{staticClass:"check-project-item",class:{"icon-downArrow-big":t.children.length>0}},[n("span",[e._v(e._s(t.nodeName))])]),e._v(" "),n("section",{directives:[{name:"show",rawName:"v-show",value:t.children.length>0,expression:"SecondChildren.children.length>0"}],staticClass:"check-project-content",class:{on:e.SecondIndex==i}},[n("ul",e._l(t.children,function(t,i){return n("li",[n("article",{staticClass:"check-project-item isHasOption",class:{" icon-downArrow":t.children.length>0}},[n("figure",{staticClass:"setting-form-item-input setting-form-item-sex-selector"},[n("figcaption",{staticClass:"setting-form-item-sex icon-select-normal"},[n("i",{staticClass:"icon-choice",class:{active:t.isActive},on:{click:function(n){n.stopPropagation(),e.selectData(t,i)}}}),n("span",{on:{click:function(t){t.stopPropagation(),e.showNext("ThirdIndex",i)}}},[e._v(e._s(t.nodeName))])])])]),e._v(" "),n("section",{directives:[{name:"show",rawName:"v-show",value:t.children.length>0,expression:"ThirdChildren.children.length>0"}],staticClass:"check-project-content",class:{on:e.ThirdIndex==i}},[n("ul",e._l(t.children,function(t,i){return n("li",{on:{click:function(t){t.stopPropagation(),e.showNext("FourIndex",s)}}},[n("article",{staticClass:"check-project-item isHasOption"},[n("figure",{staticClass:"setting-form-item-input setting-form-item-sex-selector"},[n("figcaption",{staticClass:"setting-form-item-sex icon-select-normal",class:{disable:!t.isSelected}},[n("i",{staticClass:"icon-choice",class:{active:t.isActive},on:{click:function(n){n.stopPropagation(),t.isSelected&&e.selectData(t,i)}}}),n("span",[e._v(e._s(t.nodeName))])])])])])}))])])}))])])}))])])}))])])]),e._v(" "),n("section",{directives:[{name:"show",rawName:"v-show",value:!e.tabActive,expression:"!tabActive"}],staticClass:"check-suggestion-item viewItem",attrs:{"data-role":"ac-tabs-2"}},[n("section",{staticClass:"check-project"},[n("section",[n("ul",e._l(e.testSuggest,function(t,s){return n("li",{on:{click:function(t){e.showNext("FirstIndex",s)}}},[n("article",{staticClass:"check-project-item",class:{"icon-downArrow-big":t.children.length>0},attrs:{"data-nodeid":""}},[n("span",[e._v(e._s(t.inspectionName))])]),e._v(" "),n("section",{directives:[{name:"show",rawName:"v-show",value:t.children.length>0,expression:"examines.children.length>0"}],staticClass:"check-project-content",class:{on:e.FirstIndex==s}},[n("ul",e._l(t.children,function(t,i){return n("li",{on:{click:function(t){t.stopPropagation(),e.showNext("SecondIndex",i)}}},[n("article",{staticClass:"check-project-item",class:{"icon-downArrow-big":t.children.length>0}},[n("span",[e._v(e._s(t.inspectionName))])]),e._v(" "),n("section",{directives:[{name:"show",rawName:"v-show",value:t.children.length>0,expression:"SecondChildren.children.length>0"}],staticClass:"check-project-content",class:{on:e.SecondIndex==i}},[n("ul",e._l(t.children,function(t,i){return n("li",{on:{click:function(t){t.stopPropagation(),e.showNext("ThirdIndex",i)}}},[n("article",{staticClass:"check-project-item isHasOption",class:{"icon-downArrow":t.children.length>0}},[n("figure",{staticClass:"setting-form-item-input setting-form-item-sex-selector"},[n("figcaption",{staticClass:"setting-form-item-sex icon-select-normal"},[n("i",{staticClass:"icon-choice",class:{active:t.isActive},on:{click:function(n){n.stopPropagation(),e.selectData(t,i)}}}),n("span",{on:{click:function(t){t.stopPropagation(),e.showNext("ThirdIndex",i)}}},[e._v(e._s(t.inspectionName))])])])]),e._v(" "),n("section",{directives:[{name:"show",rawName:"v-show",value:t.children.length>0,expression:"ThirdChildren.children.length>0"}],staticClass:"check-project-content",class:{on:e.ThirdIndex==i}},[n("ul",e._l(t.children,function(t){return n("li",{on:{click:function(t){t.stopPropagation(),e.showNext("FourIndex",s)}}},[n("article",{staticClass:"check-project-item isHasOption icon-downArrow"},[n("figure",{staticClass:"setting-form-item-input setting-form-item-sex-selector"},[n("figcaption",{staticClass:"setting-form-item-sex icon-select-normal",class:{disable:!t.isSelected}},[n("i",{staticClass:"icon-choice",class:{active:t.isActive},on:{click:function(n){n.stopPropagation(),t.isSelected&&e.selectData(t,e.FourIndex)}}}),n("span",[e._v(e._s(t.inspectionName))])])])])])}))])])}))])])}))])])}))])])])])])]),e._v(" "),n("section",{directives:[{name:"show",rawName:"v-show",value:!e.nextFlag,expression:"!nextFlag"}],staticClass:"check-suggestion-inner examineTestPreview",staticStyle:{height:"auto"}},[e._m(1),e._v(" "),n("section",{staticStyle:{height:"520px",overflow:"auto"}},[n("section",{staticClass:"check-result-content"},[n("section",{staticClass:"check-result-info"},[n("ul",[e._l(e.showExamineList,function(t){return n("li",[e._v("\n                            "+e._s(t.nodeName)+"\n                        ")])}),e._v(" "),e._l(e.testSuggestList,function(t){return n("li",[e._v("\n                            "+e._s(t.inspectionName)+"\n                        ")])})],2)])]),e._v(" "),n("section",{staticClass:"btn-group clear"},[n("button",{staticClass:"btn-primary-small fr",attrs:{type:"button"},on:{click:function(t){e.submitStatus&&e.sendMessage()}}},[e._v("发送")]),e._v(" "),n("button",{staticClass:"btn-border-small btn-cancel fr r20",attrs:{type:"button"},on:{click:function(t){e.update()}}},[e._v("修改")])])])])])},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",[n("h2",[e._v("检查检验建议")]),e._v(" "),n("p",[e._v("可通过下列标签选择建议类型")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"check-suggestion-title"},[n("article",[n("h2",[e._v("检查检验建议")])])])}]}},6484:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var s=(n("KEcs"),n("ofp/")),i=n.n(s);n("24qD");t.default={name:"show-big-img",data:function(){return{imgList:[]}},props:{showBigImgFlag:{type:Boolean}},watch:{"$store.state.SBIList":function(e){this.init()}},methods:{init:function(){this.imgList=[],this.imgList=this.$store.state.SBIObject[this.$store.state.SBIType];var e=this;this.imgList.forEach(function(t,n){e.imgList[n].url=e.clipImg(t.url)})},close:function(){this.$store.commit("setSBIFlag",!1)},clipImg:function(e){if(-1!=e.indexOf("_c")){return e.substring(0,e.indexOf("_c")+2)+e.substring(e.lastIndexOf("."))}return e}},mounted:function(){this.init()},updated:function(){var t=this.$store.state.SBIIndex?this.$store.state.SBIIndex:0,n=new i.a(".topSwiper",{direction:"horizontal",zoom:!0,initialSlide:t,prevButton:".swiper-left-gray",nextButton:".swiper-right-gray",onInit:function(t){console.log(t.activeIndex+"当前索引"),console.log("sipwer初始化完成!,回调函数，初始化后执行。"),e.openPhotoGallery(e(".swiper-slide-active").eq(0))},onTap:function(e,t){console.log(e.activeIndex)},onSlideChangeStart:function(t){console.log(t.activeIndex+"当前索引"),e.openPhotoGallery(e(".swiper-slide-active").eq(0))}}),s=new i.a(".thumbSwiper",{initialSlide:t,spaceBetween:10,direction:"horizontal",centeredSlides:!0,slidesPerView:"auto",touchRatio:1,slideToClickedSlide:!0,observer:!0,prevButton:".swiper-button-prev",nextButton:".swiper-button-next",loopedSlides:5,paginationType:"",imgElementCallBack:function(){console.log("为每个指定的图片（会触发大图）单击事件绑定回调函数")},onTap:function(e,t){e.slideTo(e.activeIndex)}});n.params.control=s,s.params.control=n}}}.call(t,n("bXvV"))},"6tR4":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",[n("figure",{staticClass:"messageList-item-content",staticStyle:{"margin-bottom":"30px",float:"none"}},[n("figcaption",{staticClass:"messageList-item-text"},[e._v("\n      为了给您提供更专业的服务，建议您进行如下检查，并上传检查资料。\n    ")]),e._v(" "),n("figure",{staticClass:"messageList-item-img"},[n("div",{staticClass:"messageList-item-nameTop"},[n("p",[e._v(e._s("【分诊医生】"+e.docName))])]),e._v(" "),n("img",{attrs:{src:"/static/image/img00/index/chatting_portrait_system@2x.png",alt:""}})])]),e._v(" "),n("figure",{staticClass:"messageList-item-content"},[n("figcaption",{staticClass:"check-suggestion-message"},[n("header",{staticClass:"check-suggestion-message-title",staticStyle:{height:"auto","padding-right":"15px","font-size":"14px"}},[n("span",{staticStyle:{"text-indent":"24px",display:"inline-block"}},[e._v("检查/检验建议：")]),e._v(" "),e._l(e.message.content.data,function(t){return e.message.content.data.length?n("span",{staticClass:"checkTestItems"},[e._v(e._s(t.adviceName))]):e._e()})],2)]),e._v(" "),n("figure",{staticClass:"messageList-item-img"},[n("div",{staticClass:"messageList-item-nameTop"},[n("p",[e._v(e._s("【分诊医生】"+e.docName))])]),e._v(" "),n("img",{attrs:{src:"/static/image/img00/index/chatting_portrait_system@2x.png",alt:""}})])])])},staticRenderFns:[]}},"75pH":function(e,t){},"7D43":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("SWMY");n.n(s),n("L2mo");t.default={data:function(){return{exifFlag:!1}},mounted:function(){this.removeBaseImageMsg(this.message.file.url),this.installSBIList(),this.initImageFn(),console.log(this.imageList)},computed:{docName:function(){return this.message.custom&&JSON.parse(this.message.custom).docName?JSON.parse(this.message.custom).docName:this.$store.state.userName}},methods:{showBigImgFunction:function(e){var t=this;this.$store.state.SBIObject.IMImage.forEach(function(n,s){e==n.url&&t.$store.commit("setSBIIndex",s)}),this.$store.commit("setSBIFlag",!0),this.$store.commit("setSBIType","IMImage")},removeBaseImageMsg:function(e){e.includes("stripmeta")||(this.message.file.url=this.nim.viewImageStripMeta({url:e,strip:!0}))},installSBIList:function(){var e=this,t=[],n=[];console.log(e.message.file.url),n=this.$store.state.SBIObject,this.imageList.forEach(function(e,n){t.push({url:e.file.url})}),n.IMImage=t,this.$store.commit("setSBIObject",n)},initImageFn:function(){var e=this;this.$refs.imageElement.onload=function(){e.$emit("loadCallback")}},deleteMsg:function(){this.$emit("deleteMsg")}},watch:{imageList:function(e){console.log(e)}},props:{message:{type:Object},nim:{type:Object},imageList:{type:Array}}}},"7TFv":function(e,t){},"7mAi":function(e,t){},"8+BI":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{}},mounted:function(){},computed:{docName:function(){return this.message.custom&&JSON.parse(this.message.custom).docName?JSON.parse(this.message.custom).docName:this.$store.state.userName}},methods:{deleteMsg:function(){this.$emit("deleteMsg")}},props:{message:{type:Object}}}},"8F76":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{}},mounted:function(){},methods:{ensure:function(){this.$emit("ensureCallback")},cancel:function(){this.$emit("cancelCallback")}},props:{comfirmData:{type:Object}}}},"8L/s":function(e,t,n){"use strict";function s(e){var t={consultationIds:e.consultationId,consultationState:e.consultationState,customerId:e.customerId,consultationType:"0"};return new a.a(function(e,n){Object(o.a)({url:c.triage,method:"POST",data:t,done:function(t){r.a.commit("startLoading"),t.responseObject.responseStatus?e(t):n(t)}})})}t.a=s;var i=n("UIuv"),a=n.n(i),o=n("ogYJ"),r=n("wtEF"),c={triage:"/call/customer/case/consultation/v1/update/"}},"8unY":function(e,t){},"9Aqr":function(e,t){},"9F6P":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("figure",{staticClass:"messageList-item-content"},["1_doctor00001"!=e.message.from?n("figure",{staticClass:"messageList-item-img"},[n("img",{attrs:{src:e.$store.state.currentItem.logoUrl,alt:""}})]):e._e(),e._v(" "),n("figcaption",{staticClass:"messageList-item-text  messageList-item-multiple"},[e.multipleList.content?n("section",{staticClass:"multiple"},[n("header",[n("i",{staticClass:"icon-img"}),n("span",[e._v("图片")]),n("span",[e._v(e._s("("+e.message.content.data.list.length+")"))])]),e._v(" "),e.multipleList.content.data.list.length>0?n("section",{staticClass:"imgList"},[n("ul",e._l(e.multipleList.content.data.list,function(t,s){return n("li",{directives:[{name:"show",rawName:"v-show",value:s<3,expression:"index<3"}],on:{click:function(t){e.showBigImgFunction(s)}}},[n("img",{attrs:{src:e.removeBaseImageMsg(t.url)}})])}))]):e._e()]):e._e()]),e._v(" "),"1_doctor00001"==e.message.from?n("figure",{staticClass:"messageList-item-img"},[n("div",{staticClass:"messageList-item-nameTop"},[n("p",[e._v(e._s("【分诊医生】"+e.docName))])]),e._v(" "),n("div",{staticClass:"deleteMessage",on:{click:function(t){t.stopPropagation(),e.deleteMsg(t)}}},[e._v("撤回")]),e._v(" "),n("img",{attrs:{src:"/static/image/img00/index/chatting_portrait_system@2x.png",alt:""}})]):e._e()])},staticRenderFns:[]}},"9FcC":function(e,t,n){function s(e){n("4FK/")}var i=n("eEuR")(n("GUiL"),n("vKNW"),s,null,null);e.exports=i.exports},"9RxA":function(e,t,n){function s(e){n("N34J")}var i=n("eEuR")(n("Fk4r"),n("sI63"),s,"data-v-4c252a78",null);e.exports=i.exports},"9X9B":function(e,t){},"9lsl":function(e,t,n){function s(e){n("1PlK")}var i=n("eEuR")(n("xt3J"),n("eW+r"),s,null,null);e.exports=i.exports},AT6f:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("q/Kx"),i=n("2zeX"),a=n.n(i),o={sickDetailUrl:"/call/patient/case/hpi/v1/getMapById/",sickSaveUrl:"/call/patient/case/hpi/v1/save/",mainSpeakInfo:"/call/customer/patient/case/v1/getMainMapById/"};t.default={name:"nowSick",data:function(){return{treatmentName:"",illnessName:"",takeMedicine:"",produceReason:"",produceSymptomsList:[{produceSymptomsId:0,produceSymptomsName:"请选择"},{produceSymptomsId:1,produceSymptomsName:"疼痛"},{produceSymptomsId:2,produceSymptomsName:"肿胀"},{produceSymptomsId:3,produceSymptomsName:"麻木"},{produceSymptomsId:4,produceSymptomsName:"僵硬"},{produceSymptomsId:5,produceSymptomsName:"无力"},{produceSymptomsId:6,produceSymptomsName:"抽筋"},{produceSymptomsId:7,produceSymptomsName:"发热"},{produceSymptomsId:8,produceSymptomsName:"关节活动受限"},{produceSymptomsId:9,produceSymptomsName:"变形"},{produceSymptomsId:10,produceSymptomsName:"其他"}],produceSymptomsId:0,produceSymptomsName:"",produceLevelList:[{produceLevelId:"0",produceLevelName:"请选择"},{produceLevelId:"1",produceLevelName:"无"},{produceLevelId:"2",produceLevelName:"轻度影响"},{produceLevelId:"3",produceLevelName:"可以照常生活或工作"},{produceLevelId:"4",produceLevelName:"中度影响"},{produceLevelId:"5",produceLevelName:"需要减轻工作或生活劳动"},{produceLevelId:"6",produceLevelName:"重度影响"},{produceLevelId:"7",produceLevelName:"完全不能正常生活和工作"}],produceLevelId:0,produceLevelName:"",produceSharpenList:[{produceSharpenId:"0",produceSharpenName:"请选择"},{produceSharpenId:"1",produceSharpenName:"无"},{produceSharpenId:"2",produceSharpenName:"睡在受影响的一侧"},{produceSharpenId:"3",produceSharpenName:"打字"},{produceSharpenId:"4",produceSharpenName:"阅读"},{produceSharpenId:"5",produceSharpenName:"工作"},{produceSharpenId:"6",produceSharpenName:"弯曲时"},{produceSharpenId:"7",produceSharpenName:"活动"},{produceSharpenId:"8",produceSharpenName:"负重"},{produceSharpenId:"9",produceSharpenName:"提起重物"},{produceSharpenId:"10",produceSharpenName:"弯腰"},{produceSharpenId:"11",produceSharpenName:"骑行"},{produceSharpenId:"12",produceSharpenName:"驾驶"},{produceSharpenId:"13",produceSharpenName:"爬楼梯"},{produceSharpenId:"14",produceSharpenName:"咳嗽"},{produceSharpenId:"15",produceSharpenName:"慢跑"},{produceSharpenId:"16",produceSharpenName:"跪下"},{produceSharpenId:"17",produceSharpenName:"举起"},{produceSharpenId:"18",produceSharpenName:"抬起"},{produceSharpenId:"19",produceSharpenName:"举过头的动作"},{produceSharpenId:"20",produceSharpenName:"伸直腿"},{produceSharpenId:"21",produceSharpenName:"抬高"},{produceSharpenId:"22",produceSharpenName:"躺下"},{produceSharpenId:"23",produceSharpenName:"跑"},{produceSharpenId:"24",produceSharpenName:"坐着"},{produceSharpenId:"25",produceSharpenName:"久坐"},{produceSharpenId:"26",produceSharpenName:"睡觉"},{produceSharpenId:"27",produceSharpenName:"站立"},{produceSharpenId:"28",produceSharpenName:"久站"},{produceSharpenId:"29",produceSharpenName:"受压"},{produceSharpenId:"30",produceSharpenName:"拉伸"},{produceSharpenId:"31",produceSharpenName:"打喷嚏"},{produceSharpenId:"32",produceSharpenName:"下蹲"},{produceSharpenId:"33",produceSharpenName:"扭转"},{produceSharpenId:"34",produceSharpenName:"走路"},{produceSharpenId:"35",produceSharpenName:"天气"},{produceSharpenId:"36",produceSharpenName:"喝酒"},{produceSharpenId:"37",produceSharpenName:"吃海鲜"}],produceSharpenId:0,produceSharpenName:"",produceRemitList:[{produceRemitId:"0",produceRemitName:"请选择"},{produceRemitId:"1",produceRemitName:"冰敷"},{produceRemitId:"2",produceRemitName:"热敷"},{produceRemitId:"3",produceRemitName:"服用镇痛药"},{produceRemitId:"4",produceRemitName:"没法缓解"},{produceRemitId:"5",produceRemitName:"抬高"},{produceRemitId:"6",produceRemitName:"躺下"},{produceRemitId:"7",produceRemitName:"按摩"},{produceRemitId:"8",produceRemitName:"放松"},{produceRemitId:"9",produceRemitName:"保持静止"},{produceRemitId:"10",produceRemitName:"休息"},{produceRemitId:"11",produceRemitName:"坐下"},{produceRemitId:"12",produceRemitName:"睡眠"},{produceRemitId:"13",produceRemitName:"站立"},{produceRemitId:"14",produceRemitName:"拉伸"},{produceRemitId:"15",produceRemitName:"行走"}],produceRemitId:0,produceRemitName:"",produceTreatment:0,produceTreatment2:0,aggravateReason:"",aggravateSymptomsList:[{aggravateSymptomsId:0,aggravateSymptomsName:"请选择"},{aggravateSymptomsId:1,aggravateSymptomsName:"疼痛"},{aggravateSymptomsId:2,aggravateSymptomsName:"肿胀"},{aggravateSymptomsId:3,aggravateSymptomsName:"麻木"},{aggravateSymptomsId:4,aggravateSymptomsName:"僵硬"},{aggravateSymptomsId:5,aggravateSymptomsName:"无力"},{aggravateSymptomsId:6,aggravateSymptomsName:"抽筋"},{aggravateSymptomsId:7,aggravateSymptomsName:"发热"},{aggravateSymptomsId:8,aggravateSymptomsName:"关节活动受限"},{aggravateSymptomsId:9,aggravateSymptomsName:"变形"},{aggravateSymptomsId:10,aggravateSymptomsName:"其他"}],aggravateSymptomsId:0,aggravateSymptomsName:"",aggravateLevelList:[{aggravateLevelId:"0",aggravateLevelName:"请选择"},{aggravateLevelId:"1",aggravateLevelName:"无"},{aggravateLevelId:"2",aggravateLevelName:"轻度影响"},{aggravateLevelId:"3",aggravateLevelName:"可以照常生活或工作"},{aggravateLevelId:"4",aggravateLevelName:"中度影响"},{aggravateLevelId:"5",aggravateLevelName:"需要减轻工作或生活劳动"},{aggravateLevelId:"6",aggravateLevelName:"重度影响"},{aggravateLevelId:"7",aggravateLevelName:"完全不能正常生活和工作"}],aggravateLevelId:0,aggravateLevelName:"",aggravateSharpenList:[{aggravateSharpenId:"0",aggravateSharpenName:"请选择"},{aggravateSharpenId:"1",aggravateSharpenName:"无"},{aggravateSharpenId:"2",aggravateSharpenName:"睡在受影响的一侧"},{aggravateSharpenId:"3",aggravateSharpenName:"打字"},{aggravateSharpenId:"4",aggravateSharpenName:"阅读"},{aggravateSharpenId:"5",aggravateSharpenName:"工作"},{aggravateSharpenId:"6",aggravateSharpenName:"弯曲时"},{aggravateSharpenId:"7",aggravateSharpenName:"活动"},{aggravateSharpenId:"8",aggravateSharpenName:"负重"},{aggravateSharpenId:"9",aggravateSharpenName:"提起重物"},{aggravateSharpenId:"10",aggravateSharpenName:"弯腰"},{aggravateSharpenId:"11",aggravateSharpenName:"骑行"},{aggravateSharpenId:"12",aggravateSharpenName:"驾驶"},{aggravateSharpenId:"13",aggravateSharpenName:"爬楼梯"},{aggravateSharpenId:"14",aggravateSharpenName:"咳嗽"},{aggravateSharpenId:"15",aggravateSharpenName:"慢跑"},{aggravateSharpenId:"16",aggravateSharpenName:"跪下"},{aggravateSharpenId:"17",aggravateSharpenName:"举起"},{aggravateSharpenId:"18",aggravateSharpenName:"抬起"},{aggravateSharpenId:"19",aggravateSharpenName:"举过头的动作"},{aggravateSharpenId:"20",aggravateSharpenName:"伸直腿"},{aggravateSharpenId:"21",aggravateSharpenName:"抬高"},{aggravateSharpenId:"22",aggravateSharpenName:"躺下"},{aggravateSharpenId:"23",aggravateSharpenName:"跑"},{aggravateSharpenId:"24",aggravateSharpenName:"坐着"},{aggravateSharpenId:"25",aggravateSharpenName:"久坐"},{aggravateSharpenId:"26",aggravateSharpenName:"睡觉"},{aggravateSharpenId:"27",aggravateSharpenName:"站立"},{aggravateSharpenId:"28",aggravateSharpenName:"久站"},{aggravateSharpenId:"29",aggravateSharpenName:"受压"},{aggravateSharpenId:"30",aggravateSharpenName:"拉伸"},{aggravateSharpenId:"31",aggravateSharpenName:"打喷嚏"},{aggravateSharpenId:"32",aggravateSharpenName:"下蹲"},{aggravateSharpenId:"33",aggravateSharpenName:"扭转"},{aggravateSharpenId:"34",aggravateSharpenName:"走路"},{aggravateSharpenId:"35",aggravateSharpenName:"天气"},{aggravateSharpenId:"36",aggravateSharpenName:"喝酒"},{aggravateSharpenId:"37",aggravateSharpenName:"吃海鲜"}],aggravateSharpenId:0,aggravateSharpenName:"",aggravateRemitList:[{aggravateRemitId:"0",aggravateRemitName:"请选择"},{aggravateRemitId:"1",aggravateRemitName:"冰敷"},{aggravateRemitId:"2",aggravateRemitName:"热敷"},{aggravateRemitId:"3",aggravateRemitName:"服用镇痛药"},{aggravateRemitId:"4",aggravateRemitName:"没法缓解"},{aggravateRemitId:"5",aggravateRemitName:"抬高"},{aggravateRemitId:"6",aggravateRemitName:"躺下"},{aggravateRemitId:"7",aggravateRemitName:"按摩"},{aggravateRemitId:"8",aggravateRemitName:"放松"},{aggravateRemitId:"9",aggravateRemitName:"保持静止"},{aggravateRemitId:"10",aggravateRemitName:"休息"},{aggravateRemitId:"11",aggravateRemitName:"坐下"},{aggravateRemitId:"12",aggravateRemitName:"睡眠"},{aggravateRemitId:"13",aggravateRemitName:"站立"},{aggravateRemitId:"14",aggravateRemitName:"拉伸"},{aggravateRemitId:"15",aggravateRemitName:"行走"}],aggravateRemitId:0,aggravateRemitName:"",aggravateTreatment:0,aggravateTreatment2:0,sleepList:[{sleepId:"0",sleepName:"请选择"},{sleepId:"1",sleepName:"良好"},{sleepId:"2",sleepName:"一般"},{sleepId:"3",sleepName:"较差"}],sleepId:0,sleepName:"",spiritList:[{spiritId:"0",spiritName:"请选择"},{spiritId:"1",spiritName:"良好"},{spiritId:"2",spiritName:"一般"},{spiritId:"3",spiritName:"较差"}],spiritId:0,spiritName:"",appetiteList:[{appetiteId:"0",appetiteName:"请选择"},{appetiteId:"1",appetiteName:"良好"},{appetiteId:"2",appetiteName:"一般"},{appetiteId:"3",appetiteName:"较差"}],appetiteId:0,appetiteName:"",weightList:[{weightId:"0",weightName:"请选择"},{weightId:"1",weightName:"无明显变化"},{weightId:"2",weightName:"明显消瘦"},{weightId:"3",weightName:"明显长胖"}],weightId:0,weightName:"",excretionList:[{excretionId:"0",excretionName:"请选择"},{excretionId:"1",excretionName:"正常"},{excretionId:"2",excretionName:"异常"},{excretionId:"3",excretionName:"失禁"}],excretionId:0,excretionName:"",popupShow:!1,popupObj:{}}},components:{popup:a.a},mounted:function(){this.init()},watch:{"$store.state.currentItem":function(){this.init()},produceSymptomsId:function(e){this.produceSymptomsName=this.produceSymptomsList[e].produceSymptomsName},produceLevelId:function(e){this.produceLevelName=this.produceLevelList[e].produceLevelName},produceSharpenId:function(e){this.produceSharpenName=this.produceSharpenList[e].produceSharpenName},produceRemitId:function(e){this.produceRemitName=this.produceRemitList[e].produceRemitName},aggravateSymptomsId:function(e){this.aggravateSymptomsName=this.aggravateSymptomsList[e].aggravateSymptomsName},aggravateLevelId:function(e){this.aggravateLevelName=this.aggravateLevelList[e].aggravateLevelName},aggravateSharpenId:function(e){this.aggravateSharpenName=this.aggravateSharpenList[e].aggravateSharpenName},aggravateRemitId:function(e){this.aggravateRemitName=this.aggravateRemitList[e].aggravateRemitName},sleepId:function(e){this.sleepName=this.sleepList[e].sleepName},spiritId:function(e){this.spiritName=this.spiritList[e].spiritName},appetiteId:function(e){this.appetiteName=this.appetiteList[e].appetiteName},weightId:function(e){this.weightName=this.weightList[e].weightName},excretionId:function(e){this.excretionName=this.excretionList[e].excretionName}},methods:{init:function(){this.userMessage=this.$store.state.currentItem,this.initText(),this.addData()},addData:function(){var e=this,t={caseId:this.userMessage.caseId};s.a.ajax({url:o.sickDetailUrl,method:"POST",data:t,beforeSend:function(e){},done:function(t){if(t.responseObject.responseData.dataList&&1==t.responseObject.responseStatus){var n=t.responseObject.responseData.dataList[0];if(e.id=n.id,e.produceReason=n.produceReason,e.produceSymptomsId=n.produceSymptomsId,e.produceLevelId=n.produceLevelId,e.produceSharpenId=n.produceSharpenId,e.produceRemitId=n.produceRemitId,""!=n.produceTreatment){var s=n.produceTreatment.split(",");e.produceTreatment=s[0],e.produceTreatment2=s[1]}if(e.aggravateReason=n.aggravateReason,e.aggravateSymptomsId=n.aggravateSymptomsId,e.aggravateLevelId=n.aggravateLevelId,e.aggravateSharpenId=n.aggravateSharpenId,e.aggravateRemitId=n.aggravateRemitId,""!=n.aggravateTreatment){var i=n.aggravateTreatment.split(",");e.aggravateTreatment=i[0],e.aggravateTreatment2=i[1]}e.sleepId=n.sleepId,e.spiritId=n.spiritId,e.appetiteId=n.appetiteId,e.weightId=n.weightId,e.excretionId=n.excretionId}},fail:function(e){console.log("请求失败："+e)}})},saveData:function(){var e=this,t={id:this.id,caseId:this.userMessage.caseId,produceReason:this.produceReason,produceSymptomsId:this.produceSymptomsId,produceSymptomsName:this.produceSymptomsName,produceLevelId:this.produceLevelId,produceLevelName:this.produceLevelName,produceSharpenId:this.produceSharpenId,produceSharpenName:this.produceSharpenName,produceRemitId:this.produceRemitId,produceRemitName:this.produceRemitName,produceTreatment:this.produceTreatment+","+this.produceTreatment2,aggravateReason:this.aggravateReason,aggravateSymptomsId:this.aggravateSymptomsId,aggravateSymptomsName:this.aggravateSymptomsName,aggravateLevelId:this.aggravateLevelId,aggravateLevelName:this.aggravateLevelName,aggravateSharpenId:this.aggravateSharpenId,aggravateSharpenName:this.aggravateSharpenName,aggravateRemitId:this.aggravateRemitId,aggravateRemitName:this.aggravateRemitName,aggravateTreatment:this.aggravateTreatment+","+this.aggravateTreatment2,sleepId:this.sleepId,sleepName:this.sleepName,spiritId:this.spiritId,spiritName:this.spiritName,appetiteId:this.appetiteId,appetiteName:this.appetiteName,weightId:this.weightId,weightName:this.weightName,excretionId:this.excretionId,excretionName:this.excretionName,remark:"",patientId:this.$store.state.patientId};console.log(t),s.a.ajax({url:o.sickSaveUrl,method:"POST",data:t,beforeSend:function(e){},done:function(t){console.log("保存成功！"),e.popupShow=!0,e.popupObj={text:"保存成功"}},fail:function(t){console.log("保存失败："+t),e.popupShow=!0,e.popupObj={text:"保存失败"}}})},initText:function(){var e=this,t={caseId:this.userMessage.caseId,patientId:this.userMessage.patientId};s.a.ajax({url:o.mainSpeakInfo,method:"POST",data:t,beforeSend:function(e){},done:function(t){var n=t.responseObject.responseData.dataList;e.treatmentName=n[0].treatmentName,e.illnessName=n[0].illnessName,e.takeMedicine=n[0].takeMedicine},fail:function(e){console.log("保存失败："+e)}})}}}},Abtr:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("footer",{staticClass:"main-footer",attrs:{id:"footer"}},[n("span",[e._v("Copyright©2018 allinmed.cn All Rights Reserved.版权所有©银川唯医互联网骨科医院有限公司")]),e._v(" "),n("span",[e._v("宁公网安备 64010402000685号 宁ICP备17001413号-1")]),e._v(" "),n("span",[e._v("互联网药品信息服务 证书编号： (宁)-非经营性-2018-0005")])])}]}},BNfs:function(e,t){},BTEq:function(e,t){},CGCS:function(e,t){},CHYX:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.knowledgeShow?n("section",{staticClass:"check-suggestion-box"},[n("header",{staticClass:"check-suggestion-title"},[n("button",{staticClass:"check-suggestion-back",on:{click:function(t){e.goBack()}}},[n("i",{staticClass:"icon-leftArrow"}),e._v(" "),n("span",[e._v("返回")])])]),e._v(" "),n("section",{staticClass:"disease-detail-content"},[n("header",{staticClass:"disease-detail-title"},[n("h2",[e._v(e._s(e.teachingDetail.knowledgeTitle))])]),e._v(" "),n("section",{staticClass:"tc-articleMain",domProps:{innerHTML:e._s(e.teachingDetail.knowledgeContent)}},[e._v(e._s(e.teachingDetail.knowledgeContent))]),e._v(" "),e._m(0)])]):e._e()},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("footer",{staticClass:"disease-detail-footer"},[n("p",[e._v("©著作权归作者所有")])])}]}},CKIK:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"modal-confirm show"},[n("article",{staticClass:"modal-confirm-content"},[n("p",[e._v(e._s(e.comfirmContent))])]),e._v(" "),n("figure",{staticClass:"modal-confirm-button"},[n("button",{staticClass:"btn-ensure modal-confirm-ensure",on:{click:e.ensure}},[e._v("确定")]),e._v(" "),n("button",{staticClass:"btn-primary modal-confirm-cancel",on:{click:e.cancel}},[e._v("取消")])])])},staticRenderFns:[]}},"CL/u":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{}},mounted:function(){},computed:{docName:function(){return this.message.custom&&JSON.parse(this.message.custom).docName?JSON.parse(this.message.custom).docName:this.$store.state.userName}},methods:{deleteMsg:function(){this.$emit("deleteMsg")}},props:{message:{type:Object}}}},CVkL:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"oldSick viewItem medical-record-form-item",attrs:{"data-role":"mr-record-4"}},[n("form",{attrs:{action:""}},[n("section",{staticClass:"old-sick medical-record-main"},[n("article",{staticClass:"old-sick-out",domProps:{innerHTML:e._s(e.oldSickOut)}}),e._v(" "),n("article",[n("section",[n("ul",{staticClass:"old-sick-history-list"},[n("li",[n("span",{staticClass:"medical-title"},[e._v("疾病史")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.sickHistory,expression:"sickHistory"}],staticClass:"J-textArea",attrs:{"data-type":0,placeholder:"请填写",maxlength:"200",rows:"1"},domProps:{value:e.sickHistory},on:{input:function(t){t.target.composing||(e.sickHistory=t.target.value)}}})]),e._v(" "),n("li",[n("span",{staticClass:"medical-title"},[e._v("药物史")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.medicineHistory,expression:"medicineHistory"}],staticClass:"J-textArea",attrs:{"data-type":1,placeholder:"请填写",maxlength:"200",rows:"1"},domProps:{value:e.medicineHistory},on:{input:function(t){t.target.composing||(e.medicineHistory=t.target.value)}}})]),e._v(" "),n("li",[n("span",{staticClass:"medical-title"},[e._v("手术史")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.operationHistory,expression:"operationHistory"}],staticClass:"J-textArea",attrs:{"data-type":2,placeholder:"请填写",maxlength:"200",rows:"1"},domProps:{value:e.operationHistory},on:{input:function(t){t.target.composing||(e.operationHistory=t.target.value)}}})]),e._v(" "),n("li",[n("span",{staticClass:"medical-title"},[e._v("外伤史")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.outSickHistory,expression:"outSickHistory"}],staticClass:"J-textArea",attrs:{"data-type":3,placeholder:"请填写",maxlength:"200",rows:"1"},domProps:{value:e.outSickHistory},on:{input:function(t){t.target.composing||(e.outSickHistory=t.target.value)}}})]),e._v(" "),n("li",[n("span",{staticClass:"medical-title"},[e._v("过敏史")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.allergyHistory,expression:"allergyHistory"}],staticClass:"J-textArea",attrs:{"data-type":4,placeholder:"请填写",maxlength:"200",rows:"1"},domProps:{value:e.allergyHistory},on:{input:function(t){t.target.composing||(e.allergyHistory=t.target.value)}}})]),e._v(" "),n("li",[n("span",{staticClass:"medical-title medical-text-long",staticStyle:{"margin-left":"-28px"}},[e._v("疫区接触史")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.plague,expression:"plague"}],staticClass:"J-textArea",attrs:{"data-type":"5",placeholder:"请填写",maxlength:"200",rows:"1"},domProps:{value:e.plague},on:{input:function(t){t.target.composing||(e.plague=t.target.value)}}})])])])]),e._v(" "),n("footer",[n("button",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.userListStatus.second&&(6==e.$store.state.currentItem.consultationState||-1==e.$store.state.currentItem.consultationState||0==e.$store.state.currentItem.consultationState||9==e.$store.state.currentItem.consultationState||10==e.$store.state.currentItem.consultationState),expression:"$store.state.userListStatus.second && ($store.state.currentItem.consultationState == 6||$store.state.currentItem.consultationState == -1||$store.state.currentItem.consultationState ==0||$store.state.currentItem.consultationState ==9||$store.state.currentItem.consultationState ==10)"}],staticClass:"detail-saveBtn",attrs:{type:"button"},on:{click:function(t){e.saveData()}}},[e._v("保存")])])])]),e._v(" "),n("transition",{attrs:{name:"fade-scale"}},[e.popupShow?n("popup",{attrs:{obj:e.popupObj,payPopupShow:e.popupShow},on:{"update:obj":function(t){e.popupObj=t},"update:payPopupShow":function(t){e.popupShow=t}}}):e._e()],1)],1)},staticRenderFns:[]}},CaOM:function(e,t,s){"use strict";(function(e,t){var i=s("GxZn"),a=s.n(i),o={};"function"==typeof FastClick&&FastClick.attach(document.body),o.isEmptyObject=function(e){for(var t in e)return!1;return!0},o.stopBubble=function(e){e&&e.stopPropagation?e.stopPropagation():window.event.cancelBubble=!0},String.prototype.splice=function(e,t,n){return this.slice(0,e)+n+this.slice(e+Math.abs(t))},Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n,s;if(null==this)throw new TypeError("this is null or not defined");var i=Object(this),a=i.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(n=t),s=0;s<a;){var o;s in i&&(o=i[s],e.call(n,o,s,i)),s++}}),e.fn.extend({textareaAutoHeight:function(t){this._options={minHeight:0,maxHeight:1e3},this.init=function(){for(var n in t)this._options[n]=t[n];0==this._options.minHeight&&(this._options.minHeight=parseFloat(e(this).height()));for(var n in this._options)null==e(this).attr(n)&&e(this).attr(n,this._options[n]);e(this).keydown(this.resetHeight).keyup(this.resetHeight).change(this.resetHeight).focus(this.resetHeight),e(this)[0].onpaste=this.resetHeight},this.resetHeight=function(){var t=parseFloat(e(this).attr("minHeight")),n=parseFloat(e(this).attr("maxHeight"));e.browser.msie||e(this).height(0);var s=parseFloat(this.scrollHeight);s=s<t?t:s>n?n:s,e(this).height(s).scrollTop(s),s>=n?e(this).css("overflow-y","scroll"):e(this).css("overflow-y","hidden")},this.init()}}),Array.remove||(Array.prototype.remove=function(e,t){var n=this.slice((t||e)+1||this.length);return this.length=e<0?this.length+e:e,this.push.apply(this,n)}),o.getStrLen=function(e,t){for(var n=0,s="",i=0;i<e.length;i++)if(s+=e.charAt(i),e.charCodeAt(i)>128){if((n+=2)>=t)return s.substring(0,s.length-1)+"..."}else if((n+=1)>=t)return s.substring(0,s.length-2)+"...";return s},o.getStrByteLen=function(e,t){for(var n="",s=0,i=0;i<e.length&&(e.charCodeAt(i)>128?s+=2:s++,s<=t);i++)console.log(n),n=n.concat(e[i]);return n},o.phoneMask=function(e){return e.substr(0,3)+"****"+e.substr(7,11)},o.getRegisterName=function(e,t){var n="";return e?n=e.substr(0,2)+"****"+e.substring(e.lastIndexOf("@")):t&&(n=t.substr(0,3)+"****"+t.substring(t.length-4)),n},o.htmlToString=function(e){var t=(e+"").replace(/[<>&]/g,function(e){return{"<":"&lt;",">":"&gt;","&":"&amp;"}[e]}),n=t.split("&lt;/a&gt;&lt;a");return t=n.length>=2?n.map(function(e,t){var n=e.replace(/\&lt\;a[\s]*href\=\"?(\S*)\"?\&gt\;([\S\s]*)/gi,'<a href="$1">$2');return n=n.replace(/[\s]*href\=\"?(\S*)\"?\&gt\;([\S\s]*)&lt\;\/a\&gt\;/gi,' href="$1">$2</a>')}).join("</a><a"):(t+"").replace(/\&lt\;a[\s]*href\=\"?(\S*)\"?\&gt\;([\S\s]*)\&lt\;\/a\&gt\;/gi,'<a href="$1">$2</a>'),t=t.replace(/@@/g,"@")},o.checkAccountType=function(e){var t="";return/^(127|13[0-9]|14[0-9]|15[0-9]|18[0-9]|17[0-9])\d{8}$/.test(e)&&(t="mobile"),/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/.test(e)&&(t="email"),t},o.cutLine=function(t,n,s){if(t){var i=t.split(","),a="";return e.each(i,function(e,t){t&&(t.split(n)[1]?a+=t.split(n)[1]+s:a+=t+s)}),a.substring(0,a.length-1)}},o.strHandle={cutDoctorTitle:function(e){var t="";if(e.length>0)for(var n=e.split(","),s=/(医师)/g,i=0;i<n.length;i++)if(s.test(n[i])){t=n[i];break}return t},cutNotDoctorTitle:function(e){var t="";if(e.length>0)for(var n=e.split(","),s=/(医师)/g,i=0;i<n.length;i++)s.test(n[i])||(t+=n[i]+",");return t}},String.prototype.toWK=function(){return isNaN(parseInt(this))?0:parseInt(this)<1e4&&parseInt(this)>999?Math.floor(parseInt(this)/1e3)+"K+":parseInt(this)>9999?Math.floor(parseInt(this)/1e4)+"W+":this},Number.prototype.toWK=function(){return isNaN(parseInt(this))?0:parseInt(this)<1e4&&parseInt(this)>999?Math.floor(parseInt(this)/1e3)+"K+":parseInt(this)>9999?Math.floor(parseInt(this)/1e4)+"W+":this},String.prototype.toInt=function(){return parseInt(this)},String.prototype.toK=function(){return parseInt(this)>999?Math.floor(parseInt(this)/1e3)+"K+":this},Number.prototype.toK=function(){return parseInt(this)>999?Math.floor(parseInt(this)/1e3)+"K+":this},String.prototype.toW=function(){return parseInt(this)>9999?Math.floor(parseInt(this)/1e4)+"W+":this},Number.prototype.toW=function(){return parseInt(this)>9999?Math.floor(parseInt(this)/1e4)+"W+":this},o.getByteLen=function(e){for(var t=0,n=0;n<e.length;n++)null!==e[n].match(/[^\x00-\xff]/gi)?t+=2:t+=1;return t},String.prototype.subByte=function(e,t){for(var n=e;t>0;n++){t-=this.charCodeAt(n)<256?1:2}return this.slice(e,n)},o.textChange=function(n){function s(e){var t=o.getByteLen(e.val());r=2*e.attr("max"),i.noTop||(0==t?(i.$tex.parent().parent().find(".default_name").hide(),i.$tex.parent().css("top",i.minTop)):(i.$tex.parent().parent().find(".default_name").show(),i.$tex.parent().css("top",i.maxTop))),t<r||t==r?(c=Math.ceil((r-t)/2),i.$num&&(void 0!=n.numTip&&n.numTip>0?c<=n.numTip?(i.$num.text(c),i.$num.css("color","#F00")):i.$num.text(""):(i.$num.text(c),0==c?i.$num.css("color","#F00"):i.$num.css("color","#c5c5c5")))):t>r&&(e.val(e.val().subByte(0,r)),i.$num&&i.$num.text(0).css("color","#F00"))}var i={},a={minTop:24,maxTop:32};i=e.extend(a,n);var r=(t.support.htmlSerialize,r),c=0;i.$tex.bind("focus",function(){i.$tex.parent().parent().find(".default_name").css("color","#3d84c6")}),i.$tex.bind("blur",function(){i.$tex.parent().parent().find(".default_name").css("color","#808080")}),window.attachEvent&&-1===navigator.userAgent.indexOf("Opera")?(i.$tex.bind("propertychange",function(){s(e(this))}),i.$tex.bind("keyup",function(){s(e(this))})):i.$tex.bind("keyup keydown change input cut paste drop",function(){s(e(this))})},o.htmlToString=function(e){var t=(e+"").replace(/[<>&]/g,function(e){return{"<":"&lt;",">":"&gt;","&":"&amp;"}[e]}),n=t.split("&lt;/a&gt;&lt;a");return t=n.length>=2?n.map(function(e,t){var n=e.replace(/\&lt\;a[\s]*href\=\"?(\S*)\"?\&gt\;([\S\s]*)/gi,'<a href="$1">$2');return n=n.replace(/[\s]*href\=\"?(\S*)\"?\&gt\;([\S\s]*)&lt\;\/a\&gt\;/gi,' href="$1">$2</a>')}).join("</a><a"):(t+"").replace(/\&lt\;a[\s]*href\=\"?(\S*)\"?\&gt\;([\S\s]*)\&lt\;\/a\&gt\;/gi,'<a href="$1">$2</a>'),t=t.replace(/@@/g,"@")},o.browser={mozilla:/firefox/.test(navigator.userAgent.toLowerCase()),webkit:/webkit/.test(navigator.userAgent.toLowerCase()),opera:/opera/.test(navigator.userAgent.toLowerCase()),msie:/msie/.test(navigator.userAgent.toLowerCase()),versions:function(){var e=navigator.userAgent;navigator.appVersion;return{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&-1==e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/)||!!e.match(/AppleWebKit/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Linux")>-1,iPhone:e.indexOf("iPhone")>-1||e.indexOf("Mac")>-1,iPad:e.indexOf("iPad")>-1,webApp:-1===e.indexOf("Safari")}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},o.getBrowseType=function(){var e=navigator.userAgent;return{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&-1==e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/)||!!e.match(/AppleWebKit/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Linux")>-1,iPhone:e.indexOf("iPhone")>-1,mac:e.indexOf("Mac")>-1,iPad:e.indexOf("iPad")>-1,webApp:-1==e.indexOf("Safari")}},o.ispc=function(){for(var e=navigator.userAgent,t=new Array("Android","iPhone","SymbianOS","Windows Phone","iPod"),n=!0,s=0;s<t.length;s++)if(e.indexOf(t[s])>0){n=!1;break}return n},o.loading={show:function(){0==e(".ev-loading").length?e("body").append('<section class="middle-tip-box ev-loading"><figure class="middle-tip-box-text"><img src="/image/img00/common/save_complete.png" alt="loading..."></figure></section>'):e(".ev-loading").show()},hide:function(){e(".ev-loading").hide()}},o.confirmBox=function(t){if(0===e(".modal-confirm").length){var n='<section class="modal-confirm"><article class="modal-confirm-content">'+function(t){var n="";return e(t).each(function(e,t){n+="<p>"+t.text+"</p>"}),n}(t.textList)+'    </article>    <figure class="modal-confirm-button">        <button class="btn-ensure modal-confirm-ensure">'+t.ensure+'</button>        <button class="btn-primary modal-confirm-cancel">'+t.cancel+"</button>    </figure></section>";console.log(n),t.container.append(n);var s=e(window).height(),i=e(".modal-confirm").offset().top;console.log(s,i),i>s-155&&e(".modal-confirm").addClass("upShow"),setTimeout(function(t){e(".modal-confirm").addClass("show")},50),e(".modal-confirm-ensure").on("click",function(n){return n.stopPropagation(),t.ensureCallback&&t.ensureCallback(),e(".modal-confirm").removeClass("show"),!1}),e(".modal-confirm").on("transitionend",function(t){t.stopPropagation(),e(".modal-confirm").hasClass("show")||e(".modal-confirm").remove()}),e(".modal-confirm-cancel").on("click",function(n){return n.stopPropagation(),t.cancelCallback&&t.cancelCallback(),e(".modal-confirm").removeClass("show"),!1})}else e(".modal-confirm").addClass("show")},o.alertBox=function(t){0===e(".big-confirm").size()&&(e("body").append('<section class="main-masker big-confirm">    <section class="big-confirm-inner">        <header class="big-confirm-title"><h4>'+(t.title?t.title:"")+'</h4>            <i class="icon-close window-close"></i>        </header>'+function(){return t.input?"<textarea class='big-confirm-input' placeholder='"+t.placeholder+"'></textarea>":'        <article class="big-confirm-content" style="text-align:left;padding: 0 40px;line-height: 1.5;;">            <p>'+t.text+"</p>        </article>"}()+'        <footer class="big-confirm-btn">            <button class="btn-primary ensure">'+t.ensure+"</button>        </footer>    </section></section>"),setTimeout(function(){e(".big-confirm").addClass("show")},30),e(".big-confirm-title .window-close").on("click",function(){e(".big-confirm").removeClass("show"),e(".big-confirm").on("transitionend",function(){e(this).remove()})}),e(".big-confirm-btn .ensure").on("click",function(){e(".big-confirm").removeClass("show"),e(".big-confirm").on("transitionend",function(){e(this).remove()}),t.ensureCallback&&t.ensureCallback()}))},o.btnBox=function(t){if(0===e(".btnBox-tips").length){var n='<section class="btnBox-tips maskers " '+t.direction+'>    <section class="'+t.direction+'-box"><article>'+(t.title?"<h2>"+(t.title||"")+"</h2>":"")+"</article>"+function(t){var n="";return e(t).each(function(e,t){n+='<a class="btnBox-btn '+t.className+'" id="'+(t.id?t.id:"")+'" href="'+t.href+'">'+t.content+"</a>"}),n}(t.btn)+"    </section></section>";e("body").append(n),setTimeout(function(t){e(".btnBox-tips").addClass("show")},50),e(".btnBox-tips").on("click",function(t){e(t.target).hasClass("btnBox-btn")||(t.stopPropagation(),e(".btnBox-tips").removeClass("show"),e(".btnBox-tips").on("transitionend WebkitTransitionEnd",function(){e(".btnBox-tips").remove()}))})}else e(".btnBox-tips").addClass("show")},o.popup=function(t){0==e(".popup").length?(e("body").append('<section class="middle-tip-modal popup"><figure class="middle-tip-box-text">'+(t.hasImg?'<img src="/static/image/img00/login/save_loading.png" alt="">':"")+'<p class="popup-text">'+t.text+"</p> </figure></section>"),setTimeout(function(){e(".popup").addClass("show")},100)):(e(".popup").addClass("show"),e(".tipText").text(t.text),t.hasImg?e(".middle-tip-box-text img").show():e(".middle-tip-box-text img").hide()),setTimeout(function(){e(".popup").remove(),t.fn&&t.fn()},3e3)},o.popupRight=function(t){0==e(".popup").length?(e("body").append('<section class="middle-tip-modal popup right"><figure class="middle-tip-box-text">'+(t.hasImg?'<img src="/static/image/img00/login/save_loading.png" alt="">':"")+'<p class="popup-text">'+t.text+"</p> </figure></section>"),setTimeout(function(){e(".popup").addClass("show")},100)):(e(".popup").addClass("show"),e(".tipText").text(t.text),t.hasImg?e(".middle-tip-box-text img").show():e(".middle-tip-box-text img").hide()),setTimeout(function(){e(".popup").removeClass("show")},3e3)},o.bigConfirm=function(t){0===e(".big-confirm").size()&&(e("body").append('<section class="main-masker big-confirm">    <section class="big-confirm-inner">        <header class="big-confirm-title"><h4>'+(t.title?t.title:"")+'</h4>            <i class="icon-close window-close"></i>        </header>'+function(){return t.input?"<textarea class='big-confirm-input' placeholder='"+t.placeholder+"'></textarea>":'        <article class="big-confirm-content">            <p>'+t.text+"</p>        </article>"}()+'        <footer class="big-confirm-btn">            <button class="btn-border cancel">'+t.cancel+'</button>            <button class="btn-primary ensure">'+t.ensure+"</button>        </footer>    </section></section>"),setTimeout(function(){e(".big-confirm").addClass("show")},30),t.input&&0===e(".big-confirm-input").val().length&&e(".btn-primary.ensure").addClass("disabled"),e(".big-confirm-input").on("input propertychange",function(){0===e(this).val().length?e(".btn-primary.ensure").addClass("disabled"):e(this).val().length>t.max?(e(".btn-primary.ensure").addClass("disabled"),e(this).val(e(this).val().substring(0,t.max))):e(".btn-primary.ensure").removeClass("disabled")}),e(".big-confirm-title .window-close").on("click",function(){e(".big-confirm").removeClass("show"),e(".big-confirm").on("transitionend",function(){e(this).remove()})}),e(".big-confirm-btn .cancel").on("click",function(){e(".big-confirm").removeClass("show"),e(".big-confirm").on("transitionend",function(){e(this).remove()}),t.cancelCallback&&t.cancelCallback()}),e(".big-confirm-btn .ensure").on("click",function(){if(e(this).hasClass("disabled"))return!1;e(".big-confirm").removeClass("show"),e(".big-confirm").on("transitionend",function(){e(this).remove()}),t.ensureCallback&&t.ensureCallback()}))},o.getpara=function(e){var t,n,s=document.URL,i={};if(s.lastIndexOf(e||"?")>0){t=s.substring(s.lastIndexOf(e||"?")+1,s.length);for(var a=t.split("&"),o=0;o<a.length;o++)n=a[o].split("="),i[n[0]]=decodeURIComponent(n[1])}return i},o.buildAnchor=function(t){if(t&&null!=t&&!e.isEmptyObject(t)){var n=window.location.pathname+location.search;n.indexOf("#")<0&&(n+="#");for(var s in t)n+="&"+s+"="+t[s];if(n.indexOf(!1)&&(n+="&share=app"),n.indexOf("visitSiteId")>0){n+="&visitSiteId="+o.getparaNew().visitSiteId}window.location.href=n}},o.getparaNew=function(){var e,t,n=document.URL,s={};if(e=n,n.lastIndexOf("?")>0&&(e=n.substring(n.lastIndexOf("?")+1,n.length)),n.lastIndexOf("#")>0&&(e=e.split("#")[1]),"-1"==n.indexOf("="))return!1;if(e.length>0){var i=e.split("&");if(i.length>0){for(var a=0;a<i.length;a++)t=i[a].split("="),s[t[0]]=decodeURIComponent(t[1]);return s}return!1}return!1},o.bindCallApp=function(t){function n(){var e="";navigator.userAgent;return b&&void 0!=t.android&&(e=t.android),w&&void 0!=t.ios&&(e=t.ios),e}function s(){S.forEach(window.clearTimeout),S=[]}function i(t){e(y).off("click").on("click",{url:t||""},function(e){var t=e.data.url;if(v=+new Date,!t)var t=n();r(t)})}function r(e){if(e){if(g)l(e);else{var t=e;setTimeout(function(){h?l(t):c(t)},0)}d()}}function c(e){var t=document.createElement("iframe");t.src=e,t.style.display="none",document.body.appendChild(t),setTimeout(function(){document.body.removeChild(t),t=null},0)}function l(e){window.location.href=e}function u(t){var n;n="android"==t?"/image/android.png":"/image/ios.png";var s=e(".content-page");s.length>0?s.append("<div class='app_download_wx'><img src='"+n+"' /></div>"):e("body").append("<div class='app_download_wx'><img src='"+n+"' /></div>"),e("body").css("overflow","hidden").bind("touchmove",function(e){e.preventDefault()}),e(".app_download_wx").on("click",function(){e(this).remove(),e("body").css("overflow","auto").unbind("touchmove")})}function d(){b?S.push(window.setTimeout(function(){+new Date-v<3100&&(window.location.href="http://a.app.qq.com/o/simple.jsp?pkgname=cn.net.yiding")},3e3)):S.push(window.setTimeout(function(){console.log(Date.now()-v),Date.now()-v<3100&&(window.location.href=f?"http://a.app.qq.com/o/simple.jsp?pkgname=cn.net.yiding":"https://itunes.apple.com/cn/app/yi-ding/id1127209482?mt=8")},3e3))}function p(){console.log('请传入要跳转的APP地址的参数对象，如：{ios:"allinmdios://meettingBroadcast/meetInfo",android:"\'allin://com.allin.social:75235?data=mydata"}')}if("object"!=(void 0===t?"undefined":a()(t)))return void p();if(!t.hasOwnProperty("ios")&&!t.hasOwnProperty("android"))return void p();var m=window.navigator.userAgent,f=/MicroMessenger/.test(m),g=!1,h=!1;g=Boolean(navigator.userAgent.match(/OS ([9]_[0-9]|[10|11][_\d])[_\d]* like Mac OS X/i)),h=Boolean(navigator.userAgent.match(/OS ([9]_[0-1])[_\d]* like Mac OS X/i));var v,y,b=m.indexOf("Android")>-1||m.indexOf("Linux")>-1,w=m.indexOf("iPhone")>-1||m.indexOf("Mac")>-1,_=m.indexOf("weibo")>-1||m.indexOf("Weibo")>-1,S=(m.indexOf("QQ")>-1&&m.indexOf("NetType"),[]),x=n();e(window).on("blur pagehide beforeunload",s),void 0!==o.getparaNew().ios9&&r(x),"boolean"==typeof t.runAtOnce&&t.runAtOnce&&(v=+new Date,g?f||_||l(t.ios9):f||_||r(x)),"string"==typeof t.el&&(y=t.el,function(){if(b){if(f||_)return u("android"),!1;i()}if(w)if(g){if(f||_)return u("ios"),!1;i(t.ios9)}else{if(f||_)return u("ios"),!1;i(t.ios)}}())},o.recognizeAppShareLink=function(t){if(o.getparaNew()&&o.getparaNew().share&&"app"==o.getparaNew().share.toLowerCase()){var n=e(".content-page");0==n.size()&&(n=e("body")),n.append("<div class='app_download_wx_jump_app'><div class='bg'></div><div class='center'><img src='/images/img50/callApp/share-app-popup.png' alt='' ></div></div>");var s=document.querySelector('meta[name="viewport"]').getAttribute("content"),i=s.match(/initial\-scale=([\d\.]+)/)||s.match(/maximum\-scale=([\d\.]+)/);if(null!=i&&1==parseInt(i[1])&&e(".app_download_wx_jump_app").addClass("viewport-small"),e("video,input,select,textarea,object").hide(),void 0!==t)t=e.extend(t,{el:".app_download_wx_jump_app .center"});else var t={el:".app_download_wx_jump_app .center",ios:"allinmdios://",ios9:"http://app.allinmd.cn/applinks.html",android:"allin://com.allin.social:75235"};return o.bindCallApp(t),e("body").css("overflow","hidden").on("mousemove touchmove",function(e){return!1}),!0}return!1},o.ajax=function(t){e.ajax({url:t.url,type:t.type,dataType:"json",data:t.data,timeout:1e4,beforeSend:function(){o.loading.show()}}).done(function(n){console.log("success"),e.isEmptyObject(n.responseObject.responseData)?t.noDataCallback&&t.noDataCallback():t.hasDataCallback&&t.hasDataCallback(),t.successCallback&&t.successCallback()}).fail(function(){console.log("XHR error..."),o.loading.hide(),t.failCallback&&t.failCallback()})},o.checkJiangZheHu=function(){if(this.cache)return this.cache;var t=!1,n=e.cookie("accessLoginVersion");return""==n||null==n?e.ajax({url:"/call/log/op/location/getIpArea/",async:!1,success:function(n){n&&n.responseObject&&n.responseObject.responseData&&("1"==n.responseObject.responseData.isNew?(t=!0,e.cookie("accessLoginVersion","planB")):e.cookie("accessLoginVersion","planA"))}}):"planB"==n&&(t=!0),this.cache=t,t},o.checkIsChina=function(){if(this.cache)return this.cache;var t=!1,n=e.cookie("accessLoginCountry");return""==n||null==n?e.ajax({url:"/mcall/log/op/location/getIpArea/",async:!1,success:function(n){n&&n.responseObject&&n.responseObject.responseData&&("CN"==n.responseObject.responseData.countryCode?(t=!0,e.cookie("accessLoginCountry","CN")):e.cookie("accessLoginCountry","NotCN"))}}):"CN"==n&&(t=!0),this.cache=t,t};o.getFileSize=function(e){var t=/msie/i.test(navigator.userAgent)&&!window.opera,n=0;return t&&!e.files||(n=e.files[0].size),n},o.file={},o.file.getFileSize=function(e){var t=/msie/i.test(navigator.userAgent)&&!window.opera,n=0;return e&&(t&&!e.files||(n=e.files[0].size)),n},o.file.getName=function(e){var t=e,n=t.lastIndexOf("/"),s=t.lastIndexOf("\\"),i=Math.max(n,s),a=t.lastIndexOf(".");return{fileName:t.substring(i+1,a),suffixName:t.substring(a+1,t.length)}},o.date={local_time:function(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1;n<10&&(n="0"+n);var s=e.getDate();return s<10&&(s="0"+s),t+"-"+n+"-"+s+" "+e.toTimeString().substr(0,8)},am_pm_data:function(e){var e,t=e.substr(0,4),n=e.substr(5,2),s=e.substr(8,2),i=e.substr(11,2);i<12?day_ampm="上午 ":12==i?day_ampm="中午 ":i>12&&(day_ampm="下午 ");var a=e.substr(14,2);return e=day_ampm+i+":"+a+" "+t+"年"+n+"月"+s+"日"},cut_date_msec:function(e){return e=e.substr(0,19)},isSameDay:function(e,t){return e.substr(0,10)==t.substr(0,10)},diffDay_one:function(e,t){var n=e.substr(0,10),s=t.substr(0,10),i=n.replace(/\-/g,"/"),a=s.replace(/\-/g,"/"),o=Date.parse(i),r=Date.parse(a);if(isNaN(o))return NaN;if(isNaN(r))return NaN;var c=(r-o)/864e5;if(n.substring(0,4)!==a.substring(0,4))return i;if(c<1){var l=new Date(e.replace(/\-/g,"/")),u=new Date(t.replace(/\-/g,"/")),d=(u.getTime()-l.getTime())/1e3;if(d<60)return"刚刚";if((d=parseInt(d/60))<60)return d+"分钟前";if((d=parseInt(d/60))<60)return d+"小时前"}else{if(c<2)return"昨天";if(c<365)return e.replace(/\-/g,"/").substring(5,10)}},diffDay_two:function(e,t){var n=e.substr(0,10),s=t.substr(0,10),i=n.replace(/\-/g,"/"),a=s.replace(/\-/g,"/"),o=Date.parse(i),r=Date.parse(a);return isNaN(o)?NaN:isNaN(r)?NaN:(r-o)/864e5>7?e.substr(0,10):"7天前"},date_word:function(e){var t=e.substr(0,4),n=e.substr(5,2),s=e.substr(8,2);return n<10&&(n=n.substr(1,1)),s<10&&(s=s.substr(1,1)),e=t+"年"+n+"月"+s+"日"},datafomat:function(e){var t,n=e;n.each(function(e){t=date_word(n.eq(e).html()),n.eq(e).html(t.substring(t.indexOf("年")+1))})},dateJoint:function(e,t,n,s){var i=void 0!=n&&""!=n?n:".",a=void 0!=s&&""!=s?s:"-",o=e.substring(0,10).replace(/-/g,i),r=o.toString().split(i),c=t.substring(0,10).replace(/-/g,i),l=c.toString().split(i);return parseInt(l[0])>parseInt(r[0])?o+a+c:parseInt(l[1])>parseInt(r[1])?o+a+c.substring(5,10):o+a+c.substring(8,10)}},o.ymd=function(t){function s(e,t){return t=parseInt(t,10),new Date(e,t,0).getDate()}function i(t){var i=new Date;daysInMonth=s(t.year.val(),t.month.val()),c="",n="",e("option",t.day).each(function(t,s){if(e(s).attr("selected"))return n=e(s).val(),void(n<10&&(n=n.substring(1)))}),t.default1&&t.day.css(t.css);for(var a=5==t.month.val()&&t.startDay?t.startDay:1;a<=(10==t.month.val()&&t.endDay?30:parseInt(daysInMonth));a++)c=a==(n||(t.order?1:i.getDate()))?"<option value="+(a<10?"0"+a:a)+" selected=true>"+(a<10?"0"+a:a)+"</option>":"<option value="+(a<10?"0"+a:a)+">"+(a<10?"0"+a:a)+"</option>",t.day.append(c)}var a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o=new Date,r=o.getFullYear(),c="";t.default1&&t.year.css(t.css);for(var l=r;l>=(t.startYear?t.startYear:1930);l--)c=l==(t.order?1970:r)?"<option value="+l+" selected=true>"+l+"</option>":"<option value="+l+">"+l+"</option>",t.year.append(c),t.defaultYear&&t.year.val(t.defaultYear);if(t.defaultMonth&&t.month.css(t.css),t.month)for(var l=t.startMonth?t.startMonth:1;l<=(t.endMonth?t.endMonth:12);l++)c=l==(t.order?7:o.getMonth()+1)?"<option value="+(l<10?"0"+l:l)+" selected=true>"+(t.en?a[l-1]:l<10?"0"+l:l)+"</option>":"<option value="+(l<10?"0"+l:l)+">"+(t.en?a[l-1]:l<10?"0"+l:l)+"</option>",t.month.append(c);t.defaultMonth&&t.month.val(t.defaultMonth),t.day&&(i(t),t.year.bind("change",function(){"0"!=t.month.val()&&i(t)}),t.month.bind("change",function(){i(t)})),t.defaultDay&&t.day.val(t.defaultDay)},o.gbw={},o.gbw.confirmBox=function(t,n){if(0===e(".confirmBox-tips").length){var s='<section class="maskers confirmBox-tips"><section class="confirmBox-inner"><article class="confirmBox-content"><article>'+(t.title?"<h2>"+(t.title||"")+"</h2>":"<h2></h2>")+"<p>"+(t.content||"")+'</p></article></article><footer class="confirmBox-btns"><button class="confirmBox-cancelBtn">'+(t.cancel||"")+'</button><button class="confirmBox-ensureBtn">'+(t.ensure||"")+'</button></footer></section><section class="mask-close"></section></section><section class="mask-background"></section>';e("body").append(s),setTimeout(function(t){e(".confirmBox-tips").addClass("show"),e(".mask-background").addClass("show")},50),e(".confirmBox-cancelBtn").off("click").on("click",function(){return t.cancelCallback&&t.cancelCallback(),e(".confirmBox-tips").removeClass("show"),e(".mask-background").removeClass("show"),e(".confirmBox-tips").on("transitionend WebkitTransitionEnd",function(){e(".confirmBox-tips").remove()}),!1}),e(".confirmBox-ensureBtn").off("click").on("click",function(){return t.ensureCallback&&t.ensureCallback(),e(".confirmBox-tips").removeClass("show"),e(".mask-background").removeClass("show"),e(".confirmBox-tips").on("transitionend WebkitTransitionEnd",function(){e(".confirmBox-tips").remove()}),!1}),e(".mask-close").off("click").on("click",function(){return t.ensureCallback&&t.ensureCallback(),e(".confirmBox-tips").removeClass("show"),e(".mask-background").removeClass("show"),e(".confirmBox-tips").on("transitionend WebkitTransitionEnd",function(){e(".confirmBox-tips").remove()}),!1})}else e(".confirmBox-tips").addClass("show"),e(".mask-background").addClass("show")},o.gbw.infoBox=function(t){if(0===e(".infoBox-tips").length){var n=t.html;t.container.append(n),setTimeout(function(t){e(".infoBox-tips").addClass("show"),e(".mask-background").addClass("show")},50),e(".infoBox-saveBtn").off("click").on("click",function(){return t.ensureCallback&&t.ensureCallback(),e(".infoBox-tips").removeClass("show"),e(".mask-background").removeClass("show"),e(".infoBox-tips").on("transitionend WebkitTransitionEnd",function(){e(".confirmBox-tips").remove()}),!1}),e(".mask-close").off("click").on("click",function(){return t.ensureCallback&&t.ensureCallback(),console.log("close"),e(".infoBox-tips").remove(),e(".mask-background").remove(),e(".infoBox-tips").on("transitionend WebkitTransitionEnd",function(){e(".infoBox-tips").remove()}),!1})}else e(".infoBox-tips").remove("show"),e(".mask-background").addClass("show")}}).call(t,s("bXvV"),s("bXvV"))},Cw3A:function(e,t,n){function s(e){n("D2CA")}var i=n("eEuR")(n("AT6f"),n("rH9I"),s,"data-v-3ae090ab",null);e.exports=i.exports},D2CA:function(e,t){},DaYL:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",{staticClass:"messageList-item-content"},[n("figure",{staticClass:"messageList-item-img"},[n("img",{attrs:{src:e.$store.state.currentItem.logoUrl,alt:""}})]),e._v(" "),n("figcaption",{staticClass:"messageList-item-text special-message"},[n("section",{staticClass:"special-message-box medical-report",attrs:{"data-role":"medical-report"}},[n("header",{staticClass:"special-message-title"},[n("h2",[e._v(e._s(e.medicalReportMsg.patientCasemap&&e.medicalReportMsg.patientCasemap.patientName)+"问诊信息")])]),e._v(" "),n("section",{staticClass:"special-message-content "},[n("article",{staticClass:"special-message-item inline-message"},[e._m(0),e._v(" "),n("article",{staticClass:"special-message-item-text medical-report-name"},[n("h4",[e._v(e._s(e.medicalReportMsg.patientCasemap&&e.medicalReportMsg.patientCasemap.patientName))]),e._v(" "),e.medicalReportMsg.patientCasemap&&1==e.medicalReportMsg.patientCasemap.sexId?n("i",{staticClass:"J-sex icon-sex-male"},[e._v("男")]):e._e(),e._v(" "),e.medicalReportMsg.patientCasemap&&2==e.medicalReportMsg.patientCasemap.sexId?n("i",{staticClass:"J-sex icon-sex-female"},[e._v("女")]):e._e(),e._v(" "),n("span",[e._v(e._s(e.medicalReportMsg.patientCasemap&&e.medicalReportMsg.patientCasemap.age)+"岁")])]),e._v(" "),n("article",{staticClass:"special-message-item-text"},[e.medicalReportMsg.patientCasemap&&(e.medicalReportMsg.patientCasemap.height||e.medicalReportMsg.patientCasemap.weight||e.medicalReportMsg.patientCasemap.bmi)?n("article",{staticClass:"special-message-item-list"},[e.medicalReportMsg.patientCasemap&&e.medicalReportMsg.patientCasemap.height?n("span",{staticClass:"answer inline-block"},[n("p",{staticClass:"question"},[e._v("身高：")]),e._v(e._s(e.medicalReportMsg.patientCasemap&&e.medicalReportMsg.patientCasemap.height+"cm"))]):e._e(),e._v(" "),e.medicalReportMsg.patientCasemap&&e.medicalReportMsg.patientCasemap.weight?n("span",{staticClass:"answer inline-block"},[n("p",{staticClass:"question"},[e._v("体重：")]),e._v(e._s(e.medicalReportMsg.patientCasemap&&e.medicalReportMsg.patientCasemap.weight+"kg"))]):e._e(),e._v(" "),e.medicalReportMsg.patientCasemap&&e.medicalReportMsg.patientCasemap.bmi?n("span",{staticClass:"answer inline-block"},[n("p",{staticClass:"question"},[e._v("BMI：")]),e._v(e._s(e.medicalReportMsg.patientCasemap&&e.medicalReportMsg.patientCasemap.bmi))]):e._e()]):e._e()]),e._v(" "),n("article",{staticClass:"special-message-item-text"},[n("article",{staticClass:"special-message-item-list"},[n("span",{staticClass:"answer"},[n("p",{staticClass:"question"},[e._v("想获得的帮助：")]),e._v(e._s(e.medicalReportMsg.patientCasemap&&e.medicalReportMsg.patientCasemap.needHelp))])]),e._v(" "),n("article",{staticClass:"special-message-item-list"},[n("span",{staticClass:"answer"},[n("p",{staticClass:"question"},[e._v("所在地区：")]),e._v(e._s(e.medicalReportMsg.patientCasemap&&e.medicalReportMsg.patientCasemap.provinceName)+"  "+e._s(e.medicalReportMsg.patientCasemap&&e.medicalReportMsg.patientCasemap.cityName))])])]),e._v(" "),n("article",{staticClass:"special-message-item-text"},[n("article",{staticClass:"special-message-item-list"},[n("p",{staticClass:"answer"},[n("span",{staticClass:"question"},[e._v("患者是问诊人的：")]),e._v(e._s(e.medicalReportMsg.patientCasemap?e.getPatientRelation(e.medicalReportMsg.patientCasemap.patientRelationId):""))])])])]),e._v(" "),e.medicalReportMsg.patientCasemap&&(e.medicalReportMsg.patientCasemap.caseMain.caseMain.length>0||e.medicalReportMsg.patientCasemap.caseMain.caseMain.length>0)?n("article",{staticClass:"special-message-item"},[e._m(1),e._v(" "),n("article",{staticClass:"special-message-item-text"},[e.medicalReportMsg.patientCasemap.caseMain.caseMain.length>0?n("figcaption",{staticClass:"special-message-item-list"},[n("p",{staticClass:"question"},[e._v("主要症状：")]),e._v(" "),n("span",{staticClass:"answer",staticStyle:{display:"inline-block","max-width":"78%","vertical-align":"top"}},[e._v(e._s(e.medicalReportMsg.patientCasemap.caseMain.caseMain))])]):e._e(),e._v(" "),e.getPainMessage(e.medicalReportMsg.resultMainList[0].symptomOptions).typeShow?n("figcaption",{staticClass:"special-message-item-list"},[n("p",{staticClass:"question"},[e._v("疼痛性质：")]),e._v(" "),n("span",{staticClass:"answer",staticStyle:{display:"inline-block","max-width":"78%","vertical-align":"top"}},[e._v(e._s(e.getPainMessage(e.medicalReportMsg.resultMainList[0].symptomOptions).type))])]):e._e(),e._v(" "),e.getPainMessage(e.medicalReportMsg.resultMainList[0].symptomOptions).VASShow?n("figcaption",{staticClass:"special-message-item-list"},[n("p",{staticClass:"question"},[e._v("VAS评分：")]),e._v(" "),n("span",{staticClass:"answer",staticStyle:{display:"inline-block","max-width":"78%","vertical-align":"top"}},[e._v(e._s(e.getPainMessage(e.medicalReportMsg.resultMainList[0].symptomOptions).VAS))])]):e._e(),e._v(" "),n("figcaption",{staticClass:"special-message-item-list"},[n("p",{staticClass:"question"},[e._v("病情描述：")]),e._v(" "),n("span",{staticClass:"answer",staticStyle:{display:"inline-block","max-width":"78%","vertical-align":"top"}},[e._v(e._s(e.medicalReportMsg.patientCasemap&&e.medicalReportMsg.patientCasemap.descriptionDisease))])])])]):e._e(),e._v(" "),e.medicalReportMsg.patientCasemap&&(e.medicalReportMsg.patientCasemap.treatmentName.length>0||e.medicalReportMsg.patientCasemap.treatmentName.length>0||e.medicalReportMsg.patientCasemap.takeMedicine.length>0||e.medicalReportMsg.patientCasemap.attachmentList.length>0)?n("article",{staticClass:"special-message-item"},[e._m(2),e._v(" "),e.medicalReportMsg.patientCasemap&&(e.medicalReportMsg.patientCasemap.treatmentName.length>0||e.medicalReportMsg.patientCasemap.treatmentName.length>0)?n("article",{staticClass:"special-message-item-list"},[n("p",{staticClass:"answer"},[n("span",{staticClass:"question"},[e._v("曾就诊情况：")]),e._v(e._s(e.medicalReportMsg.patientCasemap.treatmentName)+"   "+e._s(e.medicalReportMsg.patientCasemap.illnessName))])]):e._e(),e._v(" "),e.medicalReportMsg.patientCasemap&&e.medicalReportMsg.patientCasemap.takeMedicine.length>0?n("article",{staticClass:"special-message-item-list"},[n("p",{staticClass:"answer"},[n("span",{staticClass:"question"},[e._v("在用药物：")]),e._v(e._s(e.medicalReportMsg.patientCasemap.takeMedicine))])]):e._e(),e._v(" "),e.medicalReportMsg.patientCasemap&&e.medicalReportMsg.patientCasemap.attachmentList.length>0?n("article",{staticClass:"special-message-item-list img-box"},e._l(e.medicalReportMsg.patientCasemap.attachmentList,function(t,s){return n("figure",{staticClass:"special-message-item-img "},[n("img",{attrs:{src:t.caseAttUrl},on:{click:function(t){e.showBigImgFunction(s)}}})])})):e._e()]):e._e(),e._v(" "),e.medicalReportMsg.patientCasemap&&e.medicalReportMsg.patientCasemap.remark.length>0?n("article",{staticClass:"special-message-item inline-message"},[e._m(3),e._v(" "),n("article",{staticClass:"special-message-item-list"},[n("span",{staticClass:"answer"},[e._v(e._s(e.medicalReportMsg.patientCasemap&&(e.medicalReportMsg.patientCasemap.remark.length>0?e.medicalReportMsg.patientCasemap.remark:"未填写")))])])]):e._e()])])])])},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"special-message-item-title"},[n("span",[e._v("基本信息")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"special-message-item-title"},[n("span",[e._v("主诉")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"special-message-item-title"},[n("span",[e._v("现病史")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"special-message-item-title"},[n("span",[e._v("备注")])])}]}},EFYl:function(e,t){},ESSQ:function(e,t,n){"use strict";function s(e,t,n,s){var i={consultationId:e.consultationIds,consultationStateList:"0,9,10",customerId:e.customerId};Object(r.a)({url:c.status,method:"POST",data:i,done:function(e){if(e.responseObject.responseData){var i=e.responseObject.responseData;0==i.status?n&&n(i.limitCount):1==i.status&&(1==i.state?s&&s(i):0==i.state&&t&&t())}}})}function i(e,t,n){var i={consultationIds:e.consultationId,consultationState:"0",customerId:e.customerId,consultationType:"0"};return new o.a(function(a,o){s({consultationIds:e.consultationId,customerId:e.customerId},function(){t&&t()},function(e){n&&n(e)},function(e){Object(r.a)({url:c.triage,method:"POST",data:i,done:function(e){e.responseObject.responseStatus?a(e):(console.log("网络异常，请稍后再试......"),o(e))}})})})}t.a=i;var a=n("UIuv"),o=n.n(a),r=n("ogYJ"),c={triage:"/call/customer/case/consultation/v1/update/",status:"/call/customer/case/consultation/v1/getMapInfo/"}},"Ee/u":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("3SZ7"),i=n.n(s),a=n("UIuv"),o=n.n(a),r=n("ogYJ"),c=n("wtEF"),l={getPreviewSuggest:"/call/patient/case/diagnosis/v1/getMapById/",getRecommendDoctor:"/call/patient/recommend/v1/getMapList/",saveData:"/call/patient/case/diagnosis/v1/create/",savePreviewSuggest:"/call/patient/recovery/advice/v1/create/",saveRecommendDoc:"/call/patient/recommend/v1/create/"};t.default={data:function(){return{nowTime:"",submitStatus:!0,previewSendData:{diagnoseResult:{},doctorList:[],teachingList:[],disposeList:[],examineList:[],testList:[]}}},mounted:function(){this.getDataList()},methods:{getLogoImg:function(){return{patientImg:this.$store.state.currentItem.logoUrl,patientName:this.$store.state.patientName}},closePreview:function(){document.querySelector(".mask-background")&&(document.querySelector(".mask-background").style.display="block"),c.a.commit("setPreviewShow",!1),c.a.commit("setPreviewId",""),c.a.commit("setPreviewType",-1),c.a.commit("setPreviewData",{diagnoseResult:{},doctorList:[],teachingList:[],disposeList:[],examineList:[],testList:[]})},getDataList:function(){var e=this,t=new Date;1==this.$store.state.previewType?(this.previewSendData=this.$store.state.previewData,this.nowTime=t.getFullYear()+"年"+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"月"+(t.getDate()<10?"0"+t.getDate():t.getDate())+"日"):(Object(r.a)({url:l.getRecommendDoctor,method:"POST",data:{diagnosisId:this.$store.state.previewId,isValid:1,firstResult:0,maxResult:9999,sortType:1,caseId:this.$store.state.currentItem.caseId},done:function(t){t.responseObject.responseData&&t.responseObject.responseData.dataList&&t.responseObject.responseData.dataList.length>0&&(e.previewSendData.doctorList=t.responseObject.responseData.dataList)}}),Object(r.a)({url:l.getPreviewSuggest,method:"POST",data:{caseId:this.$store.state.currentItem.caseId,diagnosisId:this.$store.state.previewId,isValid:1,firstResult:0,maxResult:1,sortType:1},done:function(t){if(t.responseObject.responseData&&t.responseObject.responseData.dataList&&t.responseObject.responseData.dataList.length>0){var n=t.responseObject.responseData.dataList[0];if(n.caseDiagnosis.createTime){var s=n.caseDiagnosis.createTime.split(" ")[0];e.nowTime=s.split("-")[0]+"年"+s.split("-")[1]+"月"+s.split("-")[2]+"日"}e.previewSendData.diagnoseResult=n.caseDiagnosis,e.previewSendData.teachingList=n.knowledgeList,e.previewSendData.disposeList=n.treatmentList,e.previewSendData.examineList=n.checkList,e.previewSendData.testList=n.inspectionList}}}))},reviseSuggest:function(){c.a.commit("setPreviewShow",!1),c.a.commit("setPreviewType",-1)},sendSuggest:function(){var e=this;this.submitStatus=!1;var t=[],n=[],s=[];this.previewSendData.doctorList.length>0&&this.previewSendData.doctorList.forEach(function(e){var n="";n=1==e.isTop&&1==e.isNearest?2:1==e.isTop?1:0,t.push({recommendType:1,recommendId:e.customerId,recommendCause:n}),s.push({fullName:e.fullName,company:e.company?e.company:"",medicalTitle:e.medicalTitle})}),this.previewSendData.teachingList.length>0&&this.previewSendData.teachingList.forEach(function(e){n.push({adviceType:3,adviceId:e.knowledgeId})}),this.previewSendData.disposeList.length>0&&this.previewSendData.disposeList.forEach(function(e){n.push({adviceType:0,adviceId:e.treatmentId})}),this.previewSendData.examineList.length>0&&this.previewSendData.examineList.forEach(function(e){n.push({adviceType:1,adviceId:e.nodeId})}),this.previewSendData.testList.length>0&&this.previewSendData.testList.forEach(function(e){n.push({adviceType:2,adviceId:e.inspectionId})}),Object(r.a)({url:l.saveData,method:"POST",data:e.previewSendData.diagnoseResult,done:function(a){if(a.responseObject.responseStatus){console.log("初步诊断保存成功");var u=a.responseObject.responsePk;new o.a(function(s,a){t.length>0&&Object(r.a)({url:l.saveRecommendDoc,method:"POST",data:{caseId:e.$store.state.caseId,patientId:e.$store.state.patientId,customerId:e.$store.state.userId,recommendCustomerList:i()(t),diagnosisId:u,type:1},done:function(e){e.responseObject.responseStatus?(console.log("推荐医生保存成功"),s("保存成功")):a("保存失败")}}),n.length>0&&Object(r.a)({url:l.savePreviewSuggest,method:"POST",data:{caseId:e.$store.state.caseId,patientId:e.$store.state.patientId,customerId:e.$store.state.userId,recoveryAdviceList:i()(n),diagnosisId:u,type:1},done:function(e){e.responseObject.responseStatus?(console.log("四大建议保存成功"),s("保存成功")):a("保存失败")}})}).then(function(t){console.log(t);var n=e.$store.state.currentItem,i=e.previewSendData.diagnoseResult.majorName,a="暂不确定"==e.previewSendData.diagnoseResult.illnessName?"":e.previewSendData.diagnoseResult.illnessName,o="暂不确定"==e.previewSendData.diagnoseResult.operationName?"":e.previewSendData.diagnoseResult.operationName;n.diagnosisContent=i+" "+a+" "+o,n.consultationState="10",c.a.commit("setCurrentItem",n);var r=new Date,l=(r.getFullYear()+"."+(r.getMonth()+1<10?"0"+(r.getMonth()+1):r.getMonth()+1)+"."+(r.getDate()<10?"0"+r.getDate():r.getDate())).replace(/-/g,".");e.closePreview(),e.$store.commit("setCheckSuggestionFlag",!e.$store.state.checkSuggestionFlag),c.a.commit("previewSuggestionSender",{flag:!0,data:{illnessName:e.previewSendData.diagnoseResult.illnessName?e.previewSendData.diagnoseResult.illnessName:"暂不确定",customerId:e.$store.state.userId,caseId:e.$store.state.caseId,patientName:e.$store.state.patientName,createTime:l,diagnosisId:u,docNames:s}})}).catch(function(e){console.log(e)})}}})}},props:{}}},EsDz:function(e,t,n){function s(e){n("sHKm")}var i=n("eEuR")(n("Li5s"),n("UpBo"),s,null,null);e.exports=i.exports},F03L:function(e,t,n){function s(e){n("8unY")}var i=n("eEuR")(n("2uuT"),n("ZrQl"),s,"data-v-b4b972b0",null);e.exports=i.exports},"F1d+":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{}},mounted:function(){},methods:{ensure:function(){this.$emit("ensureCallback")},cancel:function(){this.$emit("cancelCallback")}},props:{comfirmContent:{type:String}}}},FKXC:function(e,t,n){function s(e){n("cHcu")}var i=n("eEuR")(n("lZFN"),n("l020"),s,"data-v-070b4a52",null);e.exports=i.exports},Fk4r:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("q/Kx"),i=n("KEcs"),a=n("T4ej"),o=n.n(a),r=n("2zeX"),c=n.n(r);i.a.filter("timeFormatCheckHistory",function(e,t){return e=e.replace("-","年"),e=e.replace("-","月"),e.substring(0,10)+"日"+e.substring(10,16)}),i.a.filter("previewSuggestion",function(e,t){return""}),t.default={name:"check-history-modules",data:function(){return{diagnoseHistoryUrl:"/call/customer/patient/case/v1/getCaseMapList/",chatHistoryRecordUrl:"/call/patient/case/chat/v1/getMapList/",diagnoseHistoryList:[],chatHistoryRecordList:[],currentIndex:-1,totalCount:0,pageNum:5,pageIndex:1,pageResult:0,pageArr:[],loadingShow:!1,popupShow:!1,popupObj:{}}},components:{loading:o.a,popup:c.a},methods:{init:function(){this.diagnoseHistory()},updateShow:function(e){document.querySelector(".mask-background").style.display="none",this.$store.commit("setPreviewType",2),this.$store.commit("setPreviewId",JSON.parse(e.body.substring(1,e.body.length-1)).data[0].diagnosisId),this.$store.commit("setPreviewShow",!0)},diagnoseHistory:function(){var e=this,t={patientId:e.$store.state.patientId};s.a.ajax({url:e.diagnoseHistoryUrl,method:"POST",data:t,beforeSend:function(e){},done:function(t){console.log(t.responseObject.responseData.dataList),e.diagnoseHistoryList=t.responseObject.responseData.dataList}})},chatHistoryRecord:function(e,t,n,i){if("•••"==t)return!1;var a=this;a.pageResult=(t-1)*a.pageNum,a.pageIndex=t,(i||0==i)&&(a.currentIndex==i?a.currentIndex=-1:a.currentIndex=i),a.chatHistoryRecordList=[];var o={fromAccount:"1_doctor00001",receiveAccount:"0_"+n.caseId,firstResult:a.pageResult,maxResult:a.pageNum,sortType:1,isValid:1};s.a.ajax({url:a.chatHistoryRecordUrl,method:"POST",data:o,done:function(n){"NO DATA"==n.responseObject.responseMessage?(a.chatHistoryRecordList=[],a.popupShow=!0,a.popupObj={text:"无聊天记录"}):(a.popupShow=!1,console.log(n.responseObject.responseData.dataList),parseInt(n.responseObject.responseData.totalCount)>2?(a.totalCount=parseInt(n.responseObject.responseData.totalCount)-2,a.chatHistoryRecordList=n.responseObject.responseData.dataList):(a.totalCount=0,a.chatHistoryRecordList=[],a.popupShow=!0,a.popupObj={text:"无聊天记录"})),a.pages(e,t)}})},pages:function(e,t){var n=this,s=Math.ceil(n.totalCount/n.pageNum),i=void 0;if(s>9){if(1==t||t==Math.ceil(n.totalCount/n.pageNum))return n.pageArr=[1,2,3,4,5,"•••",s-2,s-1,s],!1;if(n.pageArr.forEach(function(e,t){"•••"==e&&(i=t)}),i){var a=Number(n.pageArr[i-1])+1,o=Number(n.pageArr[i+1])-1;e==i-1?(n.pageArr.splice(i,0,a),n.pageArr.splice(0,1)):0==e&&1!=Number(n.pageArr[0])?(n.pageArr.unshift(Number(n.pageArr[0])-1),n.pageArr.splice(i,1)):e==i+1?(n.pageArr.splice(i+1,0,o),n.pageArr.splice(n.pageArr.length-1,1)):e==n.pageArr.length-1&&Number(n.pageArr[n.pageArr.length-1]!=s)&&(n.pageArr.splice(i+1,1),n.pageArr.push(Number(n.pageArr[n.pageArr.length-1])+1)),n.pageArr[i+1]-n.pageArr[e]!=1&&n.pageArr[e]-n.pageArr[i-1]!=1||n.pageArr.splice(i,1)}else 0==e?(n.pageArr.splice(4,1,"•••"),n.pageArr.unshift(Number(n.pageArr[0])-1)):7==e&&(n.pageArr.splice(5,1,"•••"),n.pageArr.push(Number(n.pageArr[n.pageArr.length-1])+1))}else{n.pageArr=[];for(var r=1;r<=Math.ceil(s);r++)n.pageArr.push(r)}console.log(n.pageArr)},filterInfo:function(e){if("custom"!==e.msgType.toLowerCase())return!0;switch(JSON.parse(e.body.substring(1,e.body.length-1)).type){case"new-health":case"medicalReport":return!1;default:return!0}},showPDF:function(e){window.open(e)}},mounted:function(){this.init()}}},G0kZ:function(e,t,n){function s(e){n("nUWs")}var i=n("eEuR")(n("lptC"),n("NsuP"),s,"data-v-00907004",null);e.exports=i.exports},GQb3:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"center-inner-message",attrs:{id:"communication"}},[n("section",{staticClass:"layout-helper"},[e._m(0),e._v(" "),n("BaseIm",{ref:"baseImComponent"}),e._v(" "),n("section",{directives:[{name:"show",rawName:"v-show",value:!e.$store.state.inputReadOnly,expression:"!$store.state.inputReadOnly"}],staticClass:"user-controller"},[n("nav",{staticClass:"user-controller-fastBtn",attrs:{"data-template":"tpl-fastReply"}},[n("button",{staticClass:"user-controller-fastReply",on:{click:function(t){t.stopPropagation(),e.fastRely()}}},[n("i",{staticClass:"icon-fastReply"}),e._v(" "),n("span",[e._v("快捷提问")])]),e._v(" "),n("button",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.isTalk,expression:"$store.state.isTalk"}],staticClass:"user-controller-result",on:{click:function(t){t.stopPropagation(),e.usedRely()}}},[n("i",{staticClass:"icon-userReply"}),e._v(" "),n("span",[e._v("常用回复")])]),e._v(" "),n("button",{staticClass:"user-controller-min",on:{click:function(t){t.stopPropagation(),e.minBtnShow()}}},[n("i",{staticClass:"icon-userReply"}),e._v(" "),n("span",[e._v("更多")]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.minBtnFlag,expression:"minBtnFlag"}],staticClass:"sendList"},[n("ul",[n("li",{staticClass:"min-1",on:{click:function(t){e.examine()}}},[e._v("检查检验")]),e._v(" "),n("li",{on:{click:function(t){e.refuseEvent()}}},[e._v("拒绝分诊")]),e._v(" "),n("li",{on:{click:function(t){e.sendFile()}}},[e._v("发送视图")])])])]),e._v(" "),n("button",{staticClass:"user-controller-end",on:{click:function(t){e.suggestion()}}},[n("i",{staticClass:"icon-suggestion"}),e._v(" "),n("span",[e._v("初诊建议")])]),e._v(" "),n("button",{staticClass:"user-controller-check",on:{click:function(t){e.examine()}}},[n("i",{staticClass:"icon-checkout"}),e._v(" "),n("span",[e._v("检查检验")])]),e._v(" "),n("button",{staticClass:"user-controller-end",on:{click:function(t){e.reTriageShow=!0}}},[n("i",{staticClass:"icon-finish"}),e._v(" "),n("span",[e._v("结束沟通")])]),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.$store.state.fastReplyShow?n("fast-Rely",{attrs:{controllerInputStatus:e.controllerInputStatus,fastRelyStatus:e.fastRelyStatus},on:{"update:controllerInputStatus":function(t){e.controllerInputStatus=t},"update:fastRelyStatus":function(t){e.fastRelyStatus=t}}}):e._e()],1),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.$store.state.usedReplyShow?n("used-Rely",{attrs:{usedRelyStatus:e.usedRelyStatus},on:{"update:usedRelyStatus":function(t){e.usedRelyStatus=t}}}):e._e()],1),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.reTriageShow&&"1"!=e.$store.state.consultationState&&"3"!=e.$store.state.consultationState?n("SmallConfirm",{attrs:{comfirmContent:e.reTriageContentTips},on:{ensureCallback:e.reTriageConfirm,cancelCallback:function(t){e.reTriageShow=!1}}}):e._e()],1),e._v(" "),n("transition",{attrs:{name:"fade"}},[!e.reTriageShow||"1"!=e.$store.state.consultationState&&"3"!=e.$store.state.consultationState?e._e():n("doctor-Receive",{attrs:{confirmContent:e.doctorReceive},on:{ensureCallback:e.doctorReceiveFn}})],1)],1),e._v(" "),n("article",{staticClass:"user-controller-middle"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.controllerInput,expression:"controllerInput"}],staticClass:"user-controller-input",attrs:{name:"",id:"",cols:"",rows:"",readonly:e.$store.state.inputReadOnly},domProps:{value:e.controllerInput},on:{keydown:function(t){e.sendMessage(t)},input:[function(t){t.target.composing||(e.controllerInput=t.target.value)},function(t){e.$store.state.usedReplyContent=e.controllerInput}]}})]),e._v(" "),e.waitingTriage?e._e():n("footer",{staticClass:"user-controller-footer"},[n("span",{staticClass:"user-send-message"},[e._v("按下Enter发送")]),e._v(" "),n("button",{staticClass:"btn-primary user-controller-send-btn",on:{click:e.sendMessage}},[n("span",[e._v("发送")]),e._v(" "),e.$store.state.beingSend?e._e():n("img",{class:{"send-loading":!e.$store.state.beingSend},attrs:{src:"/static/image/img00/common/save_complete.png",alt:"loading..."}})])]),e._v(" "),n("send-file")],1)],1),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.$store.state.usedReplyConfig?n("UsedReplyConfig"):e._e()],1),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.$store.state.fastReplyConfig?n("fast-Reply-Config"):e._e()],1),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.$store.state.examineFlag?n("examine-check"):e._e()],1),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.$store.state.checkSuggestionFlag?n("Check-Suggestion"):e._e()],1),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.$store.state.SBIFlag?n("show-big-Img",{attrs:{showBigImgFlag:e.$store.state.SBIFlag},on:{"update:showBigImgFlag":function(t){e.$set(e.$store.state,"SBIFlag",t)}}}):e._e()],1),e._v(" "),e.$store.state.videoListFlag?n("show-video-List"):e._e(),e._v(" "),e.$store.state.videoFlag?n("show-video",{attrs:{showBigImgFlag:e.$store.state.videoFlag},on:{"update:showBigImgFlag":function(t){e.$set(e.$store.state,"videoFlag",t)}}}):e._e(),e._v(" "),e.$store.state.previewShow?n("section",{class:{on:2==e.$store.state.previewType,"main-masker":2==e.$store.state.previewType}},[n("transition",{attrs:{name:"fade"}},[n("PreviewSuggestion")],1)],1):e._e(),e._v(" "),e.$store.state.refuseFlag?n("refuse"):e._e()],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("figure",{staticClass:"center-inner-wrapper"},[n("img",{attrs:{src:"/static/image/img00/index/logo_empty bg.png",alt:""}})])}]}},GUiL:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("SWMY");n.n(s),n("L2mo");t.default={data:function(){return{exifFlag:!1}},mounted:function(){this.init()},computed:{docName:function(){return this.message.custom&&JSON.parse(this.message.custom).docName?JSON.parse(this.message.custom).docName:this.$store.state.userName}},methods:{init:function(){this.installSBIList(),this.initVideoFn()},showBigImgFunction:function(e){var t=this;this.$store.state.videoListObject.IMVideoList.forEach(function(n,s){e==n.url&&t.$store.commit("setSBIIndex",s)}),this.$store.commit("setVideoListFlag",!0),this.$store.commit("setSBIType","IMVideoList")},installSBIList:function(){var e=this,t=[],n=!0;""!=this.$store.state.videoListObject&&this.$store.state.videoListObject.IMVideoList&&this.$store.state.videoListObject.IMVideoList.forEach(function(s,i){t.push({url:s.url}),s.url==e.message.file.url&&(n=!1)}),n&&t.push({url:this.message.file.url}),this.$store.commit("videoListObject",{IMVideoList:t})},deleteMsg:function(){this.$emit("deleteMsg")},initVideoFn:function(){var e=this;this.$refs.videoElement.addEventListener("canplaythrough",function(){e.$emit("loadCallback")})}},props:{message:{type:Object},nim:{type:Object}}}},GeFp:function(e,t,n){function s(e){n("k6na")}var i=n("eEuR")(n("XOGe"),n("SuBp"),s,null,null);e.exports=i.exports},HOSe:function(e,t){},IDnV:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("u6qr"),i=n.n(s),a=n("UIuv"),o=n.n(a),r=n("fHpZ"),c=n.n(r);n("q/Kx"),n("KEcs");t.default={name:"",data:function(){return{showFlag:!1,fileList:[],maxImgSize:5,maxVideoSize:100,maxFileSize:100,maxPDFSize:100,maxNumber:9,videoNumber:1,PDFNumber:1}},watch:{"$store.state.sendFileShow":function(e){this.showFlag=e,e||(this.fileList=[],this.$store.commit("setSendFileFlag",{flag:!1,data:{}}))}},methods:{init:function(){this.showFlag=this.$store.state.sendImgShow},onFileChange:function(e){var t=this,n=e.target.files||e.dataTransfer.files;if(n.length)return this.fileList.length==this.maxNumber?(document.getElementById("sendImg").value="",void this.$store.commit("showPopup",{text:"一次最多上传"+this.maxNumber+"个文件！"})):this.fileList.length+n.length>this.maxNumber?(document.getElementById("sendImg").value="",void this.$store.commit("showPopup",{text:"一次最多上传"+this.maxNumber+"个文件！"})):void c()(n).forEach(function(e,n){console.log(e),/image\/\w+/.test(e.type)||/.pdf/.test(e.type)||/video\/\w+/.test(e.type)?!/video\/\w+/.test(e.type)||/mp4/.test(e.type)||/quicktime/.test(e.type)?(e.url=window.URL.createObjectURL(e),e.sizeWarning=!1,t.fileList.push(e)):t.$store.commit("showPopup",{text:"请选择规定类型文件！"}):(t.$store.commit("showPopup",{text:"请选择规定类型文件！"}),document.getElementById("sendImg").value="")})},send:function(){var e=this,t=0,n=0,s=!0,a=!1,r=void 0;try{for(var c,l=i()(this.fileList);!(s=(c=l.next()).done);s=!0){var u=c.value;if("video"==e.fileType(u.type)?t++:"file"==e.fileType(u.type)&&n++,u.sizeWarning)return"image"==e.fileType(u.type)?this.$store.commit("showPopup",{text:"请传入小于"+this.maxImgSize+"M的图片！"}):"video"==e.fileType(u.type)?this.$store.commit("showPopup",{text:"请传入小于"+this.maxVideoSize+"M的视频！"}):"file"==e.fileType(u.type)&&this.$store.commit("showPopup",{text:"请传入小于"+this.maxPDFSize+"M的视频！"}),void(document.getElementById("sendImg").value="")}}catch(e){a=!0,r=e}finally{try{!s&&l.return&&l.return()}finally{if(a)throw r}}if(t>e.videoNumber)return void this.$store.commit("showPopup",{text:"一次最多传入"+e.videoNumber+"个视频！"});if(n>e.PDFNumber)return void this.$store.commit("showPopup",{text:"一次最多传入"+e.PDFNumber+"个PDF文件！"});var d=[],p=[],m=!0,f=!1,g=void 0;try{for(var h,v=i()(this.fileList);!(m=(h=v.next()).done);m=!0){var y=h.value;!function(t){d.push(new o.a(function(n,s){var i=new FileReader;i.readAsDataURL(t),i.onload=function(s){console.log("加载完成！"),p.push({data:s.target.result,name:t.name,type:e.fileType(t.type)}),n(s)}}))}(y)}}catch(e){f=!0,g=e}finally{try{!m&&v.return&&v.return()}finally{if(f)throw g}}o.a.all(d).then(function(t){e.$store.commit("setSendFileFlag",{flag:!0,data:p}),e.fileList=[],e.$store.commit("setSendFileShow",!1)})},closeSend:function(){this.$store.commit("setSendFileShow",!1),this.fileList=[],this.$store.commit("setSendFileFlag",{flag:!1,data:{}})},getSize:function(e,t){e.size>1024*this.maxSize*1024&&(e.sizeWarning=!0);var n=e.size;return e.size<1048576?(n/1024).toFixed(2)+"KB":(n/1024/1024).toFixed(2)+"MB"},removeImg:function(e,t){document.getElementById("sendImg").value="",this.fileList.removeByValue(t)},fileType:function(e){return/image\/\w+/.test(e)?"image":/.pdf/.test(e)?"file":/video\/\w+/.test(e)?"video":"file"},getState:function(){return this.$store.state.isImage&&this.$store.state.isVideo&&this.$store.state.isFile?"image/*,video/*,application/pdf":this.$store.state.isImage&&this.$store.state.isVideo?"image/*,video/*":this.$store.state.isVideo&&this.$store.state.isFile?"video/*,application/pdf":this.$store.state.isImage?"image/*":this.$store.state.isVideo?"video/*":this.$store.state.isFile?"application/pdf":"application/vnd.ms-excel"}},mounted:function(){this.init()}}},IEd6:function(e,t,n){function s(e){n("g5BU")}var i=n("eEuR")(n("WmD2"),n("4i4+"),s,"data-v-fea00190",null);e.exports=i.exports},IJyU:function(e,t,n){function s(e){n("RSOJ")}var i=n("eEuR")(n("NEr2"),n("CHYX"),s,null,null);e.exports=i.exports},IMHn:function(e,t){},"Iqo+":function(e,t,n){function s(e){n("hkwB")}var i=n("eEuR")(n("F1d+"),n("CKIK"),s,null,null);e.exports=i.exports},JGOZ:function(e,t){},KC7A:function(e,t,n){function s(e){n("cuUM")}var i=n("eEuR")(n("/+hK"),n("zLUy"),s,null,null);e.exports=i.exports},KKg4:function(e,t){},KQop:function(e,t,n){function s(e){n("7TFv")}var i=n("eEuR")(n("YMs+"),n("VXoR"),s,"data-v-cd04abe8",null);e.exports=i.exports},L2H5:function(e,t,n){function s(e){n("BNfs")}var i=n("eEuR")(n("ht71"),n("vGy+"),s,"data-v-38d85bc2",null);e.exports=i.exports},L2mo:function(e,t,n){"use strict";(function(e){}).call(t,n("bXvV"))},"L8+j":function(e,t,n){function s(e){n("9X9B")}var i=n("eEuR")(n("wfCL"),n("DaYL"),s,null,null);e.exports=i.exports},Li5s:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("ogYJ"),i=n("wtEF"),a={usedList:"/call/customer/comm/reply/v1/getMapList/",update:"/call/customer/comm/reply/v1/save/"};t.default={data:function(){return{replyList:[]}},watch:{"$store.state.usedReplyConfig":function(e){e||this.getReplyList()},"$store.state.caseId":function(e){e&&this.getReplyList()},usedRelyStatus:function(e){e&&this.getReplyList()}},mounted:function(){this.getReplyList()},props:{usedRelyStatus:{type:Boolean}},methods:{getReplyList:function(){var e=this;i.a.commit("startLoading"),Object(s.a)({url:a.usedList,method:"POST",data:{customerId:this.$store.state.userId,isValid:"1",firstResult:"0",maxResult:"9999"},done:function(t){if(t.responseObject.responseData){i.a.commit("stopLoading");var n=t.responseObject.responseData.dataList;n&&0!==n.length?e.replyList=n.reverse():e.replyList=[]}else e.replyList=[]}})}}}},LrKk:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("e1G8"),i=n.n(s),a=n("q/Kx"),o=n("2zeX"),r=n.n(o);t.default={name:"checkBody",data:function(){return{getDataUrl:"/call/customer/patient/case/physical/getMapList/",saveDataUrl:"/call/customer/patient/case/physical/create/",height:"",heightArea:[],weight:"",weightArea:[],bloodPressureHigh:"",bloodPressureHighArea:[],bloodPressureLow:"",bloodPressureLowArea:[],pulse:"",pulseArea:[],breathing:"",breathArea:[],bmi:"",bodySurfaceArea:"",temperature:"",other:"",id:"",userMessage:{},popupShow:!1,popupObj:{}}},components:{popup:r.a},methods:{init:function(){this.userMessage=this.$store.state.currentItem,this.initData(),this.getData()},watch:{"$store.state.currentItem":function(){this.init()}},initData:function(){var e=this;e.heightArea.push({value:"",text:"请选择"});for(var t=140;t<220;t++)e.heightArea.push({value:t,text:t+" cm"});e.weightArea.push({value:"",text:"请选择"});for(var n=40;n<120;n++)e.weightArea.push({value:n,text:n+" kg"});e.bloodPressureHighArea.push({value:"",text:"请选择"});for(var s=40;s<=180;s++)e.bloodPressureHighArea.push({value:s,text:s+" mmHg"});e.bloodPressureLowArea.push({value:"",text:"请选择"});for(var a=20;a<=130;a++)e.bloodPressureLowArea.push({value:a,text:a+" mmHg"});e.pulseArea.push({value:"",text:"请选择"});for(var o=40;o<=100;o++)e.pulseArea.push({value:o,text:o+" 次/分"});e.breathArea.push({value:"",text:"请选择"});for(var r=40;r<=100;r++)e.breathArea.push({value:r,text:r+" 次/分"});i()(document.querySelectorAll(".J-other"))},getData:function(){var e=this,t={patientId:this.userMessage.patientId,caseId:this.userMessage.caseId};a.a.ajax({url:e.getDataUrl,method:"POST",data:t,beforeSend:function(e){},done:function(t){if(console.log(t),t.responseObject.responseData.dataList&&1==t.responseObject.responseStatus){var n=t.responseObject.responseData.dataList[0];e.id=n.id,e.height=n.height,e.weight=n.weight,e.bloodPressureHigh=n.bloodPressureHigh,e.bloodPressureLow=n.bloodPressureLow,e.pulse=n.pulse,e.breathing=n.breathing,e.temperature=n.temperature,e.bmi=n.bmi,e.bodySurfaceArea=n.bodySurfaceArea,e.other=n.other,setTimeout(function(){i.a.update(document.querySelectorAll(".J-other"))},200)}else console.log("无数据！")},fail:function(e){console.log("请求失败："+e)}})},saveData:function(){var e=this,t={temperature:this.temperature,patientId:this.userMessage.patientId,caseId:this.userMessage.caseId,height:this.height,weight:this.weight,bloodPressureHigh:this.bloodPressureHigh,bloodPressureLow:this.bloodPressureLow,pulse:this.pulse,breathing:this.breathing,bodySurfaceArea:this.bodySurfaceArea,bmi:this.bmi,other:this.other,isValid:1,id:this.id};console.log(t),a.a.ajax({url:e.saveDataUrl,method:"POST",data:t,beforeSend:function(e){},done:function(t){""!=t&&0!=t.responseObject.responseStatus?(e.getData(),console.log("保存成功！"),e.popupShow=!0,e.popupObj={text:"保存成功"}):(e.popupShow=!0,e.popupObj={text:"保存失败"})},fail:function(e){console.log("请求失败："+e)}})},changeData:function(){if(0!=this.height&&0!=this.weight){var e=this.weight/(this.height*this.height/1e4),t=.0061*this.height+.0128*this.weight-.1529;this.bmi=e.toFixed(2),this.bodySurfaceArea=t.toFixed(2)+"㎡"}else this.bmi="",this.bodySurfaceArea=""},formatNumber:function(e){void 0===e||""==e||(this.temperature=e.replace(/[^0-9.]/g,""))},focusEvent:function(e,t){var n=new RegExp(t,"ig");this.temperature=e.replace(n," ")},blurEvent:function(e,t){e&&-1==e.indexOf(t)&&(this.temperature=e+t)}},mounted:function(){this.init()}}},Lxys:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("Edqs"),i=n.n(s),a=n("SWMY");n.n(a),n("L2mo");t.default={data:function(){return{multipleList:{}}},props:{message:{type:Object},nim:{type:Object}},mounted:function(){this.multipleList=this.message,this.multipleList.content.data.list.length>3&&(this.multipleList=i()({},this.multipleList)),this.installSBIList()},methods:{installSBIList:function(){var e=this,t={};t=this.$store.state.SBIObject,this.message.content.data.list.forEach(function(t,n){t.url=e.removeBaseImageMsg(t.url)}),t[e.message.idClient]=this.message.content.data.list,this.$store.commit("setSBIObject",t)},showBigImgFunction:function(e){var t=this;this.$store.state.SBIObject[t.message.idClient].forEach(function(n,s){e==s&&t.$store.commit("setSBIIndex",s)}),this.$store.commit("setSBIFlag",!0),this.$store.commit("setSBIType",t.message.idClient)},removeBaseImageMsg:function(e){return this.nim.viewImageStripMeta({url:e,strip:!0})}}}},M0al:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{show:{type:Boolean}}}},M5ym:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"},on:{click:function(t){e.$store.state.usedReplyShow=!1,e.$store.state.fastReplyShow=!1}}},[n("router-view"),e._v(" "),n("Loading",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.loadingShow,expression:"$store.state.loadingShow"}]}),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.$store.state.popupShow?n("Popup",{attrs:{obj:e.$store.state.popupContent}}):e._e()],1)],1)},staticRenderFns:[]}},M93x:function(e,t,n){function s(e){n("26D6")}var i=n("eEuR")(n("0h66"),n("M5ym"),s,null,null);e.exports=i.exports},MEC0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("3SZ7"),i=n.n(s),a=n("Tgu+"),o=n.n(a),r=n("ESSQ"),c=n("wtEF");t.default={name:"record",props:{recordData:{type:Object},waitingTriage:{type:Boolean},userListStatus:{type:Object}},data:function(){return{userMessage:"",showFlag:!1,name:"",logoUrl:"",checkHistoryFlag:!1}},methods:{init:function(){this.userMessage=i()(this.$store.state.currentItem),this.name=JSON.parse(this.userMessage).patientName,this.age=JSON.parse(this.userMessage).patientAge,this.sex=JSON.parse(this.userMessage).patientSex,this.logoUrl=JSON.parse(this.userMessage).logoUrl,this.showFlag=!0},showCheckHistory:function(){this.$store.state.checkHistoryFlag=!this.$store.state.checkHistoryFlag},getPatient:function(){var e=this,t=this.$store.state.currentItem,n=this.$store.state.waitingList,s=this.$store.state.patientList;Object(r.a)({consultationId:this.$store.state.consultationId,customerId:this.$store.state.userId},function(){c.a.commit("stopLoading"),c.a.commit("showPopup",{hasImg:!1,text:"该患者已被其他分诊医生接诊！"})},function(e){c.a.commit("stopLoading"),c.a.commit("showPopup",{hasImg:!1,text:"您最多可以接诊"+e+"个患者！"})}).then(function(i){e.$emit("update:watingTriage",!1),n.removeByValue(t),s.unshift(t),c.a.commit("setPatientList",s),c.a.commit("setWatingList",n),c.a.commit("setInputReadOnly",!1),e.$emit("update:userListStatus",{first:!1,second:!0,status:2})}).catch(function(e){console.log("网络异常...")})}},watch:{"$route.params.num":function(){},"$store.state.currentItem":function(){this.init()}},components:{remarkRecord:o.a},mounted:function(){this.init()}}},MPX3:function(e,t,n){function s(e){n("c/1B")}var i=n("eEuR")(n("lydH"),n("/Fz+"),s,null,null);e.exports=i.exports},N34J:function(e,t){},ND59:function(e,t){},NEr2:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("ogYJ"),i={getTeachingDetail:"/call/comm/data/knowledge/content/v1/getMapById/"};t.default={data:function(){return{teachingDetail:""}},mounted:function(){this.getTeachingDetail()},methods:{getTeachingDetail:function(){var e=this;e.$store.commit("startLoading"),Object(s.a)({url:i.getTeachingDetail,method:"POST",data:{isValid:1,firstResult:0,maxResult:999,knowledgeId:e.knowledgeId},done:function(t){t.responseObject.responseData.dataList&&(e.teachingDetail=t.responseObject.responseData.dataList[0]),e.$store.commit("stopLoading")}})},goBack:function(){this.$emit("update:knowledgeShow",!1),this.$emit("goBack",!0)}},props:{knowledgeShow:{type:Boolean},knowledgeId:{type:String}}}},NHnr:function(e,t,n){"use strict";function s(e){if(e.$root===e)return"root";var t=e._isVue?e.$options&&e.$options.name||e.$options&&e.$options._componentTag:e.name;return(t?"component <"+t+">":"anonymous component")+(e._isVue&&e.$options&&e.$options.__file?" at "+(e.$options&&e.$options.__file):"")}Object.defineProperty(t,"__esModule",{value:!0});var i=n("KEcs"),a=n("M93x"),o=n.n(a),r=n("YaEn"),c=n("D//d"),l=n("14gC"),u=n.n(l);c.a.addLocale(u.a);var d={locale:"zh_CN"};i.a.use(c.b,d);var p={zh_CN:{message:{email:function(){return"请输入正确的邮箱格式"},required:function(e){return"请输入"+e}},attributes:{email:"邮箱",passWord:"密码",name:"姓名",userName:"用户名",phone:"手机号",validateCode:"验证码",newPassword:"新密码",newPassword2:"新密码",mobile:"手机号码",mailBox:"邮箱"}}};c.a.updateDictionary(p),c.a.extend("mobile",{messages:{zh_CN:function(e){return e+"输入有误"}},validate:function(e){return 11==e.length&&/^((13|14|15|17|18)[0-9]{1}\d{8})$/.test(e)}}),c.a.extend("special",{messages:{zh_CN:function(e){return"请填写有效姓名，不能输入特殊符号"}},validate:function(e){return!/[`~!！？@#$%^&*()_+<>?:"{},，。\/;'[\] ]/.test(e)&&!/[\uD83C|\uD83D|\uD83E][\uDC00-\uDFFF][\u200D|\uFE0F]|[\uD83C|\uD83D|\uD83E][\uDC00-\uDFFF]|[0-9|*|#]\uFE0F\u20E3|[0-9|#]\u20E3|[\u203C-\u3299]\uFE0F\u200D|[\u203C-\u3299]\uFE0F|[\u2122-\u2B55]|\u303D|[\A9|\AE]\u3030|\uA9|\uAE|\u3030/gi.test(e)}}),c.a.extend("mailBox",{messages:{en:function(e,t){return e+"输入有误，请重新输入"},cn:function(e,t){return e+"输入有误，请重新输入"},zh_CN:function(e,t){return e+"输入有误，请重新输入"}},validate:function(e){return/^([0-9A-Za-z\-_\.]+)@([0-9a-z]+\.[a-z]{2,3}(\.[a-z]{2})?)$/g.test(e)}}),c.a.extend("required",{messages:{en:function(e,t){return e+"不能为空"},cn:function(e,t){return e+"不能为空"},zh_CN:function(e,t){return e+"不能为空"}},validate:function(e){return e.length>0}}),c.a.extend("passw",{messages:{en:function(e,t){return e+"长度应在6-20位之间"},cn:function(e,t){return e+"长度应在6-20位之间"},zh_CN:function(e,t){return e+"长度应在6-20位之间"}},validate:function(e){return/^(\w){6,20}$/.test(e)}}),c.a.extend("nameSpace",{messages:{en:function(e,t){return e+"不能有空格"},cn:function(e,t){return e+"不能有空格"},zh_CN:function(e,t){return e+"不能有空格"}},validate:function(e){return!/(^\s+)|(\s+$)/g.test(e)}}),c.a.extend("num_length",{messages:{en:function(e){return"验证码为4位阿拉伯数字"},cn:function(e){return"验证码为4位阿拉伯数字"},zh_CN:function(e){return"验证码为4位阿拉伯数字"}},validate:function(e,t){for(var n=0,s=0;s<e.length;s++)null!==e[s].match(/[^\x00-\xff]/gi)?n+=2:n+=1;return n===parseInt(t[0])}});var m=function(){return window.location.host.includes("triage")?"production":"development"},f=n("wtEF");n("5XB1");i.a.config.productionTip=!1,new i.a({el:"#app",template:"<App/>",store:f.a,router:r.a,components:{App:o.a}}),window.version="1.1.5",function(){if("production"===m()){var e=n("S56L");e.apikey="978f7359e7dcd8be4e2ebe3ef02e08e687330b823086432c3ca5d348946eb60b",i.a.config.errorHandler=function(t,n,i){var a=s(n),o=n.$options&&n.$options.propsData;e.notifyError(t,{metaData:{componeSntName:a,propsData:o,info:i}})}}}()},NOoP:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"fade",appear:""}},[n("section",{staticClass:"main-inner test"},[n("header",{staticClass:"main-header"},[n("article",{staticClass:"main-header-title"},[n("i",{staticClass:"icon-logo"}),e._v(" "),n("h1",[e._v("唯医互联网骨科医院")])])]),e._v(" "),n("section",{staticClass:"login-content-inner"},[n("section",{directives:[{name:"show",rawName:"v-show",value:e.loginFlag,expression:"loginFlag"}],staticClass:"login-content",staticStyle:{display:"inline-block"},attrs:{id:"ev-loginBox"}},[n("header",{staticClass:"login-title"},[e._v("\n          用户登录\n        ")]),e._v(" "),n("section",{staticClass:"login-input-item"},[n("h3",[n("span",[e._v("用户名")])]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.userNameVal,expression:"userNameVal"},{name:"validate",rawName:"v-validate",value:"required|mobile",expression:"'required|mobile'"}],staticClass:"login-input-box",attrs:{type:"text",name:"userName"},domProps:{value:e.userNameVal},on:{focus:e.userNameEvent,input:function(t){t.target.composing||(e.userNameVal=t.target.value)}}}),e._v(" "),n("i",{directives:[{name:"show",rawName:"v-show",value:e.userNameVal.length>0,expression:"userNameVal.length > 0"}],staticClass:"icon-loginCancel",on:{click:function(t){e.userLoginCancelClear()}}}),e._v(" "),n("p",{directives:[{name:"show",rawName:"v-show",value:e.userNameError.length>0,expression:" userNameError.length > 0 "}],staticClass:"error-text icon-errorTips"},[n("span",[e._v(e._s(e.userNameError))])])]),e._v(" "),n("section",{staticClass:"login-input-item"},[n("h3",[n("span",[e._v("密码")])]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.passWord,expression:"passWord"},{name:"validate",rawName:"v-validate",value:"required|passw",expression:"'required|passw'"}],staticClass:"login-input-box",attrs:{type:"password",name:"passWord"},domProps:{value:e.passWord},on:{focus:e.userNameEvent,keyup:function(t){if(!("button"in t)&&13!==t.keyCode)return null;e.submitEvent(t)},input:function(t){t.target.composing||(e.passWord=t.target.value)}}}),e._v(" "),n("i",{directives:[{name:"show",rawName:"v-show",value:e.passWord.length>0,expression:"passWord.length > 0"}],staticClass:"icon-loginCancel",on:{click:e.passWordCancelClear}}),e._v(" "),n("p",{directives:[{name:"show",rawName:"v-show",value:e.passWordError.length>0,expression:"passWordError.length > 0 "}],staticClass:"error-text icon-errorTips"},[n("span",[e._v(e._s(e.passWordError))])])]),e._v(" "),n("button",{staticClass:"login-btn btn-primary",attrs:{id:"user-login-btn"},on:{click:function(t){e.submitEvent()}}},[e._v(e._s(e.loginStr))]),e._v(" "),n("footer",{staticClass:"login-forget-password",attrs:{id:"ev-forget-pwd"}},[n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){e.goToFixPassword()}}},[e._v("忘记密码")])])]),e._v(" "),n("section",{directives:[{name:"show",rawName:"v-show",value:e.validateCodeFlag,expression:"validateCodeFlag"}],staticClass:"login-content",attrs:{id:"ev-validateCode"}},[n("header",{staticClass:"login-title"},[e._v("忘记密码")]),e._v(" "),n("section",{staticClass:"login-input-item",attrs:{"data-path":"1"}},[n("h3",[n("span",[e._v("手机号")])]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.mobile,expression:"mobile"},{name:"validate",rawName:"v-validate",value:"required|mobile",expression:"'required|mobile'"}],staticClass:"login-input-box",attrs:{type:"text",id:"ev-validate-mobile",name:"phone"},domProps:{value:e.mobile},on:{focus:e.mobileEvent,input:function(t){t.target.composing||(e.mobile=t.target.value)}}}),e._v(" "),n("i",{directives:[{name:"show",rawName:"v-show",value:e.mobile.length>0,expression:"mobile.length>0"}],staticClass:"icon-loginCancel",on:{click:e.mobileCancelClear}}),e._v(" "),n("p",{directives:[{name:"show",rawName:"v-show",value:e.phoneError.length>0,expression:"phoneError.length>0"}],staticClass:"error-text icon-errorTips",attrs:{id:"ev-validate-mobile-error"}},[n("span",[e._v(e._s(e.phoneError))])])]),e._v(" "),n("section",{staticClass:"login-input-item",attrs:{"data-path":"1",id:"validateCodeBox"}},[n("h3",[n("span",[e._v("验证码")])]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.validateCode,expression:"validateCode"},{name:"validate",rawName:"v-validate",value:"required|num_length:4",expression:"'required|num_length:4'"}],staticClass:"login-input-box login-input-validate-code",attrs:{type:"text",id:"ev-validate-code",name:"validateCode"},domProps:{value:e.validateCode},on:{focus:e.validateCodeEvent,input:function(t){t.target.composing||(e.validateCode=t.target.value)}}}),e._v(" "),n("i",{directives:[{name:"show",rawName:"v-show",value:e.validateCode.length>0,expression:"validateCode.length > 0"}],staticClass:"icon-loginCancel",on:{click:e.validateCodeCancelClear}}),e._v(" "),n("button",{staticClass:"login-send-validate-code btn-primary",class:{send:e.loginSendValidateCodeFlag},attrs:{disabled:e.loginSendValidateCodeFlag},on:{click:function(t){e.sendValidateCode()}}},[e._v("\n            "+e._s(e.loginSendValidateCode)+"\n          ")]),e._v(" "),n("p",{directives:[{name:"show",rawName:"v-show",value:e.validateCodeError.length>0,expression:"validateCodeError.length>0"}],staticClass:"error-text icon-errorTips",attrs:{id:"ev-validate-code-error"}},[n("span",[e._v(e._s(e.validateCodeError))])]),e._v(" "),n("p",{staticClass:"validate-code-tips",class:{show:e.validateCodeTips}},[e._v("获取验证码已超过10次，请明天再试")])]),e._v(" "),n("button",{staticClass:"login-btn btn-primary",attrs:{id:"ev-validate-submit"},on:{click:function(t){e.validateSubmit()}}},[e._v("提交")]),e._v(" "),n("footer",{staticClass:"login-forget-password",attrs:{id:"ev-login"}},[n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){e.goToLogin()}}},[e._v("登录")])])]),e._v(" "),n("section",{directives:[{name:"show",rawName:"v-show",value:e.passwordFlag,expression:"passwordFlag"}],staticClass:"login-content",attrs:{id:"ev-fixPwd"}},[n("header",{staticClass:"login-title"},[e._v("忘记密码")]),e._v(" "),n("section",{staticClass:"login-input-item",attrs:{"data-path":"2"}},[n("h3",[n("span",[e._v("新密码")])]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newPassword,expression:"newPassword"},{name:"validate",rawName:"v-validate",value:"required|passw",expression:"'required|passw'"}],staticClass:"login-input-box",attrs:{type:"password",id:"ev-newpwd",name:"newPassword"},domProps:{value:e.newPassword},on:{focus:e.newPasswordEvent,blur:function(t){e.newPasswordBlur()},input:function(t){t.target.composing||(e.newPassword=t.target.value)}}}),e._v(" "),n("p",{directives:[{name:"show",rawName:"v-show",value:e.newPasswordError.length>0,expression:"newPasswordError.length > 0"}],staticClass:"error-text icon-errorTips",attrs:{id:"ev-newpwd-error"}},[n("span",[e._v(e._s(e.newPasswordError))])])]),e._v(" "),n("section",{staticClass:"login-input-item",attrs:{"data-path":"2"}},[n("h3",[n("span",[e._v("确认密码")])]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newPassword2,expression:"newPassword2"}],staticClass:"login-input-box",attrs:{type:"password",id:"ev-requrire-newpwd",name:"newPassword2"},domProps:{value:e.newPassword2},on:{focus:e.newPasswordEvent2,input:function(t){t.target.composing||(e.newPassword2=t.target.value)}}}),e._v(" "),n("p",{directives:[{name:"show",rawName:"v-show",value:e.newPasswordError2.length>0,expression:"newPasswordError2.length > 0 "}],staticClass:"error-text icon-errorTips",attrs:{id:"ev-requrire-newpwd-error"}},[n("span",[e._v(e._s(e.newPasswordError2))])])]),e._v(" "),n("button",{staticClass:"login-btn btn-primary",attrs:{id:"ev-fix-submit"},on:{click:function(t){e.savePassword()}}},[e._v("保存")])]),e._v(" "),n("section",{directives:[{name:"show",rawName:"v-show",value:e.finishFlag,expression:"finishFlag"}],staticClass:"login-content",attrs:{id:"ev-fix-finish"}},[n("figure",{staticClass:"login-fix-success-img"},[n("img",{attrs:{src:"/static/image/img00/login/login_ modify_finish.png",alt:""}})]),e._v(" "),n("figcaption",{staticClass:"login-fix-success-content"},[n("h4",[n("span",[e._v("成功修改密码，"),n("em",[e._v(e._s(e.successfulSecond))]),e._v("秒后将")]),n("a",{attrs:{id:"ev-goToLogin",href:"javascript:void(0)"},on:{click:function(t){e.autoLogin()}}},[e._v("自动登录")])]),e._v(" "),n("p",[e._v("下次登录请使用新密码")])])])])])])},staticRenderFns:[]}},Nnlo:function(e,t,n){function s(e){n("4ZCj")}var i=n("eEuR")(n("byI0"),n("h9iL"),s,"data-v-5ede82d3",null);e.exports=i.exports},NsuP:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"main-masker jump-box-config-box fast-reply-config on",on:{click:function(e){e.stopPropagation()}}},[n("section",{staticClass:"jump-box-config"},[n("i",{staticClass:"icon-close window-close",on:{click:function(t){e.$store.state.fastReplyConfig=!1}}}),e._v(" "),n("header",{staticClass:"jump-box-config-title"},[e._m(0),e._v(" "),n("button",{staticClass:"jump-box-add-term icon-add-term",on:{click:function(t){e.termShowFlag[-1]=!0}}},[n("span",[e._v("添加分组")])])]),e._v(" "),n("section",{staticClass:"jump-box-term-box",attrs:{id:"ev-fast-reply-box"}},[e.termShowFlag[-1]?n("section",{staticClass:"jump-box-term-add"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.addInputContent,expression:"addInputContent"}],staticClass:"add-input",attrs:{type:"text",placeholder:"请输入疾病部位名称"},domProps:{value:e.addInputContent},on:{input:[function(t){t.target.composing||(e.addInputContent=t.target.value)},function(t){e.contentLimit("term","-1")}]}}),e._v(" "),n("figure",{staticClass:"term-add-button"},[n("button",{class:e.addInputContent?"btn-primary":"btn-border",on:{click:function(t){t.stopPropagation(),e.configCallback("addTerm")}}},[e._v("保存")]),e._v(" "),n("p",{staticClass:"term-add-cancel",on:{click:function(t){t.stopPropagation(),e.termShowFlag[-1]=!1}}},[e._v("取消")])])]):e._e(),e._v(" "),e._l(e.termList,function(t,s){return n("section",{staticClass:"jump-box-term",class:{active:e.termShowFlag[s]},on:{click:function(t){e.termShowFlag[s]=!e.termShowFlag[s]}}},[n("article",{staticClass:"jump-box-term-title"},[n("i",{staticClass:"icon-term-downArrow"}),e._v(" "),n("h3",{directives:[{name:"show",rawName:"v-show",value:!e.termFixFlag[s],expression:"!termFixFlag[index]"}]},[e._v(e._s(t.questionDesc))]),e._v(" "),2==t.questionType?n("figure",{directives:[{name:"show",rawName:"v-show",value:!e.termFixFlag[s],expression:"!termFixFlag[index]"}],staticClass:"jump-box-term-button"},[n("p",{staticClass:"fix",on:{click:function(n){n.stopPropagation(),e.termFixFlag[s]=!0,e.termFixContent[s]=t.questionDesc}}},[e._v("修改")]),e._v(" "),n("p",{staticClass:"del",on:{click:function(t){t.stopPropagation(),e.deleteShowFlag(s)}}},[e._v("删除")]),e._v(" "),n("transition",{attrs:{name:"fadeDown"}},[e.deleteTermShowFlag[s]?n("section",{staticClass:"modal-confirm show"},[n("article",{staticClass:"modal-confirm-content"},[n("p",[e._v("确定删除该分组吗？")]),e._v(" "),n("p",[e._v("删除后该分组的相关问题会一起删除")])]),e._v(" "),n("figure",{staticClass:"modal-confirm-button"},[n("button",{staticClass:"btn-ensure modal-confirm-ensure",on:{click:function(n){n.stopPropagation(),e.deleteCallback("term",t,s)}}},[e._v("确定")]),e._v(" "),n("button",{staticClass:"btn-primary modal-confirm-cancel",on:{click:function(t){t.stopPropagation(),e.deleteTermShowFlag[s]=!1}}},[e._v("取消")])])]):e._e()])],1):e._e(),e._v(" "),e.termFixFlag[s]?n("section",{staticClass:"jump-box-term-add",on:{click:function(e){e.stopPropagation()}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.termFixContent[s],expression:"termFixContent[index]"}],staticClass:"add-input",attrs:{type:"text",placeholder:"请输入分组名称"},domProps:{value:e.termFixContent[s]},on:{input:[function(t){t.target.composing||e.$set(e.termFixContent,s,t.target.value)},function(t){e.contentLimit("term",s)}]}}),e._v(" "),n("figure",{staticClass:"term-add-button"},[n("button",{staticClass:"term-add-save",class:e.termFixContent[s]?"btn-primary":"btn-border",on:{click:function(n){n.stopPropagation(),e.configCallback("fixTerm",t,s)}}},[e._v("保存")]),e._v(" "),n("p",{staticClass:"term-add-cancel",on:{click:function(t){t.stopPropagation(),e.termFixFlag[s]=!1}}},[e._v("取消")])])]):e._e()]),e._v(" "),n("section",{staticClass:"jump-box-member",on:{click:function(e){e.stopPropagation()}}},[n("header",{staticClass:"jump-box-member-title"},[n("span",[e._v("相关问题")]),e._v(" "),n("p",{staticClass:"jump-box-member-add icon-add-question",on:{click:function(t){t.stopPropagation(),e.memberFixFlag[s][-1]=!0}}},[n("span",[e._v("添加问题")])])]),e._v(" "),n("article",{staticClass:"jump-box-member-box"},[e.memberFixFlag[s][-1]?n("section",{staticClass:"jump-box-member-config"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.memberFixContent[s][-1],expression:"memberFixContent[index]['-1']"}],staticClass:"jump-box-member-input",attrs:{type:"text",placeholder:"请输入疾病部位名称"},domProps:{value:e.memberFixContent[s][-1]},on:{input:[function(t){t.target.composing||e.$set(e.memberFixContent[s],"-1",t.target.value)},function(t){e.contentLimit("member",s,"-1")}]}}),e._v(" "),n("figure",{staticClass:"member-add-button"},[n("button",{staticClass:"member-add-save",class:e.memberFixContent[s][-1]?"btn-primary":"btn-border",on:{click:function(n){n.stopPropagation(),e.configCallback("addMember",t,s)}}},[e._v("保存")]),e._v(" "),n("i",{staticClass:"icon-member-add-cancel",on:{click:function(t){t.stopPropagation(),e.memberFixFlag[s][-1]=!1}}})])]):e._e(),e._v(" "),e._l(t.children,function(i,a){return n("article",{key:a,staticClass:"jump-box-member-item"},[n("span",{directives:[{name:"show",rawName:"v-show",value:!e.memberFixFlag[s][a],expression:"!memberFixFlag[index][cIndex]"}]},[e._v(e._s(i.questionDesc))]),e._v(" "),2==i.questionType?n("figure",{directives:[{name:"show",rawName:"v-show",value:!e.memberFixFlag[s][a],expression:"!memberFixFlag[index][cIndex]"}],staticClass:"jump-box-member-item-button"},[n("i",{staticClass:"icon-question-config",on:{click:function(t){t.stopPropagation(),e.memberFixFlag[s][a]=!0,e.memberFixContent[s][a]=i.questionDesc}}}),e._v(" "),n("i",{staticClass:"icon-question-delete",on:{click:function(t){t.stopPropagation(),e.deleteMemberShowSwitch(s,a)}}},[n("transition",{attrs:{name:"fadeDown"}},[e.deleteMemberShowFlag[s][a]?n("section",{staticClass:"modal-confirm show"},[n("article",{staticClass:"modal-confirm-content"},[n("p",[e._v("确定删除该问题吗？")])]),e._v(" "),n("figure",{staticClass:"modal-confirm-button"},[n("button",{staticClass:"btn-ensure modal-confirm-ensure",on:{click:function(n){n.stopPropagation(),e.deleteCallback("member",t,s,i,a)}}},[e._v("确定")]),e._v(" "),n("button",{staticClass:"btn-primary modal-confirm-cancel",on:{click:function(t){t.stopPropagation(),e.deleteMemberShowFlag[s][a]=!1}}},[e._v("取消")])])]):e._e()])],1)]):e._e(),e._v(" "),e.memberFixFlag[s][a]?n("section",{staticClass:"jump-box-member-config"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.memberFixContent[s][a],expression:"memberFixContent[index][cIndex]"}],staticClass:"jump-box-member-input",attrs:{type:"text",placeholder:"请输入快捷提问"},domProps:{value:e.memberFixContent[s][a]},on:{input:[function(t){t.target.composing||e.$set(e.memberFixContent[s],a,t.target.value)},function(t){e.contentLimit("member",s,a)}]}}),e._v(" "),n("figure",{staticClass:"member-add-button"},[n("button",{staticClass:"member-add-save",class:e.memberFixContent[s][a]?"btn-primary":"btn-border",on:{click:function(n){n.stopPropagation(),e.configCallback("fixMember",t,s,i,a)}}},[e._v("保存")]),e._v(" "),n("p",{staticClass:"term-add-cancel icon-member-add-cancel",on:{click:function(t){t.stopPropagation(),e.memberFixFlag[s][a]=!1}}})])]):e._e()])})],2)])])})],2)])])},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",[n("h2",[e._v("编辑快捷提问")])])}]}},O3DM:function(e,t){},ODK2:function(e,t,n){function s(e){n("4yh2")}var i=n("eEuR")(n("2cGP"),n("Abtr"),s,"data-v-4a48eff8",null);e.exports=i.exports},Q9u7:function(e,t,n){function s(e){n("7mAi")}var i=n("eEuR")(n("IDnV"),n("lecS"),s,null,null);e.exports=i.exports},QTzy:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.$store.state.SBIFlag?n("section",{staticClass:"show-big-img show-big-img-masker full-screen"},[n("div",{staticClass:"background-hidden "},[n("div",{staticClass:"rotate-button"}),e._v(" "),n("div",{staticClass:"bigger-button"}),e._v(" "),n("div",{staticClass:"smaller-button"}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:2==e.$store.state.userListStatus.status&&"checkImage"!=e.$store.state.SBIType&&"medicalReport"!=e.$store.state.SBIType&&"diagnoseListImage"!=e.$store.state.SBIType,expression:"$store.state.userListStatus.status == 2 &&$store.state.SBIType != 'checkImage'&& $store.state.SBIType != 'medicalReport'&&$store.state.SBIType != 'diagnoseListImage'"}],staticClass:"download-button"}),e._v(" "),n("div",{staticClass:"gallery-top"},[n("div",{staticClass:"swiper-container topSwiper"},[n("div",{staticClass:"swiper-wrapper"},e._l(e.imgList,function(e){return n("div",{staticClass:"swiper-slide swiper-no-swiping"},[n("img",{attrs:{src:e.url}})])})),e._v(" "),n("div",{staticClass:"swiper-pagination swiper-pagination-white"})]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.imgList.length>1,expression:"imgList.length>1"}],staticClass:"swiper-left-gray"}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.imgList.length>1,expression:"imgList.length>1"}],staticClass:"swiper-right-gray"})]),e._v(" "),n("div",{staticClass:"close",on:{click:function(t){e.close()}}}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.imgList.length>1,expression:"imgList.length>1"}],staticClass:"gallery-thumbs"},[n("div",{staticClass:"swiper-container thumbSwiper"},[n("div",{staticClass:"swiper-wrapper"},e._l(e.imgList,function(e){return n("div",{staticClass:"swiper-slide"},[n("img",{attrs:{src:e.url}})])})),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.imgList.length>6,expression:"imgList.length>6"}],staticClass:"swiper-button-prev",attrs:{slot:"button-prev"},slot:"button-prev"}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.imgList.length>6,expression:"imgList.length>6"}],staticClass:"swiper-button-next",attrs:{slot:"button-next"},slot:"button-next"}),e._v(" "),n("div",{staticClass:"swiper-pagination swiper-pagination-white"})])])])]):e._e()},staticRenderFns:[]}},Qn1U:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var s=n("xY2u"),i=(n.n(s),n("wtEF")),a=n("ogYJ"),o={getTerm:"/call/customer/quick/question/v1/getMapList/"};t.default={name:"fast-reply",data:function(){return{FastReplyList:{},showInnerList:{},nowIndex:0,transformIndex:{i:0,num:0}}},components:{},watch:{"$store.state.fastReplyConfig":function(e){e||this.getFastReplyList()}},methods:{init:function(){this.getFastReplyList()},showConfig:function(){this.$store.state.fastReplyConfig=!0},transformBtn:function(t){var n=this.total,s=this.size;console.log(this.transformIndex.i),"prev"===t?Math.abs(this.transformIndex.i)>0&&(this.transformIndex.i++,this.transformIndex.num+=n/s,e(".jump-tabs-wrapper").css("transform","translateX("+this.transformIndex.num+"px)")):"next"===t&&Math.abs(this.transformIndex.i)<s&&(this.transformIndex.i--,this.transformIndex.num-=n/s,e(".jump-tabs-wrapper").css("transform","translateX("+this.transformIndex.num+"px)"))},getFastReplyList:function(){var e=this;Object(a.a)({url:o.getTerm,method:"POST",data:{sessionCustomerId:e.$store.state.userId,isValid:"1",firstResult:"0",maxResult:"1000",sortType:"2",sortPartIdList:""},done:function(t){if(e.$store.commit("stopLoading"),t.responseObject.responseData){var n=t.responseObject.responseData.dataList;e.FastReplyList=n}setTimeout(function(){e.getTotalSize()},20)}})},getTotalSize:function(){var t=0,n=this.FastReplyList.length;document.querySelectorAll(".jump-tabs-wrapper .tabsItem").forEach(function(e,n){t+=e.offsetWidth}),e(".jump-tabs-wrapper").width(t+30*n+55),this.total=t,this.size=n},tabShow:function(e,t){this.nowIndex=t},clickToSendReply:function(e){i.a.commit("setFastReply",e.questionDesc),i.a.commit("setFastReplyShow",!1),this.$emit("update:controllerInputStatus",parseInt(e.isUpload))}},mounted:function(){this.init()},props:{controllerInputStatus:{type:Number},fastRelyStatus:{type:Boolean}}}}.call(t,n("bXvV"))},RBwM:function(e,t){},RHdS:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",[n("figure",{staticClass:"messageList-item-content"},["1_doctor00001"!=e.message.from?n("figure",{staticClass:"messageList-item-img"},[n("img",{attrs:{src:e.$store.state.currentItem.logoUrl,alt:""}})]):e._e(),e._v(" "),"text"==e.message.type&&"患者已上传检查资料"!==e.message.text&&"患者已上传视诊资料"!==e.message.text?n("figcaption",{staticClass:"messageList-item-text"},["fail"===e.message.status?n("p",{staticClass:"resendTips",on:{click:e.resendMsg}},[e._v("!")]):e._e(),e._v(" "),e._v("\n      "+e._s(e.message.text)+"\n    ")]):e._e(),e._v(" "),"custom"==e.message.type&&"refusePatient"===e.message.content.type?n("figcaption",{staticClass:"messageList-item-text"},["fail"===e.message.status?n("p",{staticClass:"resendTips",on:{click:e.resendMsg}},[e._v("!")]):e._e(),e._v("\n      "+e._s(e.message.content.text)+"\n    ")]):e._e(),e._v(" "),"text"==e.message.type&&"患者已上传检查资料"===e.message.text?n("figcaption",{staticClass:"messageList-item-text"},[e._v("\n      "+e._s(e.message.text+"，点击至")+"\n      "),n("a",{staticClass:"link",attrs:{href:"#"},on:{click:e.goToCheck}},[e._v("“专科检查”")]),e._v("\n      查看\n\n    ")]):e._e(),e._v(" "),"text"==e.message.type&&"患者已上传视诊资料"===e.message.text?n("figcaption",{staticClass:"messageList-item-text"},[e._v("\n      "+e._s(e.message.text+"，点击至")+"\n      "),n("a",{staticClass:"link",attrs:{href:"#"},on:{click:e.goToCheck}},[e._v("“专科检查”")]),e._v("\n      查看。若视频上传中，请稍后再次点击查看。\n    ")]):e._e(),e._v(" "),"1_doctor00001"==e.message.from?n("figure",{staticClass:"messageList-item-img"},[n("div",{staticClass:"messageList-item-nameTop"},[n("p",[e._v(e._s("【分诊医生】"+e.docName))])]),e._v(" "),n("div",{staticClass:"deleteMessage",on:{click:function(t){t.stopPropagation(),e.deleteMsg(t)}}},[e._v("撤回")]),e._v(" "),n("img",{attrs:{src:"/static/image/img00/index/chatting_portrait_system@2x.png",alt:""}})]):e._e()])])},staticRenderFns:[]}},RSOJ:function(e,t){},SWMY:function(e,t,s){var i,a;(function(){function s(e){return!!e.exifdata}function o(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var n=atob(e),s=n.length,i=new ArrayBuffer(s),a=new Uint8Array(i),o=0;o<s;o++)a[o]=n.charCodeAt(o);return i}function r(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=function(e){200!=this.status&&0!==this.status||t(this.response)},n.send()}function c(e,t){function n(n){var s=l(n);e.exifdata=s||{};var i=u(n);if(e.iptcdata=i||{},S.isXmpEnabled){var a=y(n);e.xmpdata=a||{}}t&&t.call(e)}if(e.src)if(/^data\:/i.test(e.src)){var s=o(e.src);n(s)}else if(/^blob\:/i.test(e.src)){var i=new FileReader;i.onload=function(e){n(e.target.result)},r(e.src,function(e){i.readAsArrayBuffer(e)})}else{var a=new XMLHttpRequest;a.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";n(a.response),a=null},a.open("GET",e.src,!0),a.responseType="arraybuffer",a.send(null)}else if(self.FileReader&&(e instanceof self.Blob||e instanceof self.File)){var i=new FileReader;i.onload=function(e){_&&console.log("Got file of length "+e.target.result.byteLength),n(e.target.result)},i.readAsArrayBuffer(e)}}function l(e){var t=new DataView(e);if(_&&console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return _&&console.log("Not a valid JPEG"),!1;for(var n,s=2,i=e.byteLength;s<i;){if(255!=t.getUint8(s))return _&&console.log("Not a valid marker at offset "+s+", found: "+t.getUint8(s)),!1;if(n=t.getUint8(s+1),_&&console.log(n),225==n)return _&&console.log("Found 0xFFE1 marker"),v(t,s+4,t.getUint16(s+2));s+=2+t.getUint16(s+2)}}function u(e){var t=new DataView(e);if(_&&console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return _&&console.log("Not a valid JPEG"),!1;for(var n=2,s=e.byteLength;n<s;){if(function(e,t){return 56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5)}(t,n)){var i=t.getUint8(n+7);i%2!=0&&(i+=1),0===i&&(i=4);return d(e,n+8+i,t.getUint16(n+6+i))}n++}}function d(e,t,n){for(var s,i,a,o,r=new DataView(e),c={},l=t;l<t+n;)28===r.getUint8(l)&&2===r.getUint8(l+1)&&(o=r.getUint8(l+2))in M&&(a=r.getInt16(l+3),a+5,i=M[o],s=h(r,l+5,a),c.hasOwnProperty(i)?c[i]instanceof Array?c[i].push(s):c[i]=[c[i],s]:c[i]=s),l++;return c}function p(e,t,n,s,i){var a,o,r,c=e.getUint16(n,!i),l={};for(r=0;r<c;r++)a=n+12*r+2,o=s[e.getUint16(a,!i)],!o&&_&&console.log("Unknown tag: "+e.getUint16(a,!i)),l[o]=m(e,a,t,n,i);return l}function m(e,t,n,s,i){var a,o,r,c,l,u,d=e.getUint16(t+2,!i),p=e.getUint32(t+4,!i),m=e.getUint32(t+8,!i)+n;switch(d){case 1:case 7:if(1==p)return e.getUint8(t+8,!i);for(a=p>4?m:t+8,o=[],c=0;c<p;c++)o[c]=e.getUint8(a+c);return o;case 2:return a=p>4?m:t+8,h(e,a,p-1);case 3:if(1==p)return e.getUint16(t+8,!i);for(a=p>2?m:t+8,o=[],c=0;c<p;c++)o[c]=e.getUint16(a+2*c,!i);return o;case 4:if(1==p)return e.getUint32(t+8,!i);for(o=[],c=0;c<p;c++)o[c]=e.getUint32(m+4*c,!i);return o;case 5:if(1==p)return l=e.getUint32(m,!i),u=e.getUint32(m+4,!i),r=new Number(l/u),r.numerator=l,r.denominator=u,r;for(o=[],c=0;c<p;c++)l=e.getUint32(m+8*c,!i),u=e.getUint32(m+4+8*c,!i),o[c]=new Number(l/u),o[c].numerator=l,o[c].denominator=u;return o;case 9:if(1==p)return e.getInt32(t+8,!i);for(o=[],c=0;c<p;c++)o[c]=e.getInt32(m+4*c,!i);return o;case 10:if(1==p)return e.getInt32(m,!i)/e.getInt32(m+4,!i);for(o=[],c=0;c<p;c++)o[c]=e.getInt32(m+8*c,!i)/e.getInt32(m+4+8*c,!i);return o}}function f(e,t,n){var s=e.getUint16(t,!n);return e.getUint32(t+2+12*s,!n)}function g(e,t,n,s){var i=f(e,t+n,s);if(!i)return{};if(i>e.byteLength)return{};var a=p(e,t,t+i,k,s);if(a.Compression)switch(a.Compression){case 6:if(a.JpegIFOffset&&a.JpegIFByteCount){var o=t+a.JpegIFOffset,r=a.JpegIFByteCount;a.blob=new Blob([new Uint8Array(e.buffer,o,r)],{type:"image/jpeg"})}break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",a.Compression)}else 2==a.PhotometricInterpretation&&console.log("Thumbnail image format is RGB, which is not implemented.");return a}function h(e,t,s){var i="";for(n=t;n<t+s;n++)i+=String.fromCharCode(e.getUint8(n));return i}function v(e,t){if("Exif"!=h(e,t,4))return _&&console.log("Not valid EXIF data! "+h(e,t,4)),!1;var n,s,i,a,o,r=t+6;if(18761==e.getUint16(r))n=!1;else{if(19789!=e.getUint16(r))return _&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;n=!0}if(42!=e.getUint16(r+2,!n))return _&&console.log("Not valid TIFF data! (no 0x002A)"),!1;var c=e.getUint32(r+4,!n);if(c<8)return _&&console.log("Not valid TIFF data! (First offset less than 8)",e.getUint32(r+4,!n)),!1;if(s=p(e,r,r+c,C,n),s.ExifIFDPointer){a=p(e,r,r+s.ExifIFDPointer,x,n);for(i in a){switch(i){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":a[i]=T[i][a[i]];break;case"ExifVersion":case"FlashpixVersion":a[i]=String.fromCharCode(a[i][0],a[i][1],a[i][2],a[i][3]);break;case"ComponentsConfiguration":a[i]=T.Components[a[i][0]]+T.Components[a[i][1]]+T.Components[a[i][2]]+T.Components[a[i][3]]}s[i]=a[i]}}if(s.GPSInfoIFDPointer){o=p(e,r,r+s.GPSInfoIFDPointer,I,n);for(i in o){switch(i){case"GPSVersionID":o[i]=o[i][0]+"."+o[i][1]+"."+o[i][2]+"."+o[i][3]}s[i]=o[i]}}return s.thumbnail=g(e,r,c,n),s}function y(e){if("DOMParser"in self){var t=new DataView(e);if(_&&console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return _&&console.log("Not a valid JPEG"),!1;for(var n=2,s=e.byteLength,i=new DOMParser;n<s-4;){if("http"==h(t,n,4)){var a=n-1,o=t.getUint16(n-2)-1,r=h(t,a,o),c=r.indexOf("xmpmeta>")+8;r=r.substring(r.indexOf("<x:xmpmeta"),c);var l=r.indexOf("x:xmpmeta")+10;r=r.slice(0,l)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+r.slice(l);return w(i.parseFromString(r,"text/xml"))}n++}}}function b(e){var t={};if(1==e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(var n=0;n<e.attributes.length;n++){var s=e.attributes.item(n);t["@attributes"][s.nodeName]=s.nodeValue}}}else if(3==e.nodeType)return e.nodeValue;if(e.hasChildNodes())for(var i=0;i<e.childNodes.length;i++){var a=e.childNodes.item(i),o=a.nodeName;if(null==t[o])t[o]=b(a);else{if(null==t[o].push){var r=t[o];t[o]=[],t[o].push(r)}t[o].push(b(a))}}return t}function w(e){try{var t={};if(e.children.length>0)for(var n=0;n<e.children.length;n++){var s=e.children.item(n),i=s.attributes;for(var a in i){var o=i[a],r=o.nodeName,c=o.nodeValue;void 0!==r&&(t[r]=c)}var l=s.nodeName;if(void 0===t[l])t[l]=b(s);else{if(void 0===t[l].push){var u=t[l];t[l]=[],t[l].push(u)}t[l].push(b(s))}}else t=e.textContent;return t}catch(e){console.log(e.message)}}var _=!1,S=function(e){return e instanceof S?e:this instanceof S?void(this.EXIFwrapped=e):new S(e)};void 0!==e&&e.exports&&(t=e.exports=S),t.EXIF=S;var x=S.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},C=S.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},I=S.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},k=S.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},T=S.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}},M={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};S.enableXmp=function(){S.isXmpEnabled=!0},S.disableXmp=function(){S.isXmpEnabled=!1},S.getData=function(e,t){return!((self.Image&&e instanceof self.Image||self.HTMLImageElement&&e instanceof self.HTMLImageElement)&&!e.complete)&&(s(e)?t&&t.call(e):c(e,t),!0)},S.getTag=function(e,t){if(s(e))return e.exifdata[t]},S.getIptcTag=function(e,t){if(s(e))return e.iptcdata[t]},S.getAllTags=function(e){if(!s(e))return{};var t,n=e.exifdata,i={};for(t in n)n.hasOwnProperty(t)&&(i[t]=n[t]);return i},S.getAllIptcTags=function(e){if(!s(e))return{};var t,n=e.iptcdata,i={};for(t in n)n.hasOwnProperty(t)&&(i[t]=n[t]);return i},S.pretty=function(e){if(!s(e))return"";var t,n=e.exifdata,i="";for(t in n)n.hasOwnProperty(t)&&("object"==typeof n[t]?n[t]instanceof Number?i+=t+" : "+n[t]+" ["+n[t].numerator+"/"+n[t].denominator+"]\r\n":i+=t+" : ["+n[t].length+" values]\r\n":i+=t+" : "+n[t]+"\r\n");return i},S.readFromBinaryFile=function(e){return l(e)},i=[],void 0!==(a=function(){return S}.apply(t,i))&&(e.exports=a)}).call(this)},SuBp:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticStyle:{height:"100%"}},[n("header",{staticClass:"messageList-targetName"},[n("h3",[e._v("与患者"),n("span",[e._v(e._s(e.$store.state.patientName))]),e._v("对话")])]),e._v(" "),n("section",{staticClass:"messageList"},[n("article",{ref:"messageBox",staticClass:"messageList-box",class:{waitingBoxStyle:e.$store.state.inputReadOnly}},[e.$store.state.currentItem.returnReason?n("p",{staticClass:"time-stamp"},[e._v("\n                "+e._s(e.$store.state.currentItem.createTime.substring(0,e.$store.state.currentItem.createTime.length-2)))]):e._e(),e._v(" "),e.$store.state.currentItem.returnReason?n("p",{staticClass:"time-stamp"},[e._v("\n                "+e._s("由于"+e.$store.state.currentItem.returnReason+"，该患者被"+(e.$store.state.currentItem.doctorName?e.$store.state.currentItem.doctorName+"医生":"")+"退回")+"\n            ")]):e._e(),e._v(" "),n("transition-group",{attrs:{name:"fadeDown",tag:"article"}},e._l(e.communicationList,function(t,s){return e.messageFilter(t)?n("article",{key:s,staticClass:"messageList-item",class:["1_doctor00001"==t.from?"my-message":"others-message"]},["custom"!==t.type||!t.custom||"33"!==t.custom.mType&&"22"!==t.custom.mType?n("p",{staticClass:"time-stamp"},[e._v("\n                        "+e._s(e._f("transformMessageTime")(t.time)))]):e._e(),e._v(" "),"text"===t.type?n("ContentElement",{attrs:{message:t},on:{deleteMsg:function(n){e.deleteMsg(t)}}}):e._e(),e._v(" "),"custom"===t.type&&"refusePatient"===t.content.type?n("ContentElement",{attrs:{message:t},on:{deleteMsg:function(n){e.deleteMsg(t)}}}):e._e(),e._v(" "),"image"===t.type||"file"===t.type&&e.getFileType(t.file)?n("ImageElement",{attrs:{message:t,nim:e.nim,imageList:e.imageList},on:{deleteMsg:function(n){e.deleteMsg(t)}}}):e._e(),e._v(" "),"custom"===t.type&&"multipleImage"===t.content.type?n("multiple-Image",{attrs:{message:t,nim:e.nim},on:{deleteMsg:function(n){e.deleteMsg(t)}}}):e._e(),e._v(" "),"video"===t.type?n("videoElement",{attrs:{message:t,nim:e.nim},on:{deleteMsg:function(n){e.deleteMsg(t)}}}):e._e(),e._v(" "),"file"!==t.type||e.getFileType(t.file)?e._e():n("fileElement",{attrs:{message:t,nim:e.nim},on:{deleteMsg:function(n){e.deleteMsg(t)}}}),e._v(" "),"custom"===t.type&&t.content&&"checkSuggestion"===t.content.type?n("CheckSuggestion",{attrs:{message:t},on:{deleteMsg:function(n){e.deleteMsg(t)}}}):e._e(),e._v(" "),e.medicalReport(t)?n("MedicalReport",{ref:"medicalReport",refInFor:!0,attrs:{message:t}}):e._e(),e._v(" "),"custom"===t.type&&t.content&&"videoTriage"===t.content.type?n("VideoTriage",{attrs:{message:t},on:{deleteMsg:function(n){e.deleteMsg(t)}}}):e._e(),e._v(" "),"custom"===t.type&&t.content&&"previewSuggestion"===t.content.type?n("PreviewSuggestion",{attrs:{message:t},on:{deleteMsg:function(n){e.deleteMsg(t)}}}):e._e(),e._v(" "),"custom"===t.type&&t.content&&"triageSendTips"===t.content.type?n("UpdateTips",{attrs:{showType:"image"===t.content.data.actionType?"imageTriage":"videoTriage"}}):e._e(),e._v(" "),"custom"===t.type&&t.content&&"checkSuggestSendTips"===t.content.type?n("UpdateTips",{attrs:{showType:"checkSuggestSendTips"}}):e._e(),e._v(" "),"custom"===t.type&&"deleteMsgTips"===t.content.type?n("section",{staticClass:"deleteMessage"},[n("span",{directives:[{name:"show",rawName:"v-show",value:"1_doctor00001"===t.content.data.deleteMsg.from,expression:"items.content.data.deleteMsg.from ==='1_doctor00001'"}]},[e._v(e._s(t.content.data.doctorName?t.content.data.doctorName:"您")+"撤回了一条消息！")]),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:e.ShowFlagDeleteTips(t),expression:"ShowFlagDeleteTips(items)"}]},[e._v(e._s(t.content.data.from)+"撤回了一条消息！")])]):e._e(),e._v(" "),"custom"===t.type&&"triagePatientTips"===t.content.type?n("section",{staticClass:"deleteMessage"},["triage"===t.content.scene?n("span",[e._v("分诊医生“"+e._s(t.content.name)+"”接诊")]):e._e(),e._v(" "),"release"===t.content.scene?n("span",[e._v("分诊医生“"+e._s(t.content.name)+"”退诊")]):e._e()]):e._e(),e._v(" "),"custom"===t.type&&"overtimeTip"===t.content.type?n("section",{staticClass:"deleteMessage"},[n("span",[e._v(e._s((JSON.parse(t.custom).docName?JSON.parse(t.custom).docName:"某某")+"医生超时未接诊"))])]):e._e(),e._v(" "),"custom"===t.type&&"chatOvertimeTip"===t.content.type?n("section",{staticClass:"deleteMessage"},[n("span",[e._v(e._s((JSON.parse(t.custom).docName?JSON.parse(t.custom).docName:"某某")+"医生接诊后超时未回复"))])]):e._e(),e._v(" "),"custom"===t.type&&"notification"===t.content.type&&3==t.content.data.actionType?n("section",{staticClass:"deleteMessage"},[n("span",[e._v(e._s("由于"+(JSON.parse(t.custom).reason?JSON.parse(t.custom).reason:"XX")+"，该患者被"+(JSON.parse(t.custom).docName?JSON.parse(t.custom).docName:"某某")+"医生退回"))])]):e._e(),e._v(" "),"custom"===t.type&&"notification"===t.content.type&&5==t.content.data.actionType?n("section",{staticClass:"deleteMessage"},[n("span",[e._v(e._s((JSON.parse(t.custom).docName?JSON.parse(t.custom).docName:"某某")+"医生接诊"))])]):e._e()],1):e._e()}))],1)]),e._v(" "),e.percentage>0?n("div",{staticClass:"percentage popup"},[n("figure",{staticClass:"middle-tip-box-text"},[n("p",{staticClass:"popup-text"},[e._v(" "+e._s(e.percentage+"%"))])])]):e._e()])},staticRenderFns:[]}},"T//y":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("3SZ7"),i=n.n(s),a=n("xY2u"),o=n.n(a),r=n("ogYJ"),c=n("sMg7"),l=n.n(c);t.default={name:"header",data:function(){return{isActive:!1,confirmShow:!1,isActiveMessage:"在线",searchStatus:!0,enableSearch:!0,searchContent:"",globeSortFlag:!1}},watch:{"$store.state.searchStatus":function(){this.searchStatus=this.$store.state.searchStatus},"$store.state.enableSearch":function(){this.enableSearch=this.$store.state.enableSearch}},methods:{init:function(){this.getUserStatus(),this.getBaseMessage(),this.globeClick(),this.getStateSetting()},searchPatient:function(e){var t=this;clearTimeout(this.time),this.time=setTimeout(function(){t.searchContent.length>20?t.searchContent.substring(0,20):0===t.searchContent.length&&t.$emit("searchCallback",""),13==e.keyCode&&t.$emit("searchCallback",t.searchContent)},300)},clickToSearch:function(){this.$emit("searchCallback",this.searchContent)},active:function(){this.isActive=!this.isActive},changeStatus:function(){"休息"==this.isActiveMessage?(this.isActiveMessage="在线",this.isActive=!1,this.toggleStatus()):(this.isActiveMessage="休息",this.isActive=!1,this.toggleStatus())},getUserStatus:function(){var e=this,t={customerId:e.$store.state.userId,firstResult:"0",maxResult:"9999",isValid:"1"};o()({method:"post",url:"/call/customer/status/v1/getMapById/",data:t,responseType:"json",transformRequest:[function(e){return e="paramJson="+i()(e)}],before:function(){}}).then(function(t){if(t.data.responseObject.responseData){var n=t.data.responseObject.responseData.dataList;if(n&&n.length)for(var s=0;s<n.length;s++)switch(n[s].status){case"0":e.isActiveMessage="在线";break;case"1":e.isActiveMessage="休息"}}})},toggleStatus:function(){var e="";e="在线"==this.isActiveMessage?0:1;var t={customerId:that.$store.state.userId,status:e};o()({method:"post",url:"/call/customer/status/v1/update/",data:t,responseType:"json",transformRequest:[function(e){return e="paramJson="+i()(e)}],before:function(){}}).then(function(e){})},getBaseMessage:function(){var e=this;o()({method:"post",url:"/call/tocure/web/user/getWebUser/",responseType:"json",before:function(){}}).then(function(t){if(document.querySelector(".ev-loading").style.display="none",t.data.responseObject.responseStatus){if(t.data.responseObject.responseMessage){var n=t.data.responseObject.responseMessage;if(e.$store.state.userName=n.nickName,e.$store.state.mobile=n.mobile,e.$store.state.userId=n.uniteUserId,e.$store.state.mailBox=n.email,e.$store.state.sex=n.sex,"setting"===e.$route.name)return;e.$router.push({path:"/"})}}else e.$router.push({path:"/login"})})},refresh:function(){-1!=window.location.href.indexOf("setting")&&(this.$store.commit("enableSearchFn",!0),window.location.origin.includes("triage.allinmed.cn")&&this.$router.push({path:"/"}),window.location.hostname.includes("triage.allinmed.cn")||this.$router.push({path:"/"}))},cancelLogin:function(){this.confirmShow=!1},exitLogin:function(){var e=this;Object(r.a)({url:"/call/tocure/web/user/logout/",method:"POST",done:function(t){window.location.reload(),e.confirmShow=!1}}),localStorage.removeItem("patientAlertList"),localStorage.removeItem("waitingAlertList"),localStorage.removeItem("resetAlertList")},globeClick:function(){var e=this;document.addEventListener("click",function(t){"userlist-status-right"!=t.target.className&&"userlist-status-sortList"!=t.target.className&&(e.globeSortFlag=!1,e.$emit("update:globeSortFlag",e.globeSortFlag))})},getStateSetting:function(){this.$store.commit("setStateSetting",!0)}},components:{confirm:l.a},mounted:function(){this.init()}}},T2X2:function(e,t){},T4ej:function(e,t,n){function s(e){n("ZP0n")}var i=n("eEuR")(n("M0al"),n("W2NF"),s,"data-v-61098fd5",null);e.exports=i.exports},TByV:function(e,t){},TC68:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"popup",data:function(){return{showFlag:!0}},props:{obj:{type:Object}},mounted:function(){var e=this;setTimeout(function(){e.$emit("update:payPopupShow",!1)},2e3)}}},"Tgu+":function(e,t,n){function s(e){n("tzNQ")}var i=n("eEuR")(n("rIed"),n("jPcO"),s,null,null);e.exports=i.exports},UGQC:function(e,t,n){function s(e){n("CGCS")}var i=n("eEuR")(n("LrKk"),n("yByT"),s,"data-v-504fc781",null);e.exports=i.exports},UkDw:function(e,t,n){function s(e){n("O3DM")}var i=n("eEuR")(n("hnyR"),n("NOoP"),s,"data-v-9c3488c8",null);e.exports=i.exports},UpBo:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"jump-box used_reply show",on:{click:function(e){e.stopPropagation()}}},[e._m(0),e._v(" "),n("section",{staticClass:"jump-box-viewers viewInner"},[n("section",{staticClass:"jump-box-viewers-item viewItem",attrs:{"data-role":"fr-tabs-1"}},[n("ul",{staticClass:"jump-box-list",attrs:{id:"ev-used-reply-box"}},e._l(e.replyList,function(t){return n("li",{staticClass:"jump-box-list-item",on:{click:function(n){n.stopPropagation(),e.$store.state.usedReplyContent=e.$store.state.usedReplyContent+t.replyContent,e.$store.state.usedReplyShow=!1}}},[n("span",[e._v(e._s(t.replyContent))])])}))])]),e._v(" "),n("button",{staticClass:"jump-box-config-button icon-fast-reply-config used_reply_config_show",on:{click:function(t){e.$store.state.usedReplyConfig=!0}}},[n("span",[e._v("编辑常用回复")])])])},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"jump-box-header"},[n("h3",[e._v("常用回复")])])}]}},VXoR:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("nav",{staticClass:"userlist-sortType address-selector"},[n("section",{staticClass:"userlist-sortType-item"},[n("section",{staticClass:"custom-selector"},[n("h3",{staticClass:"custom-selector-title firstListTitle",on:{click:function(t){t.stopPropagation(),e.showData()}}},[e._v(e._s(e.showAddress))]),e._v(" "),n("i",{staticClass:"icon-downArrow",on:{click:function(t){t.stopPropagation(),e.showData()}}}),e._v(" "),n("section",{directives:[{name:"show",rawName:"v-show",value:e.conIndex===e.currentIndexNow,expression:"conIndex===currentIndexNow"}],staticClass:"custom-selector-second-box"},[n("ul",{directives:[{name:"show",rawName:"v-show",value:e.provinceFlag,expression:"provinceFlag"}],staticClass:"custom-selector-second firstList J-province"},[n("li",{staticClass:"custom-selector-item secondListTitle",on:{click:function(t){t.stopPropagation(),e.selectProvince()}}},[n("span",[e._v("请选择")])]),e._v(" "),e._l(e.provinceList,function(t){return n("li",{staticClass:"custom-selector-item secondListTitle",on:{click:function(n){n.stopPropagation(),e.selectProvince(t)}}},[n("span",[e._v(e._s(t.regionName))])])})],2),e._v(" "),n("ul",{directives:[{name:"show",rawName:"v-show",value:e.cityFlag,expression:"cityFlag "}],staticClass:"custom-selector-second custom-selector-second-list secondList"},[n("li",{staticClass:"custom-selector-item result-item",on:{click:function(t){t.stopPropagation(),e.selectCity()}}},[n("span",[e._v("未知")])]),e._v(" "),e._l(e.cityList,function(t){return n("li",{staticClass:"custom-selector-item thirdListTitle",on:{click:function(n){n.stopPropagation(),e.selectCity(t)}}},[n("span",[e._v(e._s(t.regionName))])])})],2),e._v(" "),n("ul",{directives:[{name:"show",rawName:"v-show",value:e.districtFlag,expression:"districtFlag "}],staticClass:"custom-selector-second custom-selector-second-list thirdList"},[n("li",{staticClass:"custom-selector-item result-item",on:{click:function(t){t.stopPropagation(),e.selectDistrict()}}},[n("span",[e._v("未知")])]),e._v(" "),e._l(e.districtList,function(t){return n("li",{staticClass:"custom-selector-item thirdListTitle",on:{click:function(n){n.stopPropagation(),e.selectDistrict(t)}}},[n("span",[e._v(e._s(t.regionName))])])})],2)])])])])},staticRenderFns:[]}},W2NF:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"middle-tip-box ev-loading"},[n("section",{staticClass:"middle-tip-modal"},[n("figure",{staticClass:"middle-tip-box-text"},[n("img",{attrs:{src:"/static/image/img00/common/save_complete.png",alt:"loading..."}})])])])}]}},WStQ:function(e,t){},Whfv:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"mainSpeak"}},[n("section",{staticClass:"viewItem medical-record-form-item"},[n("form",{attrs:{action:""}},[n("section",{staticClass:"main-speak medical-record-main"},[n("article",{staticClass:"J-consult"},[n("ul",[n("li",{directives:[{name:"show",rawName:"v-show",value:""!=e.caseMain,expression:"caseMain != ''"}],staticClass:"operation-name"},[n("span",{staticClass:"sick-title"},[e._v("主要症状")]),n("span",{staticClass:"sick-text"},[e._v(e._s(e.caseMain))])]),e._v(" "),n("li",{directives:[{name:"show",rawName:"v-show",value:""!=e.painNature,expression:"painNature != ''"}],staticClass:"operation-expectation-time"},[n("span",{staticClass:"sick-title"},[e._v("疼痛性质")]),n("span",{staticClass:"sick-text"},[e._v(e._s(e.painNature))])]),e._v(" "),n("li",{directives:[{name:"show",rawName:"v-show",value:""!=e.VASLevelL,expression:"VASLevelL != ''"}],staticClass:"operation-expectation-time"},[n("span",{staticClass:"sick-title"},[e._v("VAS评分")]),n("span",{staticClass:"sick-text"},[e._v(e._s(e.VASLevelL))])]),e._v(" "),n("li",{directives:[{name:"show",rawName:"v-show",value:""!=e.caseAlong,expression:"caseAlong != ''"}],staticClass:"operation-expectation-time"},[n("span",{staticClass:"sick-title"},[e._v("其他症状")]),n("span",{staticClass:"sick-text"},[e._v(e._s(e.caseAlong))])])])])])])])])},staticRenderFns:[]}},WmD2:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=(n("KEcs"),n("q/Kx")),i=n("KQop"),a=n.n(i),o=n("2zeX"),r=n.n(o),c={nationSearch:"/call/comm/data/baseinfo/v1/getNationalityList/",getBaseInfo:"/call/customer/patient/baseinfo/v1/getMapList/",saveBaseInfo:"/call/customer/patient/baseinfo/v1/save/"};t.default={name:"baseInfo",data:function(){return{id:"",address:"",telephone:"",socialId:"",socialAddress:"",marriageAge:[],marriageAgeSelectValue:"",nation:[],nationDataSelectValue:"",nationDataSelectName:"",marriageSelectValue:"",nativeAddress:"",homeAddress:"",workplace:"",fertilityBoySelectValue:"",fertilityGirlSelectValue:"",spouseStatusSelectValue:"",childrenStatusSelectValue:"",isSmokeSelectValue:"",isDrinkSelectValue:"",isNarcoticsSelectValue:"",parentStratusSelectValue:"",siblingsStatusSelectValue:"",isInfectionSelectValue:"",isHeredopathiaSelectValue:"",userMessage:{},provinceList:[],cityList:{},addressResult:{provinceId:"",provinceName:"",cityId:"",cityName:"",districtId:"",districtName:""},birthResult:{provinceId:"",provinceName:"",cityId:"",cityName:"",districtId:"",districtName:""},childrenShow:!1,popupShow:!1,popupObj:{},currentSelectorIndex:1}},props:{recordData:{type:Object}},components:{addressSelector:a.a,popup:r.a},mounted:function(){this.init()},watch:{"$store.state.currentItem":function(){this.init()}},methods:{init:function(){this.childrenShow=!1,this.userMessage=this.$store.state.currentItem,this.addData()},addData:function(){this.nationGet(),this.baseInfoGet()},nationGet:function(){var e=this,t={isValid:1,firstResult:0,maxResult:999};s.a.ajax({url:c.nationSearch,method:"POST",data:t,beforeSend:function(e){},done:function(t){if(t.responseObject.responseData.dataList&&1==t.responseObject.responseStatus){var n=t.responseObject.responseData.dataList,s={firstResult:0,id:0,ids:{},maxResult:{},nationality:"请选择",page:{},pageSize:{},sortType:0};n.unshift(s),e.nation=n}else console.log("无数据！")},fail:function(e){console.log("请求失败："+e)}})},baseInfoGet:function(){var e=this,t={isValid:"1",firstResult:"0",maxResult:"1",patientId:e.userMessage.patientId};s.a.ajax({url:c.getBaseInfo,method:"POST",data:t,beforeSend:function(e){},done:function(t){if(t.responseObject.responseData.dataList&&1==t.responseObject.responseStatus){var n=t.responseObject.responseData.dataList[0];switch(e.id=n.id,e.address=n.province+" "+n.city+" "+n.district,e.telephone=n.mobile,n.socialId){case"0":e.socialId={value:0,text:"无"};break;case"1":e.socialId={value:1,text:"城镇职工"};break;case"2":e.socialId={value:2,text:"城镇居民"};break;case"3":e.socialId={value:2,text:"新农合"};break;case"4":this.socialId={value:2,text:"商业保险"};break;default:e.socialId={value:n.socialId,text:"无"}}if(e.nationDataSelectValue=n.nation?"未填写"==n.nation?"请选择":n.nation:"请选择",e.marriageSelectValue=n.isMarriage>0?n.isMarriage:"",e.addressResult.provinceId=n.nativeProvinceId,e.addressResult.provinceName=n.nativeProvince,e.addressResult.cityId=n.nativeCityId,e.addressResult.cityName=n.nativeCity,e.addressResult.districtId=n.nativeDistrictId,e.addressResult.districtName=n.nativeDistrict,e.birthResult.provinceId=n.birthplaceProvinceId,e.birthResult.provinceName=n.birthplaceProvince,e.birthResult.cityId=n.birthplaceCityId,e.birthResult.cityName=n.birthplaceCity,e.birthResult.districtId=n.birthplaceDistrictId,e.birthResult.districtName=n.birthplaceDistrict,n.socialProvince?e.socialAddress=n.socialProvince+" "+n.socialCity+" "+n.socialDistrict:e.socialAddress="未填写",e.homeAddress=n.homeAddress,e.workplace=n.workplace,n.fertility.length>0){var s=n.fertility.split(",");e.fertilityBoySelectValue=s[0],e.fertilityGirlSelectValue=s[1]}else e.fertilityBoySelectValue="",e.fertilityGirlSelectValue="";""!=n.spouseStatus&&n.spouseStatus>0?e.spouseStatusSelectValue=n.spouseStatus:e.spouseStatusSelectValue=0,""!=n.childrenStatus&&n.childrenStatus>0?e.childrenStatusSelectValue=n.childrenStatus:e.childrenStatusSelectValue=0,e.marriageAge=[],e.marriageAge.push({value:"",text:"请选择"});for(var i=15;i<=60;i++)e.marriageAge.push({value:i,text:i});""!=n.marriageAge&&n.marriageAge>0?e.marriageAgeSelectValue=n.marriageAge:e.marriageAgeSelectValue="",""!=n.isSmoke&&n.isSmoke>0?e.isSmokeSelectValue=n.isSmoke:e.isSmokeSelectValue=0,""!=n.isDrink&&n.isDrink>0?e.isDrinkSelectValue=n.isDrink:e.isDrinkSelectValue=0,""!=n.isNarcotics&&n.isNarcotics>0?e.isNarcoticsSelectValue=n.isNarcotics:e.isNarcoticsSelectValue=0,""!=n.parentStatus&&n.parentStatus>0?e.parentStratusSelectValue=n.parentStatus:e.parentStratusSelectValue=0,""!=n.siblingsStatus&&n.siblingsStatus>0?e.siblingsStatusSelectValue=n.siblingsStatus:e.siblingsStatusSelectValue=0,""!=n.isInfection&&n.isInfection>0?e.isInfectionSelectValue=n.isInfection:e.isInfectionSelectValue=0,""!=n.isHeredopathia&&n.isHeredopathia>0?e.isHeredopathiaSelectValue=n.isHeredopathia:e.isHeredopathiaSelectValue=0,e.childrenShow=!0}},fail:function(e){console.log("请求失败："+e)}})},saveData:function(){var e=this,t={nativeProvinceId:this.addressResult.provinceId,nativeProvince:this.addressResult.provinceName,nativeCityId:this.addressResult.cityId,nativeCity:this.addressResult.cityName,nativeDistrictId:this.addressResult.districtId,nativeDistrict:this.addressResult.districtName,birthplaceProvinceId:this.birthResult.provinceId,birthplaceProvince:this.birthResult.provinceName,birthplaceCityId:this.birthResult.cityId,birthplaceCity:this.birthResult.cityName,birthplaceDistrictId:this.birthResult.districtId,birthplaceDistrict:this.birthResult.districtName,patientId:this.userMessage.patientId,id:this.id,address:this.address,telephone:this.telephone,socialId:this.socialId.value,socialAddress:this.socialAddress,nation:"请选择"==this.nationDataSelectValue?"未填写":this.nationDataSelectValue,isMarriage:this.marriageSelectValue,homeAddress:this.homeAddress,workplace:this.workplace,spouseStatus:this.spouseStatusSelectValue,childrenStatus:this.childrenStatusSelectValue,fertility:this.fertilityBoySelectValue+","+this.fertilityGirlSelectValue,marriageAge:this.marriageAgeSelectValue,isSmoke:this.isSmokeSelectValue,isDrink:this.isDrinkSelectValue,isNarcotics:this.isNarcoticsSelectValue,parentStatus:this.parentStratusSelectValue,siblingsStatus:this.siblingsStatusSelectValue,isInfection:this.isInfectionSelectValue,isHeredopathia:this.isHeredopathiaSelectValue};s.a.ajax({url:c.saveBaseInfo,method:"POST",data:t,beforeSend:function(e){},done:function(t){e.baseInfoGet(),e.popupShow=!0,e.popupObj={text:"保存成功"}},fail:function(t){e.popupShow=!0,e.popupObj={text:"保存失败"},console.log("请求失败："+t)}})},hiddenSelect:function(){this.currentSelectorIndex=-1,console.log(this.currentSelectorIndex)}}}},Wyiv:function(e,t,n){function s(e){n("lRcp")}var i=n("eEuR")(n("+omm"),n("CVkL"),s,"data-v-1c569a08",null);e.exports=i.exports},XAR9:function(e,t,n){function s(e){n("JGOZ")}var i=n("eEuR")(n("eeEG"),n("jqtm"),s,"data-v-3b575950",null);e.exports=i.exports},XHg1:function(e,t,n){function s(e){n("BTEq")}var i=n("eEuR")(n("6484"),n("QTzy"),s,null,null);e.exports=i.exports},XOGe:function(e,t,n){"use strict";function s(){var e=window.location.host,t=void 0;return"triage9.allinmed.cn"===e?new u.a(function(e,n){Object(U.a)({url:"/call/im/interact/v1/getToken/",method:"POST",data:{firstResult:0,maxResult:1},done:function(n){n.responseObject.responseStatus&&(t=n.responseObject.responseData.accessKey,e(t))}})}):new u.a(function(e,t){e("50c93d2ab7e207fd83231a245c07bfbc")})}Object.defineProperty(t,"__esModule",{value:!0});var i,a=n("WxFH"),o=n.n(a),r=n("fHpZ"),c=n.n(r),l=n("UIuv"),u=n.n(l),d=n("Edqs"),p=n.n(d),m=n("34v0"),f=n.n(m),g=n("3SZ7"),h=n.n(g),v=n("frJU"),y=n.n(v),b=n("KEcs"),w=n("xHOV"),_=n.n(w),S=n("3950"),x=n.n(S),C=n("9FcC"),I=n.n(C),k=n("MPX3"),T=n.n(k),M=n("zAV6"),N=n.n(M),L=n("L8+j"),O=n.n(L),P=n("KC7A"),F=n.n(P),A=n("gsZi"),D=n.n(A),R=n("j8W+"),E=n.n(R),j=n("gT5p"),$=n.n(j),B=n("wtEF"),U=(n("q/Kx"),n("/sA3"),n("ogYJ")),V=n("8L/s"),W=n("/mv4");b.a.filter("transformMessageTime",function(e){var t=function(e){return e>9?e:"0"+e},n=function(e){var n=new Date(e);return{y:n.getFullYear(),m:n.getMonth()+1,dd:n.getDate(),h:n.getHours(),mm:t(n.getMinutes())}},s="",i=(new Date).getTime();return n(e).y+"-"+n(e).m+"-"+n(e).dd==n(i).y+"-"+n(i).m+"-"+n(i).dd?s=n(e).h+":"+n(e).mm:n(e).y===n(i).y?s=n(e).m+"月"+n(e).dd+"日  "+n(e).h+":"+n(e).mm:n(e).y!==n(i).y&&(s=n(e).y+"年"+n(e).m+"月"+n(e).dd+"日  "+n(e).h+":"+n(e).mm),s});t.default={data:function(){return{communicationList:[],messageBox:"",userData:{account:"1_doctor00001",token:"AllinDoctor00001"},targetData:{account:""},getMessageType:"history",historyBeginTime:0,medicalReportImgList:[],ShowBigImgList:[],diagnosisId:"",diagnosisShow:!1,connectFlag:!1,allGet:!1,percentage:0,imageList:[]}},components:{MedicalReport:O.a,ContentElement:_.a,ImageElement:x.a,videoElement:I.a,fileElement:T.a,multipleImage:N.a,PreviewSuggestion:F.a,VideoTriage:D.a,CheckSuggestion:E.a,UpdateTips:$.a},props:{},watch:{"$store.state.sendPreviewSuggestionFlag":function(e){e.flag&&(this.sendPreviewSuggestion(e.data),B.a.commit("previewSuggestionSender",{flag:!1,data:{}}))},"$store.state.sendCheckSuggestionFlag":function(e){e.flag&&(this.sendCheckSuggestion(e.data),B.a.commit("checkSuggestionSender",{flag:!1,data:{}}))},"$store.state.triagePatientCaseIdFlag":function(e){var t=this,n=this;e.flag&&(this.$store.commit("startLoading"),setTimeout(function(){t.nim.sendCustomMsg({scene:"p2p",to:t.targetData.account,content:h()({name:t.$store.state.userName,scene:"triage",type:"triagePatientTips"}),custom:h()({cType:"0",cId:t.$store.state.userId,mType:"42",docName:t.$store.state.userName}),done:function(e,t){e||n.sendSingleMessage(e,t)}}),B.a.commit("setTriagePatientCaseIdFlag",{caseId:"",flag:!1})},500))},"$store.state.releasePatientCaseIdFlag":function(e){var t=this;e.flag&&(this.nim.sendCustomMsg({scene:"p2p",to:"0_"+e.caseId,content:h()({name:this.$store.state.userName,scene:"release",type:"triagePatientTips"}),custom:h()({cType:"0",cId:this.$store.state.userId,mType:"42",docName:this.$store.state.userName}),done:function(e,n){t.$store.commit("startLoading"),e||t.sendSingleMessage(e,n)}}),B.a.commit("setReleasePatientCaseIdFlag",{caseId:"",flag:!1}))},"$store.state.sendFileFlag":function(e){var t=this;e.flag&&(t.sendFile(e),B.a.commit("setSendFileFlag",{flag:!1,data:{},name:"",type:""}))},"$store.state.sendVideoTriageFlag":function(e){console.log(e),e.flag&&(this.sendVideoTriage(e.data),B.a.commit("videoTriageSender",{flag:!1,data:{}}),B.a.commit("setFastReply",""),B.a.commit("setUesdReply",""),B.a.commit("clearTraigeContent"))},"$store.state.caseId":function(e){if(!e)return void(this.targetData={account:"0_"+e});this.targetData={account:"0_"+e},this.historyBeginTime=0,this.allGet=!1,this.getMessageType="history",this.getMessageList()},"$store.state.refuseReason":function(e){e.flag&&(this.sendRefusePatient(e.data),B.a.commit("setRefuseReason",{flag:!1,text:{}}))},connectFlag:function(e){e&&(this.targetData={account:"0_"+this.$store.state.caseId},this.getMessageType="history",this.getMessageList())},"$store.state.resendMsgInfo":function(e){this.resendMsg(e)},"$store.state.deleteMsgInfo":function(e){this.deleteMsg(e)}},computed:f()({},Object(W.b)(["currentItem","userId","patientList","waitingList","resetList"])),mounted:function(){this.init()},methods:(i={init:function(){var e=this,t=this;t.connectFlag=!1,this.initScroll(),s().then(function(n){e.nim=y.a.getInstance({appKey:n,account:t.userData.account,token:t.userData.token,onconnect:function(e){console.log("连接成功")},onmyinfo:function(e){},onwillreconnect:function(e){console.log("已重连"+e.retryCount+"次，"+e.duration+"后将重连...")},ondisconnect:function(e){if(console.log("丢失连接"),console.log(e),e)switch(e){case 302:console.log("账号或密码错误，请转到登录页面并提示错误");break;case 417:console.log("重复登录，已经在其他端登录了，请跳转到登录页并提示错误");break;case"kicked":console.log("被踢，请提示错误后跳转到登录页面")}},onerror:function(e){console.log(e)},onroamingmsgs:function(e){},onofflinemsgs:function(){},onmsg:function(e){if(t.getMessageType="",console.log(e),e.from.includes("0_")&&t.targetData.account===e.from&&(t.currentItem.createTime=t.transformMessageTime(e.time)),"custom"===e.type.toLowerCase())if(-1!=JSON.parse(e.content).type.indexOf("new-")){var n=JSON.parse(localStorage.getItem("waitingAlertList"));n||(n={}),n[e.from]=1,localStorage.setItem("waitingAlertList",h()(n)),B.a.commit("waitingListRefreshFlag",!0),B.a.commit("setNewWaiting",!0),B.a.commit("setMusicPlay",!0)}else if("checkSuggestSendTips"==JSON.parse(e.content).type){t.patientList.forEach(function(n,s){"0_"+n.caseId==e.from&&(n.consultationState="6",t.$store.commit("setConsultationState","6"))}),t.waitingList.forEach(function(n,s){"0_"+n.caseId==e.from&&(n.consultationState="6",t.$store.commit("setConsultationState","6"))});var s=t.resetList;s.forEach(function(n,s){"0_"+n.caseId==e.from&&(n.consultationState="6",t.$store.commit("setConsultationState","6"))})}else if("notification"==JSON.parse(e.content).type&&"5"==JSON.parse(e.content).data.actionType){t.patientList.forEach(function(n,s){"0_"+n.caseId==e.to&&(n.consultationState="1",t.$store.commit("setConsultationState","1"))}),t.waitingList.forEach(function(n,s){"0_"+n.caseId==e.to&&(n.consultationState="1",t.$store.commit("setConsultationState","1"))});var i=t.resetList;i.forEach(function(n,s){"0_"+n.caseId==e.to&&(n.consultationState="1",t.$store.commit("setConsultationState","1"))})}else if("notification"==JSON.parse(e.content).type&&"3"==JSON.parse(e.content).data.actionType){t.patientList.forEach(function(n,s){"0_"+n.caseId==e.to&&(n.consultationState="2",t.$store.commit("setConsultationState","2"))}),t.waitingList.forEach(function(n,s){"0_"+n.caseId==e.to&&(n.consultationState="2",t.$store.commit("setConsultationState","2"))});var a=t.resetList;a.forEach(function(n,s){"0_"+n.caseId==e.to&&(n.consultationState="2",t.$store.commit("setConsultationState","2"))})}else if("overtimeTip"==JSON.parse(e.content).type){t.patientList.forEach(function(n,s){"0_"+n.caseId==e.to&&(n.consultationState="3",t.$store.commit("setConsultationState","3"))}),t.waitingList.forEach(function(n,s){"0_"+n.caseId==e.to&&(n.consultationState="3",t.$store.commit("setConsultationState","3"))});var o=t.resetList;o.forEach(function(n,s){"0_"+n.caseId==e.to&&(n.consultationState="3",t.$store.commit("setConsultationState","3"))})}t.receiveMessage(t.targetData.account,e),"image"===e.type&&(console.log(e),t.imageList.push(e))}})})},loadCallback:function(e){var t=this;e.scrollFlag?console.log(4):(e?e.scrollFlag||setTimeout(function(){t.$refs.messageBox.scrollTop=t.$refs.messageBox.scrollHeight},120):setTimeout(function(){t.$refs.messageBox.scrollTop=t.$refs.messageBox.scrollHeight},120),p()(e,{scrollFlag:!0}))},medicalReport:function(e){var t=this,n=!0;return"custom"===e.type&&e.content&&"medicalReport"===e.content.type?setTimeout(function(){n=0===t.$refs.medicalReport.length},20):n=!1,n},messageFilter:function(e){var t=!1;return e&&(t="text"===e.type||(!e.content||"reTriageTip"!==e.content.type&&"new-health"!==e.content.type&&"payFinishTips"!==e.content.type)),t},sendMessage:function(e){var t=this,n=this;return!!n.$store.state.beingSend&&new u.a(function(s,i){n.$store.commit("setSendStatus",!1),t.nim.sendText({scene:"p2p",to:n.targetData.account,text:e,custom:h()({cType:"0",cId:n.$store.state.userId,mType:"0",docName:n.$store.state.userName}),done:function(e,t){n.$store.commit("setSendStatus",!0),e?(y.a.getInstance(),i(t)):(s(t),n.sendSingleMessage(e,t))}})})},sendRefusePatient:function(e){var t=this,n=this;if(!n.$store.state.beingSend)return!1;new u.a(function(s,i){n.$store.commit("setSendStatus",!1),t.nim.sendCustomMsg({scene:"p2p",to:n.targetData.account,custom:h()({cType:"0",cId:n.$store.state.userId,mType:"43",docName:n.$store.state.userName}),content:h()({text:e,type:"refusePatient"}),done:function(e,t){n.$store.commit("setSendStatus",!0),n.$store.commit("startLoading"),e?(y.a.getInstance(),i(t)):(s(t),n.sendSingleMessage(e,t))}})}).then(function(){Object(V.a)({customerId:n.userId,consultationId:n.currentItem.consultationId,consultationState:7}).then(function(e){console.log("7"),n.$store.commit("waitingListRefreshFlag",!0),n.$store.commit("onlineListRefresh",!0),n.$store.commit("resetListRefreshFlag",!0),n.$store.commit("setRefuseUserListFlag",!0)})})},sendSingleMessage:function(e,t){this.$store.commit("startLoading");var n=this.patientList;n.removeByValue(this.$store.state.currentItem),n.unshift(this.$store.state.currentItem),this.$store.commit("setPatientList",n),this.$store.state.currentItem.lastUpdateTime=this.transformMessageTime(t.time),B.a.commit("setPatientActiveIndex",this.$store.state.patientActiveIndex+1);var s=this;console.log("发送"+t.scene+" "+t.type+"消息"+(e?"失败":"成功")+", id="+t.idClient),e||(s.controllerInput="",s.mine(t),s.loadCallback(t)),this.$store.commit("stopLoading")},sendCheckSuggestion:function(e){var t=this;return new u.a(function(n,s){t.nim.sendCustomMsg({scene:"p2p",to:t.targetData.account,content:h()({data:e,type:"checkSuggestion"}),custom:h()({cType:"0",cId:t.$store.state.userId,mType:"35",docName:t.$store.state.userName}),done:function(e,i){e?s(i):(t.sendSingleMessage(e,i),n(i))}})})},sendPreviewSuggestion:function(e){var t=this,n=this,s=[{}];return new u.a(function(i,a){s[0]=e,console.log(s),t.nim.sendCustomMsg({scene:"p2p",to:n.targetData.account,content:h()({data:s,type:"previewSuggestion"}),custom:h()({cType:"0",cId:n.$store.state.userId,mType:"36",docName:n.$store.state.userName}),done:function(e,t){e?a(t):(n.sendSingleMessage(e,t),i(t))}})})},sendVideoTriage:function(e){var t=this,n="";1==e.type?n=2:2==e.type&&(n=1),this.nim.sendCustomMsg({scene:"p2p",to:t.targetData.account,content:h()({data:{content:e.content,type:n},type:"videoTriage"}),custom:h()({cType:"0",cId:t.$store.state.userId,mType:"34",docName:t.$store.state.userName}),done:function(e,n){t.sendSingleMessage(e,n)}})},sendFile:function(e){var t=this;B.a.commit("startLoading");var n=[];c()(e.data).forEach(function(e,s){n.push(new u.a(function(n,s){t.nim.previewFile({type:e.type,dataURL:e.data,uploadprogress:function(e){t.percentage=parseInt(e.percentage),console.log(t.percentage),"100"==e.percentage&&setTimeout(function(){t.percentage=""},300)},done:function(t,s){console.log("上传"+e.type+(t?"失败":"成功")),t||(e.file=s,n(e))}})}))}),u.a.all(n).then(function(e){e.forEach(function(e,n){var s=0;"file"===e.type?(e.file.name=e.name,s=6):"video"===e.type?(e.file.name=e.name,s=3):s=1;var i=t.nim.sendFile({scene:"p2p",to:t.targetData.account,custom:h()({cType:"0",cId:t.$store.state.userId,mType:s,name:e.name,docName:t.$store.state.userName}),file:e.file,type:e.type,done:function(e,n){B.a.commit("stopLoading"),t.sendSingleMessage(e,n)}});console.log("正在发送p2p "+e.type+"消息, id="+i.idClient)})})},resendMsg:function(e){var t=this,n=this;return new u.a(function(s,i){t.nim.resendMsg({msg:e,done:function(e,t){e?i(t):(s(t),console.log(t),data.content&&(data.content=JSON.parse(data.content)),n.communicationList[idClient]=data,console.log("重新发送成功"))}})})},deleteMsg:function(e){var t=this,n=this;return!this.$store.state.isDeleteMsg||e.custom&&JSON.parse(e.custom).cId!==n.$store.state.userId?(n.$store.commit("showPopup",{text:"您无权撤回此消息！"}),!1):new u.a(function(s,i){console.log("正在撤回消息",e),t.nim.deleteMsg({msg:e,done:function(t){t?(console.log("撤回失败....."),i(t,e)):(console.log("撤回消息成功....."),n.communicationList.removeByValue(e),s(e))}})}).then(function(e){return console.log(e),new u.a(function(t,s){n.nim.sendCustomMsg({scene:"p2p",to:n.targetData.account,custom:h()({cType:"0",cId:n.$store.state.userId,mType:"37",idClient:e.idClient}),content:h()({type:"deleteMsgTips",data:{from:"分诊医生",doctorName:n.$store.state.userName,deleteMsg:e||{}}}),done:function(e,i){"custom"===i.type&&(i.content=JSON.parse(i.content)),console.log(i),n.communicationList.push(i),e?s(e,i):t(e,i)}})})}).catch(function(e,t){console.log(e),508===parseInt(e.code)&&n.$store.commit("showPopup",{text:"您只能撤回"+n.$store.state.deleteMsgTime+"分钟内的消息"})})},ShowFlagDeleteTips:function(e){var t=this,n=!1;if("1_doctor00001"!==e.content.data.deleteMsg.from){n=!0;var s=e.content.data.deleteMsg.idClient;this.communicationList.forEach(function(e,i){if(e.idClient===s)return t.communicationList.removeByValue(e),n})}return n},initScroll:function(){var e=this;this.$refs.messageBox.addEventListener("mousewheel",function(t){if(!e.allGet){var n=t.wheelDelta;clearTimeout(e._scrollTimeout),e.getMessageType="scrollInit",e._scrollTimeout=setTimeout(function(){n>0&&e.$refs.messageBox.scrollTop<20&&e.getMessageList()},200)}})},getMessageList:function(){var e=this;"history"===this.getMessageType&&(e.communicationList=[]),this.imageList=[],"0_"!=this.targetData.account&&this.nim.getHistoryMsgs({scene:"p2p",to:e.targetData.account,beginTime:0,endTime:e.historyBeginTime,done:function(t,n){console.log(n),0===n.msgs.length?"scrollInit"===e.getMessageType&&(e.allGet=!0,e.getMessageType=!1):e.renderHistoryMessage(e.targetData.account,t,n),t&&y.a.getInstance()},limit:20})},newMessageTips:function(e,t){console.log(t);var n=this,s=this.patientList;s.forEach(function(e,i){if("0_"+e.caseId==t.from){var a={},o="0_"+e.caseId;"custom"==t.type&&"deleteMsgTips"==JSON.parse(t.content).type?(void 0===e.messageAlert||""==e.messageAlert?e.messageAlert="":parseInt(e.messageAlert)>0&&(e.messageAlert=parseInt(e.messageAlert)-1),a[o]=e.messageAlert):(void 0===e.messageAlert||""==e.messageAlert?e.messageAlert="1":e.messageAlert=parseInt(e.messageAlert)+1,a[o]=e.messageAlert,s.removeByValue(e),s.unshift(e)),localStorage.getItem("patientAlertList")?localStorage.setItem("patientAlertList",h()(p()(JSON.parse(localStorage.getItem("patientAlertList")),a))):localStorage.setItem("patientAlertList",h()(a)),n.$store.commit("setNewOnline",!0)}}),this.$store.commit("setPatientList",s);var i=this.waitingList;i.forEach(function(e,s){var a={},o="0_"+e.caseId;"0_"+e.caseId==t.from&&("custom"==t.type&&"deleteMsgTips"==JSON.parse(t.content).type?(void 0===e.messageAlert||""==e.messageAlert?e.messageAlert="":parseInt(e.messageAlert)>0&&(e.messageAlert=parseInt(e.messageAlert)-1),a[o]=e.messageAlert):(void 0===e.messageAlert||""==e.messageAlert?e.messageAlert="1":e.messageAlert=parseInt(e.messageAlert)+1,a[o]=e.messageAlert,i.removeByValue(e),i.unshift(e)),localStorage.getItem("waitingAlertList")?localStorage.setItem("waitingAlertList",h()(p()(JSON.parse(localStorage.getItem("waitingAlertList")),a))):localStorage.setItem("waitingAlertList",h()(a)),n.$store.commit("setNewWaiting",!0))}),this.$store.commit("setWaitingList",i);var a=this.resetList;a.forEach(function(e,s){if("0_"+e.caseId==t.from){var i={},o="0_"+e.caseId;"custom"==t.type&&"deleteMsgTips"==JSON.parse(t.content).type?(void 0===e.messageAlert||""==e.messageAlert?e.messageAlert="":parseInt(e.messageAlert)>0&&(e.messageAlert=parseInt(e.messageAlert)-1),i[o]=e.messageAlert):(void 0===e.messageAlert||""==e.messageAlert?e.messageAlert="1":e.messageAlert=parseInt(e.messageAlert)+1,i[o]=e.messageAlert,a.removeByValue(e),a.unshift(e)),localStorage.getItem("resetAlertList")?localStorage.setItem("resetAlertList",h()(p()(JSON.parse(localStorage.getItem("resetAlertList")),i))):localStorage.setItem("resetAlertList",h()(i)),n.$store.commit("setNewReset",!0)}})},getImageList:function(){var e=this;this.communicationList.forEach(function(t,n){"image"===t.type&&e.imageList.push(t)})},receiveMessage:function(e,t,n){t.from.includes("0_")&&e===t.from||t.to.includes("0_")&&e===t.to?("custom"===t.type&&(t.content=JSON.parse(t.content)),"scrollInit"===this.getMessageType?this.communicationList.unshift(t):"history"===this.getMessageType?(this.loadCallback(t),this.communicationList.unshift(t)):(this.loadCallback(t),this.communicationList.push(t))):this.newMessageTips(e,t)},renderHistoryMessage:function(e,t,n){var s=this;if(!t){for(var i={},a=0;a<n.msgs.length;a++){var o={dataList:[]};a==n.msgs.length-1&&(s.historyBeginTime=n.msgs[a].time),n.msgs[a].data=o,n.msgs[a].timeFlag=!1,0==a?(i=n.msgs[0],n.msgs[0].timeFlag=!0):(n.msgs[a].time-i.time)/3e5>1&&(i=n.msgs[a].time,n.msgs[a].timeFlag=!0),s.receiveMessage(e,n.msgs[a])}"scrollInit"===this.getMessageType&&(s.$store.commit("startLoading"),s.$store.commit("stopLoading")),s.getImageList()}},transformMessageTime:function(e){var t=function(e){return e>9?e:"0"+e},n=function(e){var n=new Date(e);return{y:n.getFullYear(),m:n.getMonth()+1,dd:n.getDate(),h:n.getHours(),mm:t(n.getMinutes())}},s="",i=(new Date).getTime();return n(e).y+"-"+n(e).m+"-"+n(e).dd==n(i).y+"-"+n(i).m+"-"+n(i).dd?s=n(e).h+":"+n(e).mm:n(e).y===n(i).y?s=n(e).m+"月"+n(e).dd+"日  "+n(e).h+":"+n(e).mm:n(e).y!==n(i).y&&(s=n(e).y+"年"+n(e).m+"月"+n(e).dd+"日  "+n(e).h+":"+n(e).mm),s}},o()(i,"transformMessageTime",function(e){var t=function(e){return e>9?e:"0"+e},n=function(e){var n=new Date(e);return{y:n.getFullYear(),m:n.getMonth()+1,dd:n.getDate(),h:n.getHours(),mm:t(n.getMinutes())}},s="",i=(new Date).getTime();return n(e).y+"-"+n(e).m+"-"+n(e).dd==n(i).y+"-"+n(i).m+"-"+n(i).dd?s=n(e).h+":"+n(e).mm:n(e).y===n(i).y?s=n(e).m+"月"+n(e).dd+"日  "+n(e).h+":"+n(e).mm:n(e).y!==n(i).y&&(s=n(e).y+"年"+n(e).m+"月"+n(e).dd+"日  "+n(e).h+":"+n(e).mm),s}),o()(i,"showBigImgFunction",function(){this.$store.commit("setSBIFlag",!0)}),o()(i,"mine",function(e){e.content&&(e.content=JSON.parse(e.content)),this.communicationList.push(e)}),o()(i,"showNext",function(e,t){"FirstIndex"==e?this.FirstIndex==t?(this.FirstIndex=-1,this.SecondIndex=-1,this.ThirdIndex=-1,this.FourIndex=-1):(this.FirstIndex=t,this.SecondIndex=-1,this.ThirdIndex=-1,this.FourIndex=-1):"SecondIndex"==e?this.SecondIndex==t?(this.SecondIndex=-1,this.ThirdIndex=-1,this.FourIndex=-1):(this.SecondIndex=t,this.ThirdIndex=-1,this.FourIndex=-1):"ThirdIndex"==e?this.ThirdIndex==t?(this.ThirdIndex=-1,this.FourIndex=-1):(this.ThirdIndex=t,this.FourIndex=-1):"FourIndex"==e&&(this.FourIndex==t?this.FourIndex=-1:this.FourIndex=t)}),o()(i,"getFileType",function(e){return!!/(gif|jpg|jpeg|png|GIF|JPG|PNG)$/.test(e.ext)}),o()(i,"showDate",function(e){console.log(e)}),i)}},"YMs+":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("q/Kx");t.default={name:"address-selector",data:function(){return{addressSearch:"/call/comm/data/baseinfo/v1/getRegionList/",provinceList:[],provinceFlag:!1,cityList:{},cityFlag:!1,districtList:{},districtFlag:!1,showAddress:"请选择",dataBack:{provinceId:"",provinceName:"",cityId:"",cityName:"",districtId:"",districtName:""}}},props:{dataListInfo:{type:Object},conIndex:{type:Number},currentIndexNow:{type:Number||String,default:-1}},methods:{init:function(){""==this.dataListInfo.provinceName||(this.showAddress=this.dataListInfo.provinceName+"-"+this.dataListInfo.cityName+"-"+this.dataListInfo.districtName)},showProvince:function(){var e=this,t={isValid:1,firstResult:0,maxResult:9999,treeLevel:2};s.a.ajax({url:e.addressSearch,method:"POST",data:t,beforeSend:function(e){},done:function(t){void 0!=t&&""!=t&&0!=t.responseObject.responseStatus&&(e.provinceList=t.responseObject.responseData.dataList)},fail:function(e){console.log("请求失败："+e)}})},showCity:function(e){var t=this,n={isValid:1,firstResult:0,maxResult:9999,treeLevel:3,parentId:e.regionId};s.a.ajax({url:t.addressSearch,method:"POST",data:n,beforeSend:function(e){},done:function(e){if(e.responseObject.responseData.dataList&&0!=e.responseObject.responseStatus){var n=e.responseObject.responseData.dataList;t.cityList=n}},fail:function(e){console.log("请求失败："+e)}})},showDistrict:function(e){var t=this,n={isValid:1,firstResult:0,maxResult:9999,treeLevel:4,parentId:e.regionId};s.a.ajax({url:t.addressSearch,method:"POST",data:n,beforeSend:function(e){},done:function(e){if(e.responseObject.responseData.dataList&&0!=e.responseObject.responseStatus){var n=e.responseObject.responseData.dataList;t.districtList=n}},fail:function(e){console.log("请求失败："+e)}})},showData:function(){this.$emit("update:currentIndexNow",this.conIndex),0===this.provinceList.length&&this.showProvince(),this.provinceFlag=!this.provinceFlag,this.cityFlag=!1,this.districtFlag=!1},selectProvince:function(e){e?(this.showAddress=e.regionName,this.dataBack.provinceId=e.regionId,this.dataBack.provinceName=e.regionName,this.showCity(e),this.cityFlag=!0,this.districtFlag=!1):(this.showAddress="请选择",this.dataBack.provinceId="",this.dataBack.provinceName="",this.dataBack.cityId="",this.dataBack.cityName="",this.dataBack.districtId="",this.dataBack.districtName="",this.$emit("update:dataBack",this.dataBack),this.provinceFlag=!1,this.cityFlag=!1,this.districtFlag=!1)},selectCity:function(e){e?(this.dataBack.cityId=e.regionId,this.dataBack.cityName=e.regionName,this.showAddress=this.dataBack.provinceName+"-"+e.regionName,this.districtFlag=!0,this.showDistrict(e)):(this.dataBack.cityId=0,this.dataBack.cityName="未知",this.showAddress=this.dataBack.provinceName+"-未知",this.provinceFlag=!1,this.cityFlag=!1,this.districtFlag=!1,this.$emit("update:dataBack",this.dataBack))},selectDistrict:function(e){e?(this.showAddress=this.showAddress+"-"+e.regionName,this.dataBack.districtId=e.regionId,this.dataBack.districtName=e.regionName):(this.showAddress=this.showAddress+"-未知",this.dataBack.districtId=0,this.dataBack.districtName="未知"),this.provinceFlag=!1,this.cityFlag=!1,this.districtFlag=!1,this.$emit("update:dataBack",this.dataBack)}},mounted:function(){console.log(this.provinceList),this.init()}}},YaEn:function(e,t,n){"use strict";var s=n("KEcs"),i=n("dNqC"),a=n("/oTv"),o=n("UkDw"),r=n.n(o),c=n("L2H5"),l=n.n(c),u=n("IEd6"),d=n.n(u),p=n("fXYc"),m=n.n(p),f=n("Cw3A"),g=n.n(f),h=n("Wyiv"),v=n.n(h),y=n("UGQC"),b=n.n(y),w=n("F03L"),_=n.n(w),S=n("xXdY"),x=n.n(S);s.a.use(i.a),s.a.use(a.a),t.a=new i.a({routes:[{path:"/",redirect:"/home"},{path:"/login",name:"login",component:r.a},{path:"/home",name:"home",component:l.a,children:[{name:"mainSpeak",path:"/home/mainSpeak/",component:m.a},{name:"baseInfo",path:"/home/baseInfo/",component:d.a},{name:"nowSick",path:"/home/nowSick/",component:g.a},{name:"oldSick",path:"/home/oldSick/",component:v.a},{name:"checkBody",path:"/home/checkBody/",component:b.a},{name:"majorCheck",path:"/home/majorCheck/",component:_.a}]},{path:"/setting",name:"setting",component:x.a}],linkActiveClass:"active",history:"true",hashbang:!1})},ZAAc:function(e,t,n){function s(e){n("ZJgT")}var i=n("eEuR")(n("MEC0"),n("ZUSs"),s,"data-v-aacf00e4",null);e.exports=i.exports},ZJgT:function(e,t){},ZP0n:function(e,t){},ZUSs:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.showFlag?n("aside",{staticClass:"medical-record"},[n("header",{directives:[{name:"show",rawName:"v-show",value:!e.$store.state.inputReadOnly,expression:"!$store.state.inputReadOnly"}],staticClass:"medical-record-title-text"},[n("h2",[e._v("病历编辑")])]),e._v(" "),n("section",{staticClass:"medical-record-content"},[n("header",{staticClass:"medical-record-title"},[n("figure",{staticClass:"medical-record-img",on:{click:function(t){e.showCheckHistory()}}},[n("img",{attrs:{src:e.logoUrl,alt:""}})]),e._v(" "),n("figcaption",{staticClass:"medical-record-userdata"},[n("h3",[n("span",{staticClass:"name"},[e._v(e._s(e.name))]),e._v(" "),n("p",[n("i",{staticClass:"icon-sex-female J-sex"},[e._v(e._s(2==e.sex?"女":"男"))]),n("span",{staticClass:"age"},[e._v(e._s(e.age)+"岁")])])]),e._v(" "),e._m(0)])]),e._v(" "),n("section",{staticClass:"medical-record-detail"},[n("header",{staticClass:"tabsInner medical-record-tabs"},[n("router-link",{staticClass:"tabsItem medical-record-tabs-item baseInfo",attrs:{to:{name:"baseInfo",params:{num:e.userMessage}},tag:"figure"}},[e._v("基本信息\n\n                ")]),e._v(" "),n("router-link",{staticClass:"tabsItem medical-record-tabs-item mainSpeak",attrs:{to:{name:"mainSpeak",params:{num:e.userMessage}},tag:"figure"}},[e._v("主诉\n\n                ")]),e._v(" "),n("router-link",{staticClass:"tabsItem medical-record-tabs-item nowSick",attrs:{to:{name:"nowSick",params:{num:e.userMessage}},tag:"figure"}},[e._v("现病史\n\n                ")]),e._v(" "),n("router-link",{staticClass:"tabsItem medical-record-tabs-item oldSick",attrs:{to:{name:"oldSick",params:{num:e.userMessage}},tag:"figure"}},[e._v("既往史\n\n                ")]),e._v(" "),n("router-link",{staticClass:"tabsItem medical-record-tabs-item checkBody",attrs:{to:{name:"checkBody",params:{num:e.userMessage}},tag:"figure"}},[e._v("体格检查\n\n                ")]),e._v(" "),n("router-link",{staticClass:"tabsItem medical-record-tabs-item majorCheck",attrs:{to:{name:"majorCheck",params:{num:e.userMessage}},tag:"figure"}},[e._v("专科检查\n\n                ")])],1),e._v(" "),n("section",{staticClass:"viewInner medical-record-form"},[n("transition",{attrs:{name:"slide-fade"}},[n("router-view",{attrs:{recordData:e.recordData}})],1)],1),e._v(" "),n("remarkRecord")],1)])]):e._e()},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",{staticClass:"medical-record-userdata-item"},[n("span",{staticClass:"category"})])}]}},ZrQl:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"majorCheck viewItem medical-record-form-item",attrs:{"data-role":"mr-record-6"}},[n("form",{attrs:{action:""}},[n("section",{staticClass:"major-check medical-record-main"},[e.caseAttUrl.length>0?n("article",[e._m(0),e._v(" "),n("section",{staticClass:"img-check"},[n("ul",{staticClass:"talkImgMore"},e._l(e.caseAttUrl,function(t,s){return n("li",{directives:[{name:"show",rawName:"v-show",value:e.caseAttUrl.length>0,expression:"caseAttUrl.length > 0"}]},[n("section",[n("img",{attrs:{src:t},on:{click:function(t){e.showBigImgFunction(1,s)}}})])])}))])]):e._e(),e._v(" "),n("article",[e._m(1),e._v(" "),n("section",{staticClass:"video-check"},[n("ul",{staticClass:"video-check-show"},[e._l(e.videoCaseAttUrl,function(t,s){return n("li",{directives:[{name:"show",rawName:"v-show",value:e.videoCaseAttUrl.length>0,expression:"videoCaseAttUrl.length > 0"}]},[n("section",[n("img",{attrs:{src:t},on:{click:function(t){e.showBigImgFunction(2,s)}}}),e._v(" "),n("p",[e._v("患病处照片")])])])}),e._v(" "),e._l(e.videoList,function(t){return n("li",{directives:[{name:"show",rawName:"v-show",value:e.videoList.length>0,expression:"videoList.length > 0"}]},[n("section",[n("img",{attrs:{src:t.caseAttUrl},on:{click:function(n){e.showVideoFunction(t)}}}),e._v(" "),n("p",[e._v("动作视频")])])])})],2),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.visualInspection,expression:"visualInspection"}],ref:"inputLimitController",staticClass:"J-visualInspection J-other",attrs:{type:"text",placeholder:"请填写",maxlength:"1000"},domProps:{value:e.visualInspection},on:{input:function(t){t.target.composing||(e.visualInspection=t.target.value)}}})])]),e._v(" "),n("article",{staticClass:"major-check-video"},[e._m(2),e._v(" "),n("section",[n("ul",[n("li",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.activityState,expression:"activityState"}],ref:"inputLimitController",staticClass:"J-activityState J-other",attrs:{type:"text",placeholder:"请填写",maxlength:"1000"},domProps:{value:e.activityState},on:{input:function(t){t.target.composing||(e.activityState=t.target.value)}}})])])])]),e._v(" "),n("article",[e._m(3),e._v(" "),n("section",[n("ul",[n("li",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.muscleStrength,expression:"muscleStrength"}],ref:"inputLimitController",staticClass:"J-muscleStrength J-other",attrs:{type:"text",placeholder:"请填写",maxlength:"1000"},domProps:{value:e.muscleStrength},on:{input:function(t){t.target.composing||(e.muscleStrength=t.target.value)}}})])])])]),e._v(" "),n("footer",[n("button",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.userListStatus.second&&(6==e.$store.state.currentItem.consultationState||-1==e.$store.state.currentItem.consultationState||0==e.$store.state.currentItem.consultationState||9==e.$store.state.currentItem.consultationState||10==e.$store.state.currentItem.consultationState),expression:"$store.state.userListStatus.second && ($store.state.currentItem.consultationState == 6||$store.state.currentItem.consultationState == -1||$store.state.currentItem.consultationState ==0||$store.state.currentItem.consultationState ==9||$store.state.currentItem.consultationState ==10)"}],staticClass:"detail-saveBtn",attrs:{type:"button"},on:{click:e.saveData}},[e._v("保存")])])])]),e._v(" "),n("transition",{attrs:{name:"fade-scale"}},[e.popupShow?n("popup",{attrs:{obj:e.popupObj,payPopupShow:e.popupShow},on:{"update:obj":function(t){e.popupObj=t},"update:payPopupShow":function(t){e.popupShow=t}}}):e._e()],1)],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",[n("h2",[e._v("检验及诊断结果")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",[n("h2",[e._v("视诊")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",[n("h2",[e._v("活动")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",[n("h2",[e._v("肌力")])])}]}},bx0f:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("3SZ7"),i=n.n(s);t.default={data:function(){return{}},mounted:function(){},computed:{docName:function(){return this.message.custom&&JSON.parse(this.message.custom).docName?JSON.parse(this.message.custom).docName:this.$store.state.userName}},methods:{goToCheck:function(){this.$router.push({path:"/home/majorCheck/",params:{num:i()(this.$store.state.currentItem)}})},resendMsg:function(){this.$store.commit("setResendMsgInfo",this.message)},deleteMsg:function(){this.$emit("deleteMsg")}},props:{message:{type:Object}}}},byI0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("j2h9"),i=n.n(s),a=n("q/Kx"),o={refuseReasonList:"/call/comm/data/refuse/v1/getList/"};t.default={name:"refuse",data:function(){return{refuseList:[],nowIndex:-1,fixFlag:{"-1":!1},refuseReason:""}},mounted:function(){this.init()},methods:{init:function(){var e=this,t={refuseType:1,siteId:18,isValid:1};a.a.ajax({url:o.refuseReasonList,method:"POST",data:t,done:function(t){if(t.responseObject){var n=[];t.responseObject.forEach(function(e,t){n.push(i()({flag:!0,refuseContent:e.refuseContent}))}),e.$store.commit("setRefuseList",n)}e.refuseList=e.$store.state.refuseList},fail:function(t){console.log("请求失败："+t),e.refuseList=e.$store.state.refuseList}})},selectReason:function(e,t){this.nowIndex=t,this.refuseReason=e.refuseContent},close:function(){this.$store.commit("setRefuseFlag",!1)},updateEvent:function(e){this.$set(this.fixFlag,e,!0)},save:function(e,t){e.text.length>0&&(this.$store.commit("refuseList",this.refuseList),this.$set(this.fixFlag,t,!1))},send:function(){this.refuseReason&&(this.$store.commit("setRefuseReason",{flag:!0,data:"分诊医生"+this.$store.state.userName+"拒绝分诊，拒绝理由:"+this.refuseReason}),this.$store.commit("setRefuseFlag",!1))},remove:function(){this.refuseReason="",this.nowIndex=-1}}}},"c/1B":function(e,t){},cHcu:function(e,t){},cuUM:function(e,t){},dv6L:function(e,t,n){function s(e){n("gIz6")}var i=n("eEuR")(n("Qn1U"),n("2BH2"),s,null,null);e.exports=i.exports},e1G8:function(e,t,n){var s,i,a;/*!
 Autosize 3.0.20
 license: MIT
 http://www.jacklmoore.com/autosize
 */
!function(n,o){i=[t,e],s=o,void 0!==(a="function"==typeof s?s.apply(t,i):s)&&(e.exports=a)}(0,function(e,t){"use strict";function n(e){function t(t){var n=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=n,e.style.overflowY=t}function n(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}function s(){var t=e.style.height,s=n(e),i=document.documentElement&&document.documentElement.scrollTop;e.style.height="auto";var a=e.scrollHeight+r;if(0===e.scrollHeight)return void(e.style.height=t);e.style.height=a+"px",c=e.clientWidth,s.forEach(function(e){e.node.scrollTop=e.scrollTop}),i&&(document.documentElement.scrollTop=i)}function i(){s();var n=Math.round(parseFloat(e.style.height)),i=window.getComputedStyle(e,null),a=Math.round(parseFloat(i.height));if(a!==n?"visible"!==i.overflowY&&(t("visible"),s(),a=Math.round(parseFloat(window.getComputedStyle(e,null).height))):"hidden"!==i.overflowY&&(t("hidden"),s(),a=Math.round(parseFloat(window.getComputedStyle(e,null).height))),l!==a){l=a;var r=o("autosize:resized");try{e.dispatchEvent(r)}catch(e){}}}if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!a.has(e)){var r=null,c=e.clientWidth,l=null,u=function(){e.clientWidth!==c&&i()},d=function(t){window.removeEventListener("resize",u,!1),e.removeEventListener("input",i,!1),e.removeEventListener("keyup",i,!1),e.removeEventListener("autosize:destroy",d,!1),e.removeEventListener("autosize:update",i,!1),Object.keys(t).forEach(function(n){e.style[n]=t[n]}),a.delete(e)}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",d,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",i,!1),window.addEventListener("resize",u,!1),e.addEventListener("input",i,!1),e.addEventListener("autosize:update",i,!1),e.style.overflowX="hidden",e.style.wordWrap="break-word",a.set(e,{destroy:d,update:i}),function(){var t=window.getComputedStyle(e,null);"vertical"===t.resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="none"),r="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),isNaN(r)&&(r=0),i()}()}}function s(e){var t=a.get(e);t&&t.destroy()}function i(e){var t=a.get(e);t&&t.update()}var a="function"==typeof Map?new Map:function(){var e=[],t=[];return{has:function(t){return e.indexOf(t)>-1},get:function(n){return t[e.indexOf(n)]},set:function(n,s){-1===e.indexOf(n)&&(e.push(n),t.push(s))},delete:function(n){var s=e.indexOf(n);s>-1&&(e.splice(s,1),t.splice(s,1))}}}(),o=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(e){o=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}var r=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?(r=function(e){return e},r.destroy=function(e){return e},r.update=function(e){return e}):(r=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return n(e)}),e},r.destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],s),e},r.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],i),e}),t.exports=r})},"eW+r":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"modal-confirm show doctorReceive"},[n("article",{staticClass:"modal-confirm-content"},[n("p",[e._v(e._s(e.confirmContent))])]),e._v(" "),n("figure",{staticClass:"modal-confirm-button"},[n("button",{staticClass:"btn-ensure modal-confirm-ensure",on:{click:e.ensure}},[e._v("确定")])])])},staticRenderFns:[]}},eeEG:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("q/Kx");n("KEcs").a.filter("messageFilter",function(e){return 2==e.platformId?"手外-"+e.tagName:e.tagName}),t.default={name:"search-sorType-item",data:function(){return{dataShow:!1,iconFlagDownDown:!1,resultData:"",noData:"暂不确定",currentIndex:-1,oldIndex:-1,secondActive:!0,currentIndexChildren:-1}},props:{dataListInfo:{type:Object},conIndex:{type:Number||String},currentIndexNow:{type:Number||String,default:-1},iconFlagDown:{type:Boolean||String}},methods:{init:function(){"疾病"==this.dataListInfo.placeholderText?(this.resultData="暂不确定",this.$emit("update:dataBack",{illnessId:"",illnessName:"暂不确定"})):"程度"==this.dataListInfo.placeholderText&&(this.resultData="暂不需手术",this.$emit("update:dataBack",{progressId:"",progressName:"暂不需手术"})),this.iconFlagDownDown=this.iconFlag},showData:function(){this.$emit("update:currentIndexNow",this.conIndex),this.dataShow=!this.dataShow,this.iconFlagDown=!this.iconFlagDown},selectData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this;n.currentIndex=t,n.secondActive=!0,e.tagName?(this.resultData=e.tagName,n.$emit("update:dataBack",e),this.dataShow=!this.dataShow,this.iconFlagDown=!this.iconFlagDown):e.illnessName?(this.resultData=e.illnessName,n.$emit("update:dataBack",e),this.dataShow=!this.dataShow,this.iconFlagDown=!this.iconFlagDown):e.progressName?(this.resultData=e.progressName,n.$emit("update:dataBack",e),this.dataShow=!this.dataShow,this.iconFlagDown=!this.iconFlagDown):e.operationName?e.children.length>0||(n.resultData=e.operationName,n.$emit("update:dataBack",e),this.dataShow=!this.dataShow,this.iconFlagDown=!this.iconFlagDown):(n.resultData="暂不确定",this.dataShow=!this.dataShow,this.iconFlagDown=!this.iconFlagDown,n.$emit("update:dataBack",{illnessId:"",illnessName:"暂不确定"}))},childrenData:function(e,t){this.oldIndex=this.currentIndex,this.secondActive=!1,this.resultData=e.operationName,this.currentIndexChildren=t,this.dataShow=!this.dataShow,this.iconFlagDown=!this.iconFlagDown,this.$emit("update:dataBack",e)},searchIllness:function(e){var t=this;if(37==e.keCode||38==e.keyCode||39==e.keyCode||40==e.keyCode)return!1;s.a.ajax({url:"/call/comm/data/illness/v1/getMapList/",method:"POST",data:{isValid:1,firstResult:0,maxResult:999,illnessName:"",searchParam:t.resultData,isSolr:1},done:function(e){e.responseObject.responseData.dataList?(t.noData="暂不确定",t.secondActive=!0,t.dataListInfo.dataList=e.responseObject.responseData.dataList):(t.noData="暂无数据",t.secondActive=!1,t.dataListInfo.dataList=[])}})}},watch:{resultData:function(){this.resultData||this.$emit("update:dataBack",{illnessId:"",illnessName:""})}},mounted:function(){this.init()}}},fXYc:function(e,t,n){function s(e){n("knZd")}var i=n("eEuR")(n("0+YV"),n("Whfv"),s,"data-v-2912a260",null);e.exports=i.exports},fYcu:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("transition",{attrs:{name:"fade",appear:""}},[n("div",{staticClass:"main-header",attrs:{id:"header"}},[n("section",{staticClass:"main-header-search"},[n("input",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.enableSearch,expression:"$store.state.enableSearch"},{name:"model",rawName:"v-model",value:e.searchContent,expression:"searchContent"}],staticClass:"main-search",attrs:{type:"text",placeholder:"请输入患者姓名",maxlength:"20"},domProps:{value:e.searchContent},on:{keyup:function(t){e.searchPatient(t)},input:function(t){t.target.composing||(e.searchContent=t.target.value)}}}),e._v(" "),n("i",{directives:[{name:"show",rawName:"v-show",value:this.enableSearch,expression:"this.enableSearch"}],staticClass:"icon-header-search",on:{click:e.clickToSearch}})]),e._v(" "),n("article",{staticClass:"main-header-title",on:{click:function(t){e.refresh()}}},[n("i",{staticClass:"icon-logo"}),e._v(" "),n("h1",[e._v("唯医互联网骨科医院")])]),e._v(" "),n("article",{staticClass:"main-header-base-msg"},[n("article",{staticClass:"main-header-tips"},[e._v("\n                    您好，"),n("span",[e._v(e._s(e.$store.state.userName))]),e._v("医生\n                ")]),e._v(" "),n("ul",{staticClass:"main-header-config"},[n("li",{staticClass:"main-header-config-item"},[n("router-link",{attrs:{to:"/setting",tag:"a"}},[e._v("个人设置")])],1),e._v(" "),n("hr",{staticClass:"main-header-line"}),e._v(" "),n("li",{staticClass:"main-header-config-item",on:{click:function(t){e.confirmShow=!e.confirmShow}}},[e._v("退出")])])])])]),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.confirmShow?n("confirm",{attrs:{comfirmData:{content:"你确定要退出平台吗？"}},on:{ensureCallback:e.exitLogin,cancelCallback:e.cancelLogin}}):e._e()],1)],1)},staticRenderFns:[]}},frEZ:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"fade"}},[e.$store.state.videoFlag?n("section",{staticClass:"show-video show-big-img-masker"},[n("div",{staticClass:"background-hidden"},[n("div",{staticClass:"gallery-top"},[n("div",{staticClass:"swiper-container topSwiper"},[n("div",{staticClass:"swiper-wrapper"},[n("div",{staticClass:"swiper-slide swiper-no-swiping"},[n("div",{staticClass:"swiper-zoom-container"},[n("video",{staticStyle:{width:"100%",height:"100%"},attrs:{controls:"controls",width:"500",height:"300"}},[n("source",{attrs:{src:e.videoList}})])])])]),e._v(" "),n("div",{staticClass:"swiper-pagination swiper-pagination-white"})])]),e._v(" "),n("div",{staticClass:"close",on:{click:function(t){e.close()}}})])]):e._e()])},staticRenderFns:[]}},frJU:function(module,exports,__webpack_require__){!function(e,t){module.exports=t()}(0,function(){return function(e){function t(s){if(n[s])return n[s].exports;var i=n[s]={exports:{},id:s,loaded:!1};return e[s].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";n(46),e.exports=n(100)},function(e,t,n){"use strict";var s=n(11),i=n(16),a=n(32),o=n(24);n(54);var r=n(3),c=n(33),l=c.getGlobal(),u=/\s+/;c.shouldDisplayInstallFlashHint=function(){if("ie"===s.name.toLowerCase()){var e=+s.version||0;return 7===(e=Math.floor(e))&&!i.Transport.flashsocket.check()}return!1},c.deduplicate=function(e){var t=[];return e.forEach(function(e){-1===t.indexOf(e)&&t.push(e)}),t},c.capFirstLetter=function(e){return e?(e=""+e,e.slice(0,1).toUpperCase()+e.slice(1)):""},c.guid=function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return function(){return e()+e()+e()+e()+e()+e()+e()+e()}}(),c.extend=function(e,t,n){for(var s in t)void 0!==e[s]&&!0!==n||(e[s]=t[s])},c.filterObj=function(e,t){var n={};return c.isString(t)&&(t=t.split(u)),t.forEach(function(t){e.hasOwnProperty(t)&&(n[t]=e[t])}),n},c.simpleClone=function(e){return JSON.parse(JSON.stringify(e))},c.copy=function(e,t){return t=t||{},e?(Object.keys(e).forEach(function(n){c.exist(e[n])&&(t[n]=e[n])}),t):t},c.findObjIndexInArray=function(e,t){e=e||[];var n=t.keyPath||"id",s=-1;return e.some(function(e,i){if(o(e,n)===t.value)return s=i,!0}),s},c.findObjInArray=function(e,t){var n=c.findObjIndexInArray(e,t);return-1===n?null:e[n]},c.mergeObjArray=function(){var e=[],t=[].slice.call(arguments,0,-1),n=arguments[arguments.length-1];c.isArray(n)&&(t.push(n),n={});var s=n.keyPath=n.keyPath||"id";for(n.sortPath=n.sortPath||s;!e.length&&t.length;)e=t.shift()||[],e=e.slice(0);var i;return t.forEach(function(t){t&&t.forEach(function(t){i=c.findObjIndexInArray(e,{keyPath:s,value:o(t,s)}),-1!==i?e[i]=c.merge({},e[i],t):e.push(t)})}),n.notSort||(e=c.sortObjArray(e,n)),e},c.cutObjArray=function(e){var t=e.slice(0),n=arguments.length,s=[].slice.call(arguments,1,n-1),i=arguments[n-1];c.isObject(i)||(s.push(i),i={});var a,r=i.keyPath=i.keyPath||"id";return s.forEach(function(e){c.isArray(e)||(e=[e]),e.forEach(function(e){e&&(i.value=o(e,r),-1!==(a=c.findObjIndexInArray(t,i))&&t.splice(a,1))})}),t},c.sortObjArray=function(e,t){t=t||{};var n=t.sortPath||"id";a.insensitive=!!t.insensitive;var s,i,r,l=!!t.desc;return r=c.isFunction(t.compare)?t.compare:function(e,t){return s=o(e,n),i=o(t,n),l?a(i,s):a(s,i)},e.sort(r)},c.emptyFunc=function(){},c.isEmptyFunc=function(e){return e===c.emptyFunc},c.notEmptyFunc=function(e){return e!==c.emptyFunc},c.splice=function(e,t,n){return[].splice.call(e,t,n)},c.onError=function(e){throw new r(e)},c.verifyParamPresent=function(e,t,n){n=n||"";var s=!1;switch(c.typeOf(t)){case"undefined":case"null":s=!0;break;case"string":""===t&&(s=!0);break;case"object":Object.keys(t).length||(s=!0);break;case"array":t.length?t.some(function(e){if(c.notexist(e))return s=!0,!0}):s=!0}s&&c.onParamAbsent(n+e)},c.onParamAbsent=function(e){c.onParamError('缺少参数"'+e+'", 请确保参数不是 空字符串、空对象、空数组、null或undefined, 或者数组的内容不是 null/undefined')},c.verifyParamAbsent=function(e,t,n){n=n||"",void 0!==t&&c.onParamPresent(n+e)},c.onParamPresent=function(e){c.onParamError('多余的参数"'+e+'"')},c.verifyParamType=function(e,t,n){var s=c.typeOf(t).toLowerCase();c.isArray(n)||(n=[n]),n=n.map(function(e){return e.toLowerCase()});var i=!0;switch(-1===n.indexOf(s)&&(i=!1),s){case"number":isNaN(t)&&(i=!1)}i||c.onParamInvalidType(e,n)},c.onParamInvalidType=function(e,t,n){n=n||"",c.isArray(t)?(t=t.map(function(e){return'"'+e+'"'}),t=t.join(", ")):t='"'+t+'"',c.onParamError('参数"'+n+e+'"类型错误, 合法的类型包括: ['+t+"]")},c.verifyParamValid=function(e,t,n){c.isArray(n)||(n=[n]),-1===n.indexOf(t)&&c.onParamInvalidValue(e,n)},c.onParamInvalidValue=function(e,t){c.isArray(t)||(t=[t]),t=t.map(function(e){return'"'+e+'"'}),c.isArray(t)&&(t=t.join(", ")),c.onParamError('参数"'+e+'"值错误, 合法的值包括: ['+t+"]")},c.verifyParamMin=function(e,t,n){t<n&&c.onParamError("参数"+e+"的值不能小于"+n)},c.verifyParamMax=function(e,t,n){t>n&&c.onParamError("参数"+e+"的值不能大于"+n)},c.verifyArrayMax=function(e,t,n){t.length>n&&c.onParamError("参数"+e+"的长度不能大于"+n)},c.verifyEmail=function(){var e=/^\S+@\S+$/;return function(t,n){e.test(n)||c.onParamError("参数"+t+"邮箱格式错误, 合法格式必须包含@符号, @符号前后至少要各有一个字符")}}(),c.verifyTel=function(){var e=/^[+\-\(\)\d]+$/;return function(t,n){e.test(n)||c.onParamError("参数"+t+"电话号码格式错误, 合法字符包括+、-、英文括号和数字")}}(),c.verifyBirth=function(){var e=/^(\d{4})-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])$/;return function(t,n){e.test(n)||c.onParamError("参数"+t+'生日格式错误, 合法为"yyyy-MM-dd"')}}(),c.onParamError=function(e){c.onError(e)},c.verifyOptions=function(e,t,n,s){if(e=e||{},t&&(c.isString(t)&&(t=t.split(u)),c.isArray(t))){n=void 0===n||!!n;var i=n?c.verifyParamPresent:c.verifyParamAbsent;t.forEach(function(t){i.call(c,t,e[t],s)})}return e},c.verifyParamAtLeastPresentOne=function(e,t){if(t&&(c.isString(t)&&(t=t.split(u)),c.isArray(t))){t.some(function(t){return c.exist(e[t])})||c.onParamError("以下参数["+t.join(", ")+"]至少需要传入一个")}},c.verifyParamPresentJustOne=function(e,t){if(t&&(c.isString(t)&&(t=t.split(u)),c.isArray(t))){1!==t.reduce(function(t,n){return c.exist(e[n])&&t++,t},0)&&c.onParamError("以下参数["+t.join(", ")+"]必须且只能传入一个")}},c.verifyBooleanWithDefault=function(e,t,n,s){c.undef(n)&&(n=!0),u.test(t)&&(t=t.split(u)),c.isArray(t)?t.forEach(function(t){c.verifyBooleanWithDefault(e,t,n,s)}):void 0===e[t]?e[t]=n:c.isBoolean(e[t])||c.onParamInvalidType(t,"boolean",s)},c.verifyFileInput=function(e){return c.verifyParamPresent("fileInput",e),c.isString(e)&&((e=document.getElementById(e))||c.onParamError("找不到要上传的文件对应的input, 请检查fileInput id")),e.tagName&&"input"===e.tagName.toLowerCase()&&"file"===e.type.toLowerCase()||c.onParamError("请提供正确的 fileInput, 必须为 file 类型的 input 节点"),e},c.verifyFileType=function(e){c.verifyParamValid("type",e,c.validFileTypes)},c.verifyCallback=function(e,t){u.test(t)&&(t=t.split(u)),c.isArray(t)?t.forEach(function(t){c.verifyCallback(e,t)}):e[t]?c.isFunction(e[t])||c.onParamInvalidType(t,"function"):e[t]=c.emptyFunc},c.verifyFileUploadCallback=function(e){c.verifyCallback(e,"uploadprogress uploaddone uploaderror uploadcancel")},c.validFileTypes=["image","audio","video","file"],c.validFileExts={image:["bmp","gif","jpg","jpeg","jng","png","webp"],audio:["mp3","wav","aac","wma","wmv","amr","mp2","flac","vorbis","ac3"],video:["mp4","rm","rmvb","wmv","avi","mpg","mpeg"]},c.filterFiles=function(e,t){t=t.toLowerCase();var n,s,i,a,o="file"===t,r=[];return[].forEach.call(e,function(e){if(o)r.push(e);else if(n=e.name.slice(e.name.lastIndexOf(".")+1),s=e.type.split("/"),s[0]&&s[1]){i=s[0].toLowerCase(),a=s[1].toLowerCase();(i===t||-1!==c.validFileExts[t].indexOf(n))&&r.push(e)}}),r};var d=c.supportFormData=c.notundef(l.FormData);c.getFileName=function(){return function(e){return e=c.verifyFileInput(e),d?e.files[0].name:e.value.slice(e.value.lastIndexOf("\\")+1)}}(),c.sizeText=function(){var e=["B","KB","MB","GB","TB","PB","EB","ZB","BB"];return function(t){var n,s=0;do{t=Math.floor(100*t)/100;n=t+e[s],t/=1024,s++}while(t>1);return n}}(),c.promises2cmds=function(e){return e.map(function(e){return e.cmd})},c.objs2accounts=function(e){return e.map(function(e){return e.account})},c.teams2ids=function(e){return e.map(function(e){return e.teamId})},c.objs2ids=function(e){return e.map(function(e){return e.id})},c.getMaxUpdateTime=function(e){var t=e.map(function(e){return+e.updateTime});return Math.max.apply(Math,t)},c.genCheckUniqueFunc=function(e,t){var n=[],s={};return e=e||"id",t=t||1e3,function(i){var a;return n.length>=t&&(a=n.shift(),delete s[a]),a=o(i,e),!s[a]&&(s[a]=!0,n.push(a),!0)}},e.exports=c,n(58)},function(e,t,n){(function(t,n){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
	 * @version   4.0.5
	 */
!function(t,s){e.exports=function(){"use strict";function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function i(e){return"function"==typeof e}function a(e){q=e}function o(e){J=e}function r(){return void 0!==H?function(){H(l)}:c()}function c(){var e=setTimeout;return function(){return e(l,1)}}function l(){for(var e=0;e<W;e+=2){(0,Z[e])(Z[e+1]),Z[e]=void 0,Z[e+1]=void 0}W=0}function u(e,t){var n=arguments,s=this,i=new this.constructor(p);void 0===i[ee]&&O(i);var a=s._state;return a?function(){var e=n[a-1];J(function(){return M(a,i,e,s._result)})}():C(s,i,e,t),i}function d(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(p);return w(n,e),n}function p(){}function m(){return new TypeError("You cannot resolve a promise with itself")}function f(){return new TypeError("A promises callback cannot return that same promise.")}function g(e){try{return e.then}catch(e){return ie.error=e,ie}}function h(e,t,n,s){try{e.call(t,n,s)}catch(e){return e}}function v(e,t,n){J(function(e){var s=!1,i=h(n,t,function(n){s||(s=!0,t!==n?w(e,n):S(e,n))},function(t){s||(s=!0,x(e,t))},"Settle: "+(e._label||" unknown promise"));!s&&i&&(s=!0,x(e,i))},e)}function y(e,t){t._state===ne?S(e,t._result):t._state===se?x(e,t._result):C(t,void 0,function(t){return w(e,t)},function(t){return x(e,t)})}function b(e,t,n){t.constructor===e.constructor&&n===u&&t.constructor.resolve===d?y(e,t):n===ie?x(e,ie.error):void 0===n?S(e,t):i(n)?v(e,t,n):S(e,t)}function w(t,n){t===n?x(t,m()):e(n)?b(t,n,g(n)):S(t,n)}function _(e){e._onerror&&e._onerror(e._result),I(e)}function S(e,t){e._state===te&&(e._result=t,e._state=ne,0!==e._subscribers.length&&J(I,e))}function x(e,t){e._state===te&&(e._state=se,e._result=t,J(_,e))}function C(e,t,n,s){var i=e._subscribers,a=i.length;e._onerror=null,i[a]=t,i[a+ne]=n,i[a+se]=s,0===a&&e._state&&J(I,e)}function I(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var s=void 0,i=void 0,a=e._result,o=0;o<t.length;o+=3)s=t[o],i=t[o+n],s?M(n,s,i,a):i(a);e._subscribers.length=0}}function k(){this.error=null}function T(e,t){try{return e(t)}catch(e){return ae.error=e,ae}}function M(e,t,n,s){var a=i(n),o=void 0,r=void 0,c=void 0,l=void 0;if(a){if(o=T(n,s),o===ae?(l=!0,r=o.error,o=null):c=!0,t===o)return void x(t,f())}else o=s,c=!0;t._state!==te||(a&&c?w(t,o):l?x(t,r):e===ne?S(t,o):e===se&&x(t,o))}function N(e,t){try{t(function(t){w(e,t)},function(t){x(e,t)})}catch(e){x(e,e)}}function L(){return oe++}function O(e){e[ee]=oe++,e._state=void 0,e._result=void 0,e._subscribers=[]}function P(e,t){this._instanceConstructor=e,this.promise=new e(p),this.promise[ee]||O(this.promise),V(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?S(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&S(this.promise,this._result))):x(this.promise,F())}function F(){return new Error("Array Methods must be provided an Array")}function A(e){return new P(this,e).promise}function D(e){var t=this;return new t(V(e)?function(n,s){for(var i=e.length,a=0;a<i;a++)t.resolve(e[a]).then(n,s)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function R(e){var t=this,n=new t(p);return x(n,e),n}function E(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function j(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function $(e){this[ee]=L(),this._result=this._state=void 0,this._subscribers=[],p!==e&&("function"!=typeof e&&E(),this instanceof $?N(this,e):j())}function B(){var e=void 0;if(void 0!==n)e=n;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var s=null;try{s=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===s&&!t.cast)return}e.Promise=$}var U=void 0;U=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var V=U,W=0,H=void 0,q=void 0,J=function(e,t){Z[W]=e,Z[W+1]=t,2===(W+=2)&&(q?q(l):Q())},G="undefined"!=typeof window?window:void 0,X=G||{},z=X.MutationObserver||X.WebKitMutationObserver,K="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),Y="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Z=new Array(1e3),Q=void 0;Q=K?function(){return function(){return t.nextTick(l)}}():z?function(){var e=0,t=new z(l),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}():Y?function(){var e=new MessageChannel;return e.port1.onmessage=l,function(){return e.port2.postMessage(0)}}():void 0===G?function(){try{var e=s(71);return H=e.runOnLoop||e.runOnContext,r()}catch(e){return c()}}():c();var ee=Math.random().toString(36).substring(16),te=void 0,ne=1,se=2,ie=new k,ae=new k,oe=0;return P.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===te&&n<e;n++)this._eachEntry(t[n],n)},P.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,s=n.resolve;if(s===d){var i=g(e);if(i===u&&e._state!==te)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===$){var a=new n(p);b(a,e,i),this._willSettleAt(a,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(s(e),t)},P.prototype._settledAt=function(e,t,n){var s=this.promise;s._state===te&&(this._remaining--,e===se?x(s,n):this._result[t]=n),0===this._remaining&&S(s,this._result)},P.prototype._willSettleAt=function(e,t){var n=this;C(e,void 0,function(e){return n._settledAt(ne,t,e)},function(e){return n._settledAt(se,t,e)})},$.all=A,$.race=D,$.resolve=d,$.reject=R,$._setScheduler=a,$._setAsap=o,$._asap=J,$.prototype={constructor:$,then:u,catch:function(e){return this.then(null,e)}},$.polyfill=B,$.Promise=$,$}()}()}).call(t,n(10),function(){return this}())},function(e,t){"use strict";function n(e,t){var n=this;n.message=e,n.code=t,n.time=new Date,n.timetag=+n.time}n.prototype=Object.create(Error.prototype),n.prototype.name="NIMError",n.prototype.appendMessage=function(e){var t=this;t.message?e&&(t.message+="("+e+")"):t.message=e};var s={201:"客户端版本不对, 需升级sdk",302:"用户名或密码错误, 请检查appKey和token是否有效, account和token是否匹配",403:"非法操作或没有权限",404:"对象(用户/群/聊天室)不存在",405:"参数长度过长",408:"客户端请求超时",414:"参数错误",415:"服务不可用/没有聊天室服务器可分配",416:"频率控制",417:"重复操作",422:"帐号被禁用",500:"服务器内部错误",501:"数据库操作失败",503:"服务器繁忙",508:"删除有效期过了",509:"已失效",7101:"被拉黑",801:"群人数达到上限",802:"没有权限",803:"群不存在或未发生变化",804:"用户不在群里面",805:"群类型不匹配",806:"创建群数量达到限制",807:"群成员状态不对",809:"已经在群里",997:"协议已失效",998:"解包错误",999:"打包错误",13002:"聊天室状态异常",13003:"在黑名单中",13004:"在禁言名单中",13006:"聊天室处于整体禁言状态,只有管理员能发言",Connect_Failed:"无法建立连接, 请确保能 ping/telnet 到云信服务器; 如果是IE8/9, 请确保项目部署在 HTTPS 环境下",Error_Internet_Disconnected:"网断了",Error_Connection_is_not_Established:"连接未建立",Error_Timeout:"超时",Param_Error:"参数错误",No_File_Selected:"请选择文件",Wrong_File_Type:"文件类型错误",File_Too_Large:"文件过大",Cross_Origin_Iframe:"不能获取跨域Iframe的内容",Not_Support:"不支持",NO_DB:"无数据库",DB:"数据库错误",Still_In_Team:"还在群里",Session_Exist:"会话已存在",Session_Not_Exist:"会话不存在",Error_Unknown:"未知错误",Operation_Canceled:"操作取消"};[200,406,808,810].forEach(function(e){s[e]=null}),n.genError=function(e){var t=s[e];return void 0===t&&(t="操作失败"),null===t?null:new n(t,e)},n.multiInstance=function(){return new n("不允许初始化多个实例","Not_Allow_Multi_Instance")},n.newNetworkError=function(){var e="Error_Internet_Disconnected";return new n(s[e],e)},n.newConnectError=function(e){var t="Connect_Failed";return new n(s[t]||e,t)},n.newConnectionError=function(){var e="Error_Connection_is_not_Established";return new n(s[e],e)},n.newTimeoutError=function(){var e="Error_Timeout";return new n(s[e],e)},n.newFrequencyControlError=function(){var e=new n(s[416],416);return e.from="local",e},n.newParamError=function(e){var t="Param_Error";return new n(e||s[t],t)},n.newNoFileError=function(e){var t="No_File_Selected";return new n(e||s[t],t)},n.newWrongFileTypeError=function(e){var t="Wrong_File_Type";return new n(e||s[t],t)},n.newFileTooLargeError=function(e){var t="File_Too_Large";return new n(e||s[t],t)},n.newCORSIframeError=function(){var e="Cross_Origin_Iframe";return new n(s[e],e)},n.newSupportError=function(e,t){return new n("不支持"+e,"Not_Support_"+t)},n.newSupportDBError=function(){return n.newSupportError("数据库","DB")},n.noDBError=function(){var e="NO_DB";return new n(s[e],e)},n.newDBError=function(){return new n(s.DB,"DB")},n.newUnknownError=function(){var e="Error_Unknown";return new n(s[e],e)},n.stillInTeamError=function(){var e="Still_In_Team";return new n(s[e],e)},n.sessionExist=function(){var e="Session_Exist";return new n(s[e],e)},n.sessionNotExist=function(){var e="Session_Not_Exist";return new n(s[e],e)},n.cancel=function(){var e="Operation_Canceled";return new n(s[e],e)},e.exports=n},function(e,t,n){"use strict";function s(e){var t=this;l.verifyOptions(e,"appKey account token"),l.verifyCallback(e,["onconnect","onerror","onwillreconnect","ondisconnect","onloginportschange","onmyinfo","onblacklist","onmutelist","onfriends","onusers","onteams","onsessions","onroamingmsgs","onofflinemsgs","onofflinefiltermsgs","onroamingsysmsgs","onofflinesysmsgs","onofflinefiltersysmsgs","onofflinecustomsysmsgs","onofflinefiltercustomsysmsgs","onsysmsgunread","onsyncdone","onteammembers","onsyncteammembersdone","onmsg","onsysmsg","oncustomsysmsg","onupdatemyinfo","onupdateuser","onupdateteammember","onCreateTeam","onUpdateTeam","onAddTeamMembers","onRemoveTeamMembers","onUpdateTeamManagers","onDismissTeam","onTransferTeam","onUpdateTeamMembersMute","onupdatesession","onupdatesysmsgunread","onupdatesysmsg","onsynccreateteam","onsyncmarkinblacklist","onsyncmarkinmutelist","onsyncfriendaction","shouldIgnoreNotification","onPushNotificationMultiportConfig","onPushNotificationMultiportConfigUpdate"]),t.db=e.api.db=new a({logger:e.logger}),o.call(t,e)}var i=n(2).Promise,a=n(7),o=n(9),r=n(3),c=n(6),l=n(1),u=l.undef,d=n(38),p=n(23),m=n(53),f=n(141),g=n(143),h=p.getInstance({type:"IM",configMap:m,serializeMap:f,unserializeMap:g}),v=n(19),y=o.fn,b=s.fn=s.prototype=Object.create(y);b.init=function(){var e=this;y.init.call(e),e.socketUrls=[],e.parser=h,e.syncing=!0,e.hasSynced=!1,e.hasSyncedTeamMembers=!1,e.syncPromiseArray=[],e.syncResult={},e.syncTeamMembersPromiseArray=[],e.syncTeamMembersResult={},e.timetags={},e.sysMsgUnread=v.completeUnread({}),e.resetUnsettledMsgs(),e.resetUnsettledSysMsgs(),e.msgPromise=i.resolve(),e.sysMsgPromise=i.resolve(),e.sessionSet={},e.msgReceiptTasks={},e.userSet={},e.pushNotificationMultiportConfig=d.getDefaultConfig()},b.reset=function(){var e=this;y.reset.call(e);var t=e.options;e.db.reset(t.db),u(t.lbsUrl)&&(t.lbsUrl=c.lbsUrl),e.resetAutoMarkRead()},b.resetAutoMarkRead=function(){var e=this.options;l.verifyBooleanWithDefault(e,"autoMarkRead",!0)},b.resetUnsettledMsgs=function(){var e=this;e.unhandledMsgs=[],e.unupdatedMsgs=[]},b.resetUnsettledSysMsgs=function(){var e=this;e.unhandledSysMsgs=[],e.unupdatedSysMsgs=[]},b.packetFromSync=function(e){return!e.obj||!!e.obj.sync},b.onDBError=function(e){var t=r.newDBError();t.event=e,this.notifyError(t)},e.exports=s,n(126),n(124),n(135),n(138),n(128),n(137),n(132),n(129),n(131),n(130),n(136),n(133),n(134),n(125),n(127)},function(e,t,n){"use strict";function s(e){var t=this;return t.subType="im",e.Protocol=a,e.Message=r,e.constructor=s,t.init(e)}var i=n(8),a=n(4),o=n(6),r=n(114);s.getInstance=i.getInstance,s.genInstanceName=function(e){return"NIM-account-"+e.account};var c=s.fn=s.prototype=Object.create(i.prototype);s.info=c.info=o.info,e.exports=s,n(79),n(76),n(84),n(88),n(78),n(87),n(85),n(80),n(86),n(75),n(81),n(82),n(74),n(77),n(83)},function(e,t,n){(function(t){"use strict";var n="development"===t.env.NODE_ENV?6e3:42e3,s={info:{hash:"0418f1369d299d4c006f1408a4369dfe2b16d8cd",shortHash:"0418f13",version:"3.4.0",sdkVersion:32,protocolVersion:1},lbsUrl:"https://lbs.netease.im/lbs/webconf.jsp",connectTimeout:n,xhrTimeout:n,socketTimeout:n,reconnectionDelay:656.25,reconnectionDelayMax:n,reconnectionJitter:.1,heartbeatInterval:18e4,cmdTimeout:n};s.formatSocketUrl=function(e){return-1===e.indexOf("https")?"https://"+e:e};var i="https://nos.netease.com/";s.fileServerUrl=i,s.genUploadUrl=function(e){return s.fileServerUrl+e},s.genDownloadUrl=function(e,t){if(s.fileServerUrl===i)return"http://"+e+".nos.netease.com/"+t},e.exports=s}).call(t,n(10))},function(e,t,n){"use strict";function s(e){g=e,u.set("db",e,c)}function i(e){this.concurrency=0,this.pendingTasks=[],this.queue=a.resolve(),this.logger=e.logger}var a=n(2).Promise,o=n(11),r=n(24),c=n(34),l=n(1),u=n(39),d=n(3),p=d.newSupportDBError,m=d.noDBError,f=n(89),g=!1;(s(!!l.getGlobal().indexedDB),"IE"===o.name&&s(!1),"Microsoft Edge"===o.name&&s(!1),"Safari"===o.name)&&(parseInt(o.version.split(".")[0],10)<9&&s(!1),s(!1));var h=i.fn=i.prototype;h.reset=l.emptyFunc,g&&(h.reset=function(e){this.enable=!1!==e}),h.addTask=function(e){var t=this;return new a(function(n,s){function i(e){t.concurrency--;var n=t.pendingTasks.shift();n&&t.addTask(n),e()}return t.concurrency<100?(t.concurrency++,e().then(function(t){i(function(){n(t),e.resolve&&e.resolve(t)})},function(t){i(function(){s(t),e.reject&&e.reject(t)})})):(e.resolve||(e.resolve=n,e.reject=s),void t.pendingTasks.push(e))})},h.init=function(e){var t=this;return t.addTask(function(){return t.enable?t.server?a.resolve():(t.name="nim-"+e,c.open({server:t.name,version:f.version,schema:f.schema}).then(function(e){t.logger.warn("init db",t.name),t.server=e},function(e){throw s(!1),t.server=null,t.name=null,e})):a.reject(p())})},h.destroy=function(){var e=this;return e.addTask(function(){return e.enable?e.server?c.remove(e.name).then(function(){e.logger.warn("delete db",e.name),e.server=null,e.name=null}):a.resolve():a.reject(p())})},h.clear=function(){var e=this;return e.addTask(function(){return e.enable?e.server?e.server.clear("timetag").then(function(){var t=[].slice.call(e.server.getIndexedDB().objectStoreNames),n=[];if(t.forEach(function(t){n.push(e.server.clear(t))}),n.length)return a.all(n).then(function(){e.logger.warn("clear db",e.name)})}):a.resolve():a.reject(p())})},h.close=function(){var e=this;e.server&&(e.server.close(),e.server=null,e.name=null)},h.remove=function(e,t){var n=this;return n.addTask(function(){return n.enable?n.server?(l.isArray(t)||(t=[t]),n.server.remove(e,t).then(function(){n.logger.warn("delete",e,1===t.length?t[0]:t)})):a.reject(m()):a.reject(p())})},h.put=function(e,t){var n=this;return n.addTask(function(){return n.enable?n.server?(l.isArray(t)||(t=[t]),n.server.update(e,t).then(function(t){var s=["put",e],i=f.keyPath(e),a=[];return i&&(t.forEach(function(e){a.push(r(e,i))}),s.push(1===a.length?a[0]:a)),s.push(1===t.length?t[0]:t),n.logger.warn.apply(n.logger.warn,s),t})):a.reject(m()):a.reject(p())})},h.modifyOrPut=function(e){var t=this,n=e.table,s=l.copy(e.obj),i=e.key,a=e.modifyObjWhenPut,o=l.copy(s);return delete o[i],t.getOne(n,null,s[i],{modifyObj:o}).then(function(e){return e?(t.logger.warn("update table "+n,s),e):(s=l.merge(s,a),t.put(n,s).then(function(e){return e[0]}))})},h.updateAndDelete=function(e,t,n){var s=this;return s.addTask(function(){return s.enable?s.server?s.server.updateAndDelete(e,t,n):a.reject(m()):a.reject(p())})},h.get=function(e,t){var n=this;return n.addTask(function(){return n.enable?n.server?n.server.get(e,t):a.reject(m()):a.reject(p())})},h.getAll=function(e,t){var n=this;return n.addTask(function(){return n.enable?n.server?(t=t||{},t.keys=!0===t.keys,t.desc=!0===t.desc,t.distinct=!0===t.distinct,n.server.query(e,t.index).filter(t.filter).keys(t.keys).desc(t.desc).limit(t.limit).distinct(t.distinct).map(t.mapper).modify(t.modifyObj).execute()):a.reject(m()):a.reject(p())})},h.getOnly=function(e,t,n,s){var i=this;return i.addTask(function(){if(!i.enable)throw p();if(!i.server)throw m();return s=s||{},s.keys=!0===s.keys,s.desc=!0===s.desc,s.distinct=!0===s.distinct,s.remove=!0===s.remove,i.server.query(e,t).only(n).filter(s.filter).keys(s.keys).desc(s.desc).limit(s.limit).distinct(s.distinct).map(s.mapper).modify(s.modifyObj).remove(s.remove).execute()})},h.getOne=function(){var e=this;return e.getOnly.apply(e,arguments).then(function(e){return e[0]})},h.clearTable=function(e){var t=this;return t.addTask(function(){if(!t.enable)throw p();if(!t.server)throw m();return t.server.clear(e)})},h.checkDB=function(){var e=this;if(!e.enable)throw p();if(!e.server)throw m()},e.exports=i,n(91),n(97),n(93),n(90),n(96),n(98),n(92),n(95),n(94)},function(e,t,n){"use strict";function s(){}var i=n(2).Promise,a=n(1),o=a.notundef,r=n(56),c={};s.getInstance=function(e){var t=this;a.verifyOptions(e,"account");var n=t.genInstanceName(e),i=c[n];return i?s.updateInstance(i,e):i=c[n]=new t(e),i},s.updateInstance=function(e,t){e.setOptions(t),e.connect()};var l=s.fn=s.prototype;l.init=function(e){var t=this;a.verifyOptions(e,"account");var n=t.account=e.account=e.account+"",i=e.constructor,o=i.genInstanceName(e),l=c[o];if(e._disableSingleton&&(l=null),l)return s.updateInstance(l,e),l;t.name=o,c[o]=t,t.logger=e.logger=new r({debug:e.debug,logFunc:e.logFunc,prefix:t.subType}),e.api=t;var u=t.protocol=new e.Protocol(e);return u.name="Protocol-"+o,u.account=n,u.api=t,u.message=t.message=new e.Message({account:n}),t.options=a.copy(e),t.reset(),t},l.reset=function(){var e=this,t=e.options;this._usePromise=!!t.promise,a.verifyBooleanWithDefault(t,"exifOrientation",!0)},l.usePromise=function(e){return this._usePromise||e.promise},l.setOptions=function(e){this.reset(),this.protocol.setOptions(e)},l.processCallback=function(e,t){var n=new i(function(n,s){a.verifyCallback(e,"done"),e.callback=function(i,r){var c=e.callback.options;if(r=r||c,t&&(r=c),a.isFunction(e.cbaop)){var l=e.cbaop(i,r);o(l)&&(r=l)}var u=e.done;a.isObject(r)&&(delete r.done,delete r.cb,delete r.callback),setTimeout(function(){i?s(i):n(r),u(i,r)},0)},e.callback.options=a.copy(e)});return this.usePromise(e)?n:void n.then(void 0,function(){})},l.processPs=function(e){a.notexist(e.ps)&&(e.ps="")},l.processCustom=function(e){a.notexist(e.custom)&&(e.custom="")},l.sendCmd=function(){this.protocol.sendCmd.apply(this.protocol,arguments)},e.exports=s,n(42),n(43),n(44),n(45)},function(e,t,n){"use strict";function s(e){var t=this;t.options=i.copy(e),t.init(),t.connect()}var i=n(1),a=n(6),o=n(3),r=s.fn=s.prototype;r.init=function(){var e=this;e.logger=e.options.logger,e.cmdTaskArray=[],e.timerMap={},e.cmdCallbackMap={},e.cmdContentMap={},e.initConnect(),e.reset()},r.reset=function(){this.resetConnect()},r.setOptions=function(e){var t=this,n=t.options,s=Object.keys(n),a=s.indexOf("account");-1!==a&&s.splice(a,1),e=i.filterObj(e,s),t.options=i.merge(n,e),t.reset()},r.sendCmd=function(e,t,n){var s=this;s.heartbeat(),s.logger.log("Protocol Command    "+e+"\t",t||"");var i=e;e=s.parser.createCmd(e,t);var a,o=e.SER;t=t||{},s.cmdContentMap[o]=t,t.single&&(delete t.single,a=Object.keys(t),1===a.length&&(s.cmdContentMap[o]=t[a[0]])),t.NOTSTORE&&(a=t.NOTSTORE.split(" "),a.forEach(function(e){delete t[e]}),delete t.NOTSTORE),n=n||t.callback,n&&(s.cmdCallbackMap[o]=n),s.cmdTaskArray.push({cmdName:i,cmd:e}),s.startCmdTaskTimer()},r.startCmdTaskTimer=function(){var e=this;e.cmdTaskTimer||(e.cmdTaskTimer=setTimeout(function(){var t=e.cmdTaskArray.shift();t&&e.executeCmdTask(t),e.cmdTaskTimer=null,e.cmdTaskArray.length&&e.startCmdTaskTimer()},0))},r.executeCmdTask=function(e){var t=this,n=e.cmdName,s=e.cmd,i=s.SER;t.isFrequencyControlled(n)?(t.logger.warn("hit frequency control "+n),t.markCallbackInvalid(i,o.newFrequencyControlError())):t.isConnected()?t.doSendCmd(s):t.markCallbackInvalid(i,o.newConnectionError())},r.isFrequencyControlled=function(e){var t=this.frequencyControlMap&&this.frequencyControlMap[e];if(t){if(Date.now()<t.from+t.duration)return!0;delete this.frequencyControlMap[e]}},r.doSendCmd=function(e){var t=this,n=e.SER;t.timerMap[n]=setTimeout(function(){t.markCallbackInvalid(n,o.newTimeoutError())},a.cmdTimeout),t.socket.send(JSON.stringify(e))},r.getObjWithSer=function(e){var t=this,n=t.cmdContentMap[e];return delete t.cmdContentMap[e],n&&i.copy(n)},r.getCallbackWithSer=function(e){var t=this,n=t.cmdCallbackMap[e];return delete t.cmdCallbackMap[e],n},r.getTimerWithSer=function(e){var t=this,n=t.timerMap[e];return delete t.timerMap[e],n},r.clearTimerWithSer=function(e){var t=this,n=t.getTimerWithSer(e);n&&clearTimeout(n)},r.markCallbackInvalid=function(e,t){var n=this;n.getObjWithSer(e),n.clearTimerWithSer(e);var s=n.getCallbackWithSer(e);if(s){var i=s.options;setTimeout(function(){s(t||o.newUnknownError(),i)},0)}},r.markAllCallbackInvalid=function(e){var t=this;Object.keys(this.cmdCallbackMap).forEach(function(n){t.markCallbackInvalid(n,e)})},r.getPacketObj=function(e){if(e&&e.raw){var t=e.raw.ser;if(t)return this.getObjWithSer(t)}return null},r.callPacketAckCallback=function(e){var t=this;if(e&&e.raw){var n=e.raw.ser;if(n){t.clearTimerWithSer(n);var s=t.getCallbackWithSer(n);s&&(e.promise?e.promise.then(function(){s(e.error,e.obj)},function(n){var i=o.newDBError();i.event=n,t.logger.error("promise error",i,n),s(i,e.obj)}):s(e.error,e.obj))}}},r.onMessage=function(e){var t=this;t.heartbeat();var n=t.parser.parseResponse(e);n.notFound&&t.logger.log("no config for",n.notFound),n.frequencyControlDuration&&(t.logger.warn("server frequency control "+n.cmd),t.frequencyControlMap=t.frequencyControlMap||{},t.frequencyControlMap[n.cmd]={from:+new Date,duration:n.frequencyControlDuration}),n.obj=t.getPacketObj(n),t.logger.log("Protocol Response   "+n.cmd+"\t",n,n.error||(n.content?n.content:""));var s="process"+i.capFirstLetter(n.service);t[s]&&t[s].call(t,n),t.callPacketAckCallback(n)},r.onMiscError=function(e,t,n){e&&(e.appendMessage(n),this.notifyError(e,t))},r.notifyError=function(e,t){var n=this;if(n.isConnected()){var s=["onError "+n.name,e];e.event&&s.push(e.event),t&&s.push(t),n.logger.error.apply(n.logger.error,s),n.options.onerror(e,t)}},e.exports=s,n(50),n(49),n(51),n(52)},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function i(e){if(u===setTimeout)return setTimeout(e,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(e){try{return u.call(null,e,0)}catch(e){return u.call(this,e,0)}}}function a(e){if(d===clearTimeout)return clearTimeout(e);if((d===s||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(e){try{return d.call(null,e)}catch(e){return d.call(this,e)}}}function o(){g&&m&&(g=!1,m.length?f=m.concat(f):h=-1,f.length&&r())}function r(){if(!g){var e=i(o);g=!0;for(var t=f.length;t;){for(m=f,f=[];++h<t;)m&&m[h].run();h=-1,t=f.length}m=null,g=!1,a(e)}}function c(e,t){this.fun=e,this.array=t}function l(){}var u,d,p=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(e){u=n}try{d="function"==typeof clearTimeout?clearTimeout:s}catch(e){d=s}}();var m,f=[],g=!1,h=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new c(e,t)),1!==f.length||g||i(r)},c.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(e,t,n){var s;(function(e,i){(function(){"use strict";function a(e){return e=String(e),e.charAt(0).toUpperCase()+e.slice(1)}function o(e,t,n){var s={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&n&&/^Win/i.test(e)&&!/^Windows Phone /i.test(e)&&(s=s[/[\d.]+$/.exec(e)])&&(e="Windows "+s),e=String(e),t&&n&&(e=e.replace(RegExp(t,"i"),n)),e=c(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}function r(e,t){var n=-1,s=e?e.length:0;if("number"==typeof s&&s>-1&&s<=S)for(;++n<s;)t(e[n],n,e);else l(e,t)}function c(e){return e=f(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:a(e)}function l(e,t){for(var n in e)k.call(e,n)&&t(e[n],n,e)}function u(e){return null==e?a(e):T.call(e).slice(8,-1)}function d(e,t){var n=null!=e?typeof e[t]:"number";return!(/^(?:boolean|number|string|undefined)$/.test(n)||"object"==n&&!e[t])}function p(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function m(e,t){var n=null;return r(e,function(s,i){n=t(n,s,i,e)}),n}function f(e){return String(e).replace(/^ +| +$/g,"")}function g(e){function t(t){return m(t,function(t,n){var s=n.pattern||p(n);return!t&&(t=RegExp("\\b"+s+" *\\d+[.\\w_]*","i").exec(e)||RegExp("\\b"+s+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(e))&&((t=String(n.label&&!RegExp(s,"i").test(n.label)?n.label:t).split("/"))[1]&&!/[\d.]+/.test(t[0])&&(t[0]+=" "+t[1]),n=n.label||n,t=c(t[0].replace(RegExp(s,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),t})}function n(){return this.description||""}var s=v,i=e&&"object"==typeof e&&"String"!=u(e);i&&(s=e,e=null);var a=s.navigator||{},r=a.userAgent||"";e||(e=r);var h,b,w=i||C==y,_=i?!!a.likeChrome:/\bChrome\b/.test(e)&&!/internal|\n/i.test(T.toString()),S="Object",I=i?S:"ScriptBridgingProxyObject",k=i?S:"Environment",M=i&&s.java?"JavaPackage":u(s.java),N=i?S:"RuntimeObject",L=/\bJava/.test(M)&&s.java,O=L&&u(s.environment)==k,P=L?"a":"α",F=L?"b":"β",A=s.document||{},D=s.operamini||s.opera,R=x.test(R=i&&D?D["[[Class]]"]:u(D))?R:D=null,E=e,j=[],$=null,B=e==r,U=B&&D&&"function"==typeof D.version&&D.version(),V=function(t){return m(t,function(t,n){return t||RegExp("\\b"+(n.pattern||p(n))+"\\b","i").exec(e)&&(n.label||n)})}([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),W=function(t){return m(t,function(t,n){return t||RegExp("\\b"+(n.pattern||p(n))+"\\b","i").exec(e)&&(n.label||n)})}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt","SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),H=t([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation 3","PlayStation 4","PlayStation Vita","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),q=function(t){return m(t,function(t,n,s){return t||(n[H]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec(H)]||RegExp("\\b"+p(s)+"(?:\\b|\\w*\\d)","i").exec(e))&&s})}({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{"PlayStation 4":1,"PlayStation 3":1,"PlayStation Vita":1}}),J=function(t){return m(t,function(t,n){var s=n.pattern||p(n);return!t&&(t=RegExp("\\b"+s+"(?:/[\\d.]+|[ \\w.]*)","i").exec(e))&&(t=o(t,s,n.label||n)),t})}(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);if(V&&(V=[V]),q&&!H&&(H=t([q])),(h=/\bGoogle TV\b/.exec(H))&&(H=h[0]),/\bSimulator\b/i.test(e)&&(H=(H?H+" ":"")+"Simulator"),"Opera Mini"==W&&/\bOPiOS\b/.test(e)&&j.push("running in Turbo/Uncompressed mode"),"IE"==W&&/\blike iPhone OS\b/.test(e)?(h=g(e.replace(/like iPhone OS/,"")),q=h.manufacturer,H=h.product):/^iP/.test(H)?(W||(W="Safari"),J="iOS"+((h=/ OS ([\d_]+)/i.exec(e))?" "+h[1].replace(/_/g,"."):"")):"Konqueror"!=W||/buntu/i.test(J)?q&&"Google"!=q&&(/Chrome/.test(W)&&!/\bMobile Safari\b/i.test(e)||/\bVita\b/.test(H))||/\bAndroid\b/.test(J)&&/^Chrome/.test(W)&&/\bVersion\//i.test(e)?(W="Android Browser",J=/\bAndroid\b/.test(J)?J:"Android"):"Silk"==W?(/\bMobi/i.test(e)||(J="Android",j.unshift("desktop mode")),/Accelerated *= *true/i.test(e)&&j.unshift("accelerated")):"PaleMoon"==W&&(h=/\bFirefox\/([\d.]+)\b/.exec(e))?j.push("identifying as Firefox "+h[1]):"Firefox"==W&&(h=/\b(Mobile|Tablet|TV)\b/i.exec(e))?(J||(J="Firefox OS"),H||(H=h[1])):W&&!(h=!/\bMinefield\b/i.test(e)&&/\b(?:Firefox|Safari)\b/.exec(W))||(W&&!H&&/[\/,]|^[^(]+?\)/.test(e.slice(e.indexOf(h+"/")+8))&&(W=null),(h=H||q||J)&&(H||q||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(J))&&(W=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(J)?J:h)+" Browser")):J="Kubuntu",U||(U=function(t){return m(t,function(t,n){return t||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(e)||0)[1]||null})}(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|Silk(?!/[\\d.]+$))","Version",p(W),"(?:Firefox|Minefield|NetFront)"])),(h="iCab"==V&&parseFloat(U)>3&&"WebKit"||/\bOpera\b/.test(W)&&(/\bOPR\b/.test(e)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(e)&&!/^(?:Trident|EdgeHTML)$/.test(V)&&"WebKit"||!V&&/\bMSIE\b/i.test(e)&&("Mac OS"==J?"Tasman":"Trident")||"WebKit"==V&&/\bPlayStation\b(?! Vita\b)/i.test(W)&&"NetFront")&&(V=[h]),"IE"==W&&(h=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(e)||0)[1])?(W+=" Mobile",J="Windows Phone "+(/\+$/.test(h)?h:h+".x"),j.unshift("desktop mode")):/\bWPDesktop\b/i.test(e)?(W="IE Mobile",J="Windows Phone 8.x",j.unshift("desktop mode"),U||(U=(/\brv:([\d.]+)/.exec(e)||0)[1])):"IE"!=W&&"Trident"==V&&(h=/\brv:([\d.]+)/.exec(e))&&(W&&j.push("identifying as "+W+(U?" "+U:"")),W="IE",U=h[1]),B){if(d(s,"global"))if(L&&(h=L.lang.System,E=h.getProperty("os.arch"),J=J||h.getProperty("os.name")+" "+h.getProperty("os.version")),w&&d(s,"system")&&(h=[s.system])[0]){J||(J=h[0].os||null);try{h[1]=s.require("ringo/engine").version,U=h[1].join("."),W="RingoJS"}catch(e){h[0].global.system==s.system&&(W="Narwhal")}}else"object"==typeof s.process&&!s.process.browser&&(h=s.process)?(W="Node.js",E=h.arch,J=h.platform,U=/[\d.]+/.exec(h.version)[0]):O&&(W="Rhino");else u(h=s.runtime)==I?(W="Adobe AIR",J=h.flash.system.Capabilities.os):u(h=s.phantom)==N?(W="PhantomJS",U=(h=h.version||null)&&h.major+"."+h.minor+"."+h.patch):"number"==typeof A.documentMode&&(h=/\bTrident\/(\d+)/i.exec(e))&&(U=[U,A.documentMode],(h=+h[1]+4)!=U[1]&&(j.push("IE "+U[1]+" mode"),V&&(V[1]=""),U[1]=h),U="IE"==W?String(U[1].toFixed(1)):U[0]);J=J&&c(J)}U&&(h=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(U)||/(?:alpha|beta)(?: ?\d)?/i.exec(e+";"+(B&&a.appMinorVersion))||/\bMinefield\b/i.test(e)&&"a")&&($=/b/i.test(h)?"beta":"alpha",U=U.replace(RegExp(h+"\\+?$"),"")+("beta"==$?F:P)+(/\d+\+?/.exec(h)||"")),"Fennec"==W||"Firefox"==W&&/\b(?:Android|Firefox OS)\b/.test(J)?W="Firefox Mobile":"Maxthon"==W&&U?U=U.replace(/\.[\d.]+/,".x"):/\bXbox\b/i.test(H)?(J=null,"Xbox 360"==H&&/\bIEMobile\b/.test(e)&&j.unshift("mobile mode")):!/^(?:Chrome|IE|Opera)$/.test(W)&&(!W||H||/Browser|Mobi/.test(W))||"Windows CE"!=J&&!/Mobi/i.test(e)?"IE"==W&&B&&null===s.external?j.unshift("platform preview"):(/\bBlackBerry\b/.test(H)||/\bBB10\b/.test(e))&&(h=(RegExp(H.replace(/ +/g," *")+"/([.\\d]+)","i").exec(e)||0)[1]||U)?(h=[h,/BB10/.test(e)],J=(h[1]?(H=null,q="BlackBerry"):"Device Software")+" "+h[0],U=null):this!=l&&"Wii"!=H&&(B&&D||/Opera/.test(W)&&/\b(?:MSIE|Firefox)\b/i.test(e)||"Firefox"==W&&/\bOS X (?:\d+\.){2,}/.test(J)||"IE"==W&&(J&&!/^Win/.test(J)&&U>5.5||/\bWindows XP\b/.test(J)&&U>8||8==U&&!/\bTrident\b/.test(e)))&&!x.test(h=g.call(l,e.replace(x,"")+";"))&&h.name&&(h="ing as "+h.name+((h=h.version)?" "+h:""),x.test(W)?(/\bIE\b/.test(h)&&"Mac OS"==J&&(J=null),h="identify"+h):(h="mask"+h,W=R?c(R.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(h)&&(J=null),B||(U=null)),V=["Presto"],j.push(h)):W+=" Mobile",(h=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(e)||0)[1])&&(h=[parseFloat(h.replace(/\.(\d)$/,".0$1")),h],"Safari"==W&&"+"==h[1].slice(-1)?(W="WebKit Nightly",$="alpha",U=h[1].slice(0,-1)):U!=h[1]&&U!=(h[2]=(/\bSafari\/([\d.]+\+?)/i.exec(e)||0)[1])||(U=null),h[1]=(/\bChrome\/([\d.]+)/i.exec(e)||0)[1],537.36==h[0]&&537.36==h[2]&&parseFloat(h[1])>=28&&"WebKit"==V&&(V=["Blink"]),B&&(_||h[1])?(V&&(V[1]="like Chrome"),h=h[1]||(h=h[0],h<530?1:h<532?2:h<532.05?3:h<533?4:h<534.03?5:h<534.07?6:h<534.1?7:h<534.13?8:h<534.16?9:h<534.24?10:h<534.3?11:h<535.01?12:h<535.02?"13+":h<535.07?15:h<535.11?16:h<535.19?17:h<536.05?18:h<536.1?19:h<537.01?20:h<537.11?"21+":h<537.13?23:h<537.18?24:h<537.24?25:h<537.36?26:"Blink"!=V?"27":"28")):(V&&(V[1]="like Safari"),h=h[0],h=h<400?1:h<500?2:h<526?3:h<533?4:h<534?"4+":h<535?5:h<537?6:h<538?7:h<601?8:"8"),V&&(V[1]+=" "+(h+="number"==typeof h?".x":/[.+]/.test(h)?"":"+")),"Safari"==W&&(!U||parseInt(U)>45)&&(U=h)),"Opera"==W&&(h=/\bzbov|zvav$/.exec(J))?(W+=" ",j.unshift("desktop mode"),"zvav"==h?(W+="Mini",U=null):W+="Mobile",J=J.replace(RegExp(" *"+h+"$"),"")):"Safari"==W&&/\bChrome\b/.exec(V&&V[1])&&(j.unshift("desktop mode"),W="Chrome Mobile",U=null,/\bOS X\b/.test(J)?(q="Apple",J="iOS 4.3+"):J=null),U&&0==U.indexOf(h=/[\d.]+$/.exec(J))&&e.indexOf("/"+h+"-")>-1&&(J=f(J.replace(h,""))),V&&!/\b(?:Avant|Nook)\b/.test(W)&&(/Browser|Lunascape|Maxthon/.test(W)||"Safari"!=W&&/^iOS/.test(J)&&/\bSafari\b/.test(V[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Sleipnir|Web)/.test(W)&&V[1])&&(h=V[V.length-1])&&j.push(h),j.length&&(j=["("+j.join("; ")+")"]),q&&H&&H.indexOf(q)<0&&j.push("on "+q),H&&j.push((/^on /.test(j[j.length-1])?"":"on ")+H),J&&(h=/ ([\d.+]+)$/.exec(J),b=h&&"/"==J.charAt(J.length-h[0].length-1),J={architecture:32,family:h&&!b?J.replace(h[0],""):J,version:h?h[1]:null,toString:function(){var e=this.version;return this.family+(e&&!b?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(h=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(E))&&!/\bi686\b/i.test(E)?(J&&(J.architecture=64,J.family=J.family.replace(RegExp(" *"+h),"")),W&&(/\bWOW64\b/i.test(e)||B&&/\w(?:86|32)$/.test(a.cpuClass||a.platform)&&!/\bWin64; x64\b/i.test(e))&&j.unshift("32-bit")):J&&/^OS X/.test(J.family)&&"Chrome"==W&&parseFloat(U)>=39&&(J.architecture=64),e||(e=null);var G={};return G.description=e,G.layout=V&&V[0],G.manufacturer=q,G.name=W,G.prerelease=$,G.product=H,G.ua=e,G.version=W&&U,G.os=J||{architecture:null,family:null,version:null,toString:function(){return"null"}},G.parse=g,G.toString=n,G.version&&j.unshift(U),G.name&&j.unshift(W),J&&W&&(J!=String(J).split(" ")[0]||J!=W.split(" ")[0]&&!H)&&j.push(H?"("+J+")":"on "+J),j.length&&(G.description=j.join(" ")),G}var h={function:!0,object:!0},v=h[typeof window]&&window||this,y=v,b=h[typeof t]&&t,w=h[typeof e]&&e&&!e.nodeType&&e,_=b&&w&&"object"==typeof i&&i;!_||_.global!==_&&_.window!==_&&_.self!==_||(v=_);var S=Math.pow(2,53)-1,x=/\bOpera/,C=this,I=Object.prototype,k=I.hasOwnProperty,T=I.toString,M=g();v.platform=M,void 0!==(s=function(){return M}.call(t,n,t,e))&&(e.exports=s)}).call(this)}).call(t,n(22)(e),function(){return this}())},,function(e,t,n){"use strict";function s(e){i.verifyOptions(e,"scene to type"),i.verifyParamValid("scene",e.scene,m);var t=this;t.scene=d[e.scene],t.to=""+e.to,t.type=f[e.type],t.resend=e.resend?1:0,e.resend?(i.verifyOptions(e,"idClient"),t.idClient=e.idClient):t.idClient=i.guid(),o(e.text)&&(t.body=""+e.text),o(e.custom)&&(t.custom=""+e.custom),o(e.pushContent)&&(t.pushContent=""+e.pushContent),o(e.pushPayload)&&(t.pushPayload=""+e.pushPayload);var n=e.apns;if(o(n)&&"team"===e.scene){var s=n.accounts;o(s)&&i.verifyParamType("apns.accounts",s,"array"),t.apnsAccounts=s?JSON.stringify(s):u,t.apnsContent=n.content||e.pushContent||"",i.verifyBooleanWithDefault(n,"forcePush",!0,"options.apns"),t.apnsForcePush=n.forcePush?1:0}o(e.isHistoryable)&&(t.isHistoryable=e.isHistoryable?1:0),o(e.isRoamingable)&&(t.isRoamingable=e.isRoamingable?1:0),o(e.isSyncable)&&(t.isSyncable=e.isSyncable?1:0),o(e.cc)&&(t.cc=e.cc?1:0),o(e.isPushable)&&(t.isPushable=e.isPushable?1:0),o(e.isOfflinable)&&(t.isOfflinable=e.isOfflinable?1:0),o(e.isUnreadable)&&(t.isUnreadable=e.isUnreadable?1:0),o(e.needPushNick)&&(t.needPushNick=e.needPushNick?1:0),o(e.yidunEnable)&&(t.yidunEnable=e.yidunEnable?1:0),o(e.antiSpamContent)&&(t.antiSpamContent=""+e.antiSpamContent)}var i=n(1),a=i.undef,o=i.notundef,r=i.exist,c=n(17),l=n(40),u="#%@all@%#",d={p2p:0,team:1},p={0:"p2p",1:"team"},m=Object.keys(d),f=l.typeMap,g=l.validTypes;s.prototype.getScene=function(){return p[this.scene]},s.getScene=function(e){var t=e.scene;return p[t]||t},s.getType=l.getType,s.reverse=function(e){var t=p[e.scene],n={scene:t||e.scene,from:e.from,fromNick:e.fromNick,fromClientType:c.reverseType(e.fromClientType),fromDeviceId:e.fromDeviceId,to:""+e.to,time:+e.time,type:s.getType(e),text:r(e.body)?e.body:"",isHistoryable:a(e.isHistoryable)||1==+e.isHistoryable,isRoamingable:a(e.isRoamingable)||1==+e.isRoamingable,isSyncable:a(e.isSyncable)||1==+e.isSyncable,cc:a(e.cc)||1==+e.cc,isPushable:a(e.isPushable)||1==+e.isPushable,isOfflinable:a(e.isOfflinable)||1==+e.isOfflinable,isUnreadable:a(e.isUnreadable)||1==+e.isUnreadable,needPushNick:a(e.needPushNick)||1==+e.needPushNick,isLocal:!1};if(o(e.isMuted)&&(n.isMuted=1==+e.isMuted),o(e.resend)&&(n.resend=1==+e.resend),o(e.idClient)&&(n.idClient=e.idClient),o(e.idServer)&&(n.idServer=""+e.idServer),o(e.userUpdateTime)&&(n.userUpdateTime=+e.userUpdateTime),o(e.custom)&&(n.custom=e.custom),o(e.pushContent)&&(n.pushContent=e.pushContent),o(e.pushPayload)&&(n.pushPayload=e.pushPayload),o(e.apnsAccounts)){if(n.apns={},e.apnsAccounts!==u){var i=e.apnsAccounts;try{n.apns.accounts=JSON.parse(i)}catch(e){n.apns.accounts=[]}}n.apns.content=e.apnsContent||"",n.apns.forcePush=1==+e.apnsForcePush}return n.status=e.status||"success",o(e.filter)&&(n.filter=e.filter),n},s.setExtra=function(e,t){e.target=s.getMsgTarget(e,t),e.sessionId=e.scene+"-"+e.target,l.setFlow(e,t)},s.getMsgTarget=function(e,t){return"p2p"===e.scene?e.to===t?e.from:e.to:"team"===e.scene?e.to:void 0},s.deduplication=function(e){var t,n={},s=[];return e.forEach(function(e){t=e.idClient,n[t]||(n[t]=!0,s.push(e))}),s},s.sortMsgs=function(e){return e=e.slice(0),i.sortObjArray(e,{sortPath:"time"}),e},s.getLastMsg=function(e){return e=s.sortMsgs(e),e[e.length-1]},s.getLastNotIgnoredMsg=function(e){e=s.sortMsgs(e);for(var t=null,n=e.length-1;n>=0;n--)if(t=e[n],!t.ignore)return t;return null},s.getMaxTimetag=function(e){return s.getLastMsg(e).time},s.validScenes=m,s.validTypes=g,e.exports=s},function(e,t,n){"use strict";var s=n(1),i=n(55),a={};a.init=function(){var e="nim_web_sdk_deviceId",t=i.get(e);t||(t=s.guid(),i.set(e,t)),a.deviceId=t},a.init(),e.exports=a},function(e,t,n){"use strict";function s(e){var t=this;i.verifyOptions(e,"teamId"),i.verifyParamAtLeastPresentOne(e,"nickInTeam muteTeam custom"),t.teamId=e.teamId,a(e.account)&&(t.account=e.account),a(e.nickInTeam)&&(t.nickInTeam=e.nickInTeam),a(e.muteTeam)&&(t.bits=0,e.muteTeam&&(t.bits+=1)),a(e.mute)&&(t.mute=e.mute?1:0),a(e.custom)&&(t.custom=""+e.custom)}var i=n(1),a=i.notundef,o=i.fillPropertyWithDefault,r={0:"normal",1:"owner",2:"manager"};s.reverse=function(e){var t=i.copy(e);if(a(t.teamId)&&(t.teamId=""+t.teamId),a(t.type)&&(t.type=r[t.type]),a(t.active)&&(t.active=1==+t.active),a(t.valid)&&(t.valid=1==+t.valid),a(t.mute)&&(t.mute=1==+t.mute),a(t.joinTime)&&(t.joinTime=+t.joinTime),a(t.updateTime)&&(t.updateTime=+t.updateTime),a(t.bits)){var n=t.bits;delete t.bits,t.muteTeam=!!(1&n)}return a(t.teamId)&&a(t.account)&&(t.id=s.genId(t.teamId,t.account)),t},s.reverseMembers=function(e){return e.map(function(e){return s.reverse(e)})},s.fillProperties=function(e){var t=o(e,"mute",!1),n=o(e,"custom","");return t||n},s.genId=function(e,t){return e+"-"+t},s.accounts2ids=function(e,t){return t.map(function(t){return s.genId(e,t)})},s.assembleMembers=function(e,t){return i.isArray(t)||(t=[t]),t.map(function(t){return s.assembleMember(e,t)})},s.assembleMember=function(e,t){return{id:s.genId(e.teamId,t),account:t,teamId:e.teamId,type:"normal",nickInTeam:"",muteTeam:!1,mute:!1,joinTime:e.memberUpdateTime,updateTime:e.memberUpdateTime,active:!0,valid:!0}},s.assembleOwner=function(e){var t=s.assembleMember(e,e.owner);return t.type="owner",t},e.exports=s},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(module){/*! Socket.IO.js build:0.9.11, development. Copyright(c) 2011 LearnBoost <dev@learnboost.com> MIT Licensed */
var io=module.exports;window.io?module&&(module.exports=io=window.io):window.io=io,function(){if(function(e,t){var n=e;n.version="0.9.11",n.protocol=1,n.transports=[],n.j=[],n.sockets={},n.connect=function(e,s){var i,a,o=n.util.parseUri(e);t&&t.location&&(o.protocol=o.protocol||t.location.protocol.slice(0,-1),o.host=o.host||(t.document?t.document.domain:t.location.hostname),o.port=o.port||t.location.port),i=n.util.uniqueUri(o);var r={host:o.host,secure:"https"==o.protocol,port:o.port||("https"==o.protocol?443:80),query:o.query||""};return n.util.merge(r,s),!r["force new connection"]&&n.sockets[i]||(a=new n.Socket(r)),!r["force new connection"]&&a&&(n.sockets[i]=a),a=a||n.sockets[i],a.of(o.path.length>1?o.path:"")}}(module.exports,window),function(e,t){var n=e.util={},s=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];n.parseUri=function(e){for(var t=s.exec(e||""),n={},a=14;a--;)n[i[a]]=t[a]||"";return n},n.uniqueUri=function(e){var n=e.protocol,s=e.host,i=e.port;return"document"in t?(s=s||document.domain,i=i||("https"==n&&"https:"!==document.location.protocol?443:document.location.port)):(s=s||"localhost",i||"https"!=n||(i=443)),(n||"http")+"://"+s+":"+(i||80)},n.query=function(e,t){var s=n.chunkQuery(e||""),i=[];n.merge(s,n.chunkQuery(t||""));for(var a in s)s.hasOwnProperty(a)&&i.push(a+"="+s[a]);return i.length?"?"+i.join("&"):""},n.chunkQuery=function(e){for(var t,n={},s=e.split("&"),i=0,a=s.length;i<a;++i)t=s[i].split("="),t[0]&&(n[t[0]]=t[1]);return n};var a=!1;n.load=function(e){return"document"in t&&"complete"===document.readyState||a?e():void n.on(t,"load",e,!1)},n.on=function(e,t,n,s){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener&&e.addEventListener(t,n,s)},n.request=function(e){if(e&&"undefined"!=typeof XDomainRequest&&!n.ua.hasCORS)return new XDomainRequest;if("undefined"!=typeof XMLHttpRequest&&(!e||n.ua.hasCORS))return new XMLHttpRequest;if(!e)try{return new(window[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}return null},"undefined"!=typeof window&&n.load(function(){a=!0}),n.defer=function(e){return n.ua.webkit&&"undefined"==typeof importScripts?void n.load(function(){setTimeout(e,100)}):e()},n.merge=function(e,t,s,i){var a,o=i||[],r=void 0===s?2:s;for(a in t)t.hasOwnProperty(a)&&n.indexOf(o,a)<0&&("object"==typeof e[a]&&r?n.merge(e[a],t[a],r-1,o):(e[a]=t[a],o.push(t[a])));return e},n.mixin=function(e,t){n.merge(e.prototype,t.prototype)},n.inherit=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},n.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},n.intersect=function(e,t){for(var s=[],i=e.length>t.length?e:t,a=e.length>t.length?t:e,o=0,r=a.length;o<r;o++)~n.indexOf(i,a[o])&&s.push(a[o]);return s},n.indexOf=function(e,t,n){for(var s=e.length,n=n<0?n+s<0?0:n+s:n||0;n<s&&e[n]!==t;n++);return s<=n?-1:n},n.toArray=function(e){for(var t=[],n=0,s=e.length;n<s;n++)t.push(e[n]);return t},n.ua={},n.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var e=new XMLHttpRequest}catch(e){return!1}return void 0!=e.withCredentials}(),n.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent),n.ua.iDevice="undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)}(void 0!==io?io:module.exports,window),function(e,t){function n(){}e.EventEmitter=n,n.prototype.on=function(e,n){return this.$events||(this.$events={}),this.$events[e]?t.util.isArray(this.$events[e])?this.$events[e].push(n):this.$events[e]=[this.$events[e],n]:this.$events[e]=n,this},n.prototype.addListener=n.prototype.on,n.prototype.once=function(e,t){function n(){s.removeListener(e,n),t.apply(this,arguments)}var s=this;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,n){if(this.$events&&this.$events[e]){var s=this.$events[e];if(t.util.isArray(s)){for(var i=-1,a=0,o=s.length;a<o;a++)if(s[a]===n||s[a].listener&&s[a].listener===n){i=a;break}if(i<0)return this;s.splice(i,1),s.length||delete this.$events[e]}else(s===n||s.listener&&s.listener===n)&&delete this.$events[e]}return this},n.prototype.removeAllListeners=function(e){return void 0===e?(this.$events={},this):(this.$events&&this.$events[e]&&(this.$events[e]=null),this)},n.prototype.listeners=function(e){return this.$events||(this.$events={}),this.$events[e]||(this.$events[e]=[]),t.util.isArray(this.$events[e])||(this.$events[e]=[this.$events[e]]),this.$events[e]},n.prototype.emit=function(e){if(!this.$events)return!1;var n=this.$events[e];if(!n)return!1;var s=Array.prototype.slice.call(arguments,1);if("function"==typeof n)n.apply(this,s);else{if(!t.util.isArray(n))return!1;for(var i=n.slice(),a=0,o=i.length;a<o;a++)i[a].apply(this,s)}return!0}}(void 0!==io?io:module.exports,void 0!==io?io:module.parent.exports),function(exports,nativeJSON){"use strict";function f(e){return e<10?"0"+e:e}function date(e,t){return isFinite(e.valueOf())?e.getUTCFullYear()+"-"+f(e.getUTCMonth()+1)+"-"+f(e.getUTCDate())+"T"+f(e.getUTCHours())+":"+f(e.getUTCMinutes())+":"+f(e.getUTCSeconds())+"Z":null}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,s,i,a,o,r=gap,c=t[e];switch(c instanceof Date&&(c=date(e)),"function"==typeof rep&&(c=rep.call(t,e,c)),typeof c){case"string":return quote(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(c)){for(a=c.length,n=0;n<a;n+=1)o[n]=str(n,c)||"null";return i=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+r+"]":"["+o.join(",")+"]",gap=r,i}if(rep&&"object"==typeof rep)for(a=rep.length,n=0;n<a;n+=1)"string"==typeof rep[n]&&(s=rep[n],(i=str(s,c))&&o.push(quote(s)+(gap?": ":":")+i));else for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(i=str(s,c))&&o.push(quote(s)+(gap?": ":":")+i);return i=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+r+"}":"{"+o.join(",")+"}",gap=r,i}}if(nativeJSON&&nativeJSON.parse)return exports.JSON={parse:nativeJSON.parse,stringify:nativeJSON.stringify};var JSON=exports.JSON={},cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;JSON.stringify=function(e,t,n){var s;if(gap="",indent="","number"==typeof n)for(s=0;s<n;s+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})},JSON.parse=function(text,reviver){function walk(e,t){var n,s,i=e[t];if(i&&"object"==typeof i)for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(s=walk(i,n),void 0!==s?i[n]=s:delete i[n]);return reviver.call(e,t,i)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}}(void 0!==io?io:module.exports,"undefined"!=typeof JSON?JSON:void 0),function(e,t){var n=e.parser={},s=n.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],i=n.reasons=["transport not supported","client not handshaken","unauthorized"],a=n.advice=["reconnect"],o=t.JSON,r=t.util.indexOf;n.encodePacket=function(e){var t=r(s,e.type),n=e.id||"",c=e.endpoint||"",l=e.ack,u=null;switch(e.type){case"error":var d=e.reason?r(i,e.reason):"",p=e.advice?r(a,e.advice):"";""===d&&""===p||(u=d+(""!==p?"+"+p:""));break;case"message":""!==e.data&&(u=e.data);break;case"event":var m={name:e.name};e.args&&e.args.length&&(m.args=e.args),u=o.stringify(m);break;case"json":u=o.stringify(e.data);break;case"connect":e.qs&&(u=e.qs);break;case"ack":u=e.ackId+(e.args&&e.args.length?"+"+o.stringify(e.args):"")}var f=[t,n+("data"==l?"+":""),c];return null!==u&&void 0!==u&&f.push(u),f.join(":")},n.encodePayload=function(e){var t="";if(1==e.length)return e[0];for(var n=0,s=e.length;n<s;n++){t+="�"+e[n].length+"�"+e[n]}return t};var c=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;n.decodePacket=function(e){var t=e.match(c);if(!t)return{};var n=t[2]||"",e=t[5]||"",r={type:s[t[1]],endpoint:t[4]||""};switch(n&&(r.id=n,t[3]?r.ack="data":r.ack=!0),r.type){case"error":var t=e.split("+");r.reason=i[t[0]]||"",r.advice=a[t[1]]||"";break;case"message":r.data=e||"";break;case"event":try{var l=o.parse(e);r.name=l.name,r.args=l.args}catch(e){}r.args=r.args||[];break;case"json":try{r.data=o.parse(e)}catch(e){}break;case"connect":r.qs=e||"";break;case"ack":var t=e.match(/^([0-9]+)(\+)?(.*)/);if(t&&(r.ackId=t[1],r.args=[],t[3]))try{r.args=t[3]?o.parse(t[3]):[]}catch(e){}}return r},n.decodePayload=function(e){if("�"==e.charAt(0)){for(var t=[],s=1,i="";s<e.length;s++)if("�"==e.charAt(s)){var a=e.substr(s+1).substr(0,i);if("�"!=e.charAt(s+1+Number(i))&&s+1+Number(i)!=e.length){var o=Number(i);l=function(e,t){for(var n=0,s=e;s<t.length;s++){if("�"==t.charAt(s))return n;n++}return n}(s+o+1,e),a=e.substr(s+1).substr(0,o+l),s+=l}t.push(n.decodePacket(a)),s+=Number(i)+1,i=""}else i+=e.charAt(s);return t}return[n.decodePacket(e)]}}(void 0!==io?io:module.exports,void 0!==io?io:module.parent.exports),function(e,t){function n(e,t){this.socket=e,this.sessid=t}e.Transport=n,t.util.mixin(n,t.EventEmitter),n.prototype.heartbeats=function(){return!0},n.prototype.onData=function(e){if(this!==this.socket.transport)return this;if(this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout(),""!==e){var n=t.parser.decodePayload(e);if(n&&n.length)for(var s=0,i=n.length;s<i;s++)this.onPacket(n[s])}return this},n.prototype.onPacket=function(e){return this.socket.setHeartbeatTimeout(),"heartbeat"==e.type?this.onHeartbeat():("connect"==e.type&&""==e.endpoint&&this.onConnect(),"error"==e.type&&"reconnect"==e.advice&&(this.isOpen=!1),this.socket.onPacket(e),this)},n.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var e=this;this.closeTimeout=setTimeout(function(){e.onDisconnect()},this.socket.closeTimeout)}},n.prototype.onDisconnect=function(){return this.isOpen&&this.close(),this.clearTimeouts(),this.socket.transport===this?this.socket.onDisconnect():this.socket.setBuffer(!1),this},n.prototype.onConnect=function(){return this.socket.onConnect(),this},n.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},n.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},n.prototype.packet=function(e){this.send(t.parser.encodePacket(e))},n.prototype.onHeartbeat=function(e){this.packet({type:"heartbeat"})},n.prototype.onOpen=function(){this.isOpen=!0,this.clearCloseTimeout(),this.socket.onOpen()},n.prototype.onClose=function(){this.isOpen=!1,this.socket.transport===this?this.socket.onClose():this.socket.setBuffer(!1),this.onDisconnect()},n.prototype.prepareUrl=function(){var e=this.socket.options;return this.scheme()+"://"+e.host+":"+e.port+"/"+e.resource+"/"+t.protocol+"/"+this.name+"/"+this.sessid},n.prototype.ready=function(e,t){t.call(this)}}(void 0!==io?io:module.exports,void 0!==io?io:module.parent.exports),function(e,t,n){function s(e){if(this.options={port:80,secure:!1,document:"document"in n&&document,resource:"socket.io",transports:e.transports||t.transports,"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":1/0,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!1,"auto connect":!0,"flash policy port":10843,manualFlush:!1},t.util.merge(this.options,e),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1,this.options["sync disconnect on unload"]&&(!this.isXDomain()||t.util.ua.hasCORS)){var s=this;t.util.on(n,"beforeunload",function(){s.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function i(){}e.Socket=s,t.util.mixin(s,t.EventEmitter),s.prototype.of=function(e){return this.namespaces[e]||(this.namespaces[e]=new t.SocketNamespace(this,e),""!==e&&this.namespaces[e].packet({type:"connect"})),this.namespaces[e]},s.prototype.publish=function(){this.emit.apply(this,arguments);var e;for(var t in this.namespaces)this.namespaces.hasOwnProperty(t)&&(e=this.of(t),e.$emit.apply(e,arguments))},s.prototype.handshake=function(e){function n(t){t instanceof Error?(s.connecting=!1,s.onError(t.message)):e.apply(null,t.split(":"))}var s=this,a=this.options,o=["http"+(a.secure?"s":"")+":/",a.host+":"+a.port,a.resource,t.protocol,t.util.query(this.options.query,"t="+ +new Date)].join("/");if(this.isXDomain()&&!t.util.ua.hasCORS){var r=document.getElementsByTagName("script")[0],c=document.createElement("script");c.src=o+"&jsonp="+t.j.length,c.onreadystatechange=function(){"loaded"==this.readyState&&c.parentNode&&(c.parentNode.removeChild(c),s.connecting=!1,!s.reconnecting&&s.onError("Server down or port not open"),s.publish("handshake_failed"))},r.parentNode.insertBefore(c,r),t.j.push(function(e){n(e),c.parentNode.removeChild(c)})}else{var l=t.util.request();l.open("GET",o,!0),this.isXDomain()&&(l.withCredentials=!0),l.onreadystatechange=function(){4==l.readyState&&(l.onreadystatechange=i,200==l.status?n(l.responseText):403==l.status?(s.onError(l.responseText),s.publish("handshake_failed")):(s.connecting=!1,!s.reconnecting&&s.onError(l.responseText),s.publish("handshake_failed")))},l.send(null)}},s.prototype.connect=function(e){if(this.connecting)return this;var n=this;return n.connecting=!0,this.handshake(function(s,i,a,o){n.sessionid=s,n.closeTimeout=1e3*a,n.heartbeatTimeout=1e3*i,n.transports||(n.transports=n.origTransports=o?t.util.intersect(o.split(","),n.options.transports):n.options.transports),n.setHeartbeatTimeout(),n.once("connect",function(){clearTimeout(n.connectTimeoutTimer),n.connectTimeoutTimer=null,e&&"function"==typeof e&&e()}),n.doConnect()}),this},s.prototype.doConnect=function(){var e=this;return e.transport&&e.transport.clearTimeouts(),e.transport=e.getTransport(e.transports),e.transport?void e.transport.ready(e,function(){e.connecting=!0,e.publish("connecting",e.transport.name),e.transport.open(),e.options["connect timeout"]&&(e.connectTimeoutTimer&&clearTimeout(e.connectTimeoutTimer),e.connectTimeoutTimer=setTimeout(e.tryNextTransport.bind(e),e.options["connect timeout"]))}):e.publish("connect_failed")},s.prototype.getTransport=function(e){for(var n,s=e||this.transports,i=0;n=s[i];i++)if(t.Transport[n]&&t.Transport[n].check(this)&&(!this.isXDomain()||t.Transport[n].xdomainCheck(this))){var a=new t.Transport[n](this,this.sessionid);return a}return null},s.prototype.tryNextTransport=function(){var e=this;if(!e.connected&&(e.connecting=!1,e.options["try multiple transports"])){for(var t=e.transports;t.length>0&&t.splice(0,1)[0]!=e.transport.name;);t.length?e.doConnect():e.publish("connect_failed")}},s.prototype.setHeartbeatTimeout=function(){if(clearTimeout(this.heartbeatTimeoutTimer),!this.transport||this.transport.heartbeats()){var e=this;this.heartbeatTimeoutTimer=setTimeout(function(){e.transport&&e.transport.onClose()},this.heartbeatTimeout)}},s.prototype.packet=function(e){return this.connected&&!this.doBuffer?this.transport.packet(e):this.buffer.push(e),this},s.prototype.setBuffer=function(e){this.doBuffer=e,!e&&this.connected&&this.buffer.length&&(this.options.manualFlush||this.flushBuffer())},s.prototype.flushBuffer=function(){this.transport.payload(this.buffer),this.buffer=[]},s.prototype.disconnect=function(){return(this.connected||this.connecting)&&(this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted")),this},s.prototype.disconnectSync=function(){var e=t.util.request(),n=["http"+(this.options.secure?"s":"")+":/",this.options.host+":"+this.options.port,this.options.resource,t.protocol,"",this.sessionid].join("/")+"/?disconnect=1";e.open("GET",n,!1),e.send(null),this.onDisconnect("booted")},s.prototype.isXDomain=function(){var e=n.location.port||("https:"==n.location.protocol?443:80);return this.options.host!==n.location.hostname||this.options.port!=e},s.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},s.prototype.onOpen=function(){this.open=!0},s.prototype.onClose=function(){this.open=!1,clearTimeout(this.heartbeatTimeoutTimer)},s.prototype.onPacket=function(e){this.of(e.endpoint).onPacket(e)},s.prototype.onError=function(e){e&&e.advice&&"reconnect"===e.advice&&(this.connected||this.connecting)&&(this.disconnect(),this.options.reconnect&&this.reconnect()),this.publish("error",e&&e.reason?e.reason:e)},s.prototype.onDisconnect=function(e){var t=this.connected,n=this.connecting;this.connected=!1,this.connecting=!1,this.open=!1,(t||n)&&(this.transport.close(),this.transport.clearTimeouts(),t&&(this.publish("disconnect",e),"booted"!=e&&this.options.reconnect&&!this.reconnecting&&this.reconnect()),n&&this.tryNextTransport())},s.prototype.reconnect=function(){function e(){if(n.connected){for(var e in n.namespaces)n.namespaces.hasOwnProperty(e)&&""!==e&&n.namespaces[e].packet({type:"connect"});n.publish("reconnect",n.transport.name,n.reconnectionAttempts)}clearTimeout(n.reconnectionTimer),n.removeListener("connect_failed",t),n.removeListener("connect",t),n.reconnecting=!1,delete n.reconnectionAttempts,delete n.reconnectionDelay,delete n.reconnectionTimer,delete n.redoTransports,n.options["try multiple transports"]=i}function t(){if(n.reconnecting)return n.connected?e():n.connecting&&n.reconnecting?n.reconnectionTimer=setTimeout(t,1e3):void(n.reconnectionAttempts++>=s?n.redoTransports?(n.publish("reconnect_failed"),e()):(n.on("connect_failed",t),n.options["try multiple transports"]=!0,n.transports=n.origTransports,n.transport=n.getTransport(),n.redoTransports=!0,n.connect()):(n.reconnectionDelay<a&&(n.reconnectionDelay*=2),n.connect(),n.publish("reconnecting",n.reconnectionDelay,n.reconnectionAttempts),n.reconnectionTimer=setTimeout(t,n.reconnectionDelay)))}this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var n=this,s=this.options["max reconnection attempts"],i=this.options["try multiple transports"],a=this.options["reconnection limit"];this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(t,this.reconnectionDelay),this.on("connect",t)}}(void 0!==io?io:module.exports,void 0!==io?io:module.parent.exports,window),function(e,t){function n(e,t){this.socket=e,this.name=t||"",this.flags={},this.json=new s(this,"json"),this.ackPackets=0,this.acks={}}function s(e,t){this.namespace=e,this.name=t}e.SocketNamespace=n,t.util.mixin(n,t.EventEmitter),n.prototype.$emit=t.EventEmitter.prototype.emit,n.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},n.prototype.packet=function(e){return e.endpoint=this.name,this.socket.packet(e),this.flags={},this},n.prototype.send=function(e,t){var n={type:this.flags.json?"json":"message",data:e};return"function"==typeof t&&(n.id=++this.ackPackets,n.ack=!0,this.acks[n.id]=t),this.packet(n)},n.prototype.emit=function(e){var t=Array.prototype.slice.call(arguments,1),n=t[t.length-1],s={type:"event",name:e};return"function"==typeof n&&(s.id=++this.ackPackets,s.ack="data",this.acks[s.id]=n,t=t.slice(0,t.length-1)),s.args=t,this.packet(s)},n.prototype.disconnect=function(){return""===this.name?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},n.prototype.onPacket=function(e){function n(){s.packet({type:"ack",args:t.util.toArray(arguments),ackId:e.id})}var s=this;switch(e.type){case"connect":this.$emit("connect");break;case"disconnect":""===this.name?this.socket.onDisconnect(e.reason||"booted"):this.$emit("disconnect",e.reason);break;case"message":case"json":var i=["message",e.data];"data"==e.ack?i.push(n):e.ack&&this.packet({type:"ack",ackId:e.id}),this.$emit.apply(this,i);break;case"event":var i=[e.name].concat(e.args);"data"==e.ack&&i.push(n),this.$emit.apply(this,i);break;case"ack":this.acks[e.ackId]&&(this.acks[e.ackId].apply(this,e.args),delete this.acks[e.ackId]);break;case"error":e.advice?this.socket.onError(e):"unauthorized"==e.reason?this.$emit("connect_failed",e.reason):this.$emit("error",e.reason)}},s.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},s.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}}(void 0!==io?io:module.exports,void 0!==io?io:module.parent.exports),function(e,t,n){function s(e){t.Transport.apply(this,arguments)}e.websocket=s,t.util.inherit(s,t.Transport),s.prototype.name="websocket",s.prototype.open=function(){var e,s=t.util.query(this.socket.options.query),i=this;return e||(e=n.MozWebSocket||n.WebSocket),this.websocket=new e(this.prepareUrl()+s),this.websocket.onopen=function(){i.onOpen(),i.socket.setBuffer(!1)},this.websocket.onmessage=function(e){i.onData(e.data)},this.websocket.onclose=function(){i.socket.setBuffer(!0),i.onClose()},this.websocket.onerror=function(e){i.onError(e)},this},t.util.ua.iDevice?s.prototype.send=function(e){var t=this;return setTimeout(function(){t.websocket.send(e)},0),this}:s.prototype.send=function(e){return this.websocket.send(e),this},s.prototype.payload=function(e){for(var t=0,n=e.length;t<n;t++)this.packet(e[t]);return this},s.prototype.close=function(){return this.websocket.close(),this},s.prototype.onError=function(e){this.socket.onError(e)},s.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},s.check=function(){return"WebSocket"in n&&!("__addTask"in WebSocket)||"MozWebSocket"in n},s.xdomainCheck=function(){return!0},t.transports.push("websocket")}(void 0!==io?io.Transport:module.exports,void 0!==io?io:module.parent.exports,window),function(e,t){function n(){t.Transport.websocket.apply(this,arguments)}e.flashsocket=n,t.util.inherit(n,t.Transport.websocket),n.prototype.name="flashsocket",n.prototype.open=function(){var e=this,n=arguments;return WebSocket.__addTask(function(){t.Transport.websocket.prototype.open.apply(e,n)}),this},n.prototype.send=function(){var e=this,n=arguments;return WebSocket.__addTask(function(){t.Transport.websocket.prototype.send.apply(e,n)}),this},n.prototype.close=function(){return WebSocket.__tasks.length=0,t.Transport.websocket.prototype.close.call(this),this},n.prototype.ready=function(e,s){function i(){var t=e.options,i=t["flash policy port"],o=["http"+(t.secure?"s":"")+":/",t.host+":"+t.port,t.resource,"static/flashsocket","WebSocketMain"+(e.isXDomain()?"Insecure":"")+".swf"];n.loaded||("undefined"==typeof WEB_SOCKET_SWF_LOCATION&&(WEB_SOCKET_SWF_LOCATION=o.join("/")),843!==i&&WebSocket.loadFlashPolicyFile("xmlsocket://"+t.host+":"+i),WebSocket.__initialize(),n.loaded=!0),s.call(a)}var a=this;return document.body?i():void t.util.load(i)},n.check=function(){return!!("undefined"!=typeof WebSocket&&"__initialize"in WebSocket&&swfobject)&&swfobject.getFlashPlayerVersion().major>=10},n.xdomainCheck=function(){return!0},"undefined"!=typeof window&&(window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION=!0),t.transports.push("flashsocket")}(void 0!==io?io.Transport:module.exports,void 0!==io?io:module.parent.exports),"undefined"!=typeof window&&void 0!==window.document)var swfobject=function(){function e(){if(!V){try{var e=D.getElementsByTagName("body")[0].appendChild(h("span"));e.parentNode.removeChild(e)}catch(e){return}V=!0;for(var t=j.length,n=0;n<t;n++)j[n]()}}function t(e){V?e():j[j.length]=e}function n(e){if(typeof A.addEventListener!=M)A.addEventListener("load",e,!1);else if(typeof D.addEventListener!=M)D.addEventListener("load",e,!1);else if(typeof A.attachEvent!=M)v(A,"onload",e);else if("function"==typeof A.onload){var t=A.onload;A.onload=function(){t(),e()}}else A.onload=e}function s(){E?i():a()}function i(){var e=D.getElementsByTagName("body")[0],t=h(N);t.setAttribute("type",O);var n=e.appendChild(t);if(n){var s=0;!function(){if(typeof n.GetVariable!=M){var i=n.GetVariable("$version");i&&(i=i.split(" ")[1].split(","),q.pv=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)])}else if(s<10)return s++,void setTimeout(arguments.callee,10);e.removeChild(t),n=null,a()}()}else a()}function a(){var e=$.length;if(e>0)for(var t=0;t<e;t++){var n=$[t].id,s=$[t].callbackFn,i={success:!1,id:n};if(q.pv[0]>0){var a=g(n);if(a)if(!y($[t].swfVersion)||q.wk&&q.wk<312)if($[t].expressInstall&&r()){var u={};u.data=$[t].expressInstall,u.width=a.getAttribute("width")||"0",u.height=a.getAttribute("height")||"0",a.getAttribute("class")&&(u.styleclass=a.getAttribute("class")),a.getAttribute("align")&&(u.align=a.getAttribute("align"));for(var d={},p=a.getElementsByTagName("param"),m=p.length,f=0;f<m;f++)"movie"!=p[f].getAttribute("name").toLowerCase()&&(d[p[f].getAttribute("name")]=p[f].getAttribute("value"));c(u,d,n,s)}else l(a),s&&s(i);else w(n,!0),s&&(i.success=!0,i.ref=o(n),s(i))}else if(w(n,!0),s){var h=o(n);h&&typeof h.SetVariable!=M&&(i.success=!0,i.ref=h),s(i)}}}function o(e){var t=null,n=g(e);if(n&&"OBJECT"==n.nodeName)if(typeof n.SetVariable!=M)t=n;else{var s=n.getElementsByTagName(N)[0];s&&(t=s)}return t}function r(){return!W&&y("6.0.65")&&(q.win||q.mac)&&!(q.wk&&q.wk<312)}function c(e,t,n,s){W=!0,C=s||null,I={success:!1,id:n};var i=g(n);if(i){"OBJECT"==i.nodeName?(S=u(i),x=null):(S=i,x=n),e.id=P,(typeof e.width==M||!/%$/.test(e.width)&&parseInt(e.width,10)<310)&&(e.width="310"),(typeof e.height==M||!/%$/.test(e.height)&&parseInt(e.height,10)<137)&&(e.height="137"),D.title=D.title.slice(0,47)+" - Flash Player Installation";var a=q.ie&&q.win?["Active"].concat("").join("X"):"PlugIn",o="MMredirectURL="+A.location.toString().replace(/&/g,"%26")+"&MMplayerType="+a+"&MMdoctitle="+D.title;if(typeof t.flashvars!=M?t.flashvars+="&"+o:t.flashvars=o,q.ie&&q.win&&4!=i.readyState){var r=h("div");n+="SWFObjectNew",r.setAttribute("id",n),i.parentNode.insertBefore(r,i),i.style.display="none",function(){4==i.readyState?i.parentNode.removeChild(i):setTimeout(arguments.callee,10)}()}d(e,t,n)}}function l(e){if(q.ie&&q.win&&4!=e.readyState){var t=h("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(u(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(u(e),e)}function u(e){var t=h("div");if(q.win&&q.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName(N)[0];if(n){var s=n.childNodes;if(s)for(var i=s.length,a=0;a<i;a++)1==s[a].nodeType&&"PARAM"==s[a].nodeName||8==s[a].nodeType||t.appendChild(s[a].cloneNode(!0))}}return t}function d(e,t,n){var s,i=g(n);if(q.wk&&q.wk<312)return s;if(i)if(typeof e.id==M&&(e.id=n),q.ie&&q.win){var a="";for(var o in e)e[o]!=Object.prototype[o]&&("data"==o.toLowerCase()?t.movie=e[o]:"styleclass"==o.toLowerCase()?a+=' class="'+e[o]+'"':"classid"!=o.toLowerCase()&&(a+=" "+o+'="'+e[o]+'"'));var r="";for(var c in t)t[c]!=Object.prototype[c]&&(r+='<param name="'+c+'" value="'+t[c]+'" />');i.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+a+">"+r+"</object>",B[B.length]=e.id,s=g(e.id)}else{var l=h(N);l.setAttribute("type",O);for(var u in e)e[u]!=Object.prototype[u]&&("styleclass"==u.toLowerCase()?l.setAttribute("class",e[u]):"classid"!=u.toLowerCase()&&l.setAttribute(u,e[u]));for(var d in t)t[d]!=Object.prototype[d]&&"movie"!=d.toLowerCase()&&p(l,d,t[d]);i.parentNode.replaceChild(l,i),s=l}return s}function p(e,t,n){var s=h("param");s.setAttribute("name",t),s.setAttribute("value",n),e.appendChild(s)}function m(e){var t=g(e);t&&"OBJECT"==t.nodeName&&(q.ie&&q.win?(t.style.display="none",function(){4==t.readyState?f(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function f(e){var t=g(e);if(t){for(var n in t)"function"==typeof t[n]&&(t[n]=null);t.parentNode.removeChild(t)}}function g(e){var t=null;try{t=D.getElementById(e)}catch(e){}return t}function h(e){return D.createElement(e)}function v(e,t,n){e.attachEvent(t,n),U[U.length]=[e,t,n]}function y(e){var t=q.pv,n=e.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]}function b(e,t,n,s){if(!q.ie||!q.mac){var i=D.getElementsByTagName("head")[0];if(i){var a=n&&"string"==typeof n?n:"screen";if(s&&(k=null,T=null),!k||T!=a){var o=h("style");o.setAttribute("type","text/css"),o.setAttribute("media",a),k=i.appendChild(o),q.ie&&q.win&&typeof D.styleSheets!=M&&D.styleSheets.length>0&&(k=D.styleSheets[D.styleSheets.length-1]),T=a}q.ie&&q.win?k&&typeof k.addRule==N&&k.addRule(e,t):k&&typeof D.createTextNode!=M&&k.appendChild(D.createTextNode(e+" {"+t+"}"))}}}function w(e,t){if(H){var n=t?"visible":"hidden";V&&g(e)?g(e).style.visibility=n:b("#"+e,"visibility:"+n)}}function _(e){return null!=/[\\\"<>\.;]/.exec(e)&&typeof encodeURIComponent!=M?encodeURIComponent(e):e}var S,x,C,I,k,T,M="undefined",N="object",L="Shockwave Flash",O="application/x-shockwave-flash",P="SWFObjectExprInst",F="onreadystatechange",A=window,D=document,R=navigator,E=!1,j=[s],$=[],B=[],U=[],V=!1,W=!1,H=!0,q=function(){var e=typeof D.getElementById!=M&&typeof D.getElementsByTagName!=M&&typeof D.createElement!=M,t=R.userAgent.toLowerCase(),n=R.platform.toLowerCase(),s=/win/.test(n?n:t),i=/mac/.test(n?n:t),a=!!/webkit/.test(t)&&parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),o=!1,r=[0,0,0],c=null;if(typeof R.plugins!=M&&typeof R.plugins[L]==N)!(c=R.plugins[L].description)||typeof R.mimeTypes!=M&&R.mimeTypes[O]&&!R.mimeTypes[O].enabledPlugin||(E=!0,o=!1,c=c.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),r[0]=parseInt(c.replace(/^(.*)\..*$/,"$1"),10),r[1]=parseInt(c.replace(/^.*\.(.*)\s.*$/,"$1"),10),r[2]=/[a-zA-Z]/.test(c)?parseInt(c.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof A[["Active"].concat("Object").join("X")]!=M)try{var l=new(window[["Active"].concat("Object").join("X")])("ShockwaveFlash.ShockwaveFlash");l&&(c=l.GetVariable("$version"))&&(o=!0,c=c.split(" ")[1].split(","),r=[parseInt(c[0],10),parseInt(c[1],10),parseInt(c[2],10)])}catch(e){}return{w3:e,pv:r,wk:a,ie:o,win:s,mac:i}}();return function(){q.w3&&((typeof D.readyState!=M&&"complete"==D.readyState||typeof D.readyState==M&&(D.getElementsByTagName("body")[0]||D.body))&&e(),V||(typeof D.addEventListener!=M&&D.addEventListener("DOMContentLoaded",e,!1),q.ie&&q.win&&(D.attachEvent(F,function(){"complete"==D.readyState&&(D.detachEvent(F,arguments.callee),e())}),A==top&&function(){if(!V){try{D.documentElement.doScroll("left")}catch(e){return void setTimeout(arguments.callee,0)}e()}}()),q.wk&&function(){if(!V)/loaded|complete/.test(D.readyState)?e():setTimeout(arguments.callee,0)}(),n(e)))}(),function(){q.ie&&q.win&&window.attachEvent("onunload",function(){for(var e=U.length,t=0;t<e;t++)U[t][0].detachEvent(U[t][1],U[t][2]);for(var n=B.length,s=0;s<n;s++)m(B[s]);for(var i in q)q[i]=null;q=null;for(var a in swfobject)swfobject[a]=null;swfobject=null})}(),{registerObject:function(e,t,n,s){if(q.w3&&e&&t){var i={};i.id=e,i.swfVersion=t,i.expressInstall=n,i.callbackFn=s,$[$.length]=i,w(e,!1)}else s&&s({success:!1,id:e})},getObjectById:function(e){if(q.w3)return o(e)},embedSWF:function(e,n,s,i,a,o,l,u,p,m){var f={success:!1,id:n};q.w3&&!(q.wk&&q.wk<312)&&e&&n&&s&&i&&a?(w(n,!1),t(function(){s+="",i+="";var t={};if(p&&typeof p===N)for(var g in p)t[g]=p[g];t.data=e,t.width=s,t.height=i;var h={};if(u&&typeof u===N)for(var v in u)h[v]=u[v];if(l&&typeof l===N)for(var b in l)typeof h.flashvars!=M?h.flashvars+="&"+b+"="+l[b]:h.flashvars=b+"="+l[b];if(y(a)){var _=d(t,h,n);t.id==n&&w(n,!0),f.success=!0,f.ref=_}else{if(o&&r())return t.data=o,void c(t,h,n,m);w(n,!0)}m&&m(f)})):m&&m(f)},switchOffAutoHideShow:function(){H=!1},ua:q,getFlashPlayerVersion:function(){return{major:q.pv[0],minor:q.pv[1],release:q.pv[2]}},hasFlashPlayerVersion:y,createSWF:function(e,t,n){return q.w3?d(e,t,n):void 0},showExpressInstall:function(e,t,n,s){q.w3&&r()&&c(e,t,n,s)},removeSWF:function(e){q.w3&&m(e)},createCSS:function(e,t,n,s){q.w3&&b(e,t,n,s)},addDomLoadEvent:t,addLoadEvent:n,getQueryParamValue:function(e){var t=D.location.search||D.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return _(t);for(var n=t.split("&"),s=0;s<n.length;s++)if(n[s].substring(0,n[s].indexOf("="))==e)return _(n[s].substring(n[s].indexOf("=")+1))}return""},expressInstallCallback:function(){if(W){var e=g(P);e&&S&&(e.parentNode.replaceChild(S,e),x&&(w(x,!0),q.ie&&q.win&&(S.style.display="block")),C&&C(I)),W=!1}}}}();!function(){if("undefined"!=typeof window&&!window.WebSocket){var e=window.console;if(e&&e.log&&e.error||(e={log:function(){},error:function(){}}),!swfobject.hasFlashPlayerVersion("10.0.0"))return void e.error("Flash Player >= 10.0.0 is required.");"file:"==location.protocol&&e.error("WARNING: web-socket-js doesn't work in file:///... URL unless you set Flash Security Settings properly. Open the page via Web server i.e. http://..."),WebSocket=function(e,t,n,s,i){var a=this;a.__id=WebSocket.__nextId++,WebSocket.__instances[a.__id]=a,a.readyState=WebSocket.CONNECTING,a.bufferedAmount=0,a.__events={},t?"string"==typeof t&&(t=[t]):t=[],setTimeout(function(){WebSocket.__addTask(function(){WebSocket.__flash.create(a.__id,e,t,n||null,s||0,i||null)})},0)},WebSocket.prototype.send=function(e){if(this.readyState==WebSocket.CONNECTING)throw"INVALID_STATE_ERR: Web Socket connection has not been established";var t=WebSocket.__flash.send(this.__id,encodeURIComponent(e));return t<0||(this.bufferedAmount+=t,!1)},WebSocket.prototype.close=function(){this.readyState!=WebSocket.CLOSED&&this.readyState!=WebSocket.CLOSING&&(this.readyState=WebSocket.CLOSING,WebSocket.__flash.close(this.__id))},WebSocket.prototype.addEventListener=function(e,t,n){e in this.__events||(this.__events[e]=[]),this.__events[e].push(t)},WebSocket.prototype.removeEventListener=function(e,t,n){if(e in this.__events)for(var s=this.__events[e],i=s.length-1;i>=0;--i)if(s[i]===t){s.splice(i,1);break}},WebSocket.prototype.dispatchEvent=function(e){for(var t=this.__events[e.type]||[],n=0;n<t.length;++n)t[n](e);var s=this["on"+e.type];s&&s(e)},WebSocket.prototype.__handleEvent=function(e){"readyState"in e&&(this.readyState=e.readyState),"protocol"in e&&(this.protocol=e.protocol);var t;if("open"==e.type||"error"==e.type)t=this.__createSimpleEvent(e.type);else if("close"==e.type)t=this.__createSimpleEvent("close");else{if("message"!=e.type)throw"unknown event type: "+e.type;var n=decodeURIComponent(e.message);t=this.__createMessageEvent("message",n)}this.dispatchEvent(t)},WebSocket.prototype.__createSimpleEvent=function(e){if(document.createEvent&&window.Event){var t=document.createEvent("Event");return t.initEvent(e,!1,!1),t}return{type:e,bubbles:!1,cancelable:!1}},WebSocket.prototype.__createMessageEvent=function(e,t){if(document.createEvent&&window.MessageEvent&&!window.opera){var n=document.createEvent("MessageEvent");return n.initMessageEvent("message",!1,!1,t,null,null,window,null),n}return{type:e,data:t,bubbles:!1,cancelable:!1}},WebSocket.CONNECTING=0,WebSocket.OPEN=1,WebSocket.CLOSING=2,WebSocket.CLOSED=3,WebSocket.__flash=null,WebSocket.__instances={},WebSocket.__tasks=[],WebSocket.__nextId=0,WebSocket.loadFlashPolicyFile=function(e){WebSocket.__addTask(function(){WebSocket.__flash.loadManualPolicyFile(e)})},WebSocket.__initialize=function(){if(!WebSocket.__flash){if(WebSocket.__swfLocation&&(window.WEB_SOCKET_SWF_LOCATION=WebSocket.__swfLocation),!window.WEB_SOCKET_SWF_LOCATION)return void e.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf");var t=document.createElement("div");t.id="webSocketContainer",t.style.position="absolute",WebSocket.__isFlashLite()?(t.style.left="0px",t.style.top="0px"):(t.style.left="-100px",t.style.top="-100px");var n=document.createElement("div");n.id="webSocketFlash",t.appendChild(n),document.body.appendChild(t),swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION,"webSocketFlash","1","1","10.0.0",null,null,{hasPriority:!0,swliveconnect:!0,allowScriptAccess:"always"},null,function(t){t.success||e.error("[WebSocket] swfobject.embedSWF failed")})}},WebSocket.__onFlashInitialized=function(){setTimeout(function(){WebSocket.__flash=document.getElementById("webSocketFlash"),WebSocket.__flash.setCallerUrl(location.href),WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);for(var e=0;e<WebSocket.__tasks.length;++e)WebSocket.__tasks[e]();WebSocket.__tasks=[]},0)},WebSocket.__onFlashEvent=function(){return setTimeout(function(){try{for(var e=WebSocket.__flash.receiveEvents(),t=0;t<e.length;++t)WebSocket.__instances[e[t].webSocketId].__handleEvent(e[t])}catch(e){e.error(e)}},0),!0};var t=function(){var e=function(e,t){t=t||2;for(var n=""+e;n.length<t;)n="0"+n;return n},t=new Date;return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDate())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())+":"+e(t.getMilliseconds(),3)};WebSocket.__log=function(n){e.log(t(),decodeURIComponent(n))},WebSocket.__error=function(n){e.error(t(),decodeURIComponent(n))},WebSocket.__addTask=function(e){WebSocket.__flash?e():WebSocket.__tasks.push(e)},WebSocket.__isFlashLite=function(){if(!window.navigator||!window.navigator.mimeTypes)return!1;var e=window.navigator.mimeTypes["application/x-shockwave-flash"];return!!(e&&e.enabledPlugin&&e.enabledPlugin.filename)&&!!e.enabledPlugin.filename.match(/flashlite/i)},window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION||(window.addEventListener?window.addEventListener("load",function(){WebSocket.__initialize()},!1):window.attachEvent("onload",function(){WebSocket.__initialize()}))}}(),function(e,t,n){function s(e){e&&(t.Transport.apply(this,arguments),this.sendBuffer=[])}function i(){}e.XHR=s,t.util.inherit(s,t.Transport),s.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},s.prototype.payload=function(e){for(var n=[],s=0,i=e.length;s<i;s++)n.push(t.parser.encodePacket(e[s]));this.send(t.parser.encodePayload(n))},s.prototype.send=function(e){return this.post(e),this},s.prototype.post=function(e){function t(){4==this.readyState&&(this.onreadystatechange=i,a.posting=!1,200==this.status?a.socket.setBuffer(!1):a.onClose())}function s(){this.onload=i,a.socket.setBuffer(!1)}var a=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),n.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=s:this.sendXHR.onreadystatechange=t,this.sendXHR.send(e)},s.prototype.close=function(){return this.onClose(),this},s.prototype.request=function(e){var n=t.util.request(this.socket.isXDomain()),s=t.util.query(this.socket.options.query,"t="+ +new Date);if(n.open(e||"GET",this.prepareUrl()+s,!0),"POST"==e)try{n.setRequestHeader?n.setRequestHeader("Content-type","text/plain;charset=UTF-8"):n.contentType="text/plain"}catch(e){}return n},s.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},s.check=function(e,s){try{var i=t.util.request(s),a=n.XDomainRequest&&i instanceof XDomainRequest,o=e&&e.options&&e.options.secure?"https:":"http:",r=n.location&&o!=n.location.protocol;if(i&&(!a||!r))return!0}catch(e){}return!1},s.xdomainCheck=function(e){return s.check(e,!0)}}(void 0!==io?io.Transport:module.exports,void 0!==io?io:module.parent.exports,window),function(e,t){function n(e){t.Transport.XHR.apply(this,arguments)}e.htmlfile=n,t.util.inherit(n,t.Transport.XHR),n.prototype.name="htmlfile",n.prototype.get=function(){this.doc=new(window[["Active"].concat("Object").join("X")])("htmlfile"),this.doc.open(),this.doc.write("<html></html>"),this.doc.close(),this.doc.parentWindow.s=this;var e=this.doc.createElement("div");e.className="socketio",this.doc.body.appendChild(e),this.iframe=this.doc.createElement("iframe"),e.appendChild(this.iframe);var n=this,s=t.util.query(this.socket.options.query,"t="+ +new Date);this.iframe.src=this.prepareUrl()+s,t.util.on(window,"unload",function(){n.destroy()})},n.prototype._=function(e,t){this.onData(e);try{var n=t.getElementsByTagName("script")[0];n.parentNode.removeChild(n)}catch(e){}},n.prototype.destroy=function(){if(this.iframe){try{this.iframe.src="about:blank"}catch(e){}this.doc=null,this.iframe.parentNode.removeChild(this.iframe),this.iframe=null,CollectGarbage()}},n.prototype.close=function(){return this.destroy(),t.Transport.XHR.prototype.close.call(this)},n.check=function(e){if("undefined"!=typeof window&&["Active"].concat("Object").join("X")in window)try{return new(window[["Active"].concat("Object").join("X")])("htmlfile")&&t.Transport.XHR.check(e)}catch(e){}return!1},n.xdomainCheck=function(){return!1},t.transports.push("htmlfile")}(void 0!==io?io.Transport:module.exports,void 0!==io?io:module.parent.exports),function(e,t,n){function s(){t.Transport.XHR.apply(this,arguments)}function i(){}e["xhr-polling"]=s,t.util.inherit(s,t.Transport.XHR),t.util.merge(s,t.Transport.XHR),s.prototype.name="xhr-polling",s.prototype.heartbeats=function(){return!1},s.prototype.open=function(){var e=this;return t.Transport.XHR.prototype.open.call(e),!1},s.prototype.get=function(){function e(){4==this.readyState&&(this.onreadystatechange=i,200==this.status?(a.onData(this.responseText),a.get()):a.onClose())}function t(){this.onload=i,this.onerror=i,a.retryCounter=1,a.onData(this.responseText),a.get()}function s(){a.retryCounter++,!a.retryCounter||a.retryCounter>3?a.onClose():a.get()}if(this.isOpen){var a=this;this.xhr=this.request(),n.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=t,this.xhr.onerror=s):this.xhr.onreadystatechange=e,this.xhr.send(null)}},s.prototype.onClose=function(){if(t.Transport.XHR.prototype.onClose.call(this),this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=i;try{this.xhr.abort()}catch(e){}this.xhr=null}},s.prototype.ready=function(e,n){var s=this;t.util.defer(function(){n.call(s)})},t.transports.push("xhr-polling")}(void 0!==io?io.Transport:module.exports,void 0!==io?io:module.parent.exports,window),function(e,t,n){function s(e){t.Transport["xhr-polling"].apply(this,arguments),this.index=t.j.length;var n=this;t.j.push(function(e){n._(e)})}var i=n.document&&"MozAppearance"in n.document.documentElement.style;e["jsonp-polling"]=s,t.util.inherit(s,t.Transport["xhr-polling"]),s.prototype.name="jsonp-polling",s.prototype.post=function(e){function n(){s(),i.socket.setBuffer(!1)}function s(){i.iframe&&i.form.removeChild(i.iframe);try{o=document.createElement('<iframe name="'+i.iframeId+'">')}catch(e){o=document.createElement("iframe"),o.name=i.iframeId}o.id=i.iframeId,i.form.appendChild(o),i.iframe=o}var i=this,a=t.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);if(!this.form){var o,r=document.createElement("form"),c=document.createElement("textarea"),l=this.iframeId="socketio_iframe_"+this.index;r.className="socketio",r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.style.display="none",r.target=l,r.method="POST",r.setAttribute("accept-charset","utf-8"),c.name="d",r.appendChild(c),document.body.appendChild(r),this.form=r,this.area=c}this.form.action=this.prepareUrl()+a,s(),this.area.value=t.JSON.stringify(e);try{this.form.submit()}catch(e){}this.iframe.attachEvent?o.onreadystatechange=function(){"complete"==i.iframe.readyState&&n()}:this.iframe.onload=n,this.socket.setBuffer(!0)},s.prototype.get=function(){var e=this,n=document.createElement("script"),s=t.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),n.async=!0,n.src=this.prepareUrl()+s,n.onerror=function(){e.onClose()};var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(n,a),this.script=n,i&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},s.prototype._=function(e){return this.onData(e),this.isOpen&&this.get(),this},s.prototype.ready=function(e,n){var s=this;return i?void t.util.load(function(){n.call(s)}):n.call(this)},s.check=function(){return"document"in n},s.xdomainCheck=function(){return!0},t.transports.push("jsonp-polling")}(void 0!==io?io.Transport:module.exports,void 0!==io?io:module.parent.exports,window),__WEBPACK_AMD_DEFINE_ARRAY__=[],void 0!==(__WEBPACK_AMD_DEFINE_RESULT__=function(){return io}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()}).call(exports,__webpack_require__(22)(module))},function(e,t){"use strict";function n(){}var s={1:"Android",2:"iOS",4:"PC",8:"WindowsPhone",16:"Web",32:"Server"};n.reverse=function(e){var t=e;return t.type=s[t.type],t},n.reverseType=function(e){return s[e]||e},e.exports=n},function(e,t,n){"use strict";function s(){}var i=n(1);s.parse=function(e){var t=e.split("|");return{scene:t[0],to:t[1]}},s.genSessionByMsg=function(e){return{id:e.sessionId,scene:e.scene,to:e.target,updateTime:e.time,lastMsg:e}},s.appendLastMsg=function(e){var t=e.lastMsg;e["last"+i.capFirstLetter(t.type)+"Msg"]=t,e["last"+i.capFirstLetter(t.flow)+"Msg"]=t},s.genSessionByMsgs=function(e,t){var n=e.getLastNotIgnoredMsg(t);return n?s.genSessionByMsg(n):null},s.trim=function(e){delete e.msgReceiptSendTime,delete e.msgReceiptServerTime,delete e.ack,delete e.unreadMsgs},s.isComplete=function(e){return e.id&&e.scene&&e.to},e.exports=s},function(e,t,n){"use strict";function s(e){var t=this;i.verifyOptions(e,"type to"),i.verifyParamValid("type",e.type,s.validTypes),-1!==e.type.indexOf("custom")&&(i.verifyOptions(e,"content"),t.attach=e.content,o(e.apnsText)&&(t.apnsText=""+e.apnsText),o(e.pushPayload)&&(t.pushPayload=""+e.pushPayload),o(e.sendToOnlineUsersOnly)&&(t.sendToOnlineUsersOnly=e.sendToOnlineUsersOnly?0:1),o(e.cc)&&(t.cc=e.cc?1:0),o(e.isPushable)&&(t.isPushable=e.isPushable?1:0),o(e.isUnreadable)&&(t.isUnreadable=e.isUnreadable?1:0),o(e.needPushNick)&&(t.needPushNick=e.needPushNick?1:0)),t.time=e.time||+new Date,t.type=u[e.type],t.to=e.to,o(e.from)&&(t.from=e.from),o(e.ps)&&(t.ps=e.ps),o(e.deletedIdClient)&&(t.deletedIdClient=e.deletedIdClient),o(e.deletedIdServer)&&(t.deletedIdServer=e.deletedIdServer),o(e.yidunEnable)&&(t.yidunEnable=e.yidunEnable?1:0),o(e.antiSpamContent)&&(t.antiSpamContent=""+e.antiSpamContent),t.idClient=e.idClient||i.guid()}var i=n(1),a=i.undef,o=i.notundef,r=n(23).getInstance("IM"),c=n(20),l=n(15),u={customP2p:100,customTeam:101,deleteMsgP2p:7,deleteMsgTeam:8},d={0:"applyTeam",1:"rejectTeamApply",2:"teamInvite",3:"rejectTeamInvite",5:"friendRequest",6:"deleteFriend",7:"deleteMsgP2p",8:"deleteMsgTeam",100:"customP2p",101:"customTeam",102:"customP2p"},p={1:"addFriend",2:"applyFriend",3:"passFriendApply",4:"rejectFriendApply"},m="team",f="friend",g=[m,f,"msg"],h={applyTeam:m,rejectTeamApply:m,teamInvite:m,rejectTeamInvite:m,addFriend:f,applyFriend:f,passFriendApply:f,rejectFriendApply:f,deleteFriend:f,deleteMsg:"msg"};s.validTypes=Object.keys(u).concat(Object.keys(h)),s.validCategories=["team","friend"],s.isCustom=function(e){return"custom"===e.type},s.reverse=function(e){var t={time:+e.time,to:e.to,type:d[e.type]};if(o(e.from)&&(t.from=e.from),o(e.idServer)&&(t.idServer=""+e.idServer),o(e.deletedIdClient)&&(t.deletedIdClient=e.deletedIdClient),o(e.deletedIdServer)&&(t.deletedIdServer=""+e.deletedIdServer),o(e.deletedMsgTime)&&(t.deletedMsgTime=+e.deletedMsgTime),o(e.deletedMsgFromNick)&&(t.deletedMsgFromNick=""+e.deletedMsgFromNick),o(e.ps)&&(t.ps=e.ps),e.attach=e.attach?""+e.attach:"","customP2p"===t.type||"customTeam"===t.type)t.content=e.attach,o(e.apnsText)&&(t.apnsText=e.apnsText),o(e.pushPayload)&&(t.pushPayload=e.pushPayload),i.merge(t,{sendToOnlineUsersOnly:a(e.sendToOnlineUsersOnly)||0==+e.sendToOnlineUsersOnly,cc:a(e.cc)||1==+e.cc,isPushable:a(e.isPushable)||1==+e.isPushable,isUnreadable:a(e.isUnreadable)||1==+e.isUnreadable,needPushNick:o(e.needPushNick)&&1==+e.needPushNick}),t.scene=t.type.slice(6).toLowerCase(),t.type="custom";else if("deleteMsgP2p"===t.type||"deleteMsgTeam"===t.type)t.scene=t.type.slice(9).toLowerCase(),t.type="deleteMsg";else{if(e.attach){t.attach={};var n=JSON.parse(e.attach);o(n.vt)?(t.type=p[n.vt],delete t.attach):(o(n.tinfo)&&(t.attach.team=c.reverse(r.unserialize(n.tinfo,"team"))),o(n.tlist)&&(t.attach.member=l.reverse(r.unserialize(n.tlist,"teamMember"))),o(n.attach)&&(t.attach.custom=n.attach))}t.category=h[t.type],t.read=!1,t.state="init"}return o(e.cc)&&(t.cc=1==+e.cc),t.status=e.status||"success",o(e.filter)&&(t.filter=e.filter),t},s.reverseSysMsgs=function(e,t){t=t||{};var n=t.mapper,a=i.isFunction(n);return e.map(function(e){return e=s.reverse(e),a&&(e=n(e)),e})},s.completeUnread=function(e){e=e||{},g.forEach(function(t){delete e[t]});var t;return Object.keys(h).forEach(function(n){e[n]=e[n]||0,e[n]<0&&(e[n]=0),t=h[n],e[t]=e[t]||0,e[t]=e[t]+e[n]}),e.total=0,g.forEach(function(t){e.total+=e[t]}),e},e.exports=s},function(e,t,n){"use strict";function s(e){var t=this;switch(a.verifyOptions(e,"action"),e.action){case"create":a.verifyOptions(e,"teamId",!1),a.verifyOptions(e,"type name"),a.verifyParamValid("type",e.type,g);break;case"update":a.verifyOptions(e,"teamId"),a.verifyOptions(e,"type",!1)}o(e.teamId)&&(t.teamId=e.teamId),o(e.type)&&(t.type=m[e.type]),o(e.avatar)&&(t.avatar=""+e.avatar),o(e.name)&&(t.name=""+e.name),o(e.intro)&&(t.intro=""+e.intro),o(e.announcement)&&(t.announcement=""+e.announcement),d.forEach(t.setMode.bind(t,e)),o(e.custom)&&(t.custom=""+e.custom)}function i(e,t){t+="Mode",o(e[t])&&(e[t]=u[t][e[t]])}var a=n(1),o=a.notundef,r=a.fillPropertyWithDefault,c=Object.keys,l={},u={},d=[],p={},m={normal:0,advanced:1},f={0:"normal",1:"advanced"},g=c(m),h=l.joinMode={noVerify:0,needVerify:1,rejectAll:2};u.joinMode={0:"noVerify",1:"needVerify",2:"rejectAll"},d.push("join"),p.joinMode=c(h);var v=l.beInviteMode={needVerify:0,noVerify:1};u.beInviteMode={0:"needVerify",1:"noVerify"},d.push("beInvite"),p.beInviteMode=c(v);var y=l.inviteMode={manager:0,all:1};u.inviteMode={0:"manager",1:"all"},d.push("invite"),p.inviteMode=c(y);var b=l.updateTeamMode={manager:0,all:1};u.updateTeamMode={0:"manager",1:"all"},d.push("updateTeam"),p.updateTeamMode=c(b);var w=l.updateCustomMode={manager:0,all:1};u.updateCustomMode={0:"manager",1:"all"},d.push("updateCustom"),p.updateCustomMode=c(w),s.prototype.setMode=function(e,t){var n=this;t+="Mode",o(e[t])&&(a.verifyParamValid(t,e[t],p[t]),n[t]=l[t][e[t]])},s.reverse=function(e){var t=a.copy(e);return o(t.teamId)&&(t.teamId=""+t.teamId),o(t.type)&&(t.type=f[t.type]),o(t.level)&&(t.level=+t.level),o(t.valid)&&(t.valid=1==+t.valid),o(t.memberNum)&&(t.memberNum=+t.memberNum),o(t.memberUpdateTime)&&(t.memberUpdateTime=+t.memberUpdateTime),o(t.createTime)&&(t.createTime=+t.createTime),o(t.updateTime)&&(t.updateTime=+t.updateTime),o(t.validToCurrentUser)&&(t.validToCurrentUser="1"===t.validToCurrentUser),o(t.mute)&&(t.mute="1"===t.mute),d.forEach(i.bind(null,t)),delete t.bits,s.fillProperties(t),t},s.fillProperties=function(e){var t=r(e,"beInviteMode","needVerify"),n=r(e,"inviteMode","manager"),s=r(e,"updateTeamMode","manager"),i=r(e,"updateCustomMode","manager"),a=r(e,"avatar","");return t||n||s||i||a},e.exports=s},,function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t,n){"use strict";function s(e){this.configMap=e.configMap,this.serializeMap=e.serializeMap,this.unserializeMap=e.unserializeMap}var i=n(1),a=i.undef,o=n(3),r={};s.getInstance=function(e){var t=e.type||e;return r[t]||(r[t]=new s(e)),r[t]},s.prototype.createCmd=function(){var e=1;return function(t,n){var s=this,i=this.configMap.cmdConfig[t];return t={SID:i.sid,CID:i.cid,SER:e++},i.params&&(t.Q=[],i.params.forEach(function(e){var i=e.type,o=e.name,r=e.entity,c=n[o];if(!a(c)){switch(i){case"PropertyArray":i="ArrayMable",c=c.map(function(e){return{t:"Property",v:s.serialize(e,r)}});break;case"Property":c=s.serialize(c,o);break;case"bool":c=c?"true":"false"}t.Q.push({t:i,v:c})}})),t}}(),s.prototype.parseResponse=function(e){var t=this,n=JSON.parse(e),s={raw:n,error:o.genError(n.code)},a=t.configMap.packetConfig[n.sid+"_"+n.cid];if(!a)return s.notFound={sid:n.sid,cid:n.cid},s;var r=n.r,c="notify"===a.service&&!a.cmd;if(s.isNotify=c,c){var l=n.r[1].headerPacket;if(a=t.configMap.packetConfig[l.sid+"_"+l.cid],r=n.r[1].body,!a)return s.notFound={sid:l.sid,cid:l.cid},s}if(s.service=a.service,s.cmd=a.cmd,s.error&&416===s.error.code){var u=r[0];u&&(s.frequencyControlDuration=1e3*u)}var d=!1;return s.error&&a.trivialErrorCodes&&(d=-1!==a.trivialErrorCodes.indexOf(s.error.code)),s.error&&!d||!a.response||(s.content={},a.response.forEach(function(e,a){var o=r[a];if(!i.undef(o)){var l=e.type,u=e.name,d=e.entity||u;switch(l){case"Property":s.content[u]=t.unserialize(o,d);break;case"PropertyArray":s.content[u]=[],o.forEach(function(e){s.content[u].push(t.unserialize(e,d))});break;case"Number":s.content[u]=+o;break;default:s.content[u]=o}if(c&&"msg"===u||"sysMsg"===u){var p=s.content[u];i.isObject(p)&&!p.idServer&&(p.idServer=""+n.r[0])}}})),s},s.prototype.serialize=function(e,t){var n=this.serializeMap[t],s={};for(var i in n)e.hasOwnProperty(i)&&(s[n[i]]=e[i]);return s},s.prototype.unserialize=function(e,t){var n=this.unserializeMap[t],s={};if(e)for(var i in n)e.hasOwnProperty(i)&&(s[n[i]]=e[i]);return s},e.exports=s},function(e,t){function n(e,t){for(var n=t.split(".");n.length;){var s=n.shift(),i=!1;if("?"==s[s.length-1]&&(s=s.slice(0,-1),i=!0),!(e=e[s])&&i)return e}return e}e.exports=n},function(e,t,n){!function(t,s){e.exports=function(e){return function(e){function t(s){if(n[s])return n[s].exports;var i=n[s]={exports:{},id:s,loaded:!1};return e[s].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var s=n(1),i=n(11),a=n(12);s.json=i,s.upload=a,e.exports=s},function(e,t,n){"use strict";function s(e){var t=e.mode,n=m;return p.getGlobal().FormData||(t="iframe"),"iframe"===t&&(n=e.upload?f:g),new n(e)}function i(e){var t=e.upload="multipart/form-data"===(e.headers||p.o)["Content-Type"],n=!1;try{n=(location.protocol+"//"+location.host).toLowerCase()!==p.url2origin(e.url)}catch(e){}return e.cors=n,t||n||e.mode?s(e):new m(e)}function a(e){var t=h[e];t&&(t.req.destroy(),delete h[e])}function o(e,t){t={data:t};var n=e.result.headers;return n&&(t.headers=e.req.header(n)),t}function r(e,t,n){var s=h[e];if(s){"onload"===t&&s.result&&(n=o(s,n)),a(e);var i={type:t,result:n};v(i),i.stopped||s[t](i.result)}}function c(e,t){r(e,"onload",t)}function l(e,t){r(e,"onerror",t)}function u(e,t){var n=p.genUrlSep(e);return t=t||"",p.isObject(t)&&(t=p.object2query(t)),t&&(e+=n+t),e}function d(e,t){t=t||{};var n=p.uniqueID(),s={result:t.result,onload:t.onload||p.f,onerror:t.onerror||p.f};h[n]=s,t.onload=c.bind(null,n),t.onerror=l.bind(null,n),t.query&&(e=u(e,t.query));var a=t.method||"";return a&&!/get/i.test(a)||!t.data||(e=u(e,t.data),t.data=null),t.url=e,s.req=i(t),n}var p=n(2),m=n(3),f=n(7),g=n(10),h={},v=p.f;d.filter=function(e){p.isFunction(e)&&(v=e)},d.abort=function(e){var t=h[e];t&&t.req.abort()},e.exports=d},function(t,n){t.exports=e},function(e,t,n){"use strict";function s(e){var t=this;e.onuploading&&t.on("uploading",e.onuploading),o.call(t,e)}var i=n(2),a=n(4),o=n(5),r=o.prototype,c=s.prototype=Object.create(r);c.doSend=function(){var e=this,t=e.options,n=t.headers,s=e.xhr=new XMLHttpRequest;if("multipart/form-data"===n["Content-Type"]){delete n["Content-Type"],s.upload.onprogress=e.onProgress.bind(e),s.upload.onload=e.onProgress.bind(e);var o=t.data;t.data=new window.FormData,o&&a.getKeys(o,t.putFileAtEnd).forEach(function(e){var n=o[e];n.tagName&&"INPUT"===n.tagName.toUpperCase()?"file"===n.type&&[].forEach.call(n.files,function(e){t.data.append(i.dataset(n,"name")||n.name||e.name||"file-"+i.uniqueID(),e)}):t.data.append(e,n)})}s.onreadystatechange=e.onStateChange.bind(e),0!==t.timeout&&(e.timer=setTimeout(e.onTimeout.bind(e),t.timeout)),s.open(t.method,t.url,!t.sync),Object.keys(n).forEach(function(e){s.setRequestHeader(e,n[e])}),t.cookie&&"withCredentials"in s&&(s.withCredentials=!0),s.send(t.data),e.afterSend()},c.onProgress=function(e){e.lengthComputable&&e.loaded<=e.total&&this.emit("uploading",e)},c.onStateChange=function(){var e=this,t=e.xhr;4===t.readyState&&e.onLoad({status:t.status,result:t.responseText||""})},c.getResponseHeader=function(e){var t=this.xhr;return t?t.getResponseHeader(e):""},c.destroy=function(){var e=this;clearTimeout(e.timer);try{e.xhr.onreadystatechange=i.f,e.xhr.abort()}catch(e){}r.destroy.call(e)},e.exports=s},function(e,t,n){"use strict";var s=n(2),i={};i.isFileInput=function(e){var t=s.getGlobal();return e.tagName&&"INPUT"===e.tagName.toUpperCase()||t.Blob&&e instanceof t.Blob},i.getKeys=function(e,t){var n=Object.keys(e);return t&&n.sort(function(t,n){var s=i.isFileInput(e[t]);return s===i.isFileInput(e[n])?0:s?1:-1}),n},e.exports=i},function(e,t,n){"use strict";function s(e){var t=this;e.onload&&t.once("load",e.onload),e.onerror&&t.once("error",e.onerror),e.onbeforesend&&t.once("beforesend",e.onbeforesend),e.onaftersend&&t.once("aftersend",e.onaftersend),e=t.options=i.fetch({method:"GET",url:"",sync:!1,data:null,headers:{},cookie:!1,timeout:6e4,type:"text",form:null,input:null,putFileAtEnd:!1,proxyUrl:""},e);var n=e.headers,s="Content-Type";i.notexist(n[s])&&(n[s]="application/x-www-form-urlencoded"),t.send()}var i=n(2),a=i.f,o=n(6),r=s.prototype=Object.create(o.prototype);r.send=function(){var e=this,t=e.options;setTimeout(function(){try{try{e.emit("beforesend",t)}catch(e){}e.doSend()}catch(t){e.onError("serverError","请求失败:"+t.message)}},0)},r.doSend=a,r.afterSend=function(){var e=this;setTimeout(function(){e.emit("aftersend",e.options)},0)},r.onLoad=function(e){var t=this,n=t.options,s=e.status,i=e.result;if(0!==(""+s).indexOf("2"))return void t.onError("serverError","服务器返回异常状态",{status:s,result:i});if("json"===n.type)try{i=JSON.parse(i)}catch(e){return void t.onError("parseError",i)}t.emit("load",i)},r.onError=function(e,t,n){var s=i.isObject(n)?n:{};s.code=e||"error",s.message=t||"发生错误",this.emit("error",s)},r.onTimeout=function(){this.onError("timeout","请求超时")},r.abort=function(){this.onError("abort","客户端中止")},r.header=function(e){var t=this;if(!i.isArray(e))return t.getResponseHeader(e||"");var n={};return e.forEach(function(e){n[e]=t.header(e)}),n},r.getResponseHeader=a,r.destroy=a,e.exports=s},function(e,t,n){var s;!function(t){"use strict";function i(){}function a(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function o(e){return function(){return this[e].apply(this,arguments)}}function r(e){return"function"==typeof e||e instanceof RegExp||!(!e||"object"!=typeof e)&&r(e.listener)}var c=i.prototype,l=t.EventEmitter;c.getListeners=function(e){var t,n,s=this._getEvents();if(e instanceof RegExp){t={};for(n in s)s.hasOwnProperty(n)&&e.test(n)&&(t[n]=s[n])}else t=s[e]||(s[e]=[]);return t},c.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},c.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},c.addListener=function(e,t){if(!r(t))throw new TypeError("listener must be a function");var n,s=this.getListenersAsObject(e),i="object"==typeof t;for(n in s)s.hasOwnProperty(n)&&-1===a(s[n],t)&&s[n].push(i?t:{listener:t,once:!1});return this},c.on=o("addListener"),c.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},c.once=o("addOnceListener"),c.defineEvent=function(e){return this.getListeners(e),this},c.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},c.removeListener=function(e,t){var n,s,i=this.getListenersAsObject(e);for(s in i)i.hasOwnProperty(s)&&-1!==(n=a(i[s],t))&&i[s].splice(n,1);return this},c.off=o("removeListener"),c.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},c.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},c.manipulateListeners=function(e,t,n){var s,i,a=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(s=n.length;s--;)a.call(this,t,n[s]);else for(s in t)t.hasOwnProperty(s)&&(i=t[s])&&("function"==typeof i?a.call(this,s,i):o.call(this,s,i));return this},c.removeEvent=function(e){var t,n=typeof e,s=this._getEvents();if("string"===n)delete s[e];else if(e instanceof RegExp)for(t in s)s.hasOwnProperty(t)&&e.test(t)&&delete s[t];else delete this._events;return this},c.removeAllListeners=o("removeEvent"),c.emitEvent=function(e,t){var n,s,i,a,o=this.getListenersAsObject(e);for(a in o)if(o.hasOwnProperty(a))for(n=o[a].slice(0),i=0;i<n.length;i++)s=n[i],!0===s.once&&this.removeListener(e,s.listener),s.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,s.listener);return this},c.trigger=o("emitEvent"),c.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},c.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},c._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},c._getEvents=function(){return this._events||(this._events={})},i.noConflict=function(){return t.EventEmitter=l,i},void 0!==(s=function(){return i}.call(t,n,t,e))&&(e.exports=s)}(this||{})},function(e,t,n){"use strict";function s(e){var t=this;t.init(),o.call(t,e)}var i=n(2),a=n(4),o=n(5),r=n(8),c="NEJ-UPLOAD-RESULT:",l={},u=o.prototype,d=s.prototype=Object.create(u);d.init=function(){function e(e){var t=e.data;if(0===t.indexOf(c)){t=JSON.parse(t.replace(c,""));var n=t.key,s=l[n];s&&(delete l[n],t.result=decodeURIComponent(t.result||""),s.onLoad(t.result))}}function t(){if(!n){n=!0;var t=i.getGlobal();t.postMessage?i.on(t,"message",e):(r.addMsgListener(e),r.startTimer())}}var n=!1;return function(){t()}}(),d.doSend=function(){function e(){d.forEach(function(e,t){var n=p[t];n.parentNode&&(e.name=n.name,i.isFunction(e.setAttribute)&&e.setAttribute("form",n.getAttribute("form")),n.parentNode.replaceChild(e,n))})}var t=this,n=t.options,s=t.key="zoro-ajax-upload-iframe-"+i.uniqueID();l[s]=t;var o=t.form=i.html2node('<form style="display:none;"></form>');document.body.appendChild(o),o.target=s,o.method="POST",o.enctype="multipart/form-data",o.encoding="multipart/form-data";var r=n.url,c=i.genUrlSep(r);o.action=r+c+"_proxy_=form";var u=n.data,d=[],p=[];u&&a.getKeys(u,n.putFileAtEnd).forEach(function(e){var t=u[e];if(t.tagName&&"INPUT"===t.tagName.toUpperCase()){if("file"===t.type){var n=t,s=n.cloneNode(!0);n.parentNode.insertBefore(s,n);var a=i.dataset(n,"name");a&&(n.name=a),o.appendChild(n),i.isFunction(n.setAttribute)&&(n.setAttribute("form",""),n.removeAttribute("form")),d.push(t),p.push(s)}}else{var r=i.html2node('<input type="hidden"/>');r.name=e,r.value=t,o.appendChild(r)}});var m=t.iframe=i.createIframe({name:s,onload:function(){return t.aborted?void e():(i.on(m,"load",t.checkResult.bind(t)),o.submit(),e(),void t.afterSend())}})},d.checkResult=function(){var e,t,n=this;try{if(e=n.iframe.contentWindow.document.body,t=(e.innerText||e.textContent||"").trim(),t.indexOf(c)>=0||e.innerHTML.indexOf(c)>=0)return}catch(e){return}n.onLoad(t)},d.onLoad=function(e){var t=this;u.onLoad.call(t,{status:200,result:e}),i.remove(t.form),i.remove(t.iframe),u.destroy.call(t)},d.destroy=function(){i.remove(this.iframe),i.remove(this.form)},d.abort=function(){var e=this;e.aborted=!0,delete l[e.key],u.abort.call(e)},e.exports=s},function(e,t,n){"use strict";var s=n(9),i=function(e){return e&&e.__esModule?e:{default:e}}(s),a=i.default.getGlobal(),o={},r=a.name||"_parent",c=[],l="MSG|",u=[];o.addMsgListener=function(e){c.push(e)};var d=function(e){for(var t=0,n=c.length;t<n;t++)try{c[t].call(null,e)}catch(e){}},p=function(){var e=/^([\w]+?:\/\/.*?(?=\/|$))/i;return function(t){return t=t||"",e.test(t)?RegExp.$1:"*"}}(),m=function(){var e=unescape(a.name||"").trim();if(e&&0===e.indexOf(l)){a.name="";var t=i.default.string2object(e.replace(l,""),"|"),n=(t.origin||"").toLowerCase();n&&"*"!==n&&0!==location.href.toLowerCase().indexOf(n)||d({data:JSON.parse(t.data||"null"),source:a.frames[t.self]||t.self,origin:p(t.ref||document.referrer)})}},f=function(){var e,t=function(e,t){for(var n=0,s=e.length;n<s;n++)if(e[n]===t)return!0;return!1};return function(){if(u.length){e=[];for(var n,s=u.length-1;s>=0;s--)n=u[s],t(e,n.w)||(e.push(n.w),u.splice(s,1),n.w.name=n.d);e=null}}}(),g=o.startTimer=function(){var e=!1;return function(){e||(e=!0,a.postMessage||(setInterval(f,100),setInterval(m,20)))}}();o.postMessage=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(i.default.fillUndef(t,{origin:"*",source:r}),a.postMessage){var n=t.data;a.FormData||(n=JSON.stringify(n)),e.postMessage(n,t.origin)}else{if(g(),i.default.isObject(t)){var s={};s.origin=t.origin||"",s.ref=location.href,s.self=t.source,s.data=JSON.stringify(t.data),t=l+i.default.object2string(s,"|",!0)}u.unshift({w:e,d:escape(t)})}},e.exports=o},function(e,t,n){"use strict";e.exports=n(2)},function(e,t,n){"use strict";function s(e){var t=this;t.init(),o.call(t,e)}var i=n(2),a=n(8),o=n(5),r={},c=o.prototype,l=s.prototype=Object.create(c);l.init=function(){function e(e){var t=e.data;if(0===t.indexOf(n)){t=JSON.parse(t.replace(n,""));var s=t.key,i=r[s];i&&(delete r[s],t.result=decodeURIComponent(t.result||""),i.onLoad(t))}}function t(){if(!s){s=!0;var t=i.getGlobal();t.postMessage?i.on(t,"message",e):a.addMsgListener(e)}}var n="NEJ-AJAX-DATA:",s=!1;return function(){t()}}(),l.doSend=function(){var e=this,t=e.options,n=i.url2origin(t.url),s=t.proxyUrl||n+"/res/nej_proxy_frame.html",o=r[s];if(i.isArray(o))return void o.push(e.doSend.bind(e,t));if(!o)return r[s]=[e.doSend.bind(e,t)],void i.createIframe({src:s,onload:function(e){var t=r[s];r[s]=i.target(e).contentWindow,t.forEach(function(e){try{e()}catch(e){}})}});if(!e.aborted){var c=e.key=i.uniqueID();r[c]=e;var l=i.fetch({method:"GET",url:"",data:null,headers:{},timeout:0},t);l.key=c,a.postMessage(o,{data:l}),e.afterSend()}},l.abort=function(){var e=this;e.aborted=!0,delete r[e.key],c.abort.call(e)},e.exports=s},function(e,t,n){"use strict";var s=n(2),i=n(1),a=function(){var e=/json/i,t=/post/i;return function(n,a){a=a||{};var o=a.data=a.data||{},r=a.headers=a.headers||{},c=s.checkWithDefault(r,"Accept","application/json"),l=s.checkWithDefault(r,"Content-Type","application/json");return e.test(c)&&(a.type="json"),t.test(a.method)&&e.test(l)&&(a.data=JSON.stringify(o)),i(n,a)}}();e.exports=a},function(e,t,n){"use strict";var s=n(1),i=function(e,t){return t.method="POST",t.headers=t.headers||{},t.headers["Content-Type"]="multipart/form-data",t.timeout=0,t.type=t.type||"json",s(e,t)};e.exports=i}])}(n(33))}()},,function(e,t,n){"use strict";function s(e){switch(a.notundef(e.type)?a.verifyFileType(e.type):e.type="file",a.verifyOptions(e,"file"),a.verifyOptions(e.file,"url ext size md5",!0,"file."),e.type){case"image":o.verifyFile(e.file);break;case"audio":r.verifyFile(e.file);break;case"video":c.verifyFile(e.file)}i.call(this,e),this.attach=JSON.stringify(e.file)}var i=n(13),a=n(1);s.prototype=Object.create(i.prototype),s.reverse=function(e){var t=i.reverse(e);return e.attach=e.attach?""+e.attach:"",t.file=e.attach?JSON.parse(e.attach):{},"audio"===t.type&&(t.file.mp3Url=t.file.url+"?audioTrans&type=mp3"),t},e.exports=s;var o=n(113),r=n(110),c=n(118)},function(e,t,n){"use strict";function s(e){i.merge(this,e),i.notundef(this.gender)&&(i.verifyParamValid("gender",this.gender,s.validGenders),this.gender=a[this.gender]),i.notundef(this.email)&&""!==this.email&&i.verifyEmail("email",this.email),i.notundef(this.birth)&&""!==this.birth&&i.verifyBirth("birth",this.birth),i.notundef(this.tel)&&""!==this.tel&&i.verifyTel("tel",this.tel)}var i=n(1),a={unknown:0,male:1,female:2},o={0:"unknown",1:"male",2:"female"};s.reverse=function(e){var t=i.filterObj(e,"account nick avatar sign gender email birth tel custom createTime updateTime");return i.notundef(t.gender)&&(t.gender=o[t.gender]),i.notundef(t.createTime)&&(t.createTime=+t.createTime),i.notundef(t.updateTime)&&(t.updateTime=+t.updateTime),t},s.reverseUsers=function(e){return e.map(function(e){return s.reverse(e)})},s.validGenders=Object.keys(a),e.exports=s},function(e,t,n){"use strict";function s(e){i.verifyOptions(e,"type"),i.verifyParamValid("type",e.type,s.validTypes),i.merge(this,e),this.type=a[e.type]}var i=n(1),a={stripmeta:0,blur:2,quality:3,crop:4,rotate:5,thumbnail:7,interlace:9},o={0:"stripmeta",1:"type",2:"blur",3:"quality",4:"crop",5:"rotate",6:"pixel",7:"thumbnail",8:"watermark",9:"interlace",10:"tmp"};s.validTypes=Object.keys(a),s.reverse=function(e){var t=i.copy(e);return t.type=o[t.type],t},s.reverseImageOps=function(e){return e.map(function(e){return s.reverse(e)})},e.exports=s},function(e,t,n){"use strict";var s=n(1),i={};i.fromDataURL=s.blobFromDataURL,e.exports=i},function(e,t){function n(e){var t=s.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}e.exports=n;var s=Object.prototype.toString},function(e,t){e.exports=function e(t,n){"use strict";var s,i,a=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,o=/(^[ ]*|[ ]*$)/g,r=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,c=/^0x[0-9a-f]+$/i,l=/^0/,u=function(t){return e.insensitive&&(""+t).toLowerCase()||""+t},d=u(t).replace(o,"")||"",p=u(n).replace(o,"")||"",m=d.replace(a,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),f=p.replace(a,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),g=parseInt(d.match(c),16)||1!==m.length&&d.match(r)&&Date.parse(d),h=parseInt(p.match(c),16)||g&&p.match(r)&&Date.parse(p)||null;if(h){if(g<h)return-1;if(g>h)return 1}for(var v=0,y=Math.max(m.length,f.length);v<y;v++){if(s=!(m[v]||"").match(l)&&parseFloat(m[v])||m[v]||0,i=!(f[v]||"").match(l)&&parseFloat(f[v])||f[v]||0,isNaN(s)!==isNaN(i))return isNaN(s)?1:-1;if(typeof s!=typeof i&&(s+="",i+=""),s<i)return-1;if(s>i)return 1}return 0}},function(e,t,n){!function(t,n){e.exports=function(){return function(e){function t(s){if(n[s])return n[s].exports;var i=n[s]={exports:{},id:s,loaded:!1};return e[s].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.__esModule=!0;var a=n(1),o=i(a),r=n(3),c=i(r),l=n(4),u=i(l),d=n(5),p=i(d),m=n(6),f=i(m),g=n(8),h=s(g),v=n(2),y=s(v),b=n(9),w=i(b),_=n(10),S=i(_),x=n(11),C=s(x),I=n(12),k=i(I),T=n(7),M=i(T),N=n(13),L=i(N),O=k.merge({},o,c,u,p,f,{forOwn:h.default,getGlobal:y.default},w,S,{mixin:C.default},k,M,L);delete O.__esModule,t.default=O,e.exports=t.default},function(e,t,n){"use strict";function s(e){var t=(0,o.default)(),n=void 0;n=e.split(",")[0].indexOf("base64")>=0?t.atob(e.split(",")[1]):t.decodeURIComponent(e.split(",")[1]);for(var s=e.split(",")[0].split(":")[1].split(";")[0],i=new Uint8Array(n.length),a=0;a<n.length;a++)i[a]=n.charCodeAt(a);return new t.Blob([i],{type:s})}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/jpeg",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(e.toBlob)e.toBlob(t,n,i);else{t(s(e.toDataURL(n,i)))}}t.__esModule=!0,t.blobFromDataURL=s,t.blobFromCanvas=i;var a=n(2),o=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t){(function(n){"use strict";t.__esModule=!0,t.default=function(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0!==n?n:{}},e.exports=t.default}).call(t,function(){return this}())},function(e,t){"use strict";function n(e){var t=!1,n="Webkit Moz ms O".split(" "),s=document.createElement("div"),i=null;if(e=e.toLowerCase(),void 0!==s.style[e]&&(t=!0),!1===t){i=e.charAt(0).toUpperCase()+e.substr(1);for(var a=0;a<n.length;a++)if(void 0!==s.style[n[a]+i]){t=!0;break}}return t}t.__esModule=!0,t.detectCSSFeature=n},function(e,t){"use strict";t.__esModule=!0,t.o={},t.emptyObj={},t.f=function(){},t.emptyFunc=function(){},t.regBlank=/\s+/gi,t.regWhiteSpace=/\s+/gi},function(e,t){"use strict";function n(e,t){t=t||2;for(var n=""+e;n.length<t;)n="0"+n;return n}function s(e){return""+e.getFullYear()}function i(e){return n(e.getMonth()+1)}function a(e){return n(e.getDate())}function o(e){return n(e.getHours())}function r(e){return n(e.getMinutes())}function c(e){return n(e.getSeconds())}function l(e){return n(e.getMilliseconds(),3)}function u(e){return e=""+e,new Date(e.replace(/-/g,"/").replace("T"," "))}t.__esModule=!0,t.fix=n,t.getYearStr=s,t.getMonthStr=i,t.getDayStr=a,t.getHourStr=o,t.getMinuteStr=r,t.getSecondStr=c,t.getMillisecondStr=l,t.dateFromDateTimeLocal=u,t.format=function(){var e=/yyyy|MM|dd|hh|mm|ss|SSS/g,t={yyyy:s,MM:i,dd:a,hh:o,mm:r,ss:c,SSS:l};return function(n,s){return n=new Date(n),isNaN(+n)?"invalid date":(s=s||"yyyy-MM-dd",s.replace(e,function(e){return t[e](n)}))}}()},function(e,t,n){"use strict";function s(e,t){if(e===t)return!0;for(;t.parentNode;){if(t.parentNode===e)return!0;t=t.parentNode}return!1}function i(e){var t=e.parentNode||document.body;e=e.cloneNode(!0),e.style.display="block",e.style.opacity=0,e.style.height="auto",t.appendChild(e);var n=e.offsetHeight;return t.removeChild(e),n}function a(e){e.parentNode&&e.parentNode.removeChild(e)}function o(e,t,n){return(0,u.exist)(n)?void e.setAttribute("data-"+t,n):e.getAttribute("data-"+t)}function r(e){return e.target||e.srcElement}function c(e){function t(s){n.src&&(e.multi||f(n,"load",t),e.onload(s))}e=e||{};var n;if(e.name)try{n=document.createElement('<iframe name="'+e.name+'"></iframe>'),n.frameBorder=0}catch(t){n=document.createElement("iframe"),n.name=e.name}else n=document.createElement("iframe");e.visible||(n.style.display="none"),(0,u.isFunction)(e.onload)&&p(n,"load",t),(e.parent||document.body).appendChild(n);var s=e.src||"about:blank";return setTimeout(function(){n.src=s},0),n}function l(e){var t=document.createElement("div");t.innerHTML=e;var n=[],s=void 0,i=void 0;if(t.children)for(s=0,i=t.children.length;s<i;s++)n.push(t.children[s]);else for(s=0,i=t.childNodes.length;s<i;s++){var a=t.childNodes[s];1===a.nodeType&&n.push(a)}return n.length>1?t:n[0]}t.__esModule=!0,t.off=t.removeEventListener=t.on=t.addEventListener=void 0,t.containsNode=s,t.calcHeight=i,t.remove=a,t.dataset=o,t.target=r,t.createIframe=c,t.html2node=l;var u=n(7),d=t.addEventListener=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)},p=t.on=d,m=t.removeEventListener=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)},f=t.off=m},function(e,t){"use strict";function n(e){return Object.prototype.toString.call(e).slice(8,-1)}function s(e){return n(e).toLowerCase()}function i(e){return"string"===s(e)}function a(e){return"number"===s(e)}function o(e){return"boolean"===s(e)}function r(e){return"array"===s(e)}function c(e){return"function"===s(e)}function l(e){return"date"===s(e)}function u(e){return"regexp"===s(e)}function d(e){return"error"===s(e)}function p(e){return null===e}function m(e){return null!==e}function f(e){return void 0===e}function g(e){return void 0!==e}function h(e){return g(e)&&m(e)}function v(e){return f(e)||p(e)}function y(e){return h(e)&&"object"===s(e)}function b(e){return v(e)||(i(e)||r(e))&&0===e.length}t.__esModule=!0,t.getClass=n,t.typeOf=s,t.isString=i,t.isNumber=a,t.isBoolean=o,t.isArray=r,t.isFunction=c,t.isDate=l,t.isRegExp=u,t.isError=d,t.isnull=p,t.notnull=m,t.undef=f,t.notundef=g,t.exist=h,t.notexist=v,t.isObject=y,t.isEmpty=b},function(e,t){"use strict";t.__esModule=!0,t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments[2];for(var s in e)e.hasOwnProperty(s)&&t.call(n,s,e[s])},e.exports=t.default},function(e,t){"use strict";t.__esModule=!0,t.uniqueID=function(){var e=0;return function(){return""+e++}}()},function(e,t,n){"use strict";function s(e){return(0,r.isString)(e)&&0===e.indexOf("{")&&e.lastIndexOf("}")===e.length-1}function i(e){try{s(e)&&(e=JSON.parse(e)),(0,r.isObject)(e)&&(0,o.default)(e,function(t,n){switch((0,r.typeOf)(n)){case"string":case"object":e[t]=i(n)}})}catch(e){}return e}t.__esModule=!0,t.isJSON=s,t.parseJSON=i;var a=n(8),o=function(e){return e&&e.__esModule?e:{default:e}}(a),r=n(7)},function(e,t,n){"use strict";t.__esModule=!0;var s=n(8),i=function(e){return e&&e.__esModule?e:{default:e}}(s);t.default=function(e,t){(0,i.default)(t,function(t,n){e[t]=n})},e.exports=t.default},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function i(e){return JSON.parse(JSON.stringify(e))}function a(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length,n=Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return n.forEach(function(t){(0,p.default)(e,t)}),e}function o(e,t){return(0,f.default)(t,function(t,n){(0,g.undef)(e[t])&&(e[t]=n)}),e}function r(e,t,n){var s=e[t]||e[t.toLowerCase()];return(0,g.notexist)(s)&&(s=n,e[t]=s),s}function c(e,t){return(0,f.default)(e,function(n,s){(0,g.exist)(t[n])&&(e[n]=t[n])}),e}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",n={};return e.split(t).forEach(function(e){var t=e.split("="),s=t.shift();s&&(n[decodeURIComponent(s)]=decodeURIComponent(t.join("=")))}),n}function u(e,t,n){if(!e)return"";var s=[];return(0,f.default)(e,function(e,t){(0,g.isFunction)(t)||((0,g.isDate)(t)?t=t.getTime():(0,g.isArray)(t)?t=t.join(","):(0,g.isObject)(t)&&(t=JSON.stringify(t)),n&&(t=encodeURIComponent(t)),s.push(encodeURIComponent(e)+"="+t))}),s.join(t||",")}t.__esModule=!0,t.simpleClone=i,t.merge=a,t.fillUndef=o,t.checkWithDefault=r,t.fetch=c,t.string2object=l,t.object2string=u;var d=n(11),p=s(d),m=n(8),f=s(m),g=n(7)},function(e,t,n){"use strict";function s(e){return e.indexOf("?")<0?"?":"&"}function i(e){return(0,a.object2string)(e,"&",!0)}t.__esModule=!0,t.url2origin=void 0,t.genUrlSep=s,t.object2query=i;var a=n(12);t.url2origin=function(){var e=/^([\w]+?:\/\/.*?(?=\/|$))/i;return function(t){return e.test(t||"")?RegExp.$1.toLowerCase():""}}()}])}()}()},function(e,t,n){var s;(function(i){!function(a,o){"use strict";a=function(){return void 0!==a?a:"undefined"!=typeof self?self:void 0!==i?i:{}}();var r,c=a.IDBKeyRange||a.webkitIDBKeyRange,l={readonly:"readonly",readwrite:"readwrite"},u=Object.prototype.hasOwnProperty,d=function(){if(!r&&!(r=a.indexedDB||a.webkitIndexedDB||a.mozIndexedDB||a.oIndexedDB||a.msIndexedDB||(null===a.indexedDB&&a.shimIndexedDB?a.shimIndexedDB:o)))throw"IndexedDB required";return r},p=function(e){return e},m=function(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()},f=function(e){return"function"==typeof e},g=function(e){return"number"===m(e)},h=function(e){return"array"===m(e)},v=function(e){return e===o},y=function(e,t){var n=this,s=!1;this.name=t,this.getIndexedDB=function(){return e},this.add=function(t){if(s)throw"Database has been closed";for(var i=[],a=0,o=0;o<arguments.length-1;o++)if(Array.isArray(arguments[o+1]))for(var r=0;r<arguments[o+1].length;r++)i[a]=arguments[o+1][r],a++;else i[a]=arguments[o+1],a++;var c=e.transaction(t,l.readwrite),u=c.objectStore(t);return new Promise(function(e,t){i.forEach(function(e){var t;if(e.item&&e.key){var n=e.key;e=e.item,t=u.add(e,n)}else t=u.add(e);t.onsuccess=function(t){var n=t.target,s=n.source.keyPath;null===s&&(s="__id__"),Object.defineProperty(e,s,{value:n.result,enumerable:!0})}}),c.oncomplete=function(){e(i,n)},c.onerror=function(e){e.preventDefault(),t(e)},c.onabort=function(e){t(e)}})},this.updateAndDelete=function(t,n,i){if(s)throw"Database has been closed";var a=e.transaction(t,l.readwrite),o=a.objectStore(t),r=o.keyPath;return new Promise(function(e,t){n.forEach(function(e){if(e.item&&e.key){var t=e.key;e=e.item,o.put(e,t)}else o.put(e)}),i.forEach(function(e){o.delete(e[r])}),a.oncomplete=function(){e([n,i])},a.onerror=function(e){t(e)}})},this.update=function(t){if(s)throw"Database has been closed";for(var i,a=[],o=1;o<arguments.length;o++)i=arguments[o],Array.isArray(i)?a=a.concat(i):a.push(i);var r=e.transaction(t,l.readwrite),c=r.objectStore(t);return c.keyPath,new Promise(function(e,t){a.forEach(function(e){var t;if(e.item&&e.key){var n=e.key;e=e.item,t=c.put(e,n)}else t=c.put(e);t.onsuccess=function(e){},t.onerror=function(e){}}),r.oncomplete=function(){e(a,n)},r.onerror=function(e){t(e)},r.onabort=function(e){t(e)}})},this.remove=function(t,n){if(s)throw"Database has been closed";var i=e.transaction(t,l.readwrite),a=i.objectStore(t);return new Promise(function(e,t){Array.isArray(n)||(n=[n]),n.forEach(function(e){a.delete(e)}),i.oncomplete=function(){e(n)},i.onerror=function(e){t(e)},i.onabort=function(e){t(e)}})},this.clear=function(t){if(s)throw"Database has been closed";var n=e.transaction(t,l.readwrite);return n.objectStore(t).clear(),new Promise(function(e,t){n.oncomplete=function(){e()},n.onerror=function(e){t(e)}})},this.close=function(){s||(e.close(),s=!0,delete S[t])},this.get=function(t,n){if(s)throw"Database has been closed";var i=e.transaction(t),a=i.objectStore(t),o=a.get(n);return new Promise(function(e,t){o.onsuccess=function(t){e(t.target.result)},i.onerror=function(e){t(e)}})},this.query=function(t,n){if(s)throw"Database has been closed";return new b(t,e,n)},this.count=function(t,n){if(s)throw"Database has been closed";e.transaction(t).objectStore(t)};for(var i=0,a=e.objectStoreNames.length;i<a;i++)!function(e){n[e]={};for(var t in n)u.call(n,t)&&"close"!==t&&(n[e][t]=function(t){return function(){var s=[e].concat([].slice.call(arguments,0));return n[t].apply(n,s)}}(t))}(e.objectStoreNames[i])},b=function(e,t,n){var s=this,i=!1,a=!1,r=function(s,r,u,d,p,m,g){return new Promise(function(h,v){var y=i||a?l.readwrite:l.readonly,b=t.transaction(e,y),w=b.objectStore(e),_=n?w.index(n):w,S=s?c[s].apply(null,r):null,x=[],C=[S],I=0;p=p||null,m=m||[],"count"!==u&&C.push(d||"next");var k=!!i&&Object.keys(i),T=function(e){for(var t=0;t<k.length;t++){var n=k[t],s=i[n];s instanceof Function&&(s=s(e)),e[n]=s}return e};_[u].apply(_,C).onsuccess=function(e){var t=e.target.result;if("number"==typeof t)x=t;else if(t)if(null!==p&&p[0]>I)I=p[0],t.advance(p[0]);else if(null!==p&&I>=p[0]+p[1]);else{var n=!0,s="value"in t?t.value:t.key;m.forEach(function(e){e&&e.length&&(2===e.length?n=n&&s[e[0]]===e[1]:f(e[0])&&(n=n&&e[0].apply(o,[s])))}),n&&(I++,x.push(g(s)),a?t.delete():i&&(s=T(s),t.update(s))),t.continue()}},b.oncomplete=function(){h(x)},b.onerror=function(e){v(e)},b.onabort=function(e){v(e)}})},u=function(e,t){var n="next",s="openCursor",o=[],c=null,l=p,u=!1,d=function(){return r(e,t,s,u?n+"unique":n,c,o,l)},m=function(){return n=null,s="count",{execute:d}},y=function(){return c=h(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments,0,2),1==c.length&&c.unshift(0),g(c[1])||(c=null),{execute:d,count:m,keys:b,filter:w,asc:_,desc:S,distinct:x,modify:C,limit:y,map:I,remove:k}},b=function(e){return e=!!v(e)||!!e,e&&(s="openKeyCursor"),{execute:d,keys:b,filter:w,asc:_,desc:S,distinct:x,modify:C,limit:y,map:I,remove:k}},w=function(){return o.push(Array.prototype.slice.call(arguments,0,2)),{execute:d,count:m,keys:b,filter:w,asc:_,desc:S,distinct:x,modify:C,limit:y,map:I,remove:k}},_=function(e){return e=!!v(e)||!!e,n=e?"next":"prev",{execute:d,count:m,keys:b,filter:w,asc:_,desc:S,distinct:x,modify:C,limit:y,map:I,remove:k}},S=function(e){return e=!!v(e)||!!e,n=e?"prev":"next",{execute:d,count:m,keys:b,filter:w,asc:_,desc:S,distinct:x,modify:C,limit:y,map:I,remove:k}},x=function(e){return e=!!v(e)||!!e,u=e,{execute:d,count:m,keys:b,filter:w,asc:_,desc:S,distinct:x,modify:C,limit:y,map:I,remove:k}},C=function(e){return i=e,{execute:d,count:m,keys:b,filter:w,asc:_,desc:S,distinct:x,modify:C,limit:y,map:I,remove:k}},I=function(e){return f(e)&&(l=e),{execute:d,count:m,keys:b,filter:w,asc:_,desc:S,distinct:x,modify:C,limit:y,map:I,remove:k}},k=function(e){return e=!!v(e)||!!e,a=e,{execute:d,count:m,keys:b,filter:w,asc:_,desc:S,distinct:x,modify:C,limit:y,map:I,remove:k}};return{execute:d,count:m,keys:b,filter:w,asc:_,desc:S,distinct:x,modify:C,limit:y,map:I,remove:k}};"only bound upperBound lowerBound".split(" ").forEach(function(e){s[e]=function(){return new u(e,arguments)}}),this.filter=function(){var e=new u(null,null);return e.filter.apply(e,arguments)},this.all=function(){return this.filter()}},w=function(e,t,n){"function"==typeof t&&(t=t());for(var s in t){var i,a=t[s];i=!u.call(t,s)||n.objectStoreNames.contains(s)?e.currentTarget.transaction.objectStore(s):n.createObjectStore(s,a.key);for(var o in a.indexes){var r=a.indexes[o];try{i.index(o)}catch(e){i.createIndex(o,r.key||o,Object.keys(r).length?r:{unique:!1})}}}},_=function(e,t,n,s){var i=e.target.result,a=new y(i,t);return S[t]=i,Promise.resolve(a)},S={},x={version:"0.10.2",open:function(e){var t;return new Promise(function(n,s){if(S[e.server])_({target:{result:S[e.server]}},e.server,e.version,e.schema).then(n,s);else{try{t=d().open(e.server,e.version)}catch(e){s(e)}t.onsuccess=function(t){_(t,e.server,e.version,e.schema).then(n,s)},t.onupgradeneeded=function(t){w(t,e.schema,t.target.result)},t.onerror=function(e){s(e)}}})},remove:function(e){return new Promise(function(t,n){if(!e)return t();typeof e===y&&(e=e.name);var s;"string"==typeof e&&(s=S[e]),s&&"function"==typeof s.close&&s.close();var i;try{i=d().deleteDatabase(e)}catch(e){n(e)}i.onsuccess=function(n){delete S[e],t(e)},i.onerror=function(e){n(e)},i.onblocked=function(e){n(e)}})}};void 0!==e&&void 0!==e.exports?e.exports=x:(s=function(){return x}.call(t,n,t,e))!==o&&(e.exports=s)}(window)}).call(t,function(){return this}())},,function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){l.merge(e,{platform:s,xhr:i,io:a,naturalSort:o,deepAccess:r,db:c,util:l,support:u,blob:d,ajax:p,Promise:m})};var s=n(11),i=n(68),a=n(16),o=n(32),r=n(24),c=n(34),l=n(1),u=n(39),d=n(30),p=n(25),m=n(2).Promise;e.exports=t.default},,function(e,t,n){"use strict";function s(e){var t=this;a(e.shouldPushNotificationWhenPCOnline)&&(t.open=e.shouldPushNotificationWhenPCOnline?2:1)}var i=n(1),a=i.notundef;s.getDefaultConfig=function(){return{shouldPushNotificationWhenPCOnline:!0}},s.reverse=function(e){return{shouldPushNotificationWhenPCOnline:1!=+e.open}},e.exports=s},function(e,t){"use strict";var n={};n.set=function(e,t,s){n[e]=t,s&&(s.support=t)},e.exports=n},function(e,t,n){"use strict";function s(){}var i=n(14);s.typeMap={text:0,image:1,audio:2,video:3,geo:4,notification:5,file:6,tip:10,custom:100};var a=s.typeReverseMap={0:"text",1:"image",2:"audio",3:"video",4:"geo",5:"notification",6:"file",10:"tip",100:"custom"};s.validTypes=Object.keys(s.typeMap),s.setFlow=function(e,t){var n=t===e.from;n&&t===e.to&&(n=i.deviceId===e.fromDeviceId),e.flow=n?"out":"in"},s.getType=function(e){var t=e.type;return a[t]||t},e.exports=s},function(e,t){"use strict";var n={link:{id:1,heartbeat:2},misc:{id:6,getNosToken:2,audioToText:5,processImage:6}},s={heartbeat:{sid:n.link.id,cid:n.link.heartbeat},getNosToken:{sid:n.misc.id,cid:n.misc.getNosToken,params:[{type:"String",name:"responseBody"}]},audioToText:{sid:n.misc.id,cid:n.misc.audioToText,params:[{type:"Property",name:"audioToText"}]},processImage:{sid:n.misc.id,cid:n.misc.processImage,params:[{type:"String",name:"url"},{type:"PropertyArray",name:"imageOps",entity:"imageOp"}]}},i={"1_2":{service:"link",cmd:"heartbeat"},"6_2":{service:"misc",cmd:"getNosToken",response:[{type:"Property",name:"nosToken"}]},"6_5":{service:"misc",cmd:"audioToText",response:[{type:"String",name:"text"}]},"6_6":{service:"misc",cmd:"processImage",response:[{type:"String",name:"url"}]}};e.exports={idMap:n,cmdConfig:s,packetConfig:i}},function(e,t,n){"use strict";var s=n(8).fn;s.isConnected=function(){return this.protocol.isConnected()},s.connect=function(){this.protocol.connect()},s.disconnect=function(){this.protocol.disconnect()}},function(e,t,n){(function(e){"use strict";var t=n(8).fn,s=n(1),i=n(3),a=n(6),o=n(57),r=n(59),c=n(30);t.sendText=function(e){var t=this;return t.processCallback(e),e.msg=new t.message.TextMessage(e),t.sendMsg(e)},t.previewFile=function(e){if(s.verifyOptions(e,"done"),e.type||(e.type="file"),s.verifyParamPresentJustOne(e,"dataURL blob fileInput wxFilePath"),e.dataURL)e.blob=c.fromDataURL(e.dataURL);else if(e.blob);else if(e.fileInput){if(e.fileInput=s.verifyFileInput(e.fileInput),e.fileInput.files&&!e.fileInput.files.length)return void e.done(i.newNoFileError("请选择"+e.type+"文件"),e);e.fileInputName=s.getFileName(e.fileInput)}this.processCallback(e);var t=o.genResponseBody(e.type)||{};this.getNosToken({responseBody:JSON.stringify(t).replace(/\"/gi,'\\"'),callback:function(t,n){return t?void e.done(t,e.callback.options):(e.nosToken=n,void this._doPreviewFile(e))}.bind(this)})},t._doPreviewFile=function(t){function n(n,r){if(t.uploaddone=c,n)return n.appendMessage("上传文件失败"),void t.done(n,t.callback.options);if(r=o.parseResponse(r,i.options.exifOrientation),r.url=a.genDownloadUrl(t.nosToken.bucket,u.Object),s.exist(t.fileInputName))r.name=t.fileInputName;else if(t.blob){var l=t.blob.name;if(r.name=l||"blob-"+r.md5,!l){var d=t.blob.type;r.ext=d.slice(d.lastIndexOf("/")+1)}}if(e.env.WEIXIN_APP&&(r.name=t.wxFilePath),!r.ext){var p=r.name.lastIndexOf(".");r.ext=-1===p?"unknown":r.name.slice(p+1)}return void t.done(null,s.copy(r))}var i=this,c=t.uploaddone,l=a.genUploadUrl(t.nosToken.bucket),u=this.assembleUploadParams(t.nosToken),d="file";e.env.WEIXIN_APP?(s.verifyOptions(t,"wxFilePath"),wx.uploadFile({url:l,filePath:t.wxFilePath,name:d,formData:u,fail:function(e){},success:function(e){if(200===e.statusCode)try{n(null,JSON.parse(e.data))}catch(e){n({code:"PARSE_WX_UPLOAD_FILE_RES_ERROR",str:e.data,msg:e.errMsg})}else n({code:e.statusCode,msg:e.errMsg})}})):(t.uploaddone=n,t.url=l,t.params=u,t.fileName=d,new r(t))},t.sendFile=function(e){var t=this;if(e.type||(e.type="file"),s.verifyParamPresentJustOne(e,"dataURL blob fileInput file wxFilePath"),t.processCallback(e),e.dataURL)t._previewAndSendFile(e);else if(e.blob)t._previewAndSendFile(e);else if(e.fileInput){if(e.fileInput=s.verifyFileInput(e.fileInput),e.fileInput.files&&!e.fileInput.files.length)return void e.done(i.newNoFileError("请选择"+e.type+"文件"),e.callback.options);t._previewAndSendFile(e)}else if(e.wxFilePath)t._previewAndSendFile(e);else if(e.file)return e.msg=new t.message.FileMessage(e),t.sendMsg(e)},t._previewAndSendFile=function(e){var t=this;s.verifyCallback(e,"uploaddone beforesend");var n=e.done;e.done=function(i,a){e.done=n,i?e.uploaddone(i,e.callback.options):(e.uploaddone(null,s.copy(a)),e.file=a,e.msg=new t.message.FileMessage(e),e.beforesend(t.sendMsg(e)))}.bind(t),t.previewFile(e)},t.assembleUploadParams=function(e){return e?{Object:decodeURIComponent(e.objectName),"x-nos-token":e.token,"x-nos-entity-type":"json"}:null},t.sendGeo=function(e){var t=this;return t.processCallback(e),e.msg=new t.message.GeoMessage(e),t.sendMsg(e)},t.sendTipMsg=function(e){var t=this;return t.processCallback(e),e.msg=new t.message.TipMessage(e),t.sendMsg(e)},t.sendCustomMsg=function(e){var t=this;return t.processCallback(e),e.msg=new t.message.CustomMessage(e),t.sendMsg(e)},t.sendMsg=function(e){var t=this,n=t.protocol,i=e.msg,a={},o=!!e.isLocal;if(o&&e.time&&(i.time=e.time),e.resend&&("out"!==e.flow||"fail"!==e.status))return s.onError("只能重发发送失败的消息");e.callback.options.idClient=i.idClient,t.beforeSendMsg(e,a);var r=e.rtnMsg=t.formatReturnMsg(i);return o&&(r.status="success",r.isLocal=!0),n.storeSendMsg&&(a.promise=n.storeSendMsg(r)),e.cbaop=function(e){if(e&&"server"!==e.from)return r.status="fail",n.updateSendMsgError&&n.updateSendMsgError(r),r},o||(a.msg=i,t.sendCmd(e.cmd,a,e.callback)),t.afterSendMsg(e),o&&setTimeout(function(){r=s.simpleClone(r),e.done(null,r)},0),s.copy(r)},t.beforeSendMsg=function(){},t.afterSendMsg=function(){},t.formatReturnMsg=function(e){var t=this;return e=s.copy(e),t.protocol.completeMsg(e),e.status="sending",e=t.message.reverse(e)},t.resendMsg=function(e){var t=this;return s.verifyOptions(e,"msg"),t.trimMsgFlag(e),e.resend=!0,t._sendMsgByType(e)},t.forwardMsg=function(e){var t=this;return s.verifyOptions(e,"msg"),t.beforeForwardMsg(e),t.trimMsgFlag(e),e.forward=!0,t._sendMsgByType(e)},t.trimMsgFlag=function(e){e&&e.msg&&(e.mgs=s.copy(e.msg),delete e.msg.resend,delete e.msg.forward)},t.beforeForwardMsg=function(){},t._sendMsgByType=function(e){var t=this;switch(s.verifyOptions(e,"msg"),s.verifyParamValid("msg.type",e.msg.type,t.message.validTypes),s.merge(e,e.msg),e.type){case"text":return t.sendText(e);case"image":case"audio":case"video":case"file":return t.sendFile(e);case"geo":return t.sendGeo(e);case"custom":return t.sendCustomMsg(e);case"tip":return t.sendTipMsg(e);default:throw new i("不能发送类型为 "+e.type+" 的消息")}}}).call(t,n(10))},function(e,t,n){"use strict";var s=n(1),i=n(8).fn,a=n(29);i.getNosToken=function(e){this.sendCmd("getNosToken",{responseBody:e.responseBody},e.callback)},i.packFileDownloadName=function(e){s.verifyOptions(e,"url name");var t=e.url;return t+s.genUrlSep(t)+"download="+encodeURIComponent(e.name)},i.audioToMp3=function(e){s.verifyOptions(e,"url");var t=e.url;return t+s.genUrlSep(t)+"audioTrans&type=mp3"},i.stripImageMeta=function(e){return this.beforeProcessImage(e,"stripmeta")},i.qualityImage=function(e){return this.beforeProcessImage(e,"quality")},i.interlaceImage=function(e){return this.beforeProcessImage(e,"interlace")},i.rotateImage=function(e){return this.beforeProcessImage(e,"rotate")},i.blurImage=function(e){return this.beforeProcessImage(e,"blur")},i.cropImage=function(e){return this.beforeProcessImage(e,"crop")},i.thumbnailImage=function(e){return this.beforeProcessImage(e,"thumbnail")},i.beforeProcessImage=function(e,t){var n=s.copy(e);return n.type=t,e.ops=[n],this.processImage(e)},i.processImage=function(e){var t=this;s.verifyOptions(e,"url ops"),s.verifyParamType("ops",e.ops,"array");var n=e.ops.map(function(e){return s.verifyOptions(e,"type"),s.verifyParamValid("type",e.type,a.validTypes),t["gen"+e.type.slice(0,1).toUpperCase()+e.type.slice(1)+"Op"](e)});t.processCallback(e),t.sendCmd("processImage",{url:e.url,imageOps:n},e.callback)},i.genStripmetaOp=function(e){return new a({type:e.type,stripmeta:e.strip?1:0})},i.genQualityOp=function(e){s.verifyOptions(e,"quality"),s.verifyParamType("quality",e.quality,"number"),s.verifyParamMin("quality",e.quality,0),s.verifyParamMax("quality",e.quality,100);var t=Math.round(e.quality);return new a({type:e.type,qualityQuality:t})},i.genInterlaceOp=function(e){return new a({type:e.type})},i.genRotateOp=function(e){for(s.verifyOptions(e,"angle"),s.verifyParamType("angle",e.angle,"number");e.angle<0;)e.angle=e.angle+360;e.angle=e.angle%360;var t=Math.round(e.angle);return new a({type:e.type,rotateAngle:t})},i.genBlurOp=function(e){s.verifyOptions(e,"radius sigma"),s.verifyParamType("radius",e.radius,"number"),s.verifyParamMin("radius",e.radius,1),s.verifyParamMax("radius",e.radius,50),s.verifyParamType("sigma",e.sigma,"number"),s.verifyParamMin("sigma",e.sigma,0);var t=Math.round(e.radius),n=Math.round(e.sigma);return new a({type:e.type,blurRadius:t,blurSigma:n})},i.genCropOp=function(e){s.verifyOptions(e,"x y width height"),s.verifyParamType("x",e.x,"number"),s.verifyParamMin("x",e.x,0),s.verifyParamType("y",e.y,"number"),s.verifyParamMin("y",e.y,0),s.verifyParamType("width",e.width,"number"),s.verifyParamMin("width",e.width,0),s.verifyParamType("height",e.height,"number"),s.verifyParamMin("height",e.height,0);var t=Math.round(e.x),n=Math.round(e.y),i=Math.round(e.width),o=Math.round(e.height);return new a({type:e.type,cropX:t,cropY:n,cropWidth:i,cropHeight:o})},i.genThumbnailOp=function(){var e={cover:"z",contain:"x",crop:"y"};return function(t){s.verifyOptions(t,"mode"),s.verifyParamValid("mode",t.mode,Object.keys(e)),"contain"===t.mode?s.verifyParamAtLeastPresentOne(t,"width height"):s.verifyOptions(t,"width height"),s.undef(t.width)&&(t.width=0),s.undef(t.height)&&(t.height=0),s.verifyParamType("width",t.width,"number"),s.verifyParamMin("width",t.width,0),s.verifyParamType("height",t.height,"number"),s.verifyParamMin("height",t.height,0);var n=Math.round(t.width),i=Math.round(t.height),o=new a({type:t.type,thumbnailMode:e[t.mode],thumbnailWidth:n,thumbnailHeight:i});if("crop"===t.mode&&s.notundef(t.axis)){s.undef(t.axis.x)&&(t.axis.x=5),s.undef(t.axis.y)&&(t.axis.y=5),s.verifyParamMin("axis.x",t.axis.x,0),s.verifyParamMax("axis.x",t.axis.x,10),s.verifyParamMin("axis.y",t.axis.y,0),s.verifyParamMax("axis.y",t.axis.y,10);var r=Math.round(t.axis.x),c=Math.round(t.axis.y);o.thumbnailAxisX=r,o.thumbnailAxisY=c}return s.notundef(t.enlarge)&&(s.verifyParamType("enlarge",t.enlarge,"boolean"),t.enlarge&&(o.thumbnailEnlarge=1)),o}}()},function(e,t,n){"use strict";function s(e){return e=""+e,-1===e.indexOf("?")?"?imageView&":"&"}var i=n(1),a=n(8).fn;a.viewImageStripMeta=function(e){i.verifyOptions(e,"url strip"),i.verifyParamType("strip",e.strip,"boolean");var t="stripmeta="+(e.strip?1:0),n=s(e.url);return e.url+n+t},a.viewImageQuality=function(e){i.verifyOptions(e,"url quality"),i.verifyParamType("quality",e.quality,"number"),i.verifyParamMin("quality",e.quality,0),i.verifyParamMax("quality",e.quality,100);var t=Math.round(e.quality),n="quality="+t,a=s(e.url);return e.url+a+n},a.viewImageInterlace=function(e){i.verifyOptions(e,"url");var t=s(e.url);return e.url+t+"interlace=1"},a.viewImageRotate=function(e){for(i.verifyOptions(e,"url angle"),i.verifyParamType("angle",e.angle,"number");e.angle<0;)e.angle=e.angle+360;e.angle=e.angle%360;var t=Math.round(e.angle),n="rotate="+t,a=s(e.url);return e.url+a+n},a.viewImageBlur=function(e){i.verifyOptions(e,"url radius sigma"),i.verifyParamType("radius",e.radius,"number"),i.verifyParamMin("radius",e.radius,1),i.verifyParamMax("radius",e.radius,50),i.verifyParamType("sigma",e.sigma,"number"),i.verifyParamMin("sigma",e.sigma,0);var t=Math.round(e.radius),n=Math.round(e.sigma),a="blur="+t+"x"+n,o=s(e.url);return e.url+o+a},a.viewImageCrop=function(e){i.verifyOptions(e,"url x y width height"),i.verifyParamType("x",e.x,"number"),i.verifyParamMin("x",e.x,0),i.verifyParamType("y",e.y,"number"),i.verifyParamMin("y",e.y,0),i.verifyParamType("width",e.width,"number"),i.verifyParamMin("width",e.width,0),i.verifyParamType("height",e.height,"number"),i.verifyParamMin("height",e.height,0);var t=Math.round(e.x),n=Math.round(e.y),a=Math.round(e.width),o=Math.round(e.height),r="crop="+t+"_"+n+"_"+a+"_"+o,c=s(e.url);return e.url+c+r},a.viewImageThumbnail=function(){var e={cover:"z",contain:"x",crop:"y"};return function(t){i.verifyOptions(t,"url mode"),i.verifyParamValid("mode",t.mode,Object.keys(e)),"contain"===t.mode?i.verifyParamAtLeastPresentOne(t,"width height"):i.verifyOptions(t,"width height"),i.undef(t.width)&&(t.width=0),i.undef(t.height)&&(t.height=0),i.verifyParamType("width",t.width,"number"),i.verifyParamMin("width",t.width,0),i.verifyParamType("height",t.height,"number"),i.verifyParamMin("height",t.height,0);var n=Math.round(t.width),a=Math.round(t.height),o="thumbnail="+n+e[t.mode]+a;if("crop"===t.mode&&i.notundef(t.axis)){i.undef(t.axis.x)&&(t.axis.x=5),i.undef(t.axis.y)&&(t.axis.y=5),i.verifyParamMin("axis.x",t.axis.x,0),i.verifyParamMax("axis.x",t.axis.x,10),i.verifyParamMin("axis.y",t.axis.y,0),i.verifyParamMax("axis.y",t.axis.y,10);o=o+"&axis="+Math.round(t.axis.x)+"_"+Math.round(t.axis.y)}i.notundef(t.enlarge)&&(i.verifyParamType("enlarge",t.enlarge,"boolean"),t.enlarge&&(o+="&enlarge=1"));var r=s(t.url);return t.url+r+o}}()},function(e,t,n){"use strict";n(62),n(61),n(65),n(2).polyfill()},,function(e,t,n){"use strict";function s(e){i.verifyOptions(e,"account"),i.verifyParamAtLeastPresentOne(e,"alias custom"),this.account=e.account,a(e.alias)&&(this.alias=e.alias),a(e.custom)&&(this.custom=e.custom)}var i=n(1),a=i.notundef,o={addFriend:1,applyFriend:2,passFriendApply:3,rejectFriendApply:4},r={1:"addFriend",2:"applyFriend",3:"passFriendApply",4:"rejectFriendApply"};s.reverse=function(e){var t=i.filterObj(e,"account alias custom createTime updateTime");return a(e.flag)&&(t.valid="1"===e.flag),a(t.createTime)&&(t.createTime=+t.createTime),a(t.updateTime)&&(t.updateTime=+t.updateTime),t},s.validTypes=function(){return Object.keys(o)},s.getByteFromType=function(e){return o[e]},s.getTypeFromByte=function(e){return r[e]},s.assembleFriend=function(e){var t=+new Date;return{account:e,alias:"",createTime:t,custom:"",updateTime:t,valid:!0}},e.exports=s},function(e,t,n){"use strict";var s=n(9).fn,i=n(3),a=n(11),o=n(17),r=n(14),c=n(6),l=n(1),u=l.notundef;s.login=function(){var e=this;e.sendCmd("login",e.assembleLogin(),e.onLogin.bind(e)),e.autoconnect=!1},s.genSessionKey=function(){var e={};return function(){var t=this,n=t.name;return e[n]=e[n]||l.guid()}}(),s.assembleIMLogin=function(){var e=this,t=e.options,n=t.account;return{appLogin:e.autoconnect?0:1,appKey:t.appKey,account:n,token:t.token,sdkVersion:c.info.sdkVersion,protocolVersion:c.info.protocolVersion,os:a.os.toString(),browser:a.name+" "+a.version,session:e.genSessionKey(),deviceId:r.deviceId}},s.onLogin=function(e,t){var n=this;n.loginResult=t,e?n.onAuthError(e):(n.startHeartbeat(),n.afterLogin(t))},s.afterLogin=l.emptyFunc,s.notifyLogin=function(){var e=this,t=e.loginResult;e.logger.info("onConnect",t),e.options.onconnect(t)},s.logout=function(){var e=this;if(e.isConnected()){var t=new i("主动退出","logout");e.onAuthError(t)}},s.onKicked=function(e){var t=this,n=e.content,s=n.from,a=n.reason,r=n.custom,c={reason:t.kickedReasons[a]||"unknown",message:t.kickedMessages[a]||"未知原因"};if(u(s)&&(c.from=o.reverseType(s)),u(r)&&(c.custom=r),t.shouldNotifyKicked(c)){var d=new i("被踢了","kicked");l.merge(d,c),t.onAuthError(d)}else t.logger.warn("silentlyKick"),t.shouldReconnect=!1,t.hasNotifyDisconnected=!0,t.disconnectSocket()},s.shouldNotifyKicked=function(e){return"silentlyKick"!==e.reason},s.onAuthError=function(e){var t=this;t.shouldReconnect=!1,t.markAllCallbackInvalid(e||i.newConnectionError()),t.notifyDisconnect(e)}},function(e,t,n){(function(e){"use strict";var t=n(9).fn,s=n(3),i=n(60),a=n(16),o=n(6),r=n(1);t.initConnect=function(){var e=this;e.socket=null,e.retryCount=0,e.connecting=!1,e.shouldReconnect=!0,e.hasNotifyDisconnected=!1},t.resetConnect=function(){var e=this,t=e.options;r.notundef(t.needReconnect)?(r.verifyParamType("needReconnect",t.needReconnect,"boolean"),e.needReconnect=t.needReconnect):e.needReconnect=!0,r.notundef(t.reconnectionAttempts)&&r.verifyParamType("reconnectionAttempts",t.reconnectionAttempts,"number"),e.reconnectionAttempts=t.reconnectionAttempts||1/0,e.backoff=new i({min:o.reconnectionDelay,max:o.reconnectionDelayMax,jitter:o.reconnectionJitter})},t.connect=function(){var e=this;if(!e.isConnected()&&!e.connecting)if(e.connecting=!0,e.hasNotifyDisconnected=!1,e.socket)e.logger.info("connecting"),e.socket.socket.connect();else{var t=e.getNextSocketUrl();t?e.connectToUrl(t):e.refreshSocketUrl()}},t.getNextSocketUrl=function(){return this.socketUrls.shift()},t.isConnected=function(){var e=this;return!!e.socket&&!!e.socket.socket&&e.socket.socket.connected},t.connectToUrl=function(t){var n=this;if(n.logger.log("try connect to ",t),e.env.WEIXIN_APP&&!window.location){var s=t.split(":");window.location={protocol:s[0],hostname:s[1].slice(2),port:s[2]}}n.socket=a.connect(t,{transports:["websocket","flashsocket","xhr-polling"],reconnect:!1,"force new connection":!0,"connect timeout":o.connectTimeout}),n.socket.on("connect",n.onConnect.bind(n)),n.socket.on("handshake_failed",n.onHandshakeFailed.bind(n)),n.socket.on("connect_failed",n.onConnectFailed.bind(n)),n.socket.on("error",n.onError.bind(n)),n.socket.on("message",n.onMessage.bind(n)),n.socket.on("disconnect",function(){n.onDisconnect(!0)})},t.disconnect=function(){var e=this;e.isConnected()&&(e.logger.info("disconnecting"),e.logout())},t.onConnect=function(){var e=this;e.backoff&&e.backoff.reset(),e.retryCount=0,e.connecting=!1,e.shouldReconnect=!0,e.hasNotifyDisconnected=!1,e.login()},t.onHandshakeFailed=function(){this.onDisconnect()},t.onConnectFailed=function(){this.onDisconnect()},t.onError=function(){var e=arguments[0];e&&this.notifyError(new s(e))},t.onDisconnect=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;t.connected=e,t.connecting=!1,t.markAllCallbackInvalid(s.newNetworkError()),t.stopHeartbeat(),t.reconnect()},t.willReconnect=function(){var e=this;return e.shouldReconnect&&e.needReconnect&&e.retryCount<e.reconnectionAttempts},t.reconnect=function(){var e=this;if(e.willReconnect()){e.socket=null,e.connected&&(e.autoconnect=!0),e.retryCount++;var t=e.backoff.duration();e.logger.log("will retry after",t+"ms",", retryCount",e.retryCount),e.options.onwillreconnect({retryCount:e.retryCount,duration:t}),setTimeout(function(){e.connect()},t)}else e.notifyDisconnect()},t.notifyConnectError=function(e){var t=this,n=s.newConnectError(e);t.logger.error(n),t.options.onerror(n)},t.notifyDisconnect=function(e){var t=this;t.hasNotifyDisconnected||(t.hasNotifyDisconnected=!0,t.disconnectSocket(),e=e||new s,e.retryCount=t.retryCount,e.willReconnect=t.willReconnect(),t.backoff&&t.backoff.reset(),t.retryCount=0,t.connecting=!1,t.logger.info("onDisconnect",e),t.options.ondisconnect(e))},t.disconnectSocket=function(){var e=this;if(e.isConnected())try{e.socket.disconnect(),e.socket=null}catch(e){}}}).call(t,n(10))},function(e,t,n){"use strict";var s=n(9).fn,i=n(6);s.processLink=function(e){e.cmd},s.startHeartbeat=function(){var e=this;e.stopHeartbeat(),e.heartbeatTimer=setTimeout(function(){e.sendCmd("heartbeat",null,e.onHeartbeat.bind(e))},i.heartbeatInterval)},s.stopHeartbeat=function(){var e=this;e.heartbeatTimer&&(clearTimeout(e.heartbeatTimer),e.heartbeatTimer=null)},s.onHeartbeat=function(e,t){var n=this;e||n.startHeartbeat(),n.onMiscError(e,t,"heartbeat")},s.heartbeat=function(){}},function(e,t,n){"use strict";var s=n(9).fn,i=n(29);s.processMisc=function(e){switch(e.cmd){case"getNosToken":e.error||(e.obj=e.content.nosToken);break;case"audioToText":e.error||(e.obj.text=e.content.text);break;case"processImage":e.obj.imageOps=i.reverseImageOps(e.obj.imageOps),e.error||(e.obj={url:e.content.url})}}},function(e,t,n){"use strict";var s=n(1),i=n(41),a=s.merge({},i.idMap,{auth:{id:2,login:3,kicked:5,logout:6,multiPortLogin:7,kick:8},user:{id:3,markInBlacklist:3,getBlacklist:4,markInMutelist:5,getMutelist:6,getRelations:8,getUsers:7,updateMyInfo:10,updateDonnop:15,syncMyInfo:109,syncUpdateMyInfo:110},notify:{id:4,markRead:3,syncOfflineMsgs:4,batchMarkRead:5,syncOfflineSysMsgs:6,syncRoamingMsgs:9,syncMsgReceipts:12},sync:{id:5,sync:1,syncTeamMembers:2},msg:{id:7,sendMsg:1,msg:2,sysMsg:3,getHistoryMsgs:6,sendCustomSysMsg:7,searchHistoryMsgs:8,deleteSessions:9,getSessions:10,syncSendMsg:101,sendMsgReceipt:11,msgReceipt:12,deleteMsg:13,msgDeleted:14,markSessionAck:16},team:{id:8,createTeam:1,sendTeamMsg:2,teamMsg:3,teamMsgs:4,addTeamMembers:5,removeTeamMembers:6,updateTeam:7,leaveTeam:8,getTeam:9,getTeams:10,getTeamMembers:11,dismissTeam:12,applyTeam:13,passTeamApply:14,rejectTeamApply:15,addTeamManagers:16,removeTeamManagers:17,transferTeam:18,updateInfoInTeam:19,updateNickInTeam:20,acceptTeamInvite:21,rejectTeamInvite:22,getTeamHistoryMsgs:23,searchTeamHistoryMsgs:24,updateMuteStateInTeam:25,getMyTeamMembers:26,getMutedTeamMembers:27,syncMyTeamMembers:126,syncTeams:109,syncTeamMembers:111,syncCreateTeam:101,syncSendTeamMsg:102,syncUpdateTeamMember:119},friend:{id:12,friendRequest:1,syncFriendRequest:101,deleteFriend:2,syncDeleteFriend:102,updateFriend:3,syncUpdateFriend:103,getFriends:4},chatroom:{id:13,getChatroomAddress:1},filter:{id:101,sendFilterMsg:1,filterMsg:2,filterSysMsg:3,sendFilterCustomSysMsg:7}}),o=s.merge({},i.cmdConfig,{login:{sid:a.auth.id,cid:a.auth.login,params:[{type:"Property",name:"login"}]},logout:{sid:a.auth.id,cid:a.auth.logout},kick:{sid:a.auth.id,cid:a.auth.kick,params:[{type:"StrArray",name:"deviceIds"}]},markInBlacklist:{sid:a.user.id,cid:a.user.markInBlacklist,params:[{type:"String",name:"account"},{type:"bool",name:"isAdd"}]},getBlacklist:{sid:a.user.id,cid:a.user.getBlacklist,params:[{type:"long",name:"time"}]},markInMutelist:{sid:a.user.id,cid:a.user.markInMutelist,params:[{type:"String",name:"account"},{type:"bool",name:"isAdd"}]},getMutelist:{sid:a.user.id,cid:a.user.getMutelist,params:[{type:"long",name:"time"}]},getRelations:{sid:a.user.id,cid:a.user.getRelations,params:[{type:"long",name:"timetag"}]},getUsers:{sid:a.user.id,cid:a.user.getUsers,params:[{type:"StrArray",name:"accounts"}]},updateMyInfo:{sid:a.user.id,cid:a.user.updateMyInfo,params:[{type:"Property",name:"user"}]},updateDonnop:{sid:a.user.id,cid:a.user.updateDonnop,params:[{type:"Property",name:"donnop"}]},markRead:{sid:a.notify.id,cid:a.notify.markRead,params:[{type:"long",name:"id"},{type:"ph",name:"ph"}]},batchMarkRead:{sid:a.notify.id,cid:a.notify.batchMarkRead,params:[{type:"byte",name:"sid"},{type:"byte",name:"cid"},{type:"LongArray",name:"ids"}]},sync:{sid:a.sync.id,cid:a.sync.sync,params:[{type:"Property",name:"sync"}]},syncTeamMembers:{sid:a.sync.id,cid:a.sync.syncTeamMembers,params:[{type:"LongLongMap",name:"sync"}]},sendMsg:{sid:a.msg.id,cid:a.msg.sendMsg,params:[{type:"Property",name:"msg"}]},getHistoryMsgs:{sid:a.msg.id,cid:a.msg.getHistoryMsgs,params:[{type:"String",name:"to"},{type:"long",name:"beginTime"},{type:"long",name:"endTime"},{type:"long",name:"lastMsgId"},{type:"int",name:"limit"},{type:"bool",name:"reverse"}]},sendCustomSysMsg:{sid:a.msg.id,cid:a.msg.sendCustomSysMsg,params:[{type:"Property",name:"sysMsg"}]},searchHistoryMsgs:{sid:a.msg.id,cid:a.msg.searchHistoryMsgs,params:[{type:"String",name:"to"},{type:"long",name:"beginTime"},{type:"long",name:"endTime"},{type:"String",name:"keyword"},{type:"int",name:"limit"},{type:"bool",name:"reverse"}]},getSessions:{sid:a.msg.id,cid:a.msg.getSessions,params:[{type:"long",name:"time"}]},deleteSessions:{sid:a.msg.id,cid:a.msg.deleteSessions,params:[{type:"StrArray",name:"sessions"}]},sendMsgReceipt:{sid:a.msg.id,cid:a.msg.sendMsgReceipt,params:[{type:"Property",name:"msgReceipt"}]},deleteMsg:{sid:a.msg.id,cid:a.msg.deleteMsg,params:[{type:"Property",name:"sysMsg"}]},markSessionAck:{sid:a.msg.id,cid:a.msg.markSessionAck,params:[{type:"byte",name:"scene"},{type:"String",name:"to"},{type:"long",name:"timetag"}]},createTeam:{sid:a.team.id,cid:a.team.createTeam,params:[{type:"Property",name:"team"},{type:"StrArray",name:"accounts"},{type:"String",name:"ps"}]},sendTeamMsg:{sid:a.team.id,cid:a.team.sendTeamMsg,params:[{type:"Property",name:"msg"}]},addTeamMembers:{sid:a.team.id,cid:a.team.addTeamMembers,params:[{type:"long",name:"teamId"},{type:"StrArray",name:"accounts"},{type:"String",name:"ps"}]},removeTeamMembers:{sid:a.team.id,cid:a.team.removeTeamMembers,params:[{type:"long",name:"teamId"},{type:"StrArray",name:"accounts"}]},updateTeam:{sid:a.team.id,cid:a.team.updateTeam,params:[{type:"Property",name:"team"}]},leaveTeam:{sid:a.team.id,cid:a.team.leaveTeam,params:[{type:"long",name:"teamId"}]},getTeam:{sid:a.team.id,cid:a.team.getTeam,params:[{type:"long",name:"teamId"}]},getTeams:{sid:a.team.id,cid:a.team.getTeams,params:[{type:"long",name:"timetag"}]},getTeamMembers:{sid:a.team.id,cid:a.team.getTeamMembers,params:[{type:"long",name:"teamId"},{type:"long",name:"timetag"}]},dismissTeam:{sid:a.team.id,cid:a.team.dismissTeam,params:[{type:"long",name:"teamId"}]},applyTeam:{sid:a.team.id,cid:a.team.applyTeam,params:[{type:"long",name:"teamId"},{type:"String",name:"ps"}]},passTeamApply:{sid:a.team.id,cid:a.team.passTeamApply,params:[{type:"long",name:"teamId"},{type:"String",name:"from"}]},rejectTeamApply:{sid:a.team.id,cid:a.team.rejectTeamApply,params:[{type:"long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},addTeamManagers:{sid:a.team.id,cid:a.team.addTeamManagers,params:[{type:"long",name:"teamId"},{type:"StrArray",name:"accounts"}]},removeTeamManagers:{sid:a.team.id,cid:a.team.removeTeamManagers,params:[{type:"long",name:"teamId"},{type:"StrArray",name:"accounts"}]},transferTeam:{sid:a.team.id,cid:a.team.transferTeam,params:[{type:"long",name:"teamId"},{type:"String",name:"account"},{type:"bool",name:"leave"}]},updateInfoInTeam:{sid:a.team.id,cid:a.team.updateInfoInTeam,params:[{type:"Property",name:"teamMember"}]},updateNickInTeam:{sid:a.team.id,cid:a.team.updateNickInTeam,params:[{type:"Property",name:"teamMember"}]},acceptTeamInvite:{sid:a.team.id,cid:a.team.acceptTeamInvite,params:[{type:"long",name:"teamId"},{type:"String",name:"from"}]},rejectTeamInvite:{sid:a.team.id,cid:a.team.rejectTeamInvite,params:[{type:"long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},getTeamHistoryMsgs:{sid:a.team.id,cid:a.team.getTeamHistoryMsgs,params:[{type:"long",name:"to"},{type:"long",name:"beginTime"},{type:"long",name:"endTime"},{type:"long",name:"lastMsgId"},{type:"int",name:"limit"},{type:"bool",name:"reverse"}]},searchTeamHistoryMsgs:{sid:a.team.id,cid:a.team.searchTeamHistoryMsgs,params:[{type:"long",name:"to"},{type:"long",name:"beginTime"},{type:"long",name:"endTime"},{type:"String",name:"keyword"},{type:"int",name:"limit"},{type:"bool",name:"reverse"}]},updateMuteStateInTeam:{sid:a.team.id,cid:a.team.updateMuteStateInTeam,params:[{type:"long",name:"teamId"},{type:"String",name:"account"},{type:"int",name:"mute"}]},getMyTeamMembers:{sid:a.team.id,cid:a.team.getMyTeamMembers,params:[{type:"LongArray",name:"teamIds"}]},getMutedTeamMembers:{sid:a.team.id,cid:a.team.getMutedTeamMembers,params:[{type:"long",name:"teamId"}]},friendRequest:{sid:a.friend.id,cid:a.friend.friendRequest,params:[{type:"String",name:"account"},{type:"byte",name:"type"},{type:"String",name:"ps"}]},deleteFriend:{sid:a.friend.id,cid:a.friend.deleteFriend,params:[{type:"String",name:"account"}]},updateFriend:{sid:a.friend.id,cid:a.friend.updateFriend,params:[{type:"Property",name:"friend"}]},getFriends:{sid:a.friend.id,cid:a.friend.getFriends,params:[{type:"long",name:"timetag"}]},getChatroomAddress:{sid:a.chatroom.id,cid:a.chatroom.getChatroomAddress,params:[{type:"long",name:"chatroomId"}]},sendFilterMsg:{sid:a.filter.id,cid:a.filter.sendFilterMsg,params:[{type:"Property",name:"msg"}]},sendFilterCustomSysMsg:{sid:a.filter.id,cid:a.filter.sendFilterCustomSysMsg,params:[{type:"Property",name:"sysMsg"}]}}),r=s.merge({},i.packetConfig,{"2_3":{service:"auth",cmd:"login",response:[{type:"Property",name:"loginRes"},{type:"PropertyArray",name:"loginPorts",entity:"loginPort"}]},"2_5":{service:"auth",cmd:"kicked",response:[{type:"Number",name:"from"},{type:"Number",name:"reason"}]},"2_6":{service:"auth",cmd:"logout"},"2_7":{service:"auth",cmd:"multiPortLogin",response:[{type:"Number",name:"state"},{type:"PropertyArray",name:"loginPorts",entity:"loginPort"}]},"2_8":{service:"auth",cmd:"kick",response:[{type:"StrArray",name:"deviceIds"}]},"3_3":{service:"user",cmd:"markInBlacklist"},"3_103":{service:"user",cmd:"syncMarkInBlacklist",response:[{type:"String",name:"account"},{type:"Boolean",name:"isAdd"}]},"3_4":{service:"user",cmd:"getBlacklist",response:[{type:"StrArray",name:"blacklist"}]},"3_5":{service:"user",cmd:"markInMutelist"},"3_105":{service:"user",cmd:"syncMarkInMutelist",response:[{type:"String",name:"account"},{type:"Boolean",name:"isAdd"}]},"3_6":{service:"user",cmd:"getMutelist",response:[{type:"StrArray",name:"mutelist"}]},"3_8":{service:"user",cmd:"getRelations",response:[{type:"PropertyArray",name:"specialRelations",entity:"specialRelation"},{type:"Number",name:"timetag"}]},"3_7":{service:"user",cmd:"getUsers",response:[{type:"PropertyArray",name:"users",entity:"user"}]},"3_10":{service:"user",cmd:"updateMyInfo",response:[{type:"Number",name:"timetag"}]},"3_15":{service:"user",cmd:"updateDonnop",response:[{type:"Number",name:"timetag"}]},"3_115":{service:"user",cmd:"syncUpdateDonnop",response:[{type:"Property",name:"donnop"},{type:"Number",name:"timetag"}]},"3_109":{service:"user",cmd:"syncMyInfo",response:[{type:"Property",name:"user"},{type:"Number",name:"timetag"}]},"3_110":{service:"user",cmd:"syncUpdateMyInfo",response:[{type:"Property",name:"user"}]},"4_1":{service:"notify"},"4_2":{service:"notify"},"4_3":{service:"notify",cmd:"markRead"},"4_4":{service:"notify",cmd:"syncOfflineMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"4_5":{service:"notify",cmd:"batchMarkRead"},"4_6":{service:"notify",cmd:"syncOfflineSysMsgs",response:[{type:"PropertyArray",name:"sysMsgs",entity:"sysMsg"}]},"4_9":{service:"notify",cmd:"syncRoamingMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"4_12":{service:"notify",cmd:"syncMsgReceipts",response:[{type:"PropertyArray",name:"msgReceipts",entity:"msgReceipt"},{type:"Number",name:"timetag"}]},"4_13":{service:"notify",cmd:"syncDonnop",response:[{type:"Property",name:"donnop"},{type:"Number",name:"timetag"}]},"4_14":{service:"notify",cmd:"syncSessionAck",response:[{type:"StrLongMap",name:"p2p"},{type:"LongLongMap",name:"team"},{type:"Number",name:"timetag"}]},"4_100":{service:"notify",cmd:"syncOfflineFilterMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"4_101":{service:"notify",cmd:"syncOfflineFilterSysMsgs",response:[{type:"PropertyArray",name:"sysMsgs",entity:"sysMsg"}]},"5_1":{service:"sync",cmd:"syncDone",response:[{type:"Number",name:"timetag"}]},"5_2":{service:"sync",cmd:"syncTeamMembersDone",response:[{type:"Number",name:"timetag"}]},"7_1":{service:"msg",cmd:"sendMsg",response:[{type:"Property",name:"msg"}],trivialErrorCodes:[7101]},"7_2":{service:"msg",cmd:"msg",response:[{type:"Property",name:"msg"}]},"7_3":{service:"msg",cmd:"sysMsg",response:[{type:"Property",name:"sysMsg"}]},"7_6":{service:"msg",cmd:"getHistoryMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"7_7":{service:"msg",cmd:"sendCustomSysMsg",trivialErrorCodes:[7101]},"7_8":{service:"msg",cmd:"searchHistoryMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"7_9":{service:"msg",cmd:"deleteSessions"},"7_10":{service:"msg",cmd:"getSessions",response:[{type:"StrArray",name:"sessions"}]},"7_101":{service:"msg",cmd:"syncSendMsg",response:[{type:"Property",name:"msg"}]},"7_11":{service:"msg",cmd:"sendMsgReceipt",response:[{type:"Property",name:"msgReceipt"}]},"7_12":{service:"msg",cmd:"msgReceipt",response:[{type:"Property",name:"msgReceipt"}]},"7_13":{service:"msg",cmd:"onDeleteMsg"},"7_14":{service:"msg",cmd:"onMsgDeleted",response:[{type:"Property",name:"sysMsg"}]},"7_15":{service:"msg",cmd:"onDeleteMsgOfflineRoaming",response:[{type:"PropertyArray",name:"sysMsgs",entity:"sysMsg"},{type:"Number",name:"timetag"},{type:"Number",name:"type"}]},"7_16":{service:"msg",cmd:"onMarkSessionAck"},"7_116":{service:"msg",cmd:"syncMarkSessionAck",response:[{type:"Number",name:"scene"},{type:"String",name:"to"},{type:"Number",name:"timetag"}]},"8_1":{service:"team",cmd:"createTeam",response:[{type:"Property",name:"team"}]},"8_2":{service:"team",cmd:"sendTeamMsg",response:[{type:"Property",name:"msg"}]},"8_3":{service:"team",cmd:"teamMsg",response:[{type:"Property",name:"msg"}]},"8_4":{service:"team",cmd:"teamMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"8_5":{service:"team",cmd:"addTeamMembers"},"8_6":{service:"team",cmd:"removeTeamMembers"},"8_7":{service:"team",cmd:"updateTeam",response:[{type:"Number",name:"id"},{type:"Number",name:"time"}]},"8_8":{service:"team",cmd:"leaveTeam"},"8_9":{service:"team",cmd:"getTeam",response:[{type:"Property",name:"team"}]},"8_10":{service:"team",cmd:"getTeams",response:[{type:"PropertyArray",name:"teams",entity:"team"},{type:"Number",name:"timetag"}]},"8_11":{service:"team",cmd:"getTeamMembers",response:[{type:"Number",name:"teamId"},{type:"PropertyArray",name:"members",entity:"teamMember"},{type:"Number",name:"timetag"}]},"8_12":{service:"team",cmd:"dismissTeam"},"8_13":{service:"team",cmd:"applyTeam",response:[{type:"Property",name:"team"}]},"8_14":{service:"team",cmd:"passTeamApply"},"8_15":{service:"team",cmd:"rejectTeamApply"},"8_16":{service:"team",cmd:"addTeamManagers"},"8_17":{service:"team",cmd:"removeTeamManagers"},"8_18":{service:"team",cmd:"transferTeam"},"8_19":{service:"team",cmd:"updateInfoInTeam"},"8_20":{service:"team",cmd:"updateNickInTeam"},"8_21":{service:"team",cmd:"acceptTeamInvite",response:[{type:"Property",name:"team"}]},"8_22":{service:"team",cmd:"rejectTeamInvite"},"8_23":{service:"team",cmd:"getTeamHistoryMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"8_24":{service:"team",cmd:"searchTeamHistoryMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"8_25":{service:"team",cmd:"updateMuteStateInTeam"},"8_26":{service:"team",cmd:"getMyTeamMembers",response:[{type:"PropertyArray",name:"teamMembers",entity:"teamMember"}]},"8_27":{service:"team",cmd:"getMutedTeamMembers",response:[{type:"Number",name:"teamId"},{type:"PropertyArray",name:"teamMembers",entity:"teamMember"}]},"8_126":{service:"team",cmd:"syncMyTeamMembers",response:[{type:"PropertyArray",name:"teamMembers",entity:"teamMember"},{type:"Number",name:"timetag"}]},"8_109":{service:"team",cmd:"syncTeams",response:[{type:"Number",name:"timetag"},{type:"PropertyArray",name:"teams",entity:"team"}]},"8_111":{service:"team",cmd:"syncTeamMembers",response:[{type:"Number",name:"teamId"},{type:"PropertyArray",name:"members",entity:"teamMember"},{type:"Number",name:"timetag"}]},"8_101":{service:"team",cmd:"syncCreateTeam",response:[{type:"Property",name:"team"}]},"8_102":{service:"team",cmd:"syncSendTeamMsg",response:[{type:"Property",name:"msg"}]},"8_119":{service:"team",cmd:"syncUpdateTeamMember",response:[{type:"Property",name:"teamMember"}]},"12_1":{service:"friend",cmd:"friendRequest"},"12_101":{service:"friend",cmd:"syncFriendRequest",response:[{type:"String",name:"account"},{type:"Number",name:"type"},{type:"String",name:"ps"}]},"12_2":{service:"friend",cmd:"deleteFriend"},"12_102":{service:"friend",cmd:"syncDeleteFriend",response:[{type:"String",name:"account"}]},"12_3":{service:"friend",cmd:"updateFriend"},"12_103":{service:"friend",cmd:"syncUpdateFriend",response:[{type:"Property",name:"friend"}]},"12_4":{service:"friend",cmd:"getFriends",response:[{type:"PropertyArray",name:"friends",entity:"friend"},{type:"Number",name:"timetag"}]},"12_5":{service:"friend",cmd:"syncFriends",response:[{type:"PropertyArray",name:"friends",entity:"friend"},{type:"Number",name:"timetag"}]},"12_6":{service:"friend",cmd:"syncFriendUsers",response:[{type:"PropertyArray",name:"users",entity:"user"},{type:"Number",name:"timetag"}]},"13_1":{service:"chatroom",cmd:"getChatroomAddress",response:[{type:"StrArray",name:"address"}]},"101_1":{service:"filter",cmd:"sendFilterMsg",response:[{type:"Property",name:"msg"}]},"101_2":{service:"filter",cmd:"filterMsg",response:[{type:"Property",name:"msg"}]},"101_3":{service:"filter",cmd:"filterSysMsg",response:[{type:"Property",name:"sysMsg"}]},"101_7":{service:"filter",cmd:"sendFilterCustomSysMsg"}});e.exports={idMap:a,cmdConfig:o,packetConfig:r}},function(e,t,n){(function(e){"use strict";"undefined"!=typeof window&&(window.console||e.env.WEIXIN_APP||(window.console={log:function(){},info:function(){},warn:function(){},error:function(){}}))}).call(t,n(10))},function(e,t){"use strict";var n=e.exports;n.get=function(e){try{return localStorage&&localStorage[e]}catch(e){}},n.set=function(e,t){try{localStorage[e]=t}catch(e){}}},function(e,t,n){"use strict";function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.merge(this,{options:e,debug:!1,api:"log",style:"color:blue;",log:a.emptyFunc,info:a.emptyFunc,warn:a.emptyFunc,error:a.emptyFunc}),this.prefix=e.prefix||"",this.setDebug(e.debug)}var i=n(11),a=n(1),o=s.prototype,r=["Chrome","Safari","Firefox"];o.setDebug=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;if(t.debug=e,e.style&&(t.style=e.style),t.debug&&a.exist(console)){var n=console;t.log=function(){var e=t.formatArgs(arguments);-1!==r.indexOf(i.name)&&a.isString(e[0])&&(e[0]="%c"+e[0],e.splice(1,0,t.style)),t._log("log",e)},t.info=function(){var e=t.formatArgs(arguments);t._log("info",e)},t.warn=function(){var e=t.formatArgs(arguments);t._log("warn",e)},t.error=function(){var e=t.formatArgs(arguments);t._log("error",e)},t._log=function(e,s){var i=t.options.logFunc;if(i&&(i[e]&&(i=i[e]),a.isFunction(i)))return void i.apply(null,s);if(n[e])try{n[e].apply?t.chrome(e,s):t.ie(e,s)}catch(e){}},t.chrome=function(e,s){-1!==r.indexOf(i.name)?n[e].apply(n,s):t.ie(e,s)},t.ie=function(e,t){t.forEach(function(t){n[e](JSON.stringify(t,null,4))})}}},o.formatArgs=function(e){var t=this;e=[].slice.call(e,0);var n=new Date,s=n.getFullYear()+"-"+c(n.getMonth()+1)+"-"+c(n.getDate())+" "+c(n.getHours())+":"+c(n.getMinutes())+":"+c(n.getSeconds())+":"+c(n.getMilliseconds(),3),i="[NIM SDK LOG "+s+" "+ +n+" "+t.prefix+"]\t";return a.isString(e[0])?e[0]=i+e[0]:e.splice(0,0,i),e.forEach(function(t,n){(a.isArray(t)||a.isObject(t))&&(e[n]=a.simpleClone(t))}),e};var c=function(e,t){t=t||2;for(var n=""+e;n.length<t;)n="0"+n;return n};e.exports=s},function(e,t,n){"use strict";var s=n(1),i={file:{md5:"$(Etag)",size:"$(ObjectSize)"},image:{md5:"$(Etag)",size:"$(ObjectSize)",w:"$(ImageInfo.Width)",h:"$(ImageInfo.Height)",orientation:"$(ImageInfo.Orientation)"},audio:{md5:"$(Etag)",size:"$(ObjectSize)",dur:"$(AVinfo.Audio.Duration)"},video:{md5:"$(Etag)",size:"$(ObjectSize)",dur:"$(AVinfo.Video.Duration)",w:"$(AVinfo.Video.Width)",h:"$(AVinfo.Video.Height)"}},a={};a.genResponseBody=function(e){return e=e||"file",i[e]},a.parseResponse=function(e,t){s.notundef(e.size)&&(e.size=+e.size),s.notundef(e.w)&&(e.w=+e.w),s.notundef(e.h)&&(e.h=+e.h),s.notundef(e.dur)&&(e.dur=+e.dur);var n=e.orientation;if(s.notundef(n)&&(delete e.orientation,t&&("right, top"===n||"left, bottom"===n))){var i=e.w;e.w=e.h,e.h=i}return e},e.exports=a},function(e,t,n){"use strict";var s=n(1);s.fillPropertyWithDefault=function(e,t,n){return!!s.undef(e[t])&&(e[t]=n,!0)}},function(e,t,n){"use strict";function s(e){var t=this;t.options=i.copy(e),i.verifyOptions(e,"url fileName"),i.verifyParamPresentJustOne(e,"blob fileInput"),i.verifyCallback(e,"beginupload uploadprogress uploaddone"),e.fileInput&&(e.fileInput=i.verifyFileInput(e.fileInput)),e.type&&i.verifyFileType(e.type),e.timeout?i.verifyParamType("timeout",e.timeout,"number"):e.timeout=6e5,i.verifyFileUploadCallback(e),e.data={};var n=e.fileName,s=e.fileInput;if(r)if(s){var l=e.type?i.filterFiles(s.files,e.type):[].slice.call(s.files,0);if(!l||!l.length)return void e.uploaddone(a.newWrongFileTypeError("未读取到"+e.type+"类型的文件, 请确保文件选择节点的文件不为空, 并且请确保选择了"+e.type+"类型的文件"));var u=s.files[0].size;if(u>c)return void e.uploaddone(a.newFileTooLargeError("文件大小超过100M"));e.data[n]=l[0]}else e.blob&&(e.data[n]=e.blob);else i.dataset(s,"name",n),e.data.input=s;e.params&&i.merge(e.data,e.params);var d={data:e.data,onaftersend:function(){e.beginupload(t)},onuploading:function(t){var n=Math.floor(1e4*t.loaded/t.total)/100,s={total:t.total,loaded:t.loaded,percentage:n,percentageText:n+"%"};e.uploadprogress(s)},onload:function(n){n.Error?t.onError(n):e.uploaddone(null,n)},onerror:function(n){try{var s=JSON.parse(n.result);t.onError(s)}catch(s){e.uploaddone(new a(n.message,n.code),t.options)}}};r||(d.mode="iframe"),d.putFileAtEnd=!0,t.sn=o(e.url,d)}var i=n(1),a=n(3),o=n(25).upload,r=i.supportFormData,c=104857600;s.prototype.onError=function(e){var t,n,s,i=this,o=i.options;e=e||{},t=e.Error||{},n=t.Code||"unknown",s=t.Message||"未知错误",o.uploaddone(new a(n+"("+s+")",n))},s.prototype.abort=function(){o.abort(this.sn)},e.exports=s},function(e,t){function n(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=n,n.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(e){this.ms=e},n.prototype.setMax=function(e){this.max=e},n.prototype.setJitter=function(e){this.jitter=e}},function(e,t,n){var s,i;!function(a,o){"use strict";s=o,void 0!==(i="function"==typeof s?s.call(t,n,t,e):s)&&(e.exports=i)}(0,function(){var e,t,n,s,i=Function.call,a=Object.prototype,o=i.bind(a.hasOwnProperty),r=i.bind(a.propertyIsEnumerable),c=i.bind(a.toString),l=o(a,"__defineGetter__");l&&(e=i.bind(a.__defineGetter__),t=i.bind(a.__defineSetter__),n=i.bind(a.__lookupGetter__),s=i.bind(a.__lookupSetter__));var u=function(e){return null==e||"object"!=typeof e&&"function"!=typeof e};Object.getPrototypeOf||(Object.getPrototypeOf=function(e){var t=e.__proto__;return t||null===t?t:"[object Function]"===c(e.constructor)?e.constructor.prototype:e instanceof Object?a:null});var d=function(e){try{return e.sentinel=0,0===Object.getOwnPropertyDescriptor(e,"sentinel").value}catch(e){return!1}};if(Object.defineProperty){var p=d({});if(!("undefined"==typeof document||d(document.createElement("div")))||!p)var m=Object.getOwnPropertyDescriptor}if(!Object.getOwnPropertyDescriptor||m){Object.getOwnPropertyDescriptor=function(e,t){if(u(e))throw new TypeError("Object.getOwnPropertyDescriptor called on a non-object: "+e);if(m)try{return m.call(Object,e,t)}catch(e){}var i;if(!o(e,t))return i;if(i={enumerable:r(e,t),configurable:!0},l){var c=e.__proto__,d=e!==a;d&&(e.__proto__=a);var p=n(e,t),f=s(e,t);if(d&&(e.__proto__=c),p||f)return p&&(i.get=p),f&&(i.set=f),i}return i.value=e[t],i.writable=!0,i}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(e){return Object.keys(e)}),!Object.create){var f,g=!({__proto__:null}instanceof Object),h=function(){if(!document.domain)return!1;try{return!!new ActiveXObject("htmlfile")}catch(e){return!1}},v=function(){var e,t;t=new ActiveXObject("htmlfile");var n="script";return t.write("<"+n+"></"+n+">"),t.close(),e=t.parentWindow.Object.prototype,t=null,e},y=function(){var e,t=document.createElement("iframe"),n=document.body||document.documentElement;return t.style.display="none",n.appendChild(t),t.src="javascript:",e=t.contentWindow.Object.prototype,n.removeChild(t),t=null,e};f=g||"undefined"==typeof document?function(){return{__proto__:null}}:function(){var e=h()?v():y();delete e.constructor,delete e.hasOwnProperty,delete e.propertyIsEnumerable,delete e.isPrototypeOf,delete e.toLocaleString,delete e.toString,delete e.valueOf;var t=function(){};return t.prototype=e,f=function(){return new t},new t},Object.create=function(e,t){var n,s=function(){};if(null===e)n=f();else{if(null!==e&&u(e))throw new TypeError("Object prototype may only be an Object or null");s.prototype=e,n=new s,n.__proto__=e}return void 0!==t&&Object.defineProperties(n,t),n}}var b=function(e){try{return Object.defineProperty(e,"sentinel",{}),"sentinel"in e}catch(e){return!1}};if(Object.defineProperty){var w=b({}),_="undefined"==typeof document||b(document.createElement("div"));if(!w||!_)var S=Object.defineProperty,x=Object.defineProperties}if(!Object.defineProperty||S){Object.defineProperty=function(i,o,r){if(u(i))throw new TypeError("Object.defineProperty called on non-object: "+i);if(u(r))throw new TypeError("Property description must be an object: "+r);if(S)try{return S.call(Object,i,o,r)}catch(e){}if("value"in r)if(l&&(n(i,o)||s(i,o))){var c=i.__proto__;i.__proto__=a,delete i[o],i[o]=r.value,i.__proto__=c}else i[o]=r.value;else{var d="get"in r,p="set"in r;if(!l&&(d||p))throw new TypeError("getters & setters can not be defined on this javascript engine");d&&e(i,o,r.get),p&&t(i,o,r.set)}return i}}Object.defineProperties&&!x||(Object.defineProperties=function(e,t){if(x)try{return x.call(Object,e,t)}catch(e){}return Object.keys(t).forEach(function(n){"__proto__"!==n&&Object.defineProperty(e,n,t[n])}),e}),Object.seal||(Object.seal=function(e){if(Object(e)!==e)throw new TypeError("Object.seal can only be called on Objects.");return e}),Object.freeze||(Object.freeze=function(e){if(Object(e)!==e)throw new TypeError("Object.freeze can only be called on Objects.");return e});try{Object.freeze(function(){})}catch(e){Object.freeze=function(e){return function(t){return"function"==typeof t?t:e(t)}}(Object.freeze)}Object.preventExtensions||(Object.preventExtensions=function(e){if(Object(e)!==e)throw new TypeError("Object.preventExtensions can only be called on Objects.");return e}),Object.isSealed||(Object.isSealed=function(e){if(Object(e)!==e)throw new TypeError("Object.isSealed can only be called on Objects.");return!1}),Object.isFrozen||(Object.isFrozen=function(e){if(Object(e)!==e)throw new TypeError("Object.isFrozen can only be called on Objects.");return!1}),Object.isExtensible||(Object.isExtensible=function(e){if(Object(e)!==e)throw new TypeError("Object.isExtensible can only be called on Objects.");for(var t="";o(e,t);)t+="?";e[t]=!0;var n=o(e,t);return delete e[t],n})})},function(e,t,n){var s,i;!function(a,o){"use strict";s=o,void 0!==(i="function"==typeof s?s.call(t,n,t,e):s)&&(e.exports=i)}(0,function(){var e,t,n=Array,s=n.prototype,i=Object,a=i.prototype,o=Function,r=o.prototype,c=String,l=c.prototype,u=Number,d=u.prototype,p=s.slice,m=s.splice,f=s.push,g=s.unshift,h=s.concat,v=s.join,y=r.call,b=r.apply,w=Math.max,_=Math.min,S=a.toString,x="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,C=Function.prototype.toString,I=/^\s*class /,k=function(e){try{var t=C.call(e),n=t.replace(/\/\/.*\n/g,""),s=n.replace(/\/\*[.\s\S]*\*\//g,""),i=s.replace(/\n/gm," ").replace(/ {2}/g," ");return I.test(i)}catch(e){return!1}},T=function(e){try{return!k(e)&&(C.call(e),!0)}catch(e){return!1}},e=function(e){if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if(x)return T(e);if(k(e))return!1;var t=S.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t},M=RegExp.prototype.exec,N=function(e){try{return M.call(e),!0}catch(e){return!1}};t=function(e){return"object"==typeof e&&(x?N(e):"[object RegExp]"===S.call(e))};var L,O=String.prototype.valueOf,P=function(e){try{return O.call(e),!0}catch(e){return!1}};L=function(e){return"string"==typeof e||"object"==typeof e&&(x?P(e):"[object String]"===S.call(e))};var F=i.defineProperty&&function(){try{var e={};i.defineProperty(e,"x",{enumerable:!1,value:e});for(var t in e)return!1;return e.x===e}catch(e){return!1}}(),A=function(e){var t;return t=F?function(e,t,n,s){!s&&t in e||i.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n})}:function(e,t,n,s){!s&&t in e||(e[t]=n)},function(n,s,i){for(var a in s)e.call(s,a)&&t(n,a,s[a],i)}}(a.hasOwnProperty),D=function(e){var t=typeof e;return null===e||"object"!==t&&"function"!==t},R=u.isNaN||function(e){return e!==e},E={ToInteger:function(e){var t=+e;return R(t)?t=0:0!==t&&t!==1/0&&t!==-1/0&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t},ToPrimitive:function(t){var n,s,i;if(D(t))return t;if(s=t.valueOf,e(s)&&(n=s.call(t),D(n)))return n;if(i=t.toString,e(i)&&(n=i.call(t),D(n)))return n;throw new TypeError},ToObject:function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return i(e)},ToUint32:function(e){return e>>>0}},j=function(){};A(r,{bind:function(t){var n=this;if(!e(n))throw new TypeError("Function.prototype.bind called on incompatible "+n);for(var s,a=p.call(arguments,1),r=function(){if(this instanceof s){var e=b.call(n,this,h.call(a,p.call(arguments)));return i(e)===e?e:this}return b.call(n,t,h.call(a,p.call(arguments)))},c=w(0,n.length-a.length),l=[],u=0;u<c;u++)f.call(l,"$"+u);return s=o("binder","return function ("+v.call(l,",")+"){ return binder.apply(this, arguments); }")(r),n.prototype&&(j.prototype=n.prototype,s.prototype=new j,j.prototype=null),s}});var $=y.bind(a.hasOwnProperty),B=y.bind(a.toString),U=y.bind(p),V=b.bind(p),W=y.bind(l.slice),H=y.bind(l.split),q=y.bind(l.indexOf),J=y.bind(f),G=y.bind(a.propertyIsEnumerable),X=y.bind(s.sort),z=n.isArray||function(e){return"[object Array]"===B(e)},K=1!==[].unshift(0);A(s,{unshift:function(){return g.apply(this,arguments),this.length}},K),A(n,{isArray:z});var Y=i("a"),Z="a"!==Y[0]||!(0 in Y),Q=function(e){var t=!0,n=!0,s=!1;if(e)try{e.call("foo",function(e,n,s){"object"!=typeof s&&(t=!1)}),e.call([1],function(){"use strict";n="string"==typeof this},"x")}catch(e){s=!0}return!!e&&!s&&t&&n};A(s,{forEach:function(t){var n,s=E.ToObject(this),i=Z&&L(this)?H(this,""):s,a=-1,o=E.ToUint32(i.length);if(arguments.length>1&&(n=arguments[1]),!e(t))throw new TypeError("Array.prototype.forEach callback must be a function");for(;++a<o;)a in i&&(void 0===n?t(i[a],a,s):t.call(n,i[a],a,s))}},!Q(s.forEach)),A(s,{map:function(t){var s,i=E.ToObject(this),a=Z&&L(this)?H(this,""):i,o=E.ToUint32(a.length),r=n(o);if(arguments.length>1&&(s=arguments[1]),!e(t))throw new TypeError("Array.prototype.map callback must be a function");for(var c=0;c<o;c++)c in a&&(r[c]=void 0===s?t(a[c],c,i):t.call(s,a[c],c,i));return r}},!Q(s.map)),A(s,{filter:function(t){var n,s,i=E.ToObject(this),a=Z&&L(this)?H(this,""):i,o=E.ToUint32(a.length),r=[];if(arguments.length>1&&(s=arguments[1]),!e(t))throw new TypeError("Array.prototype.filter callback must be a function");for(var c=0;c<o;c++)c in a&&(n=a[c],(void 0===s?t(n,c,i):t.call(s,n,c,i))&&J(r,n));return r}},!Q(s.filter)),A(s,{every:function(t){var n,s=E.ToObject(this),i=Z&&L(this)?H(this,""):s,a=E.ToUint32(i.length);if(arguments.length>1&&(n=arguments[1]),!e(t))throw new TypeError("Array.prototype.every callback must be a function");for(var o=0;o<a;o++)if(o in i&&!(void 0===n?t(i[o],o,s):t.call(n,i[o],o,s)))return!1;return!0}},!Q(s.every)),A(s,{some:function(t){var n,s=E.ToObject(this),i=Z&&L(this)?H(this,""):s,a=E.ToUint32(i.length);if(arguments.length>1&&(n=arguments[1]),!e(t))throw new TypeError("Array.prototype.some callback must be a function");for(var o=0;o<a;o++)if(o in i&&(void 0===n?t(i[o],o,s):t.call(n,i[o],o,s)))return!0;return!1}},!Q(s.some));var ee=!1;s.reduce&&(ee="object"==typeof s.reduce.call("es5",function(e,t,n,s){return s})),A(s,{reduce:function(t){var n=E.ToObject(this),s=Z&&L(this)?H(this,""):n,i=E.ToUint32(s.length);if(!e(t))throw new TypeError("Array.prototype.reduce callback must be a function");if(0===i&&1===arguments.length)throw new TypeError("reduce of empty array with no initial value");var a,o=0;if(arguments.length>=2)a=arguments[1];else for(;;){if(o in s){a=s[o++];break}if(++o>=i)throw new TypeError("reduce of empty array with no initial value")}for(;o<i;o++)o in s&&(a=t(a,s[o],o,n));return a}},!ee);var te=!1;s.reduceRight&&(te="object"==typeof s.reduceRight.call("es5",function(e,t,n,s){return s})),A(s,{reduceRight:function(t){var n=E.ToObject(this),s=Z&&L(this)?H(this,""):n,i=E.ToUint32(s.length);if(!e(t))throw new TypeError("Array.prototype.reduceRight callback must be a function");if(0===i&&1===arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var a,o=i-1;if(arguments.length>=2)a=arguments[1];else for(;;){if(o in s){a=s[o--];break}if(--o<0)throw new TypeError("reduceRight of empty array with no initial value")}if(o<0)return a;do{o in s&&(a=t(a,s[o],o,n))}while(o--);return a}},!te);var ne=s.indexOf&&-1!==[0,1].indexOf(1,2);A(s,{indexOf:function(e){var t=Z&&L(this)?H(this,""):E.ToObject(this),n=E.ToUint32(t.length);if(0===n)return-1;var s=0;for(arguments.length>1&&(s=E.ToInteger(arguments[1])),s=s>=0?s:w(0,n+s);s<n;s++)if(s in t&&t[s]===e)return s;return-1}},ne);var se=s.lastIndexOf&&-1!==[0,1].lastIndexOf(0,-3);A(s,{lastIndexOf:function(e){var t=Z&&L(this)?H(this,""):E.ToObject(this),n=E.ToUint32(t.length);if(0===n)return-1;var s=n-1;for(arguments.length>1&&(s=_(s,E.ToInteger(arguments[1]))),s=s>=0?s:n-Math.abs(s);s>=0;s--)if(s in t&&e===t[s])return s;return-1}},se);var ie=function(){var e=[1,2],t=e.splice();return 2===e.length&&z(t)&&0===t.length}();A(s,{splice:function(e,t){return 0===arguments.length?[]:m.apply(this,arguments)}},!ie);var ae=function(){var e={};return s.splice.call(e,0,0,1),1===e.length}();A(s,{splice:function(e,t){if(0===arguments.length)return[];var n=arguments;return this.length=w(E.ToInteger(this.length),0),arguments.length>0&&"number"!=typeof t&&(n=U(arguments),n.length<2?J(n,this.length-e):n[1]=E.ToInteger(t)),m.apply(this,n)}},!ae);var oe=function(){var e=new n(1e5);return e[8]="x",e.splice(1,1),7===e.indexOf("x")}(),re=function(){var e=[];return e[256]="a",e.splice(257,0,"b"),"a"===e[256]}();A(s,{splice:function(e,t){for(var n,s=E.ToObject(this),i=[],a=E.ToUint32(s.length),o=E.ToInteger(e),r=o<0?w(a+o,0):_(o,a),l=_(w(E.ToInteger(t),0),a-r),u=0;u<l;)n=c(r+u),$(s,n)&&(i[u]=s[n]),u+=1;var d,p=U(arguments,2),m=p.length;if(m<l){u=r;for(var f=a-l;u<f;)n=c(u+l),d=c(u+m),$(s,n)?s[d]=s[n]:delete s[d],u+=1;u=a;for(var g=a-l+m;u>g;)delete s[u-1],u-=1}else if(m>l)for(u=a-l;u>r;)n=c(u+l-1),d=c(u+m-1),$(s,n)?s[d]=s[n]:delete s[d],u-=1;u=r;for(var h=0;h<p.length;++h)s[u]=p[h],u+=1;return s.length=a-l+m,i}},!oe||!re);var ce,le=s.join;try{ce="1,2,3"!==Array.prototype.join.call("123",",")}catch(e){ce=!0}ce&&A(s,{join:function(e){var t=void 0===e?",":e;return le.call(L(this)?H(this,""):this,t)}},ce);var ue="1,2"!==[1,2].join(void 0);ue&&A(s,{join:function(e){var t=void 0===e?",":e;return le.call(this,t)}},ue);var de=function(e){for(var t=E.ToObject(this),n=E.ToUint32(t.length),s=0;s<arguments.length;)t[n+s]=arguments[s],s+=1;return t.length=n+s,n+s},pe=function(){var e={};return 1!==Array.prototype.push.call(e,void 0)||1!==e.length||void 0!==e[0]||!$(e,0)}();A(s,{push:function(e){return z(this)?f.apply(this,arguments):de.apply(this,arguments)}},pe);var me=function(){var e=[];return 1!==e.push(void 0)||1!==e.length||void 0!==e[0]||!$(e,0)}();A(s,{push:de},me),A(s,{slice:function(e,t){var n=L(this)?H(this,""):this;return V(n,arguments)}},Z);var fe=function(){try{return[1,2].sort(null),[1,2].sort({}),!0}catch(e){}return!1}(),ge=function(){try{return[1,2].sort(/a/),!1}catch(e){}return!0}(),he=function(){try{return[1,2].sort(void 0),!0}catch(e){}return!1}();A(s,{sort:function(t){if(void 0===t)return X(this);if(!e(t))throw new TypeError("Array.prototype.sort callback must be a function");return X(this,t)}},fe||!he||!ge);var ve=!G({toString:null},"toString"),ye=G(function(){},"prototype"),be=!$("x","0"),we=function(e){var t=e.constructor;return t&&t.prototype===e},_e={$window:!0,$console:!0,$parent:!0,$self:!0,$frame:!0,$frames:!0,$frameElement:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$external:!0},Se=function(){if("undefined"==typeof window)return!1;for(var e in window)try{!_e["$"+e]&&$(window,e)&&null!==window[e]&&"object"==typeof window[e]&&we(window[e])}catch(e){return!0}return!1}(),xe=function(e){if("undefined"==typeof window||!Se)return we(e);try{return we(e)}catch(e){return!1}},Ce=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Ie=Ce.length,ke=function(e){return"[object Arguments]"===B(e)},Te=function(t){return null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&!z(t)&&e(t.callee)},Me=ke(arguments)?ke:Te;A(i,{keys:function(t){var n=e(t),s=Me(t),i=null!==t&&"object"==typeof t,a=i&&L(t);if(!i&&!n&&!s)throw new TypeError("Object.keys called on a non-object");var o=[],r=ye&&n;if(a&&be||s)for(var l=0;l<t.length;++l)J(o,c(l));if(!s)for(var u in t)r&&"prototype"===u||!$(t,u)||J(o,c(u));if(ve)for(var d=xe(t),p=0;p<Ie;p++){var m=Ce[p];d&&"constructor"===m||!$(t,m)||J(o,m)}return o}});var Ne=i.keys&&function(){return 2===i.keys(arguments).length}(1,2),Le=i.keys&&function(){var e=i.keys(arguments);return 1!==arguments.length||1!==e.length||1!==e[0]}(1),Oe=i.keys;A(i,{keys:function(e){return Oe(Me(e)?U(e):e)}},!Ne||Le);var Pe,Fe,Ae=0!==new Date(-0xc782b5b342b24).getUTCMonth(),De=new Date(-0x55d318d56a724),Re=new Date(14496624e5),Ee="Mon, 01 Jan -45875 11:59:59 GMT"!==De.toUTCString();De.getTimezoneOffset()<-720?(Pe="Tue Jan 02 -45875"!==De.toDateString(),Fe=!/^Thu Dec 10 2015 \d\d:\d\d:\d\d GMT[-\+]\d\d\d\d(?: |$)/.test(Re.toString())):(Pe="Mon Jan 01 -45875"!==De.toDateString(),Fe=!/^Wed Dec 09 2015 \d\d:\d\d:\d\d GMT[-\+]\d\d\d\d(?: |$)/.test(Re.toString()));var je=y.bind(Date.prototype.getFullYear),$e=y.bind(Date.prototype.getMonth),Be=y.bind(Date.prototype.getDate),Ue=y.bind(Date.prototype.getUTCFullYear),Ve=y.bind(Date.prototype.getUTCMonth),We=y.bind(Date.prototype.getUTCDate),He=y.bind(Date.prototype.getUTCDay),qe=y.bind(Date.prototype.getUTCHours),Je=y.bind(Date.prototype.getUTCMinutes),Ge=y.bind(Date.prototype.getUTCSeconds),Xe=y.bind(Date.prototype.getUTCMilliseconds),ze=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Ke=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Ye=function(e,t){return Be(new Date(t,e,0))};A(Date.prototype,{getFullYear:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=je(this);return e<0&&$e(this)>11?e+1:e},getMonth:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=je(this),t=$e(this);return e<0&&t>11?0:t},getDate:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=je(this),t=$e(this),n=Be(this);if(e<0&&t>11){if(12===t)return n;return Ye(0,e+1)-n+1}return n},getUTCFullYear:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=Ue(this);return e<0&&Ve(this)>11?e+1:e},getUTCMonth:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=Ue(this),t=Ve(this);return e<0&&t>11?0:t},getUTCDate:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=Ue(this),t=Ve(this),n=We(this);if(e<0&&t>11){if(12===t)return n;return Ye(0,e+1)-n+1}return n}},Ae),A(Date.prototype,{toUTCString:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=He(this),t=We(this),n=Ve(this),s=Ue(this),i=qe(this),a=Je(this),o=Ge(this);return ze[e]+", "+(t<10?"0"+t:t)+" "+Ke[n]+" "+s+" "+(i<10?"0"+i:i)+":"+(a<10?"0"+a:a)+":"+(o<10?"0"+o:o)+" GMT"}},Ae||Ee),A(Date.prototype,{toDateString:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=this.getDay(),t=this.getDate(),n=this.getMonth(),s=this.getFullYear();return ze[e]+" "+Ke[n]+" "+(t<10?"0"+t:t)+" "+s}},Ae||Pe),(Ae||Fe)&&(Date.prototype.toString=function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=this.getDay(),t=this.getDate(),n=this.getMonth(),s=this.getFullYear(),i=this.getHours(),a=this.getMinutes(),o=this.getSeconds(),r=this.getTimezoneOffset(),c=Math.floor(Math.abs(r)/60),l=Math.floor(Math.abs(r)%60);return ze[e]+" "+Ke[n]+" "+(t<10?"0"+t:t)+" "+s+" "+(i<10?"0"+i:i)+":"+(a<10?"0"+a:a)+":"+(o<10?"0"+o:o)+" GMT"+(r>0?"-":"+")+(c<10?"0"+c:c)+(l<10?"0"+l:l)},F&&i.defineProperty(Date.prototype,"toString",{configurable:!0,enumerable:!1,writable:!0}));var Ze=-621987552e5,Qe="-000001",et=Date.prototype.toISOString&&-1===new Date(Ze).toISOString().indexOf(Qe),tt=Date.prototype.toISOString&&"1969-12-31T23:59:59.999Z"!==new Date(-1).toISOString(),nt=y.bind(Date.prototype.getTime);A(Date.prototype,{toISOString:function(){if(!isFinite(this)||!isFinite(nt(this)))throw new RangeError("Date.prototype.toISOString called on non-finite value.");var e=Ue(this),t=Ve(this);e+=Math.floor(t/12),t=(t%12+12)%12;var n=[t+1,We(this),qe(this),Je(this),Ge(this)];e=(e<0?"-":e>9999?"+":"")+W("00000"+Math.abs(e),0<=e&&e<=9999?-4:-6);for(var s=0;s<n.length;++s)n[s]=W("00"+n[s],-2);return e+"-"+U(n,0,2).join("-")+"T"+U(n,2).join(":")+"."+W("000"+Xe(this),-3)+"Z"}},et||tt),function(){try{return Date.prototype.toJSON&&null===new Date(NaN).toJSON()&&-1!==new Date(Ze).toJSON().indexOf(Qe)&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(e){return!1}}()||(Date.prototype.toJSON=function(t){var n=i(this),s=E.ToPrimitive(n);if("number"==typeof s&&!isFinite(s))return null;var a=n.toISOString;if(!e(a))throw new TypeError("toISOString property is not callable");return a.call(n)});var st=1e15===Date.parse("+033658-09-27T01:46:40.000Z"),it=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z"));if(isNaN(Date.parse("2000-01-01T00:00:00.000Z"))||it||!st){var at=Math.pow(2,31)-1,ot=R(new Date(1970,0,1,0,0,0,at+1).getTime());Date=function(e){var t=function(n,s,i,a,o,r,l){var u,d=arguments.length;if(this instanceof e){var p=r,m=l;if(ot&&d>=7&&l>at){var f=Math.floor(l/at)*at,g=Math.floor(f/1e3);p+=g,m-=1e3*g}u=1===d&&c(n)===n?new e(t.parse(n)):d>=7?new e(n,s,i,a,o,p,m):d>=6?new e(n,s,i,a,o,p):d>=5?new e(n,s,i,a,o):d>=4?new e(n,s,i,a):d>=3?new e(n,s,i):d>=2?new e(n,s):d>=1?new e(n instanceof e?+n:n):new e}else u=e.apply(this,arguments);return D(u)||A(u,{constructor:t},!0),u},n=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),s=[0,31,59,90,120,151,181,212,243,273,304,334,365],i=function(e,t){var n=t>1?1:0;return s[t]+Math.floor((e-1969+n)/4)-Math.floor((e-1901+n)/100)+Math.floor((e-1601+n)/400)+365*(e-1970)},a=function(t){var n=0,s=t;if(ot&&s>at){var i=Math.floor(s/at)*at,a=Math.floor(i/1e3);n+=a,s-=1e3*a}return u(new e(1970,0,1,0,0,n,s))};for(var o in e)$(e,o)&&(t[o]=e[o]);return A(t,{now:e.now,UTC:e.UTC},!0),t.prototype=e.prototype,A(t.prototype,{constructor:t},!0),A(t,{parse:function(t){var s=n.exec(t);if(s){var o,r=u(s[1]),c=u(s[2]||1)-1,l=u(s[3]||1)-1,d=u(s[4]||0),p=u(s[5]||0),m=u(s[6]||0),f=Math.floor(1e3*u(s[7]||0)),g=Boolean(s[4]&&!s[8]),h="-"===s[9]?1:-1,v=u(s[10]||0),y=u(s[11]||0);return d<(p>0||m>0||f>0?24:25)&&p<60&&m<60&&f<1e3&&c>-1&&c<12&&v<24&&y<60&&l>-1&&l<i(r,c+1)-i(r,c)&&(o=60*(24*(i(r,c)+l)+d+v*h),o=1e3*(60*(o+p+y*h)+m)+f,g&&(o=a(o)),-864e13<=o&&o<=864e13)?o:NaN}return e.parse.apply(this,arguments)}}),t}(Date)}Date.now||(Date.now=function(){return(new Date).getTime()});var rt=d.toFixed&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0)),ct={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function(e,t){for(var n=-1,s=t;++n<ct.size;)s+=e*ct.data[n],ct.data[n]=s%ct.base,s=Math.floor(s/ct.base)},divide:function(e){for(var t=ct.size,n=0;--t>=0;)n+=ct.data[t],ct.data[t]=Math.floor(n/e),n=n%e*ct.base},numToString:function(){for(var e=ct.size,t="";--e>=0;)if(""!==t||0===e||0!==ct.data[e]){var n=c(ct.data[e]);""===t?t=n:t+=W("0000000",0,7-n.length)+n}return t},pow:function e(t,n,s){return 0===n?s:n%2==1?e(t,n-1,s*t):e(t*t,n/2,s)},log:function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}};A(d,{toFixed:function(e){var t,n,s,i,a,o,r,l;if(t=u(e),(t=R(t)?0:Math.floor(t))<0||t>20)throw new RangeError("Number.toFixed called with invalid number of decimals");if(n=u(this),R(n))return"NaN";if(n<=-1e21||n>=1e21)return c(n);if(s="",n<0&&(s="-",n=-n),i="0",n>1e-21)if(a=ct.log(n*ct.pow(2,69,1))-69,o=a<0?n*ct.pow(2,-a,1):n/ct.pow(2,a,1),o*=4503599627370496,(a=52-a)>0){for(ct.multiply(0,o),r=t;r>=7;)ct.multiply(1e7,0),r-=7;for(ct.multiply(ct.pow(10,r,1),0),r=a-1;r>=23;)ct.divide(1<<23),r-=23;ct.divide(1<<r),ct.multiply(1,1),ct.divide(2),i=ct.numToString()}else ct.multiply(0,o),ct.multiply(1<<-a,0),i=ct.numToString()+W("0.00000000000000000000",2,2+t);return t>0?(l=i.length,i=l<=t?s+W("0.0000000000000000000",0,t-l+2)+i:s+W(i,0,l-t)+"."+W(i,l-t)):i=s+i,i}},rt);var lt=function(){try{return"1"===1..toPrecision(void 0)}catch(e){return!0}}(),ut=d.toPrecision;A(d,{toPrecision:function(e){return void 0===e?ut.call(this):ut.call(this,e)}},lt),2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?function(){var e=void 0===/()??/.exec("")[1],n=Math.pow(2,32)-1;l.split=function(s,i){var a=String(this);if(void 0===s&&0===i)return[];if(!t(s))return H(this,s,i);var o,r,c,l,u=[],d=(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")+(s.sticky?"y":""),p=0,m=new RegExp(s.source,d+"g");e||(o=new RegExp("^"+m.source+"$(?!\\s)",d));var g=void 0===i?n:E.ToUint32(i);for(r=m.exec(a);r&&!((c=r.index+r[0].length)>p&&(J(u,W(a,p,r.index)),!e&&r.length>1&&r[0].replace(o,function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(r[e]=void 0)}),r.length>1&&r.index<a.length&&f.apply(u,U(r,1)),l=r[0].length,p=c,u.length>=g));)m.lastIndex===r.index&&m.lastIndex++,r=m.exec(a);return p===a.length?!l&&m.test("")||J(u,""):J(u,W(a,p)),u.length>g?U(u,0,g):u}}():"0".split(void 0,0).length&&(l.split=function(e,t){return void 0===e&&0===t?[]:H(this,e,t)});var dt=l.replace;(function(){var e=[];return"x".replace(/x(.)?/g,function(t,n){J(e,n)}),1===e.length&&void 0===e[0]})()||(l.replace=function(n,s){var i=e(s),a=t(n)&&/\)[*?]/.test(n.source);if(i&&a){var o=function(e){var t=arguments.length,i=n.lastIndex;n.lastIndex=0;var a=n.exec(e)||[];return n.lastIndex=i,J(a,arguments[t-2],arguments[t-1]),s.apply(this,a)};return dt.call(this,n,o)}return dt.call(this,n,s)});var pt=l.substr,mt="".substr&&"b"!=="0b".substr(-1);A(l,{substr:function(e,t){var n=e;return e<0&&(n=w(this.length+e,0)),pt.call(this,n,t)}},mt);var ft="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",gt="​",ht="["+ft+"]",vt=new RegExp("^"+ht+ht+"*"),yt=new RegExp(ht+ht+"*$"),bt=l.trim&&(ft.trim()||!gt.trim());A(l,{trim:function(){if(void 0===this||null===this)throw new TypeError("can't convert "+this+" to object");return c(this).replace(vt,"").replace(yt,"")}},bt);var wt=y.bind(String.prototype.trim),_t=l.lastIndexOf&&-1!=="abcあい".lastIndexOf("あい",2);A(l,{lastIndexOf:function(e){if(void 0===this||null===this)throw new TypeError("can't convert "+this+" to object");for(var t=c(this),n=c(e),s=arguments.length>1?u(arguments[1]):NaN,i=R(s)?1/0:E.ToInteger(s),a=_(w(i,0),t.length),o=n.length,r=a+o;r>0;){r=w(0,r-o);var l=q(W(t,r,a+o),n);if(-1!==l)return r+l}return-1}},_t);var St=l.lastIndexOf;if(A(l,{lastIndexOf:function(e){return St.apply(this,arguments)}},1!==l.lastIndexOf.length),8===parseInt(ft+"08")&&22===parseInt(ft+"0x16")||(parseInt=function(e){var t=/^[\-+]?0[xX]/;return function(n,s){var i=wt(String(n)),a=u(s)||(t.test(i)?16:10);return e(i,a)}}(parseInt)),1/parseFloat("-0")!=-1/0&&(parseFloat=function(e){return function(t){var n=wt(String(t)),s=e(n);return 0===s&&"-"===W(n,0,1)?-0:s}}(parseFloat)),"RangeError: test"!==String(new RangeError("test"))){var xt=function(){if(void 0===this||null===this)throw new TypeError("can't convert "+this+" to object");var e=this.name;void 0===e?e="Error":"string"!=typeof e&&(e=c(e));var t=this.message;return void 0===t?t="":"string"!=typeof t&&(t=c(t)),e?t?e+": "+t:e:t};Error.prototype.toString=xt}if(F){var Ct=function(e,t){if(G(e,t)){var n=Object.getOwnPropertyDescriptor(e,t);n.configurable&&(n.enumerable=!1,Object.defineProperty(e,t,n))}};Ct(Error.prototype,"message"),""!==Error.prototype.message&&(Error.prototype.message=""),Ct(Error.prototype,"name")}if("/a/gim"!==String(/a/gim)){var It=function(){var e="/"+this.source+"/";return this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),e};RegExp.prototype.toString=It}})},function(e,t,n){function s(e,t,n){if(!r(t))throw new TypeError("iterator must be a function");arguments.length<3&&(n=this),"[object Array]"===c.call(e)?i(e,t,n):"string"==typeof e?a(e,t,n):o(e,t,n)}function i(e,t,n){for(var s=0,i=e.length;s<i;s++)l.call(e,s)&&t.call(n,e[s],s,e)}function a(e,t,n){for(var s=0,i=e.length;s<i;s++)t.call(n,e.charAt(s),s,e)}function o(e,t,n){for(var s in e)l.call(e,s)&&t.call(n,e[s],s,e)}var r=n(31);e.exports=s;var c=Object.prototype.toString,l=Object.prototype.hasOwnProperty},function(e,t){(function(t){"undefined"!=typeof window?e.exports=window:void 0!==t?e.exports=t:"undefined"!=typeof self?e.exports=self:e.exports={}}).call(t,function(){return this}())},function(e,t,n){var s;(function(e,i){(function(){function a(e,t){function n(e){if(n[e]!==h)return n[e];var a;if("bug-string-char-index"==e)a="a"!="a"[0];else if("json"==e)a=n("json-stringify")&&n("json-parse");else{var o,r='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var l=t.stringify,u="function"==typeof l&&b;if(u){(o=function(){return 1}).toJSON=o;try{u="0"===l(0)&&"0"===l(new s)&&'""'==l(new i)&&l(y)===h&&l(h)===h&&l()===h&&"1"===l(o)&&"[1]"==l([o])&&"[null]"==l([h])&&"null"==l(null)&&"[null,null,null]"==l([h,y,null])&&l({a:[o,!0,!1,null,"\0\b\n\f\r\t"]})==r&&"1"===l(null,o)&&"[\n 1,\n 2\n]"==l([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==l(new c(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==l(new c(864e13))&&'"-000001-01-01T00:00:00.000Z"'==l(new c(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==l(new c(-1))}catch(e){u=!1}}a=u}if("json-parse"==e){var d=t.parse;if("function"==typeof d)try{if(0===d("0")&&!d(!1)){o=d(r);var p=5==o.a.length&&1===o.a[0];if(p){try{p=!d('"\t"')}catch(e){}if(p)try{p=1!==d("01")}catch(e){}if(p)try{p=1!==d("1.")}catch(e){}}}}catch(e){p=!1}a=p}}return n[e]=!!a}e||(e=l.Object()),t||(t=l.Object());var s=e.Number||l.Number,i=e.String||l.String,o=e.Object||l.Object,c=e.Date||l.Date,u=e.SyntaxError||l.SyntaxError,d=e.TypeError||l.TypeError,p=e.Math||l.Math,m=e.JSON||l.JSON;"object"==typeof m&&m&&(t.stringify=m.stringify,t.parse=m.parse);var f,g,h,v=o.prototype,y=v.toString,b=new c(-0xc782b5b800cec);try{b=-109252==b.getUTCFullYear()&&0===b.getUTCMonth()&&1===b.getUTCDate()&&10==b.getUTCHours()&&37==b.getUTCMinutes()&&6==b.getUTCSeconds()&&708==b.getUTCMilliseconds()}catch(e){}if(!n("json")){var w="[object Function]",_="[object Number]",S="[object String]",x="[object Array]",C=n("bug-string-char-index");if(!b)var I=p.floor,k=[0,31,59,90,120,151,181,212,243,273,304,334],T=function(e,t){return k[t]+365*(e-1970)+I((e-1969+(t=+(t>1)))/4)-I((e-1901+t)/100)+I((e-1601+t)/400)};if((f=v.hasOwnProperty)||(f=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=y?f=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,f=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,f.call(this,e)}),g=function(e,t){var n,s,i,a=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,s=new n;for(i in s)f.call(s,i)&&a++;return n=s=null,a?g=2==a?function(e,t){var n,s={},i=y.call(e)==w;for(n in e)i&&"prototype"==n||f.call(s,n)||!(s[n]=1)||!f.call(e,n)||t(n)}:function(e,t){var n,s,i=y.call(e)==w;for(n in e)i&&"prototype"==n||!f.call(e,n)||(s="constructor"===n)||t(n);(s||f.call(e,n="constructor"))&&t(n)}:(s=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],g=function(e,t){var n,i,a=y.call(e)==w,o=!a&&"function"!=typeof e.constructor&&r[typeof e.hasOwnProperty]&&e.hasOwnProperty||f;for(n in e)a&&"prototype"==n||!o.call(e,n)||t(n);for(i=s.length;n=s[--i];o.call(e,n)&&t(n));}),g(e,t)},!n("json-stringify")){var M={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},N=function(e,t){return("000000"+(t||0)).slice(-e)},L=function(e){for(var t='"',n=0,s=e.length,i=!C||s>10,a=i&&(C?e.split(""):e);n<s;n++){var o=e.charCodeAt(n);switch(o){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=M[o];break;default:if(o<32){t+="\\u00"+N(2,o.toString(16));break}t+=i?a[n]:e.charAt(n)}}return t+'"'},O=function(e,t,n,s,i,a,o){var r,c,l,u,p,m,v,b,w,C,k,M,P,F,A,D;try{r=t[e]}catch(e){}if("object"==typeof r&&r)if("[object Date]"!=(c=y.call(r))||f.call(r,"toJSON"))"function"==typeof r.toJSON&&(c!=_&&c!=S&&c!=x||f.call(r,"toJSON"))&&(r=r.toJSON(e));else if(r>-1/0&&r<1/0){if(T){for(p=I(r/864e5),l=I(p/365.2425)+1970-1;T(l+1,0)<=p;l++);for(u=I((p-T(l,0))/30.42);T(l,u+1)<=p;u++);p=1+p-T(l,u),m=(r%864e5+864e5)%864e5,v=I(m/36e5)%24,b=I(m/6e4)%60,w=I(m/1e3)%60,C=m%1e3}else l=r.getUTCFullYear(),u=r.getUTCMonth(),p=r.getUTCDate(),v=r.getUTCHours(),b=r.getUTCMinutes(),w=r.getUTCSeconds(),C=r.getUTCMilliseconds();r=(l<=0||l>=1e4?(l<0?"-":"+")+N(6,l<0?-l:l):N(4,l))+"-"+N(2,u+1)+"-"+N(2,p)+"T"+N(2,v)+":"+N(2,b)+":"+N(2,w)+"."+N(3,C)+"Z"}else r=null;if(n&&(r=n.call(t,e,r)),null===r)return"null";if("[object Boolean]"==(c=y.call(r)))return""+r;if(c==_)return r>-1/0&&r<1/0?""+r:"null";if(c==S)return L(""+r);if("object"==typeof r){for(F=o.length;F--;)if(o[F]===r)throw d();if(o.push(r),k=[],A=a,a+=i,c==x){for(P=0,F=r.length;P<F;P++)M=O(P,r,n,s,i,a,o),k.push(M===h?"null":M);D=k.length?i?"[\n"+a+k.join(",\n"+a)+"\n"+A+"]":"["+k.join(",")+"]":"[]"}else g(s||r,function(e){var t=O(e,r,n,s,i,a,o);t!==h&&k.push(L(e)+":"+(i?" ":"")+t)}),D=k.length?i?"{\n"+a+k.join(",\n"+a)+"\n"+A+"}":"{"+k.join(",")+"}":"{}";return o.pop(),D}};t.stringify=function(e,t,n){var s,i,a,o;if(r[typeof t]&&t)if((o=y.call(t))==w)i=t;else if(o==x){a={};for(var c,l=0,u=t.length;l<u;c=t[l++],((o=y.call(c))==S||o==_)&&(a[c]=1));}if(n)if((o=y.call(n))==_){if((n-=n%1)>0)for(s="",n>10&&(n=10);s.length<n;s+=" ");}else o==S&&(s=n.length<=10?n:n.slice(0,10));return O("",(c={},c[""]=e,c),i,a,s,"",[])}}if(!n("json-parse")){var P,F,A=i.fromCharCode,D={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},R=function(){throw P=F=null,u()},E=function(){for(var e,t,n,s,i,a=F,o=a.length;P<o;)switch(i=a.charCodeAt(P)){case 9:case 10:case 13:case 32:P++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=C?a.charAt(P):a[P],P++,e;case 34:for(e="@",P++;P<o;)if((i=a.charCodeAt(P))<32)R();else if(92==i)switch(i=a.charCodeAt(++P)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=D[i],P++;break;case 117:for(t=++P,n=P+4;P<n;P++)(i=a.charCodeAt(P))>=48&&i<=57||i>=97&&i<=102||i>=65&&i<=70||R();e+=A("0x"+a.slice(t,P));break;default:R()}else{if(34==i)break;for(i=a.charCodeAt(P),t=P;i>=32&&92!=i&&34!=i;)i=a.charCodeAt(++P);e+=a.slice(t,P)}if(34==a.charCodeAt(P))return P++,e;R();default:if(t=P,45==i&&(s=!0,i=a.charCodeAt(++P)),i>=48&&i<=57){for(48==i&&(i=a.charCodeAt(P+1))>=48&&i<=57&&R(),s=!1;P<o&&(i=a.charCodeAt(P))>=48&&i<=57;P++);if(46==a.charCodeAt(P)){for(n=++P;n<o&&(i=a.charCodeAt(n))>=48&&i<=57;n++);n==P&&R(),P=n}if(101==(i=a.charCodeAt(P))||69==i){for(i=a.charCodeAt(++P),43!=i&&45!=i||P++,n=P;n<o&&(i=a.charCodeAt(n))>=48&&i<=57;n++);n==P&&R(),P=n}return+a.slice(t,P)}if(s&&R(),"true"==a.slice(P,P+4))return P+=4,!0;if("false"==a.slice(P,P+5))return P+=5,!1;if("null"==a.slice(P,P+4))return P+=4,null;R()}return"$"},j=function(e){var t,n;if("$"==e&&R(),"string"==typeof e){if("@"==(C?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];"]"!=(e=E());n||(n=!0))n&&(","==e?"]"==(e=E())&&R():R()),","==e&&R(),t.push(j(e));return t}if("{"==e){for(t={};"}"!=(e=E());n||(n=!0))n&&(","==e?"}"==(e=E())&&R():R()),","!=e&&"string"==typeof e&&"@"==(C?e.charAt(0):e[0])&&":"==E()||R(),t[e.slice(1)]=j(E());return t}R()}return e},$=function(e,t,n){var s=B(e,t,n);s===h?delete e[t]:e[t]=s},B=function(e,t,n){var s,i=e[t];if("object"==typeof i&&i)if(y.call(i)==x)for(s=i.length;s--;)$(i,s,n);else g(i,function(e){$(i,e,n)});return n.call(e,t,i)};t.parse=function(e,t){var n,s;return P=0,F=""+e,n=j(E()),"$"!=E()&&R(),P=F=null,t&&y.call(t)==w?B((s={},s[""]=n,s),"",t):n}}}return t.runInContext=a,t}var o=n(70),r={function:!0,object:!0},c=r[typeof t]&&t&&!t.nodeType&&t,l=r[typeof window]&&window||this,u=c&&r[typeof e]&&e&&!e.nodeType&&"object"==typeof i&&i;if(!u||u.global!==u&&u.window!==u&&u.self!==u||(l=u),c&&!o)a(l,c);else{var d=l.JSON,p=l.JSON3,m=!1,f=a(l,l.JSON3={noConflict:function(){return m||(m=!0,l.JSON=d,l.JSON3=p,d=p=null),f}});l.JSON={parse:f.parse,stringify:f.stringify}}o&&void 0!==(s=function(){return f}.call(t,n,t,e))&&(e.exports=s)}).call(this)}).call(t,n(22)(e),function(){return this}())},function(e,t,n){var s=n(67),i=n(63),a=function(e){return"[object Array]"===Object.prototype.toString.call(e)};e.exports=function(e){if(!e)return{};var t={};return i(s(e).split("\n"),function(e){var n=e.indexOf(":"),i=s(e.slice(0,n)).toLowerCase(),o=s(e.slice(n+1));void 0===t[i]?t[i]=o:a(t[i])?t[i].push(o):t[i]=[t[i],o]}),t}},function(e,t){function n(e){return e.replace(/^\s*|\s*$/g,"")}t=e.exports=n,t.left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}},function(e,t,n){"use strict";function s(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function i(e,t,n){var s=e;return u(t)?(n=t,"string"==typeof e&&(s={uri:e})):s=p(t,{uri:e}),s.callback=n,s}function a(e,t,n){return t=i(e,t,n),o(t)}function o(e){function t(){4===p.readyState&&o()}function n(){var e=void 0;if(e=p.response?p.response:p.responseText||r(p),_)try{e=JSON.parse(e)}catch(e){}return e}function i(e){return clearTimeout(g),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,l(e,u)}function o(){if(!f){var t;clearTimeout(g),t=e.useXDR&&void 0===p.status?200:1223===p.status?204:p.status;var s=u,i=null;return 0!==t?(s={body:n(),statusCode:t,method:v,headers:{},url:h,rawRequest:p},p.getAllResponseHeaders&&(s.headers=d(p.getAllResponseHeaders()))):i=new Error("Internal XMLHttpRequest Error"),l(i,s,s.body)}}if(void 0===e.callback)throw new Error("callback argument missing");var c=!1,l=function(t,n,s){c||(c=!0,e.callback(t,n,s))},u={body:void 0,headers:{},statusCode:0,method:v,url:h,rawRequest:p},p=e.xhr||null;p||(p=e.cors||e.useXDR?new a.XDomainRequest:new a.XMLHttpRequest);var m,f,g,h=p.url=e.uri||e.url,v=p.method=e.method||"GET",y=e.body||e.data||null,b=p.headers=e.headers||{},w=!!e.sync,_=!1;if("json"in e&&!1!==e.json&&(_=!0,b.accept||b.Accept||(b.Accept="application/json"),"GET"!==v&&"HEAD"!==v&&(b["content-type"]||b["Content-Type"]||(b["Content-Type"]="application/json"),y=JSON.stringify(!0===e.json?y:e.json))),p.onreadystatechange=t,p.onload=o,p.onerror=i,p.onprogress=function(){},p.onabort=function(){f=!0},p.ontimeout=i,p.open(v,h,!w,e.username,e.password),w||(p.withCredentials=!!e.withCredentials),!w&&e.timeout>0&&(g=setTimeout(function(){if(!f){f=!0,p.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",i(e)}},e.timeout)),p.setRequestHeader)for(m in b)b.hasOwnProperty(m)&&p.setRequestHeader(m,b[m]);else if(e.headers&&!s(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(p.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(p),p.send(y),p}function r(e){if("document"===e.responseType)return e.responseXML;var t=204===e.status&&e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;return""!==e.responseType||t?null:e.responseXML}function c(){}var l=n(64),u=n(31),d=n(66),p=n(69);e.exports=a,a.XMLHttpRequest=l.XMLHttpRequest||c,a.XDomainRequest="withCredentials"in new a.XMLHttpRequest?a.XMLHttpRequest:l.XDomainRequest,function(e,t){for(var n=0;n<e.length;n++)t(e[n])}(["get","put","post","patch","head","delete"],function(e){a["delete"===e?"del":e]=function(t,n,s){return n=i(t,n,s),n.method=e.toUpperCase(),o(n)}})},function(e,t){function n(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var i in n)s.call(n,i)&&(e[i]=n[i])}return e}e.exports=n;var s=Object.prototype.hasOwnProperty},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t){},,,function(e,t,n){"use strict";var s=n(5).fn,i=n(1);s.audioToText=function(e){i.verifyOptions(e,"url"),e.audioToText=i.filterObj(e,"url");var t=this;t.processCallback(e),t.sendCmd("audioToText",e)}},function(e,t,n){"use strict";var s=n(5).fn,i=n(1);s.getChatroomAddress=function(e){i.verifyOptions(e,"chatroomId");var t=this;t.processCallback(e),t.sendCmd("getChatroomAddress",e)}},function(e,t,n){"use strict";var s=n(5).fn,i=n(1);s.kick=function(e){i.verifyOptions(e,"deviceIds"),this.processCallback(e),this.sendCmd("kick",{deviceIds:e.deviceIds.slice(0)},e.callback)}},function(e,t,n){"use strict";var s=n(5).fn;s.clearDB=function(e){var t=this,n=t.db;t.processCallback(e);var s=e.done;n.enable?n.clear().then(s,s):s()},s.removeDB=function(e){var t=this,n=t.db;t.processCallback(e);var s=e.done;n.enable?n.destroy().then(s,s):s()}},function(e,t,n){"use strict";var s=n(5).fn,i=n(1),a=i.notundef,o=n(48);s.friendRequest=function(e){i.verifyOptions(e,"type account"),i.verifyParamValid("type",e.type,o.validTypes()),this.processPs(e),this.processCallback(e);var t={account:e.account,type:o.getByteFromType(e.type),ps:e.ps};a(e.idServer)&&(t.idServer=e.idServer),this.sendCmd("friendRequest",t,e.callback)},s.addFriend=function(e){e.type="addFriend",this.friendRequest(e)},s.applyFriend=function(e){e.type="applyFriend",this.friendRequest(e)},s.passFriendApply=function(e){i.verifyOptions(e,"idServer"),e.type="passFriendApply",this.friendRequest(e)},s.rejectFriendApply=function(e){i.verifyOptions(e,"idServer"),e.type="rejectFriendApply",this.friendRequest(e)},s.deleteFriend=function(e){i.verifyOptions(e,"account"),this.processCallback(e),this.sendCmd("deleteFriend",{account:e.account},e.callback)},s.updateFriend=function(e){this.processCallback(e);var t=new o(e);this.sendCmd("updateFriend",{friend:t,single:!0},e.callback)},s.getFriends=function(e){function t(){n.sendCmd("getFriends",{timetag:a,NOTSTORE:"timetag"},e.callback)}var n=this,s=n.db,a=0;i.verifyOptions(e),n.processCallback(e),s.enable?s.getFriendsTimetag().then(function(e){a=e,t()},t):t()}},function(e,t,n){"use strict";var s=n(5).fn,i=n(1),a=i.isArray,o=n(15);s.mergeObjArray=function(e,t,n){return e||(e=[]),t?(a(t)||(t=[t]),t.length?(n=n||{},i.mergeObjArray(e,t,n)):e):e},s.cutObjArray=function(e,t,n){return e&&t?(a(t)||(t=[t]),t.length?(n=n||{},i.cutObjArray(e,t,n)):e):e},s.mergeLoginPorts=function(e,t){return this.mergeObjArray(e,t,{keyPath:"deviceId"})},s.cutLoginPorts=function(e,t){return this.cutObjArray(e,t,{keyPath:"deviceId",sortPath:"type"})},s.mergeRelations=function(e,t){return this.mergeObjArray(e,t,{keyPath:"account"})},s.cutRelations=function(e,t){return this.cutObjArray(e,t,{keyPath:"account"})},s.findRelation=function(e,t){return i.findObjInArray(e,{keyPath:"account",value:t})},s.mergeFriends=function(e,t){return this.mergeObjArray(e,t,{keyPath:"account"})},s.cutFriends=function(e,t){return this.cutObjArray(e,t,{keyPath:"account"})},s.cutFriendsByAccounts=function(e,t){a(t)||(t=[t]);var n=t.map(function(e){return{account:e}});return this.cutFriends(e,n)},s.findFriend=function(e,t){return i.findObjInArray(e,{keyPath:"account",value:t})},s.mergeUsers=function(e,t){return this.mergeObjArray(e,t,{keyPath:"account"})},s.findUser=function(e,t){return i.findObjInArray(e,{keyPath:"account",value:t})},s.mergeTeams=function(e,t){return this.mergeObjArray(e,t,{keyPath:"teamId"})},s.cutTeams=function(e,t){return this.cutObjArray(e,t,{keyPath:"teamId"})},s.findTeam=function(e,t){return i.findObjInArray(e,{keyPath:"teamId",value:t})},s.assembleTeamOwner=o.assembleOwner,s.assembleTeamMembers=o.assembleMembers,s.genTeamMemberId=o.genId,s.mergeTeamMembers=function(e,t){return this.mergeObjArray(e,t)},s.cutTeamMembers=function(e,t){return this.cutObjArray(e,t)},s.cutTeamMembersByAccounts=function(e,t,n){a(n)||(n=[n]);var s=o.assembleMembers({teamId:t},n);return this.cutTeamMembers(e,s)},s.findTeamMember=function(e,t){return i.findObjInArray(e,{keyPath:"id",value:t})},s.mergeSessions=function(e,t){return this.mergeObjArray(e,t,{sortPath:"updateTime",desc:!0})},s.cutSessions=function(e,t){return this.cutObjArray(e,t)},s.cutSessionsByIds=function(e,t){a(t)||(t=[t]);var n=t.map(function(e){return{id:e}});return this.cutSessions(e,n)},s.findSession=function(e,t){return i.findObjInArray(e,{keyPath:"id",value:t})},s.mergeMsgs=function(e,t){return this.mergeObjArray(e,t,{keyPath:"idClient",sortPath:"time"})},s.cutMsgs=function(e,t){return this.cutObjArray(e,t,{keyPath:"idClient"})},s.cutMsgsByIdClients=function(e,t){a(t)||(t=[t]);var n=t.map(function(e){return{idClient:e}});return this.cutMsgs(e,n)},s.findMsg=function(e,t){return i.findObjInArray(e,{keyPath:"idClient",value:t})},s.mergeSysMsgs=function(e,t){return this.mergeObjArray(e,t,{keyPath:"idServer",desc:!0})},s.cutSysMsgs=function(e,t){return this.cutObjArray(e,t,{keyPath:"idServer"})},s.cutSysMsgsByIdServers=function(e,t){a(t)||(t=[t]);var n=t.map(function(e){return{idServer:e}});return this.cutSysMsgs(e,n)},s.findSysMsg=function(e,t){return i.findObjInArray(e,{keyPath:"idServer",value:t})}},function(e,t,n){"use strict";var s=n(5).fn,i=n(1),a=i.undef,o=i.notundef,r=n(14),c=n(18),l=n(19),u=n(3);s.beforeSendMsg=function(e){var t=this,n=t.protocol,s=e.msg;s.to===t.account&&(s.fromDeviceId=r.deviceId),s.userUpdateTime=n.myInfo&&n.myInfo.updateTime;var i;switch(s.getScene()){case"p2p":i="sendMsg";break;case"team":i="sendTeamMsg"}e.filter&&(i="sendFilterMsg",s.filter=!0),e.cmd=i},s.afterSendMsg=function(e){var t=e.rtnMsg,n=c.genSessionByMsg(t);this.protocol.onUpdateSession(n)},s.beforeForwardMsg=function(e){i.verifyOptions(e,"msg scene to"),e.msg.scene=e.scene,e.msg.to=e.to},s.markMsgRead=function(e){var t=this,n=t.protocol;return!e||t.db.enable||n.options.autoMarkRead?void t.logger.warn("不需要标记消息为已收到 (没有消息, 或者启用了数据库, 或者启用了自动标记已收到)"):void n.markMsgRead(e,!0)},s.sendMsgReceipt=function(e){var t=this;if(i.verifyOptions(e),t.processCallback(e),!e.msg)return void e.done();i.verifyOptions(e,"msg");var n=e.msg;i.verifyOptions(n,"target idClient time",!0,"msg."),t.protocol.shouldSendMsgReceipt(n)?t.sendCmd("sendMsgReceipt",{msgReceipt:{to:n.target,idClient:n.idClient,time:n.time}},e.callback):e.done()},s.isMsgRemoteRead=function(e){return this.protocol.isMsgRemoteRead(e)},s.deleteMsg=function(e){var t=this;i.verifyOptions(e,"msg");var n=e.msg;if("out"!==n.flow||"success"!==n.status||n.from===n.to||n.isLocal)return e.done(u.newParamError("只能删除自己发送给别人的, 并且发送成功的消息"),e);i.verifyOptions(n,["scene","to","from","time","idClient","idServer"],!0,"msg."),i.verifyParamValid("msg.scene",n.scene,t.message.validScenes);var s=i.simpleClone(n);this.processPs(s),this.processCallback(e),"p2p"===s.scene?s.type="deleteMsgP2p":s.type="deleteMsgTeam",s.deletedIdClient=s.idClient,s.deletedIdServer=s.idServer,s=new l(s),t.sendCmd("deleteMsg",{sysMsg:s,msg:n},e.callback)},s.getHistoryMsgs=function(e){var t=this;i.verifyOptions(e,"scene to"),i.verifyParamValid("scene",e.scene,t.message.validScenes),void 0===e.beginTime&&(e.beginTime=0),i.verifyParamType("beginTime",e.beginTime,"number"),void 0===e.endTime&&(e.endTime=0),i.verifyParamType("endTime",e.endTime,"number"),void 0===e.lastMsgId&&(e.lastMsgId="0"),void 0===e.limit&&(e.limit=100),i.verifyParamType("limit",e.limit,"number"),i.verifyParamMax("limit",e.limit,100),o(e.reverse)?i.verifyParamType("reverse",e.reverse,"boolean"):e.reverse=!1,o(e.asc)?i.verifyParamType("asc",e.asc,"boolean"):e.asc=!1,t.processCallback(e),e.asc&&(e.cbaop=function(e,t){e||(t.msgs=t.msgs.reverse())});var n;switch(e.scene){case"p2p":n="getHistoryMsgs";break;case"team":n="getTeamHistoryMsgs"}var s={scene:e.scene,to:e.to,beginTime:e.beginTime,endTime:e.endTime,lastMsgId:e.lastMsgId,limit:e.limit,reverse:e.reverse};t.sendCmd(n,s,e.callback)},s.searchHistoryMsgs=function(e){var t=this;i.verifyOptions(e,"scene to keyword"),i.verifyParamValid("scene",e.scene,t.message.validScenes),void 0===e.beginTime&&(e.beginTime=0),i.verifyParamType("beginTime",e.beginTime,"number"),void 0===e.endTime&&(e.endTime=0),i.verifyParamType("endTime",e.endTime,"number"),void 0===e.limit&&(e.limit=100),i.verifyParamType("limit",e.limit,"number"),i.verifyParamMax("limit",e.limit,100),o(e.reverse)?i.verifyParamType("reverse",e.reverse,"boolean"):e.reverse=!1,o(e.asc)?i.verifyParamType("asc",e.asc,"boolean"):e.asc=!1,t.processCallback(e),e.asc&&(e.cbaop=function(e,t){e||(t.msgs=t.msgs.reverse())});var n;switch(e.scene){case"p2p":n="searchHistoryMsgs";break;case"team":n="searchTeamHistoryMsgs"}var s=i.filterObj(e,"scene to beginTime endTime keyword limit reverse");t.sendCmd(n,s,e.callback)},s.getLocalMsgs=function(e){function t(){e.msgs=c,e.done(n,e)}var n,s=this,r=s.db,c=[];i.verifyOptions(e);var l=!1;o(e.start)&&(l=!0,i.verifyParamType("start",e.start,"number"));var u=!1;o(e.end)&&(u=!0,i.verifyParamType("end",e.end,"number")),l&&u&&e.end<=e.start&&i.onParamError("参数 end 必须晚于 start"),a(e.limit)&&(e.limit=100),i.verifyParamType("limit",e.limit,"number"),i.verifyParamMin("limit",e.limit,1),s.processCallback(e),r.enable?r.getMsgs(e).then(function(e){c=e,t()},function(e){n=e,t()}):t()},s.getLocalMsgByIdClient=function(e){function t(){e.msg=o,e.done(n,e)}var n,s=this,a=s.db,o=null;i.verifyOptions(e,"idClient"),s.processCallback(e),a.enable?a.getMsgByIdClient(e.idClient).then(function(e){e&&(o=e),t()},function(e){n=e,t()}):t()},s.getLocalMsgsByIdClients=function(e){function t(){e.msgs=o,e.done(n,e)}var n,s=this,a=s.db,o=[];i.verifyOptions(e,"idClients"),i.verifyParamType("idClients",e.idClients,"array"),s.processCallback(e),a.enable?a.getMsgsByIdClients(e.idClients).then(function(e){o=e.filter(function(e){return!!e}),t()},function(e){n=e,t()}):t()},s.updateLocalMsg=function(e){function t(){e.msg=o,e.done(n,e)}var n,s=this,a=s.db,o=null;if(i.verifyOptions(e,"idClient"),s.processCallback(e),a.enable){var r=i.filterObj(e,"idClient localCustom");a.updateMsg(r).then(function(e){o=e,t()},function(e){n=e,t()})}else t()},s.deleteLocalMsg=function(e){function t(){e.done(n,e)}var n,s=this;i.verifyOptions(e,"msg");var a=e.msg;i.verifyOptions(a,"idClient sessionId",!0,"msg."),s.processCallback(e),s.protocol.deleteLocalMsg(a).then(t,function(e){n=e,t()})},s.deleteLocalMsgsBySession=function(e){function t(){e.done(n,e)}var n,s=this,a=s.db;i.verifyOptions(e,"scene to"),i.verifyParamValid("scene",e.scene,s.message.validScenes),e.sessionId=e.scene+"-"+e.to,s.processCallback(e),a.enable?a.deleteMsgsBySessionId(e.sessionId).then(function(){t()},function(e){n=e,t()}):t()},s.deleteAllLocalMsgs=function(e){function t(){e.done(n,e)}var n,s=this,i=s.db;s.processCallback(e),i.enable&&i.deleteAllMsgs().then(function(){t()},function(e){n=e,t()})}},function(e,t){"use strict"},function(e,t){"use strict"},function(e,t,n){"use strict";var s=n(5).fn,i=n(38),a=n(1),o=a.undef;s.getPushNotificationMultiportConfig=function(){return this.protocol.getPushNotificationMultiportConfig()},s.updatePushNotificationMultiportConfig=function(e){a.verifyOptions(e),o(e.shouldPushNotificationWhenPCOnline)&&(e.shouldPushNotificationWhenPCOnline=!0),e.donnop=new i(e),this.processCallback(e),this.sendCmd("updateDonnop",e)}},function(e,t,n){"use strict";var s=n(5).fn,i=n(1);s.markInBlacklist=function(e){i.verifyOptions(e,"account isAdd"),i.verifyParamType("isAdd",e.isAdd,"boolean");var t=this.processCallback(e);return this.sendCmd("markInBlacklist",{account:e.account,isAdd:e.isAdd},e.callback),t},s.addToBlacklist=function(e){return e.isAdd=!0,this.markInBlacklist(e)},s.removeFromBlacklist=function(e){return e.isAdd=!1,this.markInBlacklist(e)},s.markInMutelist=function(e){i.verifyOptions(e,"account"),i.verifyParamType("isAdd",e.isAdd,"boolean");var t=this.processCallback(e);return this.sendCmd("markInMutelist",{account:e.account,isAdd:e.isAdd},e.callback),t},s.addToMutelist=function(e){return e.isAdd=!0,this.markInMutelist(e)},s.removeFromMutelist=function(e){return e.isAdd=!1,this.markInMutelist(e)},s.getRelations=function(e){function t(){n.sendCmd("getRelations",{timetag:a,NOTSTORE:"timetag"},e.callback)}var n=this,s=n.db,a=0;e=i.verifyOptions(e);var o=n.processCallback(e);return s.enable?s.getRelationsTimetag().then(function(e){a=e,t()},t):t(),o}},function(e,t,n){"use strict";var s=n(5).fn,i=n(1),a=i.undef,o=i.notundef;s.setCurrSession=function(e){var t=this;t.resetSessionUnread(e),t.protocol.setCurrSession(e)},s.resetSessionUnread=function(e){var t=this;if(t.protocol.resetSessionUnread(e),t.options.syncSessionUnread){var n=t.protocol.findSession(e);if(!n)return void t.logger.warn("no session, "+e);if(!n.lastMsg)return void t.logger.warn("no session.lastMsg, session "+e);if(!n.scene||!n.to)return void t.logger.warn("no scene or to, session "+e);var s=n.lastMsg.time;if(n&&n.ack&&n.ack>=s)return void t.logger.warn("no need to ack, session "+e);var i={scene:"p2p"===n.scene?0:1,to:n.to,timetag:s};t.sendCmd("markSessionAck",i)}},s.resetCurrSession=function(){this.protocol.setCurrSession("")},s.insertLocalSession=function(e){function t(){e.session=s,e.done(n,e)}var n,s,a=this;i.verifyOptions(e,"scene to"),i.verifyParamValid("scene",e.scene,a.message.validScenes),a.processCallback(e),a.protocol.insertLocalSession(e).then(function(e){s=e,t()},function(e){n=e,t()})},s.getLocalSessions=function(e){function t(){e.sessions=c,e.done(n,e)}var n,s=this,r=s.db,c=[];i.verifyOptions(e),a(e.limit)&&(e.limit=100),i.verifyParamType("limit",e.limit,"number"),i.verifyParamMax("limit",e.limit,100),o(e.reverse)?i.verifyParamType("reverse",e.reverse,"boolean"):e.reverse=!1,s.processCallback(e),r.enable?r.getSessions(e).then(function(e){c=e,s.protocol.mergeSessions(c),t()},function(e){n=e,t()}):t()},s.updateLocalSession=function(e){function t(){s.protocol.onUpdateSession(o),e.session=o,e.done(n,e)}var n,s=this,a=s.db;i.verifyOptions(e,"id"),s.processCallback(e);var o=i.filterObj(e,"id localCustom");a.enable?a.updateSession(o).then(function(e){o=e,t()},function(e){n=e,t()}):t()},s.deleteLocalSession=function(e){function t(){e.done(n,e)}var n,s=this,a=s.db;i.verifyOptions(e,"id"),s.processCallback(e),a.enable?a.deleteSession(e.id).then(function(){s.protocol.deleteLocalSession(e.id),t()},function(e){n=e,t()}):t()},s.deleteSession=function(e){i.verifyOptions(e,"scene to"),this.processCallback(e),e.sessions=[{scene:e.scene,to:e.to}],this.deleteSessions(e)},s.deleteSessions=function(e){i.verifyOptions(e,"sessions"),i.verifyParamType("sessions",e.sessions,"array"),e.sessions.forEach(function(e,t){i.verifyOptions(e,"scene to",!0,"sessions["+t+"].")}),this.processCallback(e),this.sendCmd("deleteSessions",{sessions:e.sessions.map(function(e){return e.scene+"|"+e.to})},e.callback)}},function(e,t,n){"use strict";var s=n(2).Promise,i=n(5).fn,a=n(1),o=a.undef,r=a.notundef,c=n(19);i.markSysMsgRead=function(e){function t(){e.done(n,e)}var n,i=this,o=i.db,r=s.resolve(),c=i.protocol;a.verifyOptions(e,"sysMsgs");var l=e.sysMsgs;a.isArray(l)||(l=[l]),o.enable?r=o.markSysMsgRead(l).then(function(e){l=e,c.onUpdateSysMsg(e)}):(l=l.filter(function(e){return!e.read}),l.length&&(c.options.autoMarkRead||c.markSysMsgRead(l,!0),l.forEach(function(e){e.read=!0}),c.onUpdateSysMsg(l))),r.then(function(){return c.reduceSysMsgUnread(l)}).then(t,function(e){n=e,t()})},i.sendCustomSysMsg=function(e){var t=this;a.verifyOptions(e,"scene to content"),a.verifyParamValid("scene",e.scene,t.message.validScenes),t.processCallback(e),"p2p"===e.scene?e.type="customP2p":e.type="customTeam",e.sysMsg=new c(e);var n="sendCustomSysMsg";return e.filter&&(n="sendFilterCustomSysMsg"),t.sendCmd(n,{sysMsg:e.sysMsg,single:!0},e.callback),t.formatReturnSysMsg(e.sysMsg)},i.formatReturnSysMsg=function(e){var t=this;return e=a.copy(e),t.protocol.completeSysMsg(e),e.status="sending",e=c.reverse(e)},i.getLocalSysMsgs=function(e){function t(){e.sysMsgs=l,e.done(n,e)}var n,s=this,i=s.db,l=[];a.verifyOptions(e),e.category&&a.verifyParamValid("category",e.category,c.validCategories),e.type&&a.verifyParamValid("type",e.type,c.validTypes),o(e.limit)&&(e.limit=100),a.verifyParamType("limit",e.limit,"number"),a.verifyParamMax("limit",e.limit,100),r(e.reverse)?a.verifyParamType("reverse",e.reverse,"boolean"):e.reverse=!1,s.processCallback(e),i.enable?i.getSysMsgs(e).then(function(e){l=e,t()},function(e){n=e,t()}):t()},i.updateLocalSysMsg=function(e){function t(){e.sysMsg=o,e.done(n,e)}var n,s=this,i=s.db,o=null;if(a.verifyOptions(e,"idServer"),s.processCallback(e),i.enable){var r=a.filterObj(e,"idServer state localCustom");i.updateSysMsg(r).then(function(e){o=e,t()},function(e){n=e,t()})}else t()},i.deleteLocalSysMsg=function(e){function t(){e.done(n,e)}var n,s=this,i=s.db;a.verifyOptions(e,"idServer"),s.processCallback(e),i.enable?i.deleteSysMsg(e.idServer).then(function(){t()},function(e){n=e,t()}):t()},i.deleteAllLocalSysMsgs=function(e){function t(){s.protocol.onUpdateSysMsgUnread({}),e.done(n,e)}var n,s=this,i=s.db;s.processCallback(e),i.enable&&i.deleteAllSysMsgs().then(function(){t()},function(e){n=e,t()})}},function(e,t,n){"use strict";var s=n(5).fn,i=n(1),a=i.undef,o=n(20),r=n(15);s.createTeam=function(e){i.verifyOptions(e,"type name"),a(e.accounts)?e.accounts=[]:i.verifyParamType("accounts",e.accounts,"array"),e.action="create",this.processPs(e),this.processCallback(e),e.team=new o(e);var t={team:e.team,accounts:e.accounts.slice(0),ps:e.ps};this.sendCmd("createTeam",t,e.callback)},s.updateTeam=function(e){i.verifyOptions(e,"teamId"),e.action="update",this.processCallback(e),e.team=new o(e),this.sendCmd("updateTeam",{team:e.team,single:!0},e.callback)},s.addTeamMembers=function(e){i.verifyOptions(e,"teamId accounts"),i.verifyParamType("accounts",e.accounts,"array"),this.processPs(e),this.processCallback(e);var t={teamId:e.teamId,accounts:e.accounts.slice(0),ps:e.ps};this.sendCmd("addTeamMembers",t,e.callback)},s.removeTeamMembers=function(e){i.verifyOptions(e,"teamId accounts"),i.verifyParamType("accounts",e.accounts,"array"),this.processCallback(e);var t={teamId:e.teamId,accounts:e.accounts.slice(0)};this.sendCmd("removeTeamMembers",t,e.callback)},s.acceptTeamInvite=function(e){i.verifyOptions(e,"idServer teamId from"),this.processCallback(e);var t={idServer:e.idServer,teamId:e.teamId,from:e.from};this.sendCmd("acceptTeamInvite",t,e.callback)},s.rejectTeamInvite=function(e){i.verifyOptions(e,"idServer teamId from"),this.processPs(e),this.processCallback(e);var t={idServer:e.idServer,teamId:e.teamId,from:e.from,ps:e.ps};this.sendCmd("rejectTeamInvite",t,e.callback)},s.applyTeam=function(e){i.verifyOptions(e,"teamId"),this.processPs(e),this.processCallback(e);var t={teamId:e.teamId,ps:e.ps};this.sendCmd("applyTeam",t,e.callback)},s.passTeamApply=function(e){i.verifyOptions(e,"idServer teamId from"),this.processCallback(e);var t={idServer:e.idServer,teamId:e.teamId,from:e.from};this.sendCmd("passTeamApply",t,e.callback)},s.rejectTeamApply=function(e){i.verifyOptions(e,"idServer teamId from"),this.processPs(e),this.processCallback(e);var t={idServer:e.idServer,teamId:e.teamId,from:e.from,ps:e.ps};this.sendCmd("rejectTeamApply",t,e.callback)},s.addTeamManagers=function(e){i.verifyOptions(e,"teamId accounts"),i.verifyParamType("accounts",e.accounts,"array"),this.processCallback(e);var t={teamId:e.teamId,accounts:e.accounts.slice(0)};this.sendCmd("addTeamManagers",t,e.callback)},s.removeTeamManagers=function(e){i.verifyOptions(e,"teamId accounts"),i.verifyParamType("accounts",e.accounts,"array"),this.processCallback(e);var t={teamId:e.teamId,accounts:e.accounts.slice(0)};this.sendCmd("removeTeamManagers",t,e.callback)},s.updateInfoInTeam=function(e){i.verifyOptions(e,"teamId"),this.processCallback(e),this.sendCmd("updateInfoInTeam",{teamMember:new r(e),single:!0},e.callback)},s.updateNickInTeam=function(e){i.verifyOptions(e,"teamId account"),this.processCallback(e),this.sendCmd("updateNickInTeam",{teamMember:new r(e),single:!0},e.callback)},s.updateMuteStateInTeam=function(e){var t=this;i.verifyOptions(e,"teamId account mute"),t.processCallback(e),e.mute=e.mute?1:0,t.sendCmd("updateMuteStateInTeam",e)},s.getMutedTeamMembers=function(e){var t=this;i.verifyOptions(e,"teamId");var n=t.processCallback(e);return t.sendCmd("getMutedTeamMembers",e),n},s.leaveTeam=function(e){i.verifyOptions(e,"teamId"),this.processCallback(e);var t={teamId:e.teamId};this.sendCmd("leaveTeam",t,e.callback)},s.transferTeam=function(e){i.verifyOptions(e,"teamId account leave"),i.verifyParamType("leave",e.leave,"boolean"),this.processCallback(e);var t={teamId:e.teamId,account:e.account,leave:e.leave};this.sendCmd("transferTeam",t,e.callback)},s.dismissTeam=function(e){i.verifyOptions(e,"teamId"),this.processCallback(e);var t={teamId:e.teamId};this.sendCmd("dismissTeam",t,e.callback)},s.getTeam=function(e){function t(){a.sendCmd("getTeam",{teamId:e.teamId},e.callback)}function n(e){a.logger.warn("get team",s,e)}var s,a=this,o=a.db;i.verifyOptions(e,"teamId"),a.processCallback(e),e.cbaop=function(e,t){e||n(t)},s=e.teamId,o.enable&&!e.sync?o.getTeam(s).then(function(s){s?(n(s),e.done(null,s)):t()},t):t()},s.getTeams=function(e){function t(){n.sendCmd("getTeams",{timetag:a,NOTSTORE:"timetag"},e.callback)}var n=this,s=n.db,a=0;i.verifyOptions(e),n.processCallback(e),s.enable?s.getTeamsTimetag().then(function(e){a=e,t()},t):t()},s.getTeamMembers=function(e){function t(){n.sendCmd("getTeamMembers",{teamId:e.teamId,timetag:a,NOTSTORE:"timetag"},e.callback)}var n=this,s=n.db,a=0;i.verifyOptions(e,"teamId"),n.processCallback(e),s.enable&&!e.sync?s.getTeam(e.teamId).then(function(n){if(n){var i=n.memberUpdateTime;s.getTeamMembersTimetag(e.teamId).then(function(n){!isNaN(i)&&!isNaN(n)&&i<=n?s.getTeamMembers(e.teamId).then(function(t){e.done(null,{teamId:e.teamId,members:t})},t):(a=n,t())},t)}else t()},t):t()},s.notifyForNewTeamMsg=function(e){var t=this;i.verifyOptions(e,"teamIds");var n=t.protocol.notifyForNewTeamMsg(e.teamIds);return t.usePromise(e)?n:void n.then(function(t){e.done(null,t)},function(t){e.done(t)})},s.getMyTeamMembers=function(e){var t=this;i.verifyOptions(e,"teamIds");var n=t.processCallback(e);return t.sendCmd("getMyTeamMembers",e),n},s.getLocalTeams=function(e){function t(){e.teams=o,e.done(n,e)}var n,s=this,a=s.db,o=[];i.verifyOptions(e,"teamIds"),i.verifyParamType("teamIds",e.teamIds,"array"),s.processCallback(e),a.enable?a.getTeamsByTeamIds(e.teamIds).then(function(e){o=e.filter(function(e){return!!e}),t()},function(e){n=e,t()}):t()},s.getLocalTeamMembers=function(e){function t(){e.members=o,e.done(n,e)}var n,s=this,a=s.db,o=[];i.verifyOptions(e,"teamId accounts"),i.verifyParamType("accounts",e.accounts,"array"),s.processCallback(e),a.enable?a.getInvalidTeamMembers(e.teamId,e.accounts).then(function(e){o=e.filter(function(e){return!!e}),t()},function(e){n=e,t()}):t()},s.deleteLocalTeam=function(e){function t(){e.done(n,e)}var n,s=this,a=s.db;i.verifyOptions(e,"teamId"),s.processCallback(e),a.enable?a.deleteTeam(e.teamId).then(function(){t()},function(e){n=e,t()}):t()}},function(e,t,n){"use strict";var s=n(5).fn,i=n(1),a=i.objs2accounts,o=n(28);s.updateMyInfo=function(e){i.verifyOptions(e),this.processCallback(e),e.user=new o(e),delete e.user.account,this.sendCmd("updateMyInfo",{user:e.user,single:!0},e.callback)},s.getMyInfo=function(e){var t=this;return e=e||{},e.account=t.account,t.getUser(e)},s.getUser=function(e){function t(){a.sendCmd("getUsers",{accounts:[s],single:!0},e.callback)}function n(e){a.logger.warn("get user",s,e)}var s,a=this,o=a.db;i.verifyOptions(e,"account"),a.processCallback(e),e.cbaop=function(e,t){if(!e)return t=t[0]||null,n(t),t},s=e.account,e.sync?t():o.enable?o.getUser(s).then(function(s){s?(n(s),e.done(null,s)):t()},t):t()},s.getUsers=function(e){function t(){o.sendCmd("getUsers",{accounts:s,single:!0},e.callback)}function n(e){o.logger.warn("get users",a(e),e)}var s,o=this,r=o.db,c=[];i.verifyOptions(e,"accounts"),i.verifyParamType("accounts",e.accounts,"array"),o.processCallback(e),e.cbaop=function(e,t){if(!e)return t=t.concat(c),n(t),t},s=i.deduplicate(e.accounts),i.verifyArrayMax("accounts",e.accounts,150),e.sync?t():r.enable?r.getUsers(s).then(function(i){if(i&&i.length===s.length)n(i),e.done(null,i);else{c=i;var o=a(i),r=[];s.forEach(function(e){-1===o.indexOf(e)&&r.push(e)}),s=r,t()}},t):t()}},function(e,t){"use strict";var n={version:7},s={kv:{key:{keyPath:"key"}},timetag:{key:{keyPath:"name"}},blacklist:{key:{keyPath:"account"}},mutelist:{key:{keyPath:"account"}},friend:{key:{keyPath:"account"}},user:{key:{keyPath:"account"}},team:{key:{keyPath:"teamId"}},teamMember:{key:{keyPath:"id"},indexes:{teamId:{unique:!1},account:{unique:!1}}},msg:{key:{autoIncrement:!0},indexes:{idClient:{unique:!0},sessionId:{unique:!1},time:{unique:!1},type:{unique:!1},sessionType:{unique:!1},status:{unique:!1},sessionTime:{key:["sessionId","time"],unique:!1}}},msg1:{key:{keyPath:"idClient"},indexes:{sessionId:{unique:!1},time:{unique:!1},status:{unique:!1},sessionTime:{key:["sessionId","time"],unique:!1}}},sysMsg:{key:{autoIncrement:!0},indexes:{idServer:{unique:!0},category:{unique:!1},type:{unique:!1}}},sysMsgUnread:{key:{keyPath:"type"}},session:{key:{keyPath:"id"},indexes:{updateTime:{unique:!1}}}};n.keyPath=function(e){return s[e].key.keyPath},n.schema=function(){return window._nimForceSyncIM=!0,s},e.exports=n},function(e,t,n){"use strict";var s=n(2).Promise,i=n(7).fn,a=n(1),o="friend";i.mergeFriends=function(e,t,n){var s=this;return s.updateAndDelete(o,e,t).then(function(){return s.logger.warn("merge friends"),n&&s.updateFriendTimetag(n),[e,t,n]})},i.putFriend=function(e){return this.put(o,e)},i.updateFriend=function(e){var t=this;e=a.copy(e);var n=e.account;return this.getOne(o,null,n,{modifyObj:e}).then(function(s){return s?t.logger.warn("update friend",n,e):t.logger.warn("update friend no",n),s})},i.deleteFriend=function(e){var t=this,n=t.remove(o,e),i=t.deleteUser(e);return s.all([n,i])},i.getFriends=function(){var e=function(e){return e.valid};return this.getAll(o,{filter:e})},i.getFriend=function(e){return this.getOne(o,null,e)}},function(e,t,n){"use strict";var s=n(7).fn;s.setKey=function(e,t){return this.put("kv",{key:e,value:t})},s.getKey=function(e){return this.get("kv",e).then(function(e){return e&&e.value})},s.setDonnop=function(e){return this.setKey("donnop",e)},s.getDonnop=function(){return this.getKey("donnop")}},function(e,t,n){"use strict";var s=n(2).Promise,i=n(7).fn,a=n(1),o="msg1",r="sessionTime";i.putMsg=function(e){var t=this;return a.isArray(e)||(e=[e]),!e.length||e[0].filter?s.resolve():(e=e.filter(function(e){return!e.ignore}),t.put(o,e))},i.updateMsg=function(e){var t=this;if(!e.filter){var n=e.idClient,s=a.filterObj(e,"resend status idServer time localCustom");return t.getOne(o,null,n,{modifyObj:s}).then(function(e){return e?t.logger.warn("update msg",n,s):t.logger.warn("udpate msg no",n),e})}},i.getMsgs=function(e){var t=this;t.checkDB(),e=e||{};var n="time",s=!1,i=!1,c=e.sessionId,l=e.sessionIds;a.exist(c)?(s=!0,n=r):a.exist(l)&&(s=!0,a.isString(l)?(n=r,c=l):Array.isArray(l)&&(1===l.length?(n=r,c=l[0]):i=!0));var u=e.start||0,d=e.end||1/0,p=u,m=d;s&&!i&&(p=[c,u],m=[c,d]);var f=!1!==e.desc,g=e.limit||100,h=!1,v=!1,y=e.type,b=e.types;a.exist(y)?h=!0:a.exist(b)&&(h=!0,a.isString(b)?y=b:Array.isArray(b)&&(1===b.length?y=b[0]:v=!0));var w=e.keyword||"",_=e.filterFunc,S=void 0;return(i||h||w||a.isFunction(_))&&(S=function(e){if(i&&-1===l.indexOf(e.sessionId))return!1;if(h)if(v){if(-1===b.indexOf(e.type))return!1}else if(y!==e.type)return!1;if(w){if(-1===(e.text||e.tip||"").indexOf(w))return!1}return!_||_(e)}),t.server.query(o,n).bound(p,m,!0,!0).desc(f).limit(g).filter(S).execute()},i.getMsgCountAfterAck=function(e){var t=this;e=e||{};var n=e,s=n.sessionId;return t.checkDB(),t.server.query(o,r).bound([s,e.ack],[s,1/0],!0,!0).count().execute()},i.amendMsg=function(e){return e?(a.notexist(e.text)&&(e.text=""),e):null},i.getMsgByIdClient=function(e){var t=this;return t.getOne(o,null,e).then(function(e){return t.amendMsg(e)})},i.getMsgsByIdClients=function(e){var t,n=this,i=[];return e.forEach(function(e){t=n.getMsgByIdClient(e),i.push(t)}),s.all(i)},i.clearSendingMsgs=function(){var e=this;return e.getOnly(o,"status","sending",{modifyObj:{status:"fail"}}).then(function(t){e.logger.warn("fail msgs",t)})},i.deleteMsg=function(e){var t,n=this,i=[];return a.isArray(e)||(e=[e]),e.forEach(function(e){t=n.getOne(o,null,e,{remove:!0}).then(function(e){return n.logger.warn("delete msg",e),e}),i.push(t)}),1===i.length?i[0]:s.all(i)},i.deleteMsgsBySessionId=function(e){return this.getOnly(o,"sessionId",e,{remove:!0})},i.deleteAllMsgs=function(){var e=this,t=e.clearTable(o),n=e.clearTable("session");return s.all([t,n])}},function(e,t,n){"use strict";var s=n(2).Promise,i=n(7).fn,a=n(1),o="blacklist",r="mutelist";i.mergeRelations=function(e,t,n,i,a){var c=this,l=c.updateAndDelete(o,e,t),u=c.updateAndDelete(r,n,i);return s.all([l,u]).then(function(){return c.logger.warn("merge relations"),c.updateRelationTimetag(a),[e,t,n,i,a]})},i.getRelations=function(){var e=this,t=e.getAll(o),n=e.getAll(r);return s.all([t,n])},i.markInBlacklist=function(e){var t=this;if(e=a.copy(e),e.isAdd){var n=e.record;return t.put(o,n)}var s=e.account;return t.remove(o,s)},i.markInMutelist=function(e){var t=this;if(e=a.copy(e),e.isAdd){var n=e.record;return t.put(r,n)}var s=e.account;return t.remove(r,s)}},function(e,t,n){"use strict";var s=n(7).fn,i=n(1),a=i.notundef,o="session";s.putSession=function(e){return e=i.merge({},e),delete e.unread,this.modifyOrPut({table:o,obj:e,key:"id",modifyObjWhenPut:{unread:0}})},s.getSessions=function(e){e=e||{};var t,n=!e.reverse,s=e.limit||100,i=e.lastSessionId,r=!1;return a(i)&&(t=function(e){return!!r||(e.id===i&&(r=!0),!1)}),this.getAll(o,{index:"updateTime",desc:n,limit:s,filter:t})},s.getSession=function(e){return this.get(o,e)},s.updateSession=function(e){var t=this,n=e.id,s=i.filterObj(e,"ack unread lastMsg localCustom");return Object.keys(e).forEach(function(t){0===t.indexOf("last")&&(s[t]=e[t])}),this.getOne(o,null,n,{modifyObj:s}).then(function(e){return e?t.logger.warn("update session",n,s):t.logger.warn("update session no",n),e})},s.resetSessionUnread=function(e){return this.updateSession({id:e,unread:0})},s.deleteSession=function(e){return this.remove(o,e)}},function(e,t,n){"use strict";var s=n(2).Promise,i=n(7).fn,a=n(1),o=a.notundef,r="sysMsg",c="idServer",l="sysMsgUnread";i.putSysMsg=function(e){var t=this;return new s(function(n){function s(){0===--o&&n(i)}if(a.isArray(e)||(e=[e]),!e[0].filter){var i=[],o=e.length;e.forEach(function(e){e=a.copy(e),t.put(r,e).then(function(e){i.push(e[0]),s()},s)})}})},i.getSysMsgs=function(e){var t=this;e=e||{};var n=!e.reverse,s=e.limit||100,i=null,a=null;e.category&&(i="category",a=e.category),e.type&&(i="type",a=e.type);var c,l=e.lastIdServer,u=!1,d=e.read;return(o(l)||o(d))&&(c=function(e){function t(){return!o(d)||e.read===d}return o(l)?(l=""+l,u?t():(e.idServer===l&&(u=!0),!1)):t()}),e={filter:c,desc:n,limit:s},i?t.getOnly(r,i,a,e):t.getAll(r,e)},i.getSysMsgByIdServer=function(e){return this.getOne(r,c,e)},i.updateSysMsg=function(e){var t=this;if(!e.filter){var n=""+e.idServer,s=a.filterObj(e,"read state error localCustom");return this.getOne(r,c,n,{modifyObj:s}).then(function(e){return e?t.logger.warn("update sysMsg",n,s):t.logger.warn("update sysMsg no",n),e})}},i.markSysMsgRead=function(e){var t=this;return new s(function(n,i){a.isArray(e)||(e=[e]);var o,r,c=[],l=[];e.forEach(function(e){o=t.getSysMsgByIdServer(e.idServer).then(function(e){e&&!e.read&&(r=t.updateSysMsg({idServer:e.idServer,read:!0}),l.push(r))},i),c.push(o)}),s.all(c).then(function(){s.all(l).then(function(e){n(e)},i)},i)})},i.deleteSysMsg=function(e){var t,n=this,i=[];return a.isArray(e)||(e=[e]),e.forEach(function(e){e=""+e,t=n.getOne(r,c,e,{remove:!0}),i.push(t)}),1===i.length?i[0]:s.all(i)},i.deleteAllSysMsgs=function(){var e=this,t=e.clearTable(r),n=e.clearTable(l);return s.all([t,n])},i.getSysMsgUnread=function(){return this.getAll(l).then(function(e){var t={};return e.forEach(function(e){t[e.type]=e.num}),t})},i.updateSysMsgUnread=function(e){var t=this;e=a.copy(e);var n=[];return Object.keys(e).forEach(function(t){n.push({type:t,num:e[t]})}),this.put(l,n).then(function(){return t.logger.warn("update sysMsg unread",e),e})}},function(e,t,n){"use strict";function s(e){return e.valid&&e.validToCurrentUser}function i(e){return e&&e.valid}function a(e){return e&&c.fillUndef(e,{mute:!1,custom:""}),e}var o=n(2).Promise,r=n(7).fn,c=n(1),l=n(3),u=n(20),d=n(15),p="team",m="teamId",f="teamMember";r.mergeTeams=function(e,t,n){var s=this,i=s.put(p,e),a=s.leaveTeams(t,n);return o.all([i,a]).then(function(){return s.logger.warn("merge teams"),s.updateTeamTimetag(n),[e,t,n]})},r.putTeam=function(e){if(e)return c.isArray(e)||(e=[e]),e.forEach(function(e){e.validToCurrentUser=!0}),this.put(p,e)},r.updateTeam=function(e){var t=this;e=c.copy(e);var n=e.teamId;return t.getOne(p,null,n,{modifyObj:e}).then(function(s){return s?(t.logger.warn("update team",n,e),s):(t.logger.warn("update team no",n),t.putTeam(e))})},r.transferTeam=function(e,t,n){var s=this,i=e.teamId,a=e.memberUpdateTime,o={teamId:i,account:t,type:"normal",updateTime:a},r={teamId:i,account:n,type:"owner",updateTime:a};return s.updateTeamMembers([o,r]).then(function(){return s.putTeam(e).then(function(){return s.logger.warn("transfer team",e.teamId,t,n),[e,t,n]})})},r.leaveTeam=function(e){var t=this;return t.updateTeam({teamId:e,validToCurrentUser:!1}).then(function(){return t.removeAllTeamMembers(e)})},r.dismissTeam=function(e,t){var n=this,s={teamId:e,valid:!1,validToCurrentUser:!1,updateTime:t};return n.updateTeam(s).then(function(){return n.removeAllTeamMembers(e)})},r.leaveTeams=function(e,t){var n,s=this,i=[];return e.forEach(function(e){n=s.leaveTeam(e.teamId,t),i.push(n)}),o.all(i)},r.getTeamsByTeamIds=function(e){var t,n=this,s=[];return e.forEach(function(e){t=n.getTeam(e),s.push(t)}),o.all(s)},r.getTeam=function(e){e=""+e;var t=this;return t.getOne(p,null,e).then(function(e){return t.updateTeamProperties([e]),e})},r.getTeams=function(){var e=this;return e.getAll(p,{filter:s}).then(function(t){return e.updateTeamProperties(t),t})},r.updateTeamProperties=function(e){e.forEach(function(e){u.fillProperties(e)})},r.mergeTeamMembers=function(e,t,n,s){var i=this,a=i.putTeamMembers(t),r=i.updateTeamMembers(n);return o.all([a,r]).then(function(){return i.logger.warn("merge members",e),i.updateTeamMemberTimetag(e,s)})},r.putTeamMembers=function(e){return this.put(f,e)},r.getTeamMembersByAccount=function(e){return this.getOnly(f,"account",e,{filter:i,mapper:a}).then()},r.getTeamMembers=function(e){var t=this;e=""+e;var n=function(e){return e.valid};return t.getOnly(f,m,e,{filter:n,mapper:a}).then(function(e){return t.updateTeamMemberProperties(e).then(function(){return e})})},r.updateTeamMemberProperties=function(e){var t,n=this,s=[];return e.forEach(function(e){d.fillProperties(e)&&(t=n.updateTeamMember(e),s.push(t))}),o.all(s)},r.getInvalidTeamMembers=function(e,t){var n=this;e=""+e;var s,i=[];return t.forEach(function(t){s=n.getOne(f,null,d.genId(e,t)).then(function(e){return a(e)}),i.push(s)}),o.all(i)},r.updateTeamMember=function(e){var t=this,n=e.teamId,s=e.account,i=d.genId(n,s),o=c.filterObj(e,"nickInTeam muteTeam mute custom updateTime type valid");return this.getOne(f,null,i,{modifyObj:o,mapper:a}).then(function(e){return e?t.logger.warn("update member",n,s,o):t.logger.warn("update member no",n,s),e})},r.updateTeamMembers=function(e){var t=this;if(!e.length)return o.resolve();var n,s=[];return e.forEach(function(e){n=t.updateTeamMember(e),s.push(n)}),o.all(s)},r.updateTeamManagers=function(e,t,n,s){var i=t.map(function(t){return{teamId:e,account:t,type:n?"manager":"normal",updateTime:s}});return this.updateTeamMembers(i)},r.removeTeamMembersByAccounts=function(e,t){var n=t.map(function(t){return{teamId:e,account:t,valid:!1}});return this.updateTeamMembers(n)},r.removeAllTeamMembers=function(e){var t=this,n={valid:!1};return t.getOnly(f,m,e,{modifyObj:n}).then(function(){return t.logger.warn("invalid all teamMembers",e),t.deleteTeamMemberTimetag(e)})},r.deleteTeamMembers=function(e){var t=this;return t.getOnly(f,m,e,{remove:!0}).then(function(){t.logger.warn("delete all teamMembers",e),t.deleteTeamMemberTimetag(e)})},r.deleteTeam=function(e){var t,n=this,i=[];return c.isArray(e)||(e=[e]),e.forEach(function(e){e=""+e,t=n.get(p,e).then(function(t){if(t&&s(t))throw l.stillInTeamError();var i=n.remove(p,e),a=n.deleteTeamMembers(e);return o.all([i,a])}),i.push(t)}),1===i.length?i[0]:o.all(i)}},function(e,t,n){"use strict";var s=n(7).fn;s.getTimetags=function(e){var t={},n=function(e){return t[e.name]=e.value,e};return this.getAll("timetag",{filter:e,mapper:n}).then(function(){return t})},s.getTeamMemberTimetags=function(){return this.getTimetags(function(e){return-1!==e.name.indexOf("team-")})},s.getTimetag=function(e){return this.getOne("timetag",null,e).then(function(e){return e=e||{value:0},e.value})},s.getTeamMemberTimetag=function(e){return this.getTimetag("team-"+e)},s.updateTimetag=function(e,t){var n={name:e,value:t};return this.put("timetag",n)},s.updateMyInfoTimetag=function(e){return this.updateTimetag("myInfo",e)},s.updateRelationTimetag=function(e){return this.updateTimetag("relations",e)},s.getRelationsTimetag=function(){return this.getTimetag("relations")},s.updateFriendTimetag=function(e){return this.updateTimetag("friends",e)},s.getFriendsTimetag=function(){return this.getTimetag("friends")},s.updateFriendUserTimetag=function(e){return this.updateTimetag("friendUsers",e)},s.updateTeamTimetag=function(e){return this.updateTimetag("teams",e)},s.getTeamsTimetag=function(){return this.getTimetag("teams")},s.updateTeamMemberTimetag=function(e,t){return this.updateTimetag("team-"+e,t)},s.getTeamMembersTimetag=function(e){return this.getTimetag("team-"+e)},s.updateMyTeamMembersTimetag=function(e){return this.updateTimetag("myTeamMembers",e)},s.updateRoamingMsgTimetag=function(e){return this.updateTimetag("roamingMsgs",e)},s.updateMsgReceiptsTimetag=function(e){return this.updateTimetag("msgReceipts",e)},s.updateDonnopTimetag=function(e){return this.updateTimetag("donnop",e)},s.updateDeleteMsgTimetag=function(e){return this.updateTimetag("deleteMsg",e)},s.updateSessionAck=function(e){return this.updateTimetag("sessionAck",e)},s.deleteTimetag=function(e){return this.remove("timetag",e)},s.deleteTeamMemberTimetag=function(e){return this.deleteTimetag("team-"+e)}},function(e,t,n){"use strict";var s=n(2).Promise,i=n(7).fn,a=n(1),o="user";i.mergeMyInfo=function(e,t){var n=this;return n.put(o,e).then(function(){return t?n.updateMyInfoTimetag(e.updateTime):e})},i.mergeFriendUsers=function(e,t){var n=this;return n.putUsers(e).then(function(){n.updateFriendUserTimetag(t)})},i.putUsers=function(e){return this.put(o,e)},i.putUser=function(e){return this.put(o,e)},i.updateUser=function(e){var t=this;e=a.copy(e);var n=e.account;return this.getOne(o,null,n,{modifyObj:e}).then(function(s){return s?t.logger.warn("update user",n,e):t.logger.warn("update user no",n),s})},i.putUsersIfIsFriend=function(e){var t,n=this,i=[],a=[];return e.forEach(function(e){t=n.getFriend(e.account).then(function(s){return s&&(t=n.putUser(e),a.push(t)),s}),i.push(t)}),s.all(i).then(function(){return s.all(a).then(function(e){return e})})},i.deleteUser=function(e){return this.remove(o,e)},i.getUser=function(e){return this.getOne(o,null,e)},i.getUsers=function(e){function t(t){return-1!==e.indexOf(t.account)}return this.getAll(o,{filter:t})},i.getAllUsers=function(){return this.getAll(o)}},,function(e,t,n){"use strict";var s=n(5);n(36)(s),e.exports=s},,,,,,,,,,function(e,t,n){"use strict";function s(){}var i=n(27),a=n(1);s.prototype=Object.create(i.prototype),s.verifyFile=function(e){a.verifyOptions(e,"dur",!0,"file.")},e.exports=s},function(e,t,n){"use strict";function s(e){a.verifyOptions(e,"content"),e.type="custom",i.call(this,e),this.attach=e.content}var i=n(13),a=n(1);s.prototype=Object.create(i.prototype),s.reverse=function(e){var t=i.reverse(e);return t.content=e.attach,t},e.exports=s},function(e,t,n){"use strict";function s(e){e.type="geo",a.verifyOptions(e,"geo"),a.verifyOptions(e.geo,"lng lat title",!0,"geo."),a.verifyParamType("geo.lng",e.geo.lng,"number"),a.verifyParamType("geo.lat",e.geo.lat,"number"),a.verifyParamType("geo.title",e.geo.title,"string"),i.call(this,e),this.attach=JSON.stringify(e.geo)}var i=n(13),a=n(1);s.prototype=Object.create(i.prototype),s.reverse=function(e){var t=i.reverse(e);return e.attach=e.attach?""+e.attach:"",t.geo=e.attach?JSON.parse(e.attach):{},t},e.exports=s},function(e,t,n){"use strict";function s(){}var i=n(1),a=n(27);s.prototype=Object.create(a.prototype),s.verifyFile=function(e){i.verifyOptions(e,"w h",!0,"file.")},e.exports=s},function(e,t,n){"use strict";var s=n(1),i=function(e){this.account=e.account},a=i.prototype,o=a.Message=n(13),r=a.TextMessage=n(116),c=a.FileMessage=n(27),l=a.GeoMessage=n(112),u=a.NotificationMessage=n(115),d=a.CustomMessage=n(111),p=a.TipMessage=n(117);a.validScenes=o.validScenes,a.validTypes=o.validTypes,a.reverse=function(e){var t;switch(o.getType(e)){case"text":t=r.reverse(e);break;case"image":case"audio":case"video":case"file":t=c.reverse(e);break;case"geo":t=l.reverse(e);break;case"notification":t=u.reverse(e);break;case"custom":t=d.reverse(e);break;case"tip":t=p.reverse(e);break;default:t=o.reverse(e)}return o.setExtra(t,this.account),t},a.reverseMsgs=function(e,t){var n,i,a=this;return e.map(function(e){return e=a.reverse(e),t&&(n=t.modifyObj,n&&(e=s.merge(e,n)),i=t.mapper,s.isFunction(i)&&(e=i(e))),e})},e.exports=i},function(e,t,n){"use strict";function s(){}var i=n(1),a=i.notundef,o=n(13),r=n(23).getInstance("IM"),c=n(20),l=n(28),u={0:"addTeamMembers",1:"removeTeamMembers",2:"leaveTeam",3:"updateTeam",4:"dismissTeam",5:"passTeamApply",6:"transferTeam",7:"addTeamManagers",8:"removeTeamManagers",9:"acceptTeamInvite",10:"updateTeamMute"};s.prototype=Object.create(o.prototype),s.reverse=function(e){var t=o.reverse(e);if(e.attach=e.attach?""+e.attach:"",e.attach){var n=JSON.parse(e.attach);if(t.attach={type:u[n.id]},a(n.data)){var s=n.data;a(s.tinfo)&&(t.attach.team=c.reverse(r.unserialize(s.tinfo,"team"))),a(s.ids)&&(t.attach.accounts=s.ids),a(s.id)&&(t.attach.account=s.id),a(s.uinfos)&&(t.attach.users=s.uinfos.map(function(e){return l.reverse(r.unserialize(e,"user"))})),a(s.mute)&&(t.attach.mute=1==+s.mute),a(s.attach)&&(t.attach.custom=s.attach)}}else t.attach={};return t},e.exports=s},function(e,t,n){"use strict";function s(e){a.verifyOptions(e,"text"),e.type="text",i.call(this,e)}var i=n(13),a=n(1);s.prototype=Object.create(i.prototype),s.reverse=function(e){return i.reverse(e)},e.exports=s},function(e,t,n){"use strict";function s(e){a.verifyOptions(e,"tip"),e.type="tip",i.call(this,e),this.body=e.tip}var i=n(13),a=n(1);s.prototype=Object.create(i.prototype),s.reverse=function(e){var t=i.reverse(e);return t.text="",t.tip=e.body,e.attach&&(t.attach=e.attach),t},e.exports=s},function(e,t,n){"use strict";function s(){}var i=n(27),a=n(1);s.prototype=Object.create(i.prototype),s.verifyFile=function(e){a.verifyOptions(e,"dur w h",!0,"file.")},e.exports=s},function(e,t,n){"use strict";function s(){}var i=n(1);s.parse=function(e){var t=i.copy(e);return t.isBlacked="1"===t.isBlacked,t.isMuted="1"===t.isMuted,t.createTime=+t.createTime,t.updateTime=+t.updateTime,t},e.exports=s},,,,,function(e,t,n){"use strict";var s=n(4).fn,i=n(17);s.assembleLogin=function(){return{login:this.assembleIMLogin()}},s.afterLogin=function(){var e=this,t=e.db;if(t.enable){var n=e.account;e.options.appendAppKeyForDBName&&(n+="-"+e.options.appKey),e.db.init(n).then(function(){e.syncData()},function(n){e.logger.warn("no db",n),t.reset(!1),e.syncData()})}else e.logger.warn("no db"),e.syncData()},s.processAuth=function(e){var t=this;switch(e.cmd){case"login":e.error||(e.obj=e.content.loginRes,t.connectionId=e.content.loginRes.connectionId,t.onLoginPortsChange(e,2));break;case"kicked":return void t.onKicked(e);case"multiPortLogin":t.onLoginPortsChange(e,e.content.state);break;case"kick":e.error||(e.obj.deviceIds=e.content.deviceIds)}},s.onLoginPortsChange=function(e,t){var n=this,s=e.content.loginPorts;if(s&&s.length){var a=!0;switch(t){case 2:a=!0;break;case 3:a=!1}s.forEach(function(e){e.type=i.reverseType(e.type),e.time=+e.time,e.online=a}),s=s.filter(function(e){return e.connectionId!==n.connectionId}),s.length&&(n.logger.info("on login ports",s),n.options.onloginportschange(s))}},s.kickedReasons=["","samePlatformKick","serverKick","otherPlatformKick","silentlyKick"],s.kickedMessages=["","不允许同一个帐号在多个地方同时登录","被服务器踢了","被其它端踢了","悄悄被踢"]},function(e,t,n){"use strict";var s=n(4).fn;s.processChatroom=function(e){var t=this;switch(e.cmd){case"getChatroomAddress":t.onChatroomAddress(e)}},s.onChatroomAddress=function(e){e.error||(e.obj.address=e.content.address)}},function(e,t,n){"use strict";var s=n(4).fn,i=n(6),a=n(1),o=n(25);s.refreshSocketUrl=function(){function e(e){n.socketUrls=[],e=JSON.parse(e),e.common.link.forEach(function(e){n.socketUrls.push(i.formatSocketUrl(e))}),e.common["link.default"].forEach(function(e){e=i.formatSocketUrl(e),-1===n.socketUrls.indexOf(e)&&n.socketUrls.push(e)}),n.logger.log("got socket urls",n.socketUrls),n.connectToUrl(n.getNextSocketUrl())}function t(e){n.onDisconnect()}var n=this,s=n.options,r=i.info,c=s.lbsUrl;c=c+a.genUrlSep(c)+"k="+s.appKey+"&id="+s.account+"&sv="+r.sdkVersion+"&pv="+r.protocolVersion,n.logger.log("refresh lbs",c),o(c,{proxyUrl:a.url2origin(c)+"/lbs/res/cors/nej_proxy_frame.html",timeout:i.xhrTimeout,onload:e,onerror:t})}},function(e,t,n){"use strict";n(4).fn.processFilter=function(e){var t=this;switch(e.cmd){case"sendFilterMsg":t.onSendMsg(e,!0);break;case"filterMsg":t.onMsg(e,!0);break;case"filterSysMsg":t.onSysMsg(e,!0);break;case"sendFilterCustomSysMsg":t.onSendSysMsg(e,!0)}}},function(e,t,n){"use strict";var s=n(2).Promise,i=n(4).fn,a=n(1),o=a.objs2accounts,r=n(48),c=n(28);i.processFriend=function(e){var t=this,n=e.obj,s=e.content,i=e.error;switch(e.cmd){case"friendRequest":t.updateFriendSysMsg(e),i||t.onFriendRequest(n);break;case"syncFriendRequest":t.onFriendRequest(s,!0);break;case"deleteFriend":i||t.onDeleteFriend(n);break;case"syncDeleteFriend":t.onDeleteFriend(s,!0);break;case"updateFriend":i||t.onUpdateFriend(n);break;case"syncUpdateFriend":t.onUpdateFriend(s.friend,!0);break;case"getFriends":case"syncFriends":t.onFriends(e);break;case"syncFriendUsers":t.onFriendUsers(e)}},i.onFriends=function(e){function t(){m&&p.forEach(function(e){e=r.reverse(e),e.valid?f.push(e):g.push(e)}),c.logger.warn("parse friends",o(f),f,"delete",o(g),g),p.length?(m=!0,a=e.content.timetag):m=!1}function n(t,n){e.promise=new s(function(e,s){function o(){d?(i(),e(),t()):l.getFriends().then(function(n){f=n,i(),e(),t()}).then(void 0,function(e){e._msg="get friends error",s(e),n(e)})}m?l.mergeFriends(f,g,a).then(function(){o()}).then(void 0,function(e){e._msg="merge friends error",s(e),n(e)}):(c.logger.warn("no merge friends"),o())}).then(void 0,function(e){throw e._msg="merge friends data error",n(e),e})}function i(){c.timetags.friends=a,f.invalid=g,d?(c.syncResult.friends=f,c.syncResult.invalidFriends=g):(c.logger.warn("get friends",o(f),f),e.obj=f)}var a,c=this,l=c.db,u=e.error,d=c.packetFromSync(e),p=e.content.friends,m=!0,f=[],g=[],h=new s(function(e,s){u?d&&s(u):(t(),l.enable?n(e,s):(i(),e()))});d&&(h.cmd="friends",c.syncPromiseArray.push(h))},i.onFriendRequest=function(e,t){var n=s.resolve(),i=this,a=i.db,o=e.type;if("addFriend"===(o=e.type=r.getTypeFromByte(o)||o)||"passFriendApply"===o){var c=e.friend=r.assembleFriend(e.account);a.enable&&(n=a.putFriend(c))}return t&&i.onSyncFriendAction(e),n},i.onSyncFriendAction=function(e){var t=this;t.logger.info("on sync friendAction",e),t.options.onsyncfriendaction(e)},i.onDeleteFriend=function(e,t){var n=s.resolve(),i=this,a=i.db;return a.enable&&(n=a.deleteFriend(e.account)),t&&(e.type="deleteFriend",i.onSyncFriendAction(e)),n},i.onUpdateFriend=function(e,t){var n=this,s=n.db,i=r.reverse(e);s.enable&&s.updateFriend(i),t&&n.onSyncFriendAction({type:"updateFriend",friend:i})},i.onFriendUsers=function(e){var t=this,n=t.db,i=e.content,a=i.users.map(function(e){return c.reverse(e)});t.logger.warn("parse users",o(a),a);var r=i.timetag,l=s.resolve();n.enable&&(l=n.mergeFriendUsers(a,r)),t.timetags.friendUsers=r,l.cmd="friendUsers",t.syncPromiseArray.push(l),t.syncResult.users=a},i.updateFriendSysMsg=function(e){var t,n,s=e.obj,i=e.error;if(e.obj.idServer){if(i)t="error",i=a.filterObj(i,"code message");else{var o=s.type;switch(o=r.getTypeFromByte(o)||o){case"passFriendApply":t="passed";break;case"rejectFriendApply":t="rejected"}}n={idServer:s.idServer,state:t},i&&(n.error=i),this.updateSysMsg(n)}}},function(e,t,n){"use strict";var s=n(2).Promise,i=n(4).fn,a=n(1),o=a.undef,r=n(14),c=n(15),l=n(18),u=n(53);i.processMsg=function(e){var t=this;switch(e.cmd){case"sendMsg":t.onSendMsg(e);break;case"msg":t.onMsg(e);break;case"sysMsg":t.onSysMsg(e);break;case"sendCustomSysMsg":t.onSendSysMsg(e);break;case"getHistoryMsgs":case"searchHistoryMsgs":t.onHistoryMsgs(e);break;case"syncSendMsg":t.onMsg(e);break;case"deleteSessions":t.onDeleteSessions(e);break;case"sendMsgReceipt":t.onSendMsgReceipt(e);break;case"msgReceipt":t.onMsgReceipt(e);break;case"onDeleteMsg":t.onDeleteMsg(e);break;case"onMsgDeleted":t.onMsgDeleted(e);break;case"onDeleteMsgOfflineRoaming":t.onDeleteMsgOfflineRoaming(e);break;case"onMarkSessionAck":t.onMarkSessionAck(e);break;case"syncMarkSessionAck":t.syncMarkSessionAck(e)}},i.checkIgnore=function(e){var t=this;e.forEach(function(e){"notification"===e.type&&!e.ignore&&t.options.shouldIgnoreNotification(e)&&(e.ignore=!0)})},i.filterIgnore=function(e){return e.filter(function(e){return!e.ignore})},i.genSessionByMsgs=function(e){var t=this;return t.checkIgnore(e),l.genSessionByMsgs(t.message.Message,e)},i.onRoamingMsgs=function(e){var t=this,n=t.message,s=n.Message,i=s.getMaxTimetag,a=n.reverseMsgs(e.content.msgs),o=i(a);a=s.sortMsgs(a),a=s.deduplication(a);var r=a[0],c=r.sessionId,l=t.genSessionByMsgs(a);t.cacheSyncedSession(l);var u=t.putMsg(a,"roamingMsgs").then(function(e){a=e,a=t.filterIgnore(a),a.length&&(t.logger.warn("sync roamingMsgs",c,a.length,a),t.syncResult.roamingMsgs=t.syncResult.roamingMsgs||[],t.syncResult.roamingMsgs.push({sessionId:c,scene:r.scene,to:r.target,msgs:a,timetag:o}))});u.cmd="roamingMsgs-"+c,t.syncPromiseArray.push(u)},i.onOfflineMsgs=function(e,t){function n(){if(u.length){var e=a.getMaxTimetag(u),t=u[0].scene,n=u[0].target;s.markMsgRead(u),u=a.sortMsgs(u),u=a.deduplication(u);var i=s.genSessionByMsgs(u);s.cacheSyncedSession(i),c=s.putMsg(u,"offlineMsgs").then(function(i){u=i,u=s.filterIgnore(u),u.length&&(s.logger.warn("sync",p,d,u.length,u),s.syncResult[p]=s.syncResult[p]||[],s.syncResult[p].push({sessionId:d,scene:t,to:n,msgs:u,timetag:e}))}),c.cmd="offlineMsgs-"+d,s.syncPromiseArray.push(c)}}var s=this,i=s.message,a=i.Message,o=null;t&&(o={filter:!0});var r,c,l=i.reverseMsgs(e.content.msgs,{modifyObj:o}),u=[],d="",p=t?"offlineFilterMsgs":"offlineMsgs";l.forEach(function(e){r=e.sessionId,r!==d?(n(),u=[],u.push(e),d=r):u.push(e)}),n()},i.completeMsg=function(e){var t=this;return e.from=t.account,e.fromNick=t.myInfo&&t.myInfo.nick,e.fromClientType="Web",e.fromDeviceId=r.deviceId,e.time||(e.time=+new Date),e},i.onMsgs=function(e){var t=this;t.message.reverseMsgs(e.content.msgs,{mapper:function(e){t.handleMsg(e)}})},i.onMsg=function(e,t){var n=this,s=n.message.reverse(e.content.msg);t&&(s.filter=!0),n.syncing?n.unhandledMsgs.push({type:"onMsg",msg:s}):n.handleMsg(s)},i.pushMsgTask=function(e){var t=this;t.msgPromise=t.msgPromise.then(function(){return e()})},i.handleMsg=function(e){var t=this,n=e.time;t.markMsgRead(e),t.msgPromise=t.msgPromise.then(function(){return t.putMsg(e,"onMsg")}).then(function(s){return e=s[0],t.updateRoamingMsgTimetag(n)}).then(function(){if(e)return t.checkUserUpdate(e)}).then(function(){if(e){var n=e.type;switch(t.logger.log("handle "+e.scene+" "+n+" msg"+("notification"===n?" "+e.attach.type:""),e),n){case"notification":return t.onTeamNotificationMsg(e)}}}).then(function(){e&&!e.ignore&&(t.logger.info("on msg",e),setTimeout(function(){t.options.onmsg(a.copy(e))},0))}).then(void 0,function(e){e._msg="handle msg error",t.onDBError(e)})},i.putMsg=function(e,t){function n(e){"roamingMsgs"!==t&&"offlineMsgs"!==t||i.cacheSyncedSession(e)}if(a.isArray(e)||(e=[e]),e[0].filter)return s.resolve(e);var i=this,r=i.db,c=r.enable,l=s.resolve(),u=i.message.Message,d=u.getLastMsg(e),p=d.flow,m=d.sessionId!==i.currSessionId,f=i.genSessionByMsgs(e);n(f);var g=!1,h=[];i.checkIgnore(e),l=l.then(function(){return c&&"roamingMsgs"!==t&&"offlineMsgs"!==t?r.putMsg(e):e}).then(function(t){var n=[];e.forEach(function(e){i.checkMsgUnique(e)&&n.push(e)}),e=n,h=c?t:e}),l=l.then(function(){if(e.length&&(f=i.genSessionByMsgs(e),n(f),c))if(h.length){if(f)return r.putSession(f)}else g=!0,h=e});var v="roamingMsgs"===t,y=i.options.syncSessionUnread,b=f.id,w=i.findSession(b)||{},_=w.ack||0;return("offlineMsgs"===t||v&&y||"onMsg"===t&&"in"===p&&m)&&(l=l.then(function(e){if(f&&h.length){c&&e?(f=e,_=_||f.ack||0):(e=w)&&(f.unread=e.unread||0),n(f),f.unread=f.unread||0;var t=0;return h.forEach(function(e){var n="notification"!==e.type&&(o(e.isUnreadable)||e.isUnreadable);if(n&&y&&(n=e.time>_),n&&(t++,y&&!c)){var s=w.unreadMsgs||[];s.push(e),f.unreadMsgs=s}}),f.unread+=t,n(f),c&&!g?r.updateSession({id:f.id,unread:f.unread}):void 0}})),"onMsg"===t&&(l=l.then(function(){e.length&&f&&i.onUpdateSession(f)})),l.then(function(){return e})},i.cacheSyncedSession=function(e){if(e){e=a.merge({},e),e.unread=e.unread||0;var t=this;t.syncResult.sessions=t.syncResult.sessions||{};var n=e.id;t.syncResult.sessions[n]=a.merge(t.syncResult.sessions[n],e),t.mergeSession(t.syncResult.sessions[n])}},i.checkMsgUnique=a.genCheckUniqueFunc("idClient"),i.storeSendMsg=function(e){var t=this;if(!t.syncing){var n=t.putMsg(e,"sendMsg");return t.msgPromise=t.msgPromise.then(function(){return n}),n}t.unhandledMsgs.push({type:"sendMsg",msg:e})},i.updateSendMsgError=function(e){var t=this;if(!t.syncing){var n=t.updateMsg(e);return t.msgPromise=t.msgPromise.then(function(){return n}),n}t.unupdatedMsgs.push(e)},i.onSendMsg=function(e,t){var n=this,i=e.obj.msg;n.completeMsg(i);var a=e.error&&7101===e.error.code;e.error&&!a||(i.idServer=e.content.msg.idServer,i.time=+e.content.msg.time),e.error?i.status="fail":i.status="success",i=n.message.reverse(i),t&&(i.filter=!0),e.obj=i,n.syncing?n.unupdatedMsgs.push(i):n.msgPromise=s.all([n.msgPromise,e.obj.promise]).then(function(e){return e.length||(i.resend=!0),n.updateMsg(i).then(function(){return n.resolveMsgReceiptTask(i),i})})},i.updateLocalMsg=function(e){var t=this,n=t.updateMsg(e);return t.msgPromise=t.msgPromise.then(function(){return n}),n},i.updateMsg=function(e){if(e.filter)return s.resolve(e);var t=this,n=t.db,i="success"===e.status,a=l.genSessionByMsg(e),o=!!e.isLocal;return t.onUpdateSession(a),n.enable?n.updateMsg(e).then(function(e){var t=n.updateSession(a),r=s.resolve();return i&&e&&!o&&(r=n.updateRoamingMsgTimetag(e.time)),s.all([t,r])}):(i&&!o&&(t.timetags.roamingMsgs=e.time),s.resolve(e))},i.updateRoamingMsgTimetag=function(e){var t=this,n=t.db;return n.enable?n.updateRoamingMsgTimetag(e):(t.timetags.roamingMsgs=e,s.resolve(e))},i.checkUserUpdate=function(e){var t=this,n=e.from;return n===t.account?s.resolve():new s(function(s){function i(){t.api.getUser({account:n,sync:!0,done:function(e,n){e||setTimeout(function(){t.logger.info("on update user",n.account,n),t.options.onupdateuser(n)},0),s()}})}var o=t.userSet[n];if(o){var r=+o.updateTime,c=+e.userUpdateTime;!isNaN(r)&&!isNaN(c)&&a.isNumber(r)&&a.isNumber(c)&&r<c?i():s()}else i()})},i.processUnsettledMsgs=function(){var e=this;e.unhandledMsgs.forEach(function(t){var n=t.msg;switch(t.type){case"onMsg":e.handleMsg(n);break;case"sendMsg":e.msgPromise=e.msgPromise.then(function(){return e.putMsg(n)})}}),e.unupdatedMsgs.forEach(function(t){e.msgPromise=e.msgPromise.then(function(){return e.updateMsg(t)})}),e.resetUnsettledMsgs()},i.onTeamNotificationMsg=function(e){var t=this,n=t.db,s=e.attach,i=s.type,a=e.from,o=e.to,r=e.time,c=s.team,l=s.account,u=s.accounts;switch(i){case"updateTeam":if(!n.enable)return;return c.updateTime=r,t.onUpdateTeam(c),n.updateTeam(c);case"addTeamMembers":return t.onAddTeamMembers(e,c,u);case"removeTeamMembers":return t.onRemoveTeamMembers(c,o,u);case"acceptTeamInvite":return t.onAddTeamMembers(e,c,[a]);case"passTeamApply":return t.onAddTeamMembers(e,c,[l]);case"addTeamManagers":return t.updateTeamManagers(e,o,u,!0,r);case"removeTeamManagers":return t.updateTeamManagers(e,o,u,!1,r);case"leaveTeam":return t.onRemoveTeamMembers(c,o,[a]);case"dismissTeam":return t.onDismissTeam(o,r);case"transferTeam":return t.transferTeam(e,c,a,l);case"updateTeamMute":return t.onUpdateTeamMembersMute(e,c,[l],s.mute)}},i.onAddTeamMembers=function(e,t,n){var i=this,o=i.db,r=t.teamId,l=c.assembleMembers(t,n);e.attach.members=l;var u={team:t,accounts:n,members:l};if(i.logger.info("on add team members",u),i.options.onAddTeamMembers(a.simpleClone(u)),o.enable){var d,p=o.putTeam(t);return-1===n.indexOf(i.account)?d=o.putTeamMembers(l):(i.logger.warn("join team",r),p=new s(function(e){i.api.getTeamMembers({teamId:r,sync:!0,done:function(){e()}})})),s.all([d,p])}},i.onRemoveTeamMembers=function(e,t,n){var i=this,o=i.db,r={team:e,accounts:n};if(i.logger.info("on remove team members",r),i.options.onRemoveTeamMembers(a.simpleClone(r)),o.enable){if(-1===n.indexOf(i.account)){var c=o.removeTeamMembersByAccounts(t,n),l=s.resolve();return e&&(l=o.putTeam(e)),s.all([c,l])}return o.leaveTeam(t)}},i.updateTeamManagers=function(e,t,n,i,o){var r=this,l=r.db,u=e.attach.members=n.map(function(e){return{id:c.genId(t,e),type:i?"manager":"normal",updateTime:o}}),d={teamId:""+t,memberUpdateTime:o};e.attach.team=d;var p={team:d,accounts:n,isManager:i,members:u};if(r.logger.info("on update team managers",p),r.options.onUpdateTeamManagers(a.simpleClone(p)),l.enable){var m=l.updateTeam(d),f=l.updateTeamManagers(t,n,i,o);return s.all([m,f])}},i.onDismissTeam=function(e,t){var n=this,s=n.db,i={teamId:e};if(n.logger.info("on dismiss team",i),n.options.onDismissTeam(i),s.enable)return s.dismissTeam(e,t)},i.transferTeam=function(e,t,n,s){var i=this,o=i.db,r=t.teamId,l=t.memberUpdateTime,u={id:c.genId(r,n),type:"normal",updateTime:l},d={id:c.genId(r,s),type:"owner",updateTime:l};e.attach.members=[u,d];var p={team:t,from:u,to:d};if(i.logger.info("on transfer team",p),i.options.onTransferTeam(a.simpleClone(p)),o.enable)return o.transferTeam(t,n,s)},i.onUpdateTeamMembersMute=function(e,t,n,i){var o=this,r=o.db,l=n.map(function(e){return{id:c.genId(t.teamId,e),account:e,teamId:t.teamId,mute:i,updateTime:t.memberUpdateTime}});e.attach.members=l;var u={team:t,accounts:n,members:l,mute:i};if(o.logger.info("on update team members mute",u),o.options.onUpdateTeamMembersMute(a.simpleClone(u)),r.enable){var d=r.updateTeamMembers(l),p=r.putTeam(t);return s.all([d,p])}},i.onHistoryMsgs=function(e){e.error||(e.obj.msgs=this.message.reverseMsgs(e.content.msgs))},i.isFilterMsgs=function(e){return!!e[0].filter},i.splitMsgs=function(e,t,n,s){e.forEach(function(e){if(e.filter)s.push(e);else switch(e.scene){case"p2p":t.push(e);break;case"team":n.push(e)}})},i.markMsgRead=function(e,t){a.isArray(e)||(e=[e]);var n=this;if(n.db.enable||n.options.autoMarkRead||t){var s=[],i=[],o=[];n.splitMsgs(e,s,i,o),n.markP2pMsgsRead(s),n.markTeamMsgsRead(i),n.markFilterMsgsRead(o)}},i.markP2pMsgsRead=function(e){if(e.length){var t=u.idMap.msg.id,n=u.idMap.msg.msg;this.doMarkMsgsRead(t,n,e)}},i.markTeamMsgsRead=function(e){if(e.length){var t=u.idMap.team.id,n=u.idMap.team.teamMsg;this.doMarkMsgsRead(t,n,e)}},i.markFilterMsgsRead=function(e){if(e.length){var t=u.idMap.filter.id,n=u.idMap.filter.filterMsg;this.doMarkMsgsRead(t,n,e)}},i.markSysMsgRead=function(e,t){a.isArray(e)||(e=[e]);var n=this;if(n.db.enable||n.options.autoMarkRead||t){var s,i;n.isFilterMsgs(e)?(s=u.idMap.filter.id,i=u.idMap.filter.filterSysMsg):(s=u.idMap.msg.id,i=u.idMap.msg.sysMsg),n.doMarkMsgsRead(s,i,e)}},i.doMarkMsgsRead=function(e,t,n){n.length&&this.sendCmd("batchMarkRead",{sid:e,cid:t,ids:n.map(function(e){return e.idServer})})}},function(e,t,n){"use strict";var s=n(2).Promise,i=n(4).fn,a=n(19),o=n(18),r=n(1);i.onDeleteMsg=function(e){delete e.obj.sysMsg,e.error||(e.promise=this.deleteLocalMsg(e.obj.msg))},i.onMsgDeleted=function(e){if(!e.error){var t=this,n=t.db,s=a.reverse(e.content.sysMsg);s=t.processDeleteMsgSysMsg(s),t.markSysMsgRead(s),t.deleteLocalMsg(s.msg).then(function(){n.enable&&n.updateDeleteMsgTimetag(s.time+1),t.handleSysMsg(s)})}},i.processDeleteMsgSysMsg=function(e){var t=this;return e.msg={},["scene","from","to"].forEach(function(t){e.msg[t]=e[t]}),e.msg.idClient=e.deletedIdClient,e.msg.idServer=e.deletedIdServer,e.msg.time=e.deletedMsgTime,e.msg.fromNick=e.deletedMsgFromNick,t.message.Message.setExtra(e.msg,t.account),e},i.onDeleteMsgOfflineRoaming=function(e){if(!e.error){var t=this,n=1==+e.content.type?"offline":"roaming",s=a.reverseSysMsgs(e.content.sysMsgs,{mapper:function(e){return t.processDeleteMsgSysMsg(e)}});t.logger.warn("sync deleteMsgSysMsgs "+n,s),"offline"===n&&t.markSysMsgRead(s);var i=e.content.timetag;t.timetags.deleteMsg=i,t.syncResult.deleteMsgTimetag=i;var o=t.putSysMsg(s,"offlineSysMsgs");o.cmd="deleteMsgSysMsgs "+n,t.syncPromiseArray.push(o),t.syncResult.deleteMsgSysMsgs=t.syncResult.deleteMsgSysMsgs||[],t.syncResult.deleteMsgSysMsgs.push({type:n,sysMsgs:s})}},i.deleteMsgOfflineRoaming=function(e,t){if(!e)return s.resolve();var n=this;n.logger.warn("deleting msgs",e);var i=n.db,a=[];return e.forEach(function(e){e.sysMsgs.forEach(function(e){var s=n.deleteLocalMsg(e.msg,{cbUpdateSession:function(e){e=n.mergeSession(e),e=r.simpleClone(e),o.trim(e);var s=r.findObjIndexInArray(t,{value:e.id});if(-1!==s&&(t[s]=r.merge({},t[s],e)),i.enable)return i.updateSession(e)}});a.push(s)})}),s.all(a).then(function(){if(i.enable)return i.updateDeleteMsgTimetag(n.syncResult.deleteMsgTimetag)})},i.deleteLocalMsg=function(e,t){var n=this,i=n.db;t=t||{};var a=t.cbUpdateSession||n.updateLocalSession.bind(n);if(i.enable&&e){var o=!1,r=null,c=e.sessionId;return i.getMsgs({sessionId:c,limit:1}).then(function(t){t&&t[0]&&t[0].idClient===e.idClient&&(o=!0)}).then(function(){return i.deleteMsg(e.idClient)}).then(function(){if(o)return i.getMsgs({sessionId:c,limit:1})}).then(function(e){if(o)return e&&e[0]&&(r=e[0]),a({id:c,lastMsg:r})})}return s.resolve()}},function(e,t,n){"use strict";var s=n(2).Promise,i=n(4).fn;i.onOfflineMsgReceipts=function(e){var t,n=this,i=n.db,a=e.content.msgReceipts,o=n.syncResult.msgReceipts=[],r=[],c="msgReceipts",l=n.syncResult.sessions||{};a.forEach(function(e){e.time=+e.time;var a=e.sessionId="p2p-"+e.from;c+="-"+a,t=s.resolve();var u=l[a];i.enable?t=i.getSession(a).then(function(t){if((t=t||u)&&n.shouldUpdateSessionFromMsgReceipt(t,e)){var s=n.genSessionFromMsgReceipt(t,e);return i.putSession(s).then(function(e){e&&n.cacheSyncedSession(e)})}}):u&&o.push(e),r.push(t)}),t=s.all(r).then(function(){if(i.enable)return i.updateMsgReceiptsTimetag(e.content.timetag)}),t.cmd=c,n.syncPromiseArray.push(t)},i.mergeSessionAndMsgReceipts=function(e,t){var n=this,s={};return e=e||[],t=t||[],e.forEach(function(e){s[e.id]=e}),t.forEach(function(t){var i=s[t.sessionId];if(n.shouldUpdateSessionFromMsgReceipt(i,t)){var a=n.genSessionFromMsgReceipt(i,t);e=n.api.mergeSessions(e,a)}}),e},i.shouldUpdateSessionFromMsgReceipt=function(e,t){return!e||!e.msgReceiptServerTime||t.time>e.msgReceiptServerTime},i.genSessionFromMsgReceipt=function(e,t){var n=t.time,s={id:t.sessionId,msgReceiptTime:n,msgReceiptServerTime:n};return e&&e.updateTime||(s.updateTime=n),s},i.onMsgReceipt=function(e){var t=this,n=t.db,i=e.content.msgReceipt;i.time=+i.time;var a=i.idClient,o=s.resolve();n.enable&&a&&(o=n.getMsgByIdClient(a)),o.then(function(e){var n;if(e){if(!e.idServer)return void(t.msgReceiptTasks[a]=i);n=e.time}else n=i.time;i.msgReceiptTime=n,t.updateSessionMsgReceiptTime(i)})},i.resolveMsgReceiptTask=function(e){var t=this,n=t.msgReceiptTasks[e.idClient];n&&(n.msgReceiptTime=e.time,this.updateSessionMsgReceiptTime(n))},i.updateSessionMsgReceiptTime=function(e){var t=this,n=t.db,s={id:"p2p-"+e.from,msgReceiptTime:e.msgReceiptTime,msgReceiptServerTime:e.time};n.enable&&n.putSession(s),t.onUpdateSession(s)},i.onSendMsgReceipt=function(e){var t=this;if(!e.error){var n=e.obj.msgReceipt,s=+n.time,i=+e.content.msgReceipt.time;t.sessionSet["p2p-"+n.to].msgReceiptSendTime=Math.min(s,i)}},i.shouldSendMsgReceipt=function(e){if(e&&"p2p"===e.scene&&"success"===e.status){var t=this.sessionSet[e.sessionId];if(t){var n=t.msgReceiptSendTime;return!n||n<e.time}}return!1},i.isMsgRemoteRead=function(e){var t=this;if(e&&"p2p"===e.scene&&"out"===e.flow&&"success"===e.status){var n=t.sessionSet[e.sessionId];if(n&&n.msgReceiptTime)return e.time<=n.msgReceiptTime}return!1}},function(e,t,n){"use strict";var s=n(2).Promise,i=n(4).fn,a=n(1),o=n(38);i.processNotify=function(e){var t=this;switch(e.cmd){case"syncOfflineMsgs":t.onOfflineMsgs(e);break;case"batchMarkRead":break;case"syncOfflineSysMsgs":t.onOfflineSysMsgs(e);break;case"syncRoamingMsgs":t.onRoamingMsgs(e);break;case"syncOfflineFilterMsgs":t.onOfflineMsgs(e,!0);break;case"syncOfflineFilterSysMsgs":t.onOfflineSysMsgs(e,!0);break;case"syncMsgReceipts":t.onOfflineMsgReceipts(e);break;case"syncDonnop":t.onDonnop(e,!0);break;case"syncSessionAck":t.syncSessionAck(e)}},i.onDonnop=function(e,t){if(!e.error){var n=this,s=n.db,i=o.reverse(e.content.donnop);n.mergeDonnop(i);var a=n.dbDonnop();if(t){var r=e.content.timetag;n.timetags.donnop=r,s.enable&&(a=a.then(function(){return n.db.updateDonnopTimetag(r)})),a.cmd="donnop",n.syncPromiseArray.push(a)}else n.onPushNotificationMultiportConfigUpdate()}},i.onUpdateDonnop=function(e){var t=this;if(!e.error){var n=e.obj;n&&(t.mergeDonnop(a.filterObj(n,["shouldPushNotificationWhenPCOnline"])),t.dbDonnop(),t.onPushNotificationMultiportConfigUpdate())}},i.getPushNotificationMultiportConfig=function(){var e=this;return a.merge({},e.pushNotificationMultiportConfig)},i.mergeDonnop=function(e){var t=this;t.pushNotificationMultiportConfig=a.merge({},t.pushNotificationMultiportConfig,e)},i.dbDonnop=function(){var e=this;return e.db.enable?e.db.setDonnop(e.pushNotificationMultiportConfig):s.resolve()},i.onPushNotificationMultiportConfigUpdate=function(){var e=this;setTimeout(function(){var t=e.getPushNotificationMultiportConfig();e.logger.info("on update pushNotificationMultiportConfig",t),e.options.onPushNotificationMultiportConfigUpdate(t)})}},function(e,t,n){"use strict";var s=n(2).Promise,i=n(4).fn,a=n(1),o=n(18),r=n(3);i.mergeSession=function(e){e=a.copy(e);var t=this.sessionSet,n=e.id,s=t[n];if(s&&s.lastMsg&&e&&e.lastMsg){var i=s.lastMsg.time||0;(e.lastMsg.time||0)<i&&delete e.lastMsg}return t[n]=a.merge(s,e),e=t[n],a.undef(e.unread)&&(e.unread=0),e},i.mergeSessions=function(e){var t=this;e.forEach(function(e){t.mergeSession(e)})},i.deleteLocalSession=function(e){var t=this;a.isArray(e)||(e=[e]),e.forEach(function(e){delete t.sessionSet[e]})},i.onDeleteSessions=function(e){e.obj=e.obj.sessions.map(function(e){return o.parse(e)})},i.onUpdateSession=function(e){var t=this;return new s(function(n){e?(e=t.mergeSession(e),e=a.simpleClone(e),o.trim(e),o.isComplete(e)&&setTimeout(function(){t.logger.info("on update session",e.id,a.simpleClone(e)),t.options.onupdatesession(e),n(e)},0)):n(e)})},i.setCurrSession=function(e){var t=this;e=""+e,t.currSessionId=e,t.logger.warn("set curr session",e)},i.findSession=function(e){return this.sessionSet[e]},i.resetSessionUnread=function(e){e=""+e;var t,n=this,s=n.db;return n.findSession(e)?(s.enable&&s.resetSessionUnread(e),void function(){t={id:e,unread:0},n.onUpdateSession(t)}()):void n.logger.warn("reset session unread, no session "+e)},i.insertLocalSession=function(e){var t=this,n=t.db,i=t.sessionSet;return new s(function(c,l){var u=e.scene,d=e.to,p=u+"-"+d,m=t.findSession(p);if(m)t.logger.warn("session exist"),l(r.sessionExist());else{var f;if(a.isNumber(e.updateTime))f=e.updateTime;else{var g,h=[];for(var v in i)i.hasOwnProperty(v)&&(g=i[v],a.isNumber(g.updateTime)&&h.push(g.updateTime));f=Math.max.apply(Math,h)+1,f=Math.max(f,+new Date)}var y=s.resolve();n.enable&&(y=n.getMsgs({sessionId:p,limit:1})),y.then(function(e){if(a.isArray(e)&&1===e.length){var s=e[0];m=o.genSessionByMsg(s),m.updateTime=f}else m={id:p,scene:u,to:d,updateTime:f,lastMsg:null};n.enable?n.putSession(m).then(c,l):c(m),t.onUpdateSession(m)})}})},i.updateLocalSession=function(e){var t=this;return new s(function(n,i){var o=t.db;if(t.findSession(e.id)){var c=s.resolve(),l=a.filterObj(e,"id lastMsg localCustom");o.enable&&(c=o.updateSession(l)),c.then(function(e){return t.onUpdateSession(e)}).then(n,function(e){i(e)})}else t.logger.warn("no session ",e.id),i(r.sessionNotExist())})}},function(e,t,n){"use strict";var s=n(2).Promise,i=n(4).fn;i.syncSessionAck=function(e){var t=this,n=t.db,i=s.resolve();[[e.content.p2p,"p2p"],[e.content.team.m_map,"team"]].forEach(function(e){var s=e[0],a=e[1];Object.keys(s).forEach(function(e){var o=a+"-"+e,r={id:o,ack:s[e]};n.enable&&(i=i.then(function(){return n.putSession(r)})),t.mergeSession(r)})}),t.logger.warn("parse offline session ack",t.sessionSet);var a=e.content.timetag;n.enable&&(i=i.then(function(){return t.db.updateSessionAck(a)})),i.cmd="sessionAck",t.syncPromiseArray.push(i)},i.onMarkSessionAck=function(e){e.error||this.storeSessionAck(e.obj)},i.syncMarkSessionAck=function(e){this.storeSessionAck(e.content)},i.storeSessionAck=function(e){var t=this;if(t.options.syncSessionUnread){var n=t.db,s=0===e.scene?"p2p":"team",i=s+"-"+e.to,a=e.timetag;if(a<=((t.findSession(i)||{}).ack||0))return void t.logger.warn("useless ack, no store session ack",a);var o={id:i,ack:a};if(t.mergeSession(o),n.enable&&n.updateSession(o),t.logger.warn("store session ack",o),n.enable)t.pushMsgTask(function(){return n.getMsgCountAfterAck({sessionId:i,ack:o.ack}).then(function(e){var s={id:i,unread:e};return t.logger.warn("update unread via session ack"),t.onUpdateSession(s),n.updateSession(s)})});else{var r=t.findSession(i);if(r){var c=r.unreadMsgs;if(c&&c.length){for(var l=0,u=[],d=c.length-1;d>=0;d--){var p=c[d];if(!(p.time>a))break;l++,u.push(p)}r.unreadMsgs=u,r.unread=l,t.logger.warn("update unread via session ack"),t.onUpdateSession(r)}}}}}},function(e,t,n){"use strict";var s=n(2).Promise,i=n(4).fn,a=n(1),o=a.undef,r=a.objs2ids,c=a.objs2accounts,l=a.teams2ids,u=n(18);i.beforeSync=function(){var e=this,t=e.db;return t.enable?t.clearSendingMsgs():s.resolve()},i.syncData=function(){function e(e){t.syncPromiseArray=[],t.syncResult={},t.syncTeamMembersPromiseArray=[],t.syncTeamMembersResult={},a.verifyBooleanWithDefault(s,"syncRelations syncFriends syncFriendUsers syncTeams syncRoamingMsgs syncMsgReceipts syncExtraTeamInfo syncTeamMembers",!0),a.verifyBooleanWithDefault(s,"syncFilter",!1);var n={};e=e||{},window._nimForceSyncIM&&(t.logger.warn("upgrade force sync"),e={},window._nimForceSyncIM=!1),n.myInfo=e.myInfo||0,n.offlineMsgs=0,s.syncRelations&&(n.relations=e.relations||0),s.syncFriends&&(n.friends=e.friends||0),s.syncFriendUsers&&(n.friendUsers=e.friendUsers||0),s.syncTeams&&(n.teams=e.teams||0),s.syncRoamingMsgs&&(n.roamingMsgs=e.roamingMsgs||0),s.syncMsgReceipts&&(n.msgReceipts=e.msgReceipts||0),s.syncExtraTeamInfo&&(n.myTeamMembers=e.myTeamMembers||0),s.syncSessionUnread&&(n.sessionAck=e.sessionAck||0),n.donnop=e.donnop||0,n.deleteMsg=e.deleteMsg||0,s.syncFilter&&(n.filterMsgs=0),t.sendCmd("sync",{sync:n},t.onSyncData.bind(t))}var t=this,n=t.db,s=t.options,i=n.enable;t.notifyLogin(),t.syncing=!0,i?t.beforeSync().then(function(){return t.db.getTimetags()}).then(function(t){e(t)},function(){e()}):e(t.timetags)},i.onSyncData=function(e,t){this.onMiscError(e,t,"sync error")},i.processSync=function(e){var t=this;switch(e.cmd){case"syncDone":t.timetags.sync=e.content.timetag,t.onSyncDone();break;case"syncTeamMembersDone":t.onSyncTeamMembersDone()}},i.onSyncDone=function(){function e(){if(E.logger.warn("after sync",a.promises2cmds(U)),U=[],h=V.blacklist||[],v=V.invalidBlacklist||[],y=V.mutelist||[],b=V.invalidMutelist||[],w=V.friends,_=V.invalidFriends||[],S=V.myInfo,x=V.users,C=V.teams,I=V.invalidTeams||[],k=V.sessions,T=V.msgReceipts,M=V.roamingMsgs,N=V.offlineMsgs,L=V.offlineFilterMsgs,P=V.offlineSysMsgs,F=V.offlineCustomSysMsgs,A=V.offlineFilterSysMsgs,D=V.offlineFilterCustomSysMsgs,R=V.sysMsgUnread,k){var e=[];Object.keys(k).forEach(function(t){e.push(k[t])}),k=e.sort(function(e,t){return t.updateTime-e.updateTime})}var o=s.resolve();$&&(o=t()),o.then(function(){$&&!E.hasSynced&&(E.hasSynced=!0,n()),s.all(U).then(i).then(p,E.onDBError.bind(E))})}function t(){var e,t=[],n=[];return M&&M.forEach(function(e){n=[].concat(n,e.msgs)}),N&&N.forEach(function(e){n=[].concat(n,e.msgs)}),e=j.putMsg(n),t.push(e),s.all(t)}function n(){B.syncRelations&&(g=j.getRelations().then(function(e){h=e[0],y=e[1],h.invalid=v,y.invalid=b},function(e){return e._msg="on relations error",e}),U.push(g)),B.syncFriends&&(g=j.getFriends().then(function(e){w=e,w.invalid=_},function(e){return e._msg="on friends error",e}),U.push(g)),o(S)&&(g=j.getUser(E.account).then(function(e){S=e},function(e){return e._msg="on myInfo error",e}),U.push(g)),B.syncFriendUsers&&(g=j.getFriends().then(function(e){return e.map(function(e){return e.account})}).then(function(e){return j.getUsers(e)}).then(function(e){x=e},function(e){return e._msg="on users error",e}),U.push(g)),B.syncTeams&&(g=j.getTeams().then(function(e){C=e,C.invalid=I},function(e){return e._msg="on teams error",e}),U.push(g)),g=j.getTeamMembersByAccount(E.account).then(function(e){E.mergeMyTeamMembers(e)}),U.push(g),g=j.getDonnop().then(function(e){E.mergeDonnop(e)}),U.push(g),g=j.getSessions().then(function(e){k=e},function(e){return e._msg="on sessions error",e}),U.push(g),g=j.getSysMsgUnread().then(function(e){R=e},function(e){return e._msg="on sysMsgUnread error",e}),U.push(g)}function i(){E.logger.warn("taskAfterSync"),d();var e=[];return e.push(E.deleteMsgOfflineRoaming(V.deleteMsgSysMsgs,k)),s.all(e)}function d(){if(V.deleteMsgSysMsgs){var e={};M&&M.forEach(function(t){e[t.sessionId]=t});var t={};N&&N.forEach(function(e){t[e.sessionId]=e});var n=E.api;V.deleteMsgSysMsgs.forEach(function(s){s.sysMsgs.forEach(function(s){var i=s.msg,a=i.sessionId;[e,t].forEach(function(e){e[a]&&(e[a].msgs=n.cutMsgs(e[a].msgs,i))})})}),j.enable||[M,N].forEach(function(e){e&&e.forEach(function(e){if(e.msgs.length){var t=E.genSessionByMsgs(e.msgs);E.cacheSyncedSession(t),k=n.mergeSessions(k,t)}else k=n.cutSessions(k,{id:e.sessionId})})})}}function p(){setTimeout(m,0)}function m(){var e,t,n=[];h&&(E.logger.info("on blacklist",c(h),h),B.onblacklist(h)),y&&(E.logger.info("on mutelist",c(y),y),B.onmutelist(y)),w&&(E.logger.info("on friends",c(w),w),B.onfriends(w)),S&&(E.logger.info("on myInfo",S),E.myInfo=S,B.onmyinfo(a.copy(S))),x&&(x.forEach(function(e){E.mergeUser(e)}),E.logger.info("on users",c(x),x),B.onusers(x)),C&&(E.logger.info("on teams",l(C),C),B.onteams(C)),T&&(!E.hasSynced&&k&&k.length||E.hasSynced)&&(k=E.mergeSessionAndMsgReceipts(k,T)),k&&k.length&&(k.forEach(function(e){E.mergeSession(e),u.trim(e)}),E.logger.info("on sessions",r(k),k),B.onsessions(k)),M&&M.forEach(function(e){n.push(e.timetag),t=e.msgs,t.length&&(E.logger.info("on roaming msgs",e.sessionId,t.length,t),B.onroamingmsgs(e))}),N&&N.forEach(function(e){n.push(e.timetag),t=e.msgs,t.length&&(E.logger.info("on offline msgs",e.sessionId,t.length,t),B.onofflinemsgs(e))}),L&&L.forEach(function(e){n.push(e.timetag),t=e.msgs,t.length&&(E.logger.info("on offline filter msgs",e.sessionId,t.length,t),B.onofflinefiltermsgs(t))});var s=[],i=[];V.deleteMsgSysMsgs&&V.deleteMsgSysMsgs.forEach(function(e){"roaming"===e.type?s=s.concat(e.sysMsgs):i=i.concat(e.sysMsgs)}),s.length&&(O=O||[],O=O.concat(s)),i.length&&(P=P||[],P=P.concat(i)),O&&(E.logger.info("on roaming sys msgs",O.length,O),B.onroamingsysmsgs(O)),P&&(E.logger.info("on offline sys msgs",P.length,P),B.onofflinesysmsgs(P)),A&&(E.logger.info("on offline filter sys msgs",A.length,A),B.onofflinefiltersysmsgs(A)),F&&(E.logger.info("on offline custom sys msgs",F.length,F),B.onofflinecustomsysmsgs(F)),D&&(E.logger.info("on offline filter custom sys msgs",D.length,D),B.onofflinefiltercustomsysmsgs(D)),R&&(R=a.merge({},E.sysMsgUnread,R),E.sysMsgUnread=a.merge({},R),E.logger.info("on sysMsgUnread",R),B.onsysmsgunread(R));var o=E.getPushNotificationMultiportConfig();E.logger.info("on pushNotificationMultiportConfig",o),B.onPushNotificationMultiportConfig(o),n.length?(e=Math.max.apply(Math,n),E.updateRoamingMsgTimetag(e).then(f,f)):f(),E.syncPromiseArray=null,E.syncResult=null}function f(){E.processUnsettledMsgs(),E.processUnsettledSysMsgs(),E.syncing=!1,E.logger.info("sync done"),B.onsyncdone(),B.syncTeamMembers&&C&&C.length?E.syncTeamMembers(C):setTimeout(function(){E.onSyncTeamMembersDone()},0)}var g,h,v,y,b,w,_,S,x,C,I,k,T,M,N,L,O,P,F,A,D,R,E=this,j=E.db,$=j.enable,B=E.options,U=E.syncPromiseArray,V=E.syncResult;U.length?s.all(U).then(e,function(e){E.onDBError(e)}):e()},i.syncTeamMembers=function(e){function t(t){var s={};t=t||{},e.forEach(function(e){s[e.teamId]=t["team-"+e.teamId]||0},n),n.sendCmd("syncTeamMembers",{sync:s},n.onSyncTeamMembers.bind(n))}var n=this,s=n.db;s.enable?s.getTeamMemberTimetags().then(function(e){t(e)},function(){t()}):t(n.timetags)},i.onSyncTeamMembers=function(e,t){this.onMiscError(e,t,"sync teamMembers error")},i.onSyncTeamMembersDone=function(){function e(){u.logger.warn("after sync members",a.promises2cmds(f)),f=[],d.enable&&!u.hasSyncedTeamMembers?(u.hasSyncedTeamMembers=!0,t()):n()}function t(){return p.syncTeams&&p.syncTeamMembers?void d.getTeams().then(function(e){e.forEach(function(e){var t=e.teamId;l=d.getTeamMembers(t).then(function(e){m[t]=e},function(e){return e._msg="on members error",e}),f.push(l)}),f.length?s.all(f).then(n,function(e){u.onDBError(e)}):n()},function(e){e._msg="on members error",u.onDBError(e)}):r()}function n(){setTimeout(i,0)}function i(){var e,t;Object.keys(m).forEach(function(n){-1===n.indexOf("invalid")&&(e=m[n],t=m[n+"-invalid"]||[],e.invalid=t,o(n,e))}),r()}function o(e,t){u.logger.info("on members",e,c(t),t),p.onteammembers({teamId:e,members:t})}function r(){u.logger.info("sync members done"),p.onsyncteammembersdone(),u.syncTeamMembersResult=null,u.syncTeamMembersPromiseArray=null}var l,u=this,d=u.db,p=u.options,m=u.syncTeamMembersResult,f=u.syncTeamMembersPromiseArray;f.length?s.all(f).then(e,function(e){u.onDBError(e)}):e()}},function(e,t,n){"use strict";var s=n(2).Promise,i=n(4).fn,a=n(1),o=n(19);i.splitSysMsgs=function(e,t){for(var n,s=e.length-1;s>=0;s--)n=e[s],o.isCustom(n)&&(e.splice(s,1),t.push(n))},i.onOfflineSysMsgs=function(e,t){var n=this,s=e.content.sysMsgs.map(function(e){return e=o.reverse(e),t&&(e.filter=!0),e});s=s.reverse(),n.markSysMsgRead(s);var i=[];n.splitSysMsgs(s,i);var a=t?"offlineFilterSysMsgs":"offlineSysMsgs",r=t?"offlineFilterCustomSysMsgs":"offlineCustomSysMsgs";if(s.length){var c=n.putSysMsg(s,"offlineSysMsgs").then(function(e){s=e,s.length&&(n.logger.warn("sync",a,s.length,s),n.syncResult[a]=s)});c.cmd="sysMsgs",n.syncPromiseArray.push(c)}i.length&&(n.logger.warn("sync "+r,i),n.syncResult[r]=i)},i.onSendSysMsg=function(e,t){var n=this,s=e.obj;n.completeSysMsg(s),e.error?s.status="fail":s.status="success",s=o.reverse(s),t&&(e.obj.filter=!0),e.obj=s},i.completeSysMsg=function(e){return e.from=this.account,e},i.onSysMsg=function(e,t){var n=this,s=o.reverse(e.content.sysMsg);n.markSysMsgRead(s),t&&(s.filter=!0),o.isCustom(s)?(n.logger.info("on customSysMsg",s),n.options.oncustomsysmsg(s)):n.syncing?n.unhandledSysMsgs.push(s):n.handleSysMsg(s)},i.handleSysMsg=function(e){var t=this,n=e.type,i=e.from;t.sysMsgPromise=t.sysMsgPromise.then(function(){return t.putSysMsg(e,"onSysMsg")}).then(function(t){e=t[0]}).then(function(){if(e){var a,o=s.resolve();switch(n){case"addFriend":a={type:"addFriend",account:i},o=t.onFriendRequest(a);break;case"passFriendApply":a={type:"passFriendApply",account:i},o=t.onFriendRequest(a);break;case"deleteFriend":o=t.onDeleteFriend({account:i})}return a&&a.friend&&(e.friend=a.friend),o}}).then(function(){e&&(t.logger.info("on sysMsg",n,e),setTimeout(function(){t.options.onsysmsg(e)},0))})},i.putSysMsg=function(e,t){if(a.isArray(e)||(e=[e]),e[0].filter)return s.resolve(e);var n=this,i=n.db,o=i.enable,r=s.resolve(),c=[];return r=r.then(function(){return o?i.putSysMsg(e):e}).then(function(t){var s=[];e.forEach(function(e){n.checkSysMsgUnique(e)&&s.push(e)}),e=s,c=o?t:e}),r=r.then(function(){return n.getSysMsgUnread().then(function(s){return c.length||(c=e,c.backward=!0),n.updateSysMsgUnread(c,s,1).then(function(e){"offlineSysMsgs"===t&&(n.syncResult.sysMsgUnread=e),"onSysMsg"===t&&n.onUpdateSysMsgUnread(e)})})}),r.then(function(){return e})},i.checkSysMsgUnique=a.genCheckUniqueFunc("idServer"),i.getSysMsgUnread=function(){var e=this,t=e.db;return new s(function(n){t.enable?t.getSysMsgUnread().then(function(e){n(e)},function(){n(e.sysMsgUnread)}):n(e.sysMsgUnread)})},i.updateSysMsgUnread=function(e,t,n){if(a.isArray(e)||(e=[e]),!e.length)return s.resolve(t);t=t||{};var i,r=this,c=r.db;return e.forEach(function(e){(n>0&&!e.read||n<0&&e.read)&&(i=e.type,t[i]=(t[i]||0)+n)}),t=o.completeUnread(t),r.sysMsgUnread=t,c.enable&&!e.backward?c.updateSysMsgUnread(t):s.resolve(t)},i.reduceSysMsgUnread=function(e){var t=this;return t.getSysMsgUnread().then(function(n){return t.updateSysMsgUnread(e,n,-1)}).then(function(e){t.onUpdateSysMsgUnread(e)})},i.onUpdateSysMsgUnread=function(e){var t=this;setTimeout(function(){t.logger.info("on update sysMsg unread",e),t.options.onupdatesysmsgunread(e)},0)},i.updateSysMsg=function(e){var t,n=this,i=n.db;t=i.enable?i.updateSysMsg(e):s.resolve(e),t.then(function(e){n.onUpdateSysMsg(e)})},i.onUpdateSysMsg=function(e){var t=this;setTimeout(function(){a.isArray(e)||(e=[e]),e.forEach(function(e){t.logger.info("on update sysMsg",e),t.options.onupdatesysmsg(e)})},0)},i.processUnsettledSysMsgs=function(){var e=this;e.unhandledSysMsgs.forEach(function(t){e.handleSysMsg(t)}),e.resetUnsettledSysMsgs()}},function(e,t,n){"use strict";var s=n(2).Promise,i=n(4).fn,a=n(1),o=a.objs2accounts,r=a.teams2ids,c=n(20),l=n(15);i.processTeam=function(e){var t,n,s,i=this,a=e.error;switch(e.cmd){case"createTeam":if(t=e.obj.team,a||(t=e.content.team),t=c.reverse(t),e.obj.team=t,s=l.assembleOwner(t),e.obj.owner=s,!a){var o={team:t,owner:s};i.logger.info("on create team",o),i.options.onCreateTeam(o),i.onCreateTeam(t,s)}break;case"syncCreateTeam":t=c.reverse(e.content.team),s=l.assembleOwner(t),i.logger.info("on sync createTeam",t,s),i.options.onsynccreateteam(t,s),i.onCreateTeam(t,s);break;case"sendTeamMsg":i.onSendMsg(e);break;case"teamMsg":i.onMsg(e);break;case"teamMsgs":i.onMsgs(e);break;case"addTeamMembers":case"removeTeamMembers":case"leaveTeam":case"dismissTeam":case"addTeamManagers":case"removeTeamManagers":case"transferTeam":break;case"updateInfoInTeam":n=e.obj,n.account=i.account,n.id=l.genId(n.teamId,n.account),n=l.reverse(n),e.obj=n,i.mergeMyTeamMembers(n),i.onUpdateTeamMember(n);break;case"updateNickInTeam":e.obj=l.reverse(e.obj);break;case"updateTeam":e.obj=c.reverse(e.obj);break;case"applyTeam":e.error||(e.obj=c.reverse(e.content.team));break;case"passTeamApply":i.updateTeamSysMsgState(e,"passed");break;case"rejectTeamApply":i.updateTeamSysMsgState(e,"rejected");break;case"acceptTeamInvite":i.updateTeamSysMsgState(e,"passed"),e.error||(e.obj=c.reverse(e.content.team));break;case"rejectTeamInvite":i.updateTeamSysMsgState(e,"rejected");break;case"getTeam":e.error||(e.obj=c.reverse(e.content.team));break;case"getTeams":i.onTeams(e);break;case"getTeamMembers":i.onTeamMembers(e);break;case"syncTeams":i.onTeams(e);break;case"syncTeamMembers":i.onTeamMembers(e);break;case"getTeamHistoryMsgs":case"searchTeamHistoryMsgs":i.onHistoryMsgs(e);break;case"syncSendTeamMsg":i.onMsg(e);break;case"syncUpdateTeamMember":n=l.reverse(e.content.teamMember),i.onUpdateTeamMember(n),n.account===i.account&&i.mergeMyTeamMembers(n);break;case"updateMuteStateInTeam":break;case"getMyTeamMembers":e.error||(e.obj=l.reverseMembers(e.content.teamMembers));break;case"getMutedTeamMembers":e.error||(e.obj={teamId:e.obj.teamId,members:l.reverseMembers(e.content.teamMembers)});break;case"syncMyTeamMembers":i.onSyncMyTeamMembers(e)}},i.onCreateTeam=function(e,t){var n=this.db;n.enable&&(n.putTeam(e),n.putTeamMembers(t))},i.onTeams=function(e){function t(){p&&d.forEach(function(e){e=c.reverse(e),e.validToCurrentUser?m.push(e):f.push(e)}),o.logger.warn("parse teams",r(m),m,"invalid",r(f),f),d.length?(p=!0,a=e.content.timetag):p=!1}function n(t,n){e.promise=new s(function(e,s){function r(){u?(i(),e(),t()):l.getTeams().then(function(n){m=n,i(),e(),t()}).then(void 0,function(e){e._msg="get teams error",s(e),n(e)})}p?l.mergeTeams(m,f,a).then(function(){r()}).then(void 0,function(e){e._msg="merge teams error",s(e),n(e)}):(o.logger.warn("no merge teams"),r())}).then(void 0,function(e){throw e._msg="merge teams data error",n(e),e})}function i(){o.timetags.teams=a,m.invalid=f,u?(o.syncResult.teams=m,o.syncResult.invalidTeams=f):(o.logger.warn("get teams",r(m),m),e.obj=m)}e.content=e.content||{};var a,o=this,l=o.db,u=o.packetFromSync(e),d=e.content.teams||[],p=!0,m=[],f=[];if(e.error)switch(e.error.code){case 803:e.error=null,p=!1}var g=new s(function(s,a){e.error?u&&a(e.error):(t(),l.enable?n(s,a):(i(),s()))});u&&(g.cmd="teams",o.syncPromiseArray.push(g))},i.onTeamMembers=function(e){function t(){m&&p.forEach(function(e){e=l.reverse(e),e.valid?f.push(e):g.push(e)}),c.logger.warn("parse members",r,o(f),f,"invalid",o(g),g),p.length?(m=!0,a=e.content.timetag):m=!1}function n(t,n){e.promise=new s(function(e,s){function o(){d?(i(),e(),t()):u.getTeamMembers(r).then(function(n){f=n,i(),e(),t()}).then(void 0,function(e){e._msg="get members error",s(e),n(e)})}m?u.mergeTeamMembers(r,f,g,a).then(function(){o()}).then(void 0,function(e){e._msg="merge members error "+r,s(e),n(e)}):(c.logger.warn("no merge members",r),o())}).then(void 0,function(e){throw e._msg="merge members data error",n(e),e})}function i(){f.invalid=g,d?(c.syncTeamMembersResult[r]=f,c.syncTeamMembersResult[r+"-invalid"]=g,c.timetags["team-"+r]=a):(c.logger.warn("get members",r,o(f),f),e.obj={teamId:r,members:f})}e.content=e.content||{};var a,r,c=this,u=c.db,d=c.packetFromSync(e),p=e.content.members||[],m=!0,f=[],g=[];if(e.obj&&(r=e.obj.teamId),r||(r=e.content.teamId),r=""+r,e.error)switch(e.error.code){case 406:e.error=null,m=!1}var h=new s(function(s,a){e.error?d&&a(e.error):(t(),u.enable?n(s,a):(i(),s()))});d&&(h.cmd=r,c.syncTeamMembersPromiseArray.push(h))},i.onUpdateTeamMember=function(e){var t=this;e.updateTime||(e.updateTime=+new Date),t.logger.warn("parse update member",e),t.logger.info("on update teamMember",e),t.options.onupdateteammember(a.simpleClone(e));var n={teamId:e.teamId,memberUpdateTime:e.updateTime};t.onUpdateTeam(n);var s=this.db;s.enable&&s.updateTeamMember(e)},i.onUpdateTeam=function(e){var t=this;t.logger.info("on update team",e),t.options.onUpdateTeam(a.simpleClone(e));var n=t.db;n.enable&&n.updateTeam(e)},i.onSyncMyTeamMembers=function(e){var t=this,n=t.db,s=l.reverseMembers(e.content.teamMembers);if(t.logger.warn("parse my team members",s),n.enable){var i=n.putTeamMembers(s).then(function(){return n.updateMyTeamMembersTimetag(e.content.timetag)});i.cmd="myTeamMembers",t.syncTeamMembersPromiseArray.push(i)}t.mergeMyTeamMembers(s)},i.mergeMyTeamMembers=function(e){a.isArray(e)||(e=[e]);var t=this,n=t.myTeamMembersMap=t.myTeamMembersMap||{};e.forEach(function(e){var t=e.teamId;n[t]=a.merge(n[t],e)}),t.logger.warn("cache my team members",n)},i.notifyForNewTeamMsg=function(e){a.isArray(e)||(e=[e]);var t=this,n=this.myTeamMembersMap||{},i={},o=[];e.forEach(function(e){a.exist(n[e])?i[e]=!n[e].muteTeam:o.push(e)});var r=s.resolve(i);return o.length&&(r=t.api.getMyTeamMembers({teamIds:o,promise:!0}).then(function(e){return t.mergeMyTeamMembers(e),e.forEach(function(e){i[e.teamId]=!e.muteTeam}),i})),r},i.updateTeamSysMsgState=function(e,t){var n,s=e.error;s&&(t="error",s=a.filterObj(s,"code message")),n={idServer:e.obj.idServer,state:t},s&&(n.error=s),this.updateSysMsg(n)}},function(e,t,n){"use strict";var s=n(2).Promise,i=n(4).fn,a=n(1),o=a.objs2accounts,r=n(119),c=n(28);i.processUser=function(e){var t,n=this,s=n.db,i=e.obj,a=e.error,o=e.content;switch(e.cmd){case"markInBlacklist":a||n.markInBlacklist(i);break;case"syncMarkInBlacklist":n.markInBlacklist(o,!0);break;case"markInMutelist":a||n.markInMutelist(i);break;case"syncMarkInMutelist":n.markInMutelist(o,!0);break;case"getRelations":a||n.onRelations(e);break;case"syncMyInfo":n.onMyInfo(e,!0);break;case"updateMyInfo":a||(i.updateTime=o.timetag,n.onUpdateMyInfo(e,i));break;case"syncUpdateMyInfo":n.onUpdateMyInfo(e,o.user,!0);break;case"getUsers":a||(t=o.users.map(function(e){return e=c.reverse(e),n.mergeUser(e),e}),e.obj=t,s.enable&&s.putUsers(t));break;case"updateDonnop":n.onUpdateDonnop(e);break;case"syncUpdateDonnop":n.onDonnop(e,!1)}},i.onMyInfo=function(e){function t(){a=c.reverse(u.user),o.logger.warn("parse myInfo",a)}function n(e,t){r.mergeMyInfo(a,d).then(function(){i(),e()}).then(void 0,function(e){e._msg="merge myInfo error",t(e)})}function i(){o.timetags.myInfo=a.updateTime,d&&(o.syncResult.myInfo=a)}var a,o=this,r=o.db,l=e.error,u=e.content,d=!0,p=new s(function(e,s){l?d&&s(l):(t(),r.enable?n(e,s):(i(),e()))});d&&(p.cmd="myInfo",o.syncPromiseArray.push(p))},i.onUpdateMyInfo=function(e,t,n){var s=this,i=s.db,o=c.reverse(t),r=a.merge(s.myInfo,o);s.myInfo=r,n?(s.logger.info("on update myInfo",r),s.options.onupdatemyinfo(r)):e.obj=r,i.enable&&(o.account=s.account,i.updateUser(o))},i.onRelations=function(e){function t(){p.forEach(function(e){e=r.parse(e);var t={account:e.account,createTime:e.createTime,updateTime:e.updateTime};e.isBlacked?f.push(t):g.push(t),e.isMuted?h.push(t):v.push(t)}),c.logger.warn("parse blacklist",o(f),f,"delete",o(g),g),c.logger.warn("parse mutelist",o(h),h,"delete",o(v),v),p.length?(m=!0,a=e.content.timetag):m=!1}function n(t,n){e.promise=new s(function(e,s){function o(){d?(i(),e(),t()):l.getRelations().then(function(n){f=n[0],h=n[1],i(),e(),t()}).then(void 0,function(e){e._msg="get relations error",s(e),n(e)})}m?l.mergeRelations(f,g,h,v,a).then(function(){o()}).then(void 0,function(e){e._msg="merge relations error",s(e),n(e)}):(c.logger.warn("no merge relations"),o())}).then(void 0,function(e){throw e._msg="merge relations data error",n(e),e})}function i(){c.timetags.relations=a,f.invalid=g,h.invalid=v,d?(c.syncResult.blacklist=f,c.syncResult.mutelist=h,c.syncResult.invalidBlacklist=g,c.syncResult.invalidMutelist=v):(c.logger.warn("get relations",f,h),e.obj.blacklist=f,e.obj.mutelist=h)}var a,c=this,l=c.db,u=e.error,d=c.packetFromSync(e),p=e.content.specialRelations,m=!0,f=[],g=[],h=[],v=[],y=new s(function(e,s){u?d&&s(u):(t(),l.enable?n(e,s):(i(),e()))});d&&(y.cmd="relations",c.syncPromiseArray.push(y))},i.markInBlacklist=function(e,t){var n=this,s=n.db;e.record={account:e.account,updateTime:+new Date},s.enable&&s.markInBlacklist(e),t&&(n.logger.info("on sync markInBlacklist",e),n.options.onsyncmarkinblacklist(e))},i.markInMutelist=function(e,t){var n=this,s=n.db;e.record={account:e.account,updateTime:+new Date},s.enable&&s.markInMutelist(e),t&&(n.logger.info("on sync markInMutelist",e),n.options.onsyncmarkinmutelist(e))},i.mergeUser=function(e){this.userSet[e.account]=e}},,,function(e,t){"use strict";e.exports={nosToken:{objectName:1,token:2,bucket:3,expireTime:4},audioToText:{url:2},imageOp:{type:0,stripmeta:1,typeType:2,blurRadius:3,blurSigma:4,qualityQuality:5,cropX:6,cropY:7,cropWidth:8,cropHeight:9,rotateAngle:10,pixelPixel:11,thumbnailMode:12,thumbnailWidth:13,thumbnailHeight:14,thumbnailAxisX:15,thumbnailAxisY:16,thumbnailCenterX:17,thumbnailCenterY:18,thumbnailEnlarge:19,thumbnailToStatic:20,watermarkType:21,watermarkGravity:22,watermarkDissolve:23,watermarkDx:24,watermarkDy:25,watermarkImage:26,watermarkText:27,watermarkFont:28,watermarkFontSize:29,watermarkFontColor:30,interlace:31},login:{os:4,sdkVersion:6,appLogin:8,protocolVersion:9,deviceId:13,appKey:18,account:19,browser:24,session:26,token:1e3},loginRes:{lastLoginDeviceId:17,connectionId:102,ip:103,port:104,country:106},loginPort:{type:3,os:4,mac:5,deviceId:13,account:19,connectionId:102,ip:103,time:109},sync:{myInfo:1,offlineMsgs:2,teams:3,roamingMsgs:7,relations:9,friends:11,sessions:12,friendUsers:13,msgReceipts:14,myTeamMembers:15,donnop:16,deleteMsg:17,sessionAck:18,filterMsgs:100},donnop:{open:1},team:{teamId:1,name:3,type:4,owner:5,level:6,selfCustom:7,valid:8,memberNum:9,memberUpdateTime:10,createTime:11,updateTime:12,validToCurrentUser:13,intro:14,announcement:15,joinMode:16,bits:17,custom:18,serverCustom:19,avatar:20,beInviteMode:21,inviteMode:22,updateTeamMode:23,updateCustomMode:24,mute:100},teamMember:{teamId:1,account:3,type:4,nickInTeam:5,bits:7,active:8,valid:9,joinTime:10,updateTime:11,custom:12,mute:13},msg:{scene:0,to:1,from:2,fromClientType:4,fromDeviceId:5,fromNick:6,time:7,type:8,body:9,attach:10,idClient:11,idServer:12,resend:13,userUpdateTime:14,custom:15,pushPayload:16,pushContent:17,apnsAccounts:18,apnsContent:19,apnsForcePush:20,yidunEnable:21,antiSpamContent:22,isHistoryable:100,isRoamingable:101,isSyncable:102,isMuted:104,cc:105,isPushable:107,isOfflinable:108,isUnreadable:109,needPushNick:110},msgReceipt:{to:1,from:2,time:7,idClient:11},sysMsg:{time:0,type:1,to:2,from:3,ps:4,attach:5,idServer:6,sendToOnlineUsersOnly:7,apnsText:8,pushPayload:9,deletedIdClient:10,deletedIdServer:11,yidunEnable:12,antiSpamContent:13,deletedMsgTime:14,deletedMsgFromNick:15,cc:105,isPushable:107,isUnreadable:109,needPushNick:110},friend:{account:4,flag:5,beflag:6,source:7,alias:8,bits:9,custom:10,createTime:11,updateTime:12},user:{account:1,nick:3,avatar:4,sign:5,gender:6,email:7,birth:8,tel:9,custom:10,createTime:12,updateTime:13},specialRelation:{account:0,isMuted:1,isBlacked:2,createTime:3,updateTime:4}}},,function(e,t){"use strict";e.exports={nosToken:{1:"objectName",2:"token",3:"bucket",4:"expireTime"},audioToText:{2:"url"},imageOp:{0:"type",1:"stripmeta",2:"typeType",3:"blurRadius",4:"blurSigma",5:"qualityQuality",6:"cropX",7:"cropY",8:"cropWidth",9:"cropHeight",10:"rotateAngle",11:"pixelPixel",12:"thumbnailMode",13:"thumbnailWidth",14:"thumbnailHeight",15:"thumbnailAxisX",16:"thumbnailAxisY",17:"thumbnailCenterX",18:"thumbnailCenterY",19:"thumbnailEnlarge",20:"thumbnailToStatic",21:"watermarkType",22:"watermarkGravity",23:"watermarkDissolve",24:"watermarkDx",25:"watermarkDy",26:"watermarkImage",27:"watermarkText",28:"watermarkFont",29:"watermarkFontSize",30:"watermarkFontColor",31:"interlace"},login:{4:"os",6:"sdkVersion",8:"appLogin",9:"protocolVersion",13:"deviceId",18:"appKey",19:"account",24:"browser",26:"session",1e3:"token"},loginRes:{17:"lastLoginDeviceId",102:"connectionId",103:"ip",104:"port",106:"country"},loginPort:{3:"type",4:"os",5:"mac",13:"deviceId",19:"account",102:"connectionId",103:"ip",109:"time"},sync:{1:"myInfo",2:"offlineMsgs",3:"teams",7:"roamingMsgs",9:"relations",11:"friends",12:"sessions",13:"friendUsers",14:"msgReceipts",15:"myTeamMembers",16:"donnop",17:"deleteMsg",18:"sessionAck",100:"filterMsgs"},donnop:{1:"open"},team:{1:"teamId",3:"name",4:"type",5:"owner",6:"level",7:"selfCustom",8:"valid",9:"memberNum",10:"memberUpdateTime",11:"createTime",12:"updateTime",13:"validToCurrentUser",14:"intro",15:"announcement",16:"joinMode",17:"bits",18:"custom",19:"serverCustom",20:"avatar",21:"beInviteMode",22:"inviteMode",23:"updateTeamMode",24:"updateCustomMode",100:"mute"},teamMember:{1:"teamId",3:"account",4:"type",5:"nickInTeam",7:"bits",8:"active",9:"valid",10:"joinTime",11:"updateTime",12:"custom",13:"mute"},msg:{0:"scene",1:"to",2:"from",4:"fromClientType",5:"fromDeviceId",6:"fromNick",7:"time",8:"type",9:"body",10:"attach",11:"idClient",12:"idServer",13:"resend",14:"userUpdateTime",15:"custom",16:"pushPayload",17:"pushContent",18:"apnsAccounts",19:"apnsContent",20:"apnsForcePush",21:"yidunEnable",22:"antiSpamContent",100:"isHistoryable",101:"isRoamingable",102:"isSyncable",104:"isMuted",105:"cc",107:"isPushable",108:"isOfflinable",109:"isUnreadable",110:"needPushNick"},msgReceipt:{1:"to",2:"from",7:"time",11:"idClient"},sysMsg:{0:"time",1:"type",2:"to",3:"from",4:"ps",5:"attach",6:"idServer",7:"sendToOnlineUsersOnly",8:"apnsText",9:"pushPayload",10:"deletedIdClient",11:"deletedIdServer",12:"yidunEnable",13:"antiSpamContent",14:"deletedMsgTime",15:"deletedMsgFromNick",105:"cc",107:"isPushable",109:"isUnreadable",110:"needPushNick"},friend:{4:"account",5:"flag",6:"beflag",7:"source",8:"alias",9:"bits",10:"custom",11:"createTime",12:"updateTime"},user:{1:"account",3:"nick",4:"avatar",5:"sign",6:"gender",7:"email",8:"birth",9:"tel",10:"custom",12:"createTime",13:"updateTime"},specialRelation:{0:"account",1:"isMuted",2:"isBlacked",3:"createTime",4:"updateTime"}}}])})},fsv7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"show-video",data:function(){return{videoList:""}},components:{},props:{showVideoFlag:{type:Boolean}},watch:{"$store.state.videoFlag":function(e){this.init()}},methods:{init:function(){this.videoList="",this.videoList=this.$store.state.videoObject},close:function(){this.$store.commit("setVideoFlag",!1)}},mounted:function(){this.init()},updated:function(){}}},g5BU:function(e,t){},gBLG:function(e,t,n){function s(e){n("gpsp")}var i=n("eEuR")(n("fsv7"),n("frEZ"),s,null,null);e.exports=i.exports},gIz6:function(e,t){},gT5p:function(e,t,n){function s(e){n("9Aqr")}var i=n("eEuR")(n("zERr"),n("j4Qe"),s,null,null);e.exports=i.exports},gpsp:function(e,t){},gsZi:function(e,t,n){function s(e){n("T2X2")}var i=n("eEuR")(n("8+BI"),n("hg+z"),s,null,null);e.exports=i.exports},"h/b/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("3SZ7"),i=n.n(s),a=n("q/Kx"),o=n("wtEF"),r=n("8L/s");t.default={name:"examine-check",data:function(){return{FirstIndex:-1,SecondIndex:-1,ThirdIndex:-1,FourIndex:-1,examineSuggest:[],testSuggest:[],isLight:!1,tabActive:!0,nextFlag:!0,submitStatus:!0,showExamineList:[],testSuggestList:[],saveExamineUrl:"/call/patient/recovery/advice/v1/create/",recoveryAdviceList:[],updateCount:"/call/customer/case/consultation/v1/updateFrequency/",changeStatus:"/call/customer/patient/case/v1/update/"}},methods:{init:function(){this.examine()},examine:function(){this.nextFlag=!0,this.examineGetData("/call/comm/data/check/v1/getMapList/","examineSuggest",1),this.examineGetData("/call/comm/data/inspection/v1/getMapList/","testSuggest",2)},examineGetData:function(e,t,n){o.a.commit("startLoading");var s=this,i={isValid:1,firstResult:0,maxResult:999};a.a.ajax({url:e,method:"POST",data:i,done:function(e){e.responseObject.responseData.dataList.forEach(function(e,t){e.isActive=!1,e.children&&e.children.length>0&&e.children.forEach(function(e){e.isActive=!1,e.children&&e.children.length>0&&e.children.forEach(function(e){e.isActive=!1,e.isSelected=!0,e.children&&e.children.length>0&&e.children.forEach(function(e){e.isActive=!1,e.isSelected=!0})})})}),"examineSuggest"==t?s.examineSuggest=e.responseObject.responseData.dataList:s.testSuggest=e.responseObject.responseData.dataList,o.a.commit("stopLoading")},fail:function(e){}})},showNext:function(e,t){"FirstIndex"==e?this.FirstIndex==t?(this.FirstIndex=-1,this.SecondIndex=-1,this.ThirdIndex=-1,this.FourIndex=-1):(this.FirstIndex=t,this.SecondIndex=-1,this.ThirdIndex=-1,this.FourIndex=-1):"SecondIndex"==e?this.SecondIndex==t?(this.SecondIndex=-1,this.ThirdIndex=-1,this.FourIndex=-1):(this.SecondIndex=t,this.ThirdIndex=-1,this.FourIndex=-1):"ThirdIndex"==e?this.ThirdIndex==t?(this.ThirdIndex=-1,this.FourIndex=-1):(this.ThirdIndex=t,this.FourIndex=-1):"FourIndex"==e&&(this.FourIndex==t?this.FourIndex=-1:this.FourIndex=t)},selectData:function(e,t){e.isActive=!e.isActive,e.children&&e.children.length>0&&e.children.forEach(function(e,t){e.isSelected=!e.isSelected,e.isActive=!1}),this.isToLight()},foresee:function(){this.nextFlag=!this.nextFlag;var e=this;e.examineSuggest.forEach(function(t){t.children&&t.children.length>0&&t.children.forEach(function(t){t.children&&t.children.length>0&&t.children.forEach(function(t){t.isActive&&e.showExamineList.push(t),t.children&&t.children.length>0&&t.children.forEach(function(t){t.isActive&&e.showExamineList.push(t)})})})}),e.testSuggest.forEach(function(t){t.children&&t.children.length>0&&t.children.forEach(function(t){t.children&&t.children.length>0&&t.children.forEach(function(t){t.isActive&&e.testSuggestList.push(t),t.children&&t.children.length>0&&t.children.forEach(function(t){t.isActive&&e.testSuggestList.push(t)})})})})},update:function(){this.nextFlag=!this.nextFlag,this.showExamineList=[]},sendMessage:function(){this.saveData()},saveData:function(){var e=this;this.submitStatus=!1,e.showExamineList.forEach(function(t,n){e.recoveryAdviceList.push({adviceType:1,adviceId:t.nodeId,adviceName:t.nodeName})}),e.testSuggestList.forEach(function(t,n){e.recoveryAdviceList.push({adviceType:2,adviceId:t.inspectionId,adviceName:t.inspectionName})});var t={caseId:e.$store.state.caseId,patientId:e.$store.state.patientId,customerId:e.$store.state.userId,recoveryAdviceList:i()(e.recoveryAdviceList),type:0};a.a.ajax({url:e.saveExamineUrl,method:"POST",data:t,beforeSend:function(e){},done:function(t){a.a.ajax({url:e.updateCount,method:"POST",data:{consultationId:e.$store.state.consultationId,frequency:"-1",frequencyType:"4"},beforeSend:function(e){},done:function(e){console.log("关闭24小时定时")},fail:function(e){}}),a.a.ajax({url:e.changeStatus,method:"POST",data:{caseId:e.$store.state.caseId,state:3},beforeSend:function(e){},done:function(t){console.log("更改待检查成功");var n=e.$store.state.currentItem;n.diagnosisContent="待检查",o.a.commit("setCurrentItem",n),o.a.commit("checkSuggestionSender",{flag:!0,data:e.recoveryAdviceList}),e.$store.state.patientList.forEach(function(t){t.caseId==e.$store.state.caseId&&(t.state="3")}),e.nextFlag=!e.nextFlag,e.$emit("update:examineCheckFlag",!1),e.$store.commit("setExamineFlag",!1)},fail:function(e){}}),Object(r.a)({customerId:e.$store.state.userId,consultationId:e.$store.state.currentItem.consultationId,consultationState:9}).then(function(t){var n=e.$store.state.currentItem;n.consultationState=9,e.$store.commit("setCurrentItem",n)})},fail:function(e){}})},close:function(){this.$store.commit("setExamineFlag",!1)},isToLight:function(){var e=!1;this.examineSuggest.forEach(function(t){t.children&&t.children.length>0&&t.children.forEach(function(t){t.children&&t.children.length>0&&t.children.forEach(function(t){if(t.isActive)return e=!0,!1;t.children&&t.children.length>0&&t.children.forEach(function(t){if(t.isActive)return e=!0,!1})})})}),this.testSuggest.forEach(function(t){t.children&&t.children.length>0&&t.children.forEach(function(t){t.children&&t.children.length>0&&t.children.forEach(function(t){if(t.isActive)return e=!0,!1;t.children&&t.children.length>0&&t.children.forEach(function(t){if(t.isActive)return e=!0,!1})})})}),this.isLight=e}},watch:{},mounted:function(){this.init()}}},h9iL:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"main-masker on"},[n("section",{staticClass:"refuse-box"},[n("i",{staticClass:"icon-close window-close",on:{click:e.close}}),e._v(" "),e._m(0),e._v(" "),n("section",{staticClass:"refuse-box-inner"},[n("section",{staticClass:"refuse-box-inner-list"},[n("ul",e._l(e.refuseList,function(t,s){return n("li",{staticClass:"refuse-box-inner-list-item",class:{active:s==e.nowIndex},on:{click:e.selectReason}},[e.fixFlag[s]?e._e():n("h3",{on:{click:function(n){n.stopPropagation(),e.selectReason(t,s)}}},[e._v(e._s(t.refuseContent))])])}))]),e._v(" "),n("figure",{staticClass:"refuse-box-update"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.refuseReason,expression:"refuseReason"}],staticClass:"add-input",attrs:{type:"text",placeholder:"请输入拒绝理由",maxlength:"50"},domProps:{value:e.refuseReason},on:{input:function(t){t.target.composing||(e.refuseReason=t.target.value)}}}),e._v(" "),n("i",{directives:[{name:"show",rawName:"v-show",value:e.refuseReason,expression:"refuseReason"}],staticClass:"icon-Cancel",on:{click:e.remove}})])]),e._v(" "),n("section",{staticClass:"refuse-box-footer"},[n("button",{class:[{active:e.refuseReason},"btn-primary-small"],attrs:{type:"button"},on:{click:e.send}},[e._v("发送")]),e._v(" "),n("button",{staticClass:"btn-border-small ",attrs:{type:"button"},on:{click:e.close}},[e._v("取消")])])])])},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"refuse-box-title"},[n("article",[n("h2",[e._v("请选择拒绝理由")]),e._v(" "),n("p",[e._v("发送后将结束与患者沟通")])])])}]}},hA4R:function(e,t,n){function s(e){n("RBwM")}var i=n("eEuR")(n("thlA"),n("p+Lg"),s,null,null);e.exports=i.exports},"hg+z":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",{staticClass:"messageList-item-content"},[n("figcaption",{staticClass:"check-suggestion-message"},[n("header",{staticClass:"check-suggestion-message-title videoTriage"},[e._v("视诊")]),e._v(" "),n("section",{staticClass:"check-suggestion-content"},[n("article",{staticClass:"check-suggestion-item"},[n("span",[e._v(e._s(e.message.content.data.content))])])])]),e._v(" "),n("figure",{staticClass:"messageList-item-img"},[n("div",{staticClass:"messageList-item-nameTop"},[n("p",[e._v(e._s("【分诊医生】"+e.docName))])]),e._v(" "),n("div",{staticClass:"deleteMessage",on:{click:function(t){t.stopPropagation(),e.deleteMsg(t)}}},[e._v("撤回")]),e._v(" "),n("img",{attrs:{src:"/static/image/img00/index/chatting_portrait_system@2x.png",alt:""}})])])},staticRenderFns:[]}},hkwB:function(e,t){},hnyR:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("3SZ7"),i=n.n(s),a=n("xY2u"),o=n.n(a),r=(n("q/Kx"),n("TOsV")),c=n.n(r),l=n("T4ej"),u=n.n(l),d=n("wtEF"),p={userLoginUrl:"/call/passport/securitycheck",sendValidate:"/call/customer/send/code/v1/create/",vValidate:"/call/customer/send/code/v1/update/",fixSubmit:"/call/tocure/web/user/updatePasswd/",getLoginStatus:"/call/customer/status/v1/getMapById/"};t.default={name:"test",data:function(){return{userNameVal:"",passWord:"",mobile:"",loginFlag:!0,validateCodeFlag:!1,passwordFlag:!1,finishFlag:!1,loginSubmit:!1,loginMessage:!1,newPassword:"",newPassword2:"",newPasswordError:"",newPasswordError2:"",userNameError:"",passWordError:"",phoneError:"",validateCodeError:"",loginStr:"登录",validateCode:"",validateCodeId:"",loginSendValidateCodeFlag:!1,loginSendValidateCode:"获取验证码",validateCodeTips:!1,time:null,customerId:"",successfulSecond:3}},methods:{userNameEvent:function(){this.userNameError="",this.passWordError=""},mobileEvent:function(){this.phoneError="",this.validateCodeError=""},validateCodeEvent:function(){this.validateCodeError=""},newPasswordEvent:function(){this.newPasswordError="",this.newPasswordError2=""},newPasswordEvent2:function(){this.newPasswordError2=""},userLoginCancelClear:function(){this.userNameVal=""},passWordCancelClear:function(){this.passWord=""},mobileCancelClear:function(){this.mobile=""},validateCodeCancelClear:function(){this.validateCode=""},getUserName:function(){var e=localStorage.getItem("userLoginName");e&&(this.userNameError=e)},hasError:function(e){return this.errors.has(e)?(this[e+"Error"]=this.errors.first(e),!1):(this[e+"Error"]="",!0)},submitEvent:function(){var e=this;this.$validator.validateAll(),this.hasError("userName"),this.hasError("passWord"),this.userNameError||this.passWordError||(e.loginStr="登录中",this.loginFun(this.userNameVal,this.passWord,function(){e.loginStr="登录",e.$router.push({path:"/"})}))},loginFun:function(e,t,n){var s=this;s.$store.commit("startLoading");var i={};i.j_username="website;"+e+";"+t+";mobile",i.j_password=t,i.rememberMe=!0,o()({method:"post",url:p.userLoginUrl,data:i,transformRequest:[function(e){return e=c.a.stringify({j_username:e.j_username,j_password:e.j_password,rememberMe:e.rememberMe})}]}).then(function(t){s.$store.commit("stopLoading"),t.data.responseObject.responseStatus?(d.a.commit("setUserLoginName",e),localStorage.setItem("userLoginName",e),n&&n()):(s.passWordError=t.data.responseObject.responseMessage,s.loginStr="登录",console.log("失败！"))}).catch(function(){s.$store.commit("stopLoading")})},goToFixPassword:function(){this.loginFlag=!1,this.validateCodeFlag=!0,this.userNameEvent(),this.userLoginCancelClear(),this.passWordCancelClear()},goToLogin:function(){this.loginFlag=!0,this.validateCodeFlag=!1,this.mobileEvent(),this.mobileCancelClear(),this.validateCodeCancelClear(),clearInterval(this.time),this.loginSendValidateCodeFlag=!1,this.loginSendValidateCode="获取验证码"},sendValidateCode:function(){var e=this;if(this.$validator.validateAll(),this.hasError("phone"),!this.phoneError.length){var t={};t.account=this.mobile,t.typeId="1",t.codeLength="4",t.accountType="0",o()({method:"post",url:p.sendValidate,data:t,transformRequest:[function(e){return e="paramJson="+i()(e)}]}).then(function(t){console.log(t);var n=t.data.responseObject;if(n.responseStatus){e.validateCodeId=n.responsePk;var s=60;e.loginSendValidateCodeFlag=!0,e.loginSendValidateCode=s+"S",e.time=setInterval(function(){s--,e.loginSendValidateCode=s+"S",0==parseInt(e.loginSendValidateCode)&&(clearInterval(e.time),e.loginSendValidateCodeFlag=!1,e.loginSendValidateCode="获取验证码")},1e3)}else"SMS0003"==n.responseCode?(e.loginSendValidateCodeFlag=!1,e.loginSendValidateCode="重新获取",e.validateCodeTips=!0,setTimeout(function(){e.validateCodeTips=!1},3e3)):"0B0001"==n.responseCode&&(e.loginSendValidateCodeFlag=!1,e.phoneError=n.responseMessage)}).catch(function(e){console.log(e)})}},validateSubmit:function(){var e=this;if(this.$validator.validateAll(),this.hasError("phone"),this.hasError("validateCode"),!this.phoneError&&!this.validateCodeError){e.$store.commit("startLoading");var t={account:e.mobile,validCode:e.validateCode,id:e.validateCodeId,isValid:"1"};o()({method:"post",url:p.vValidate,data:t,transformRequest:[function(e){return e="paramJson="+i()(e)}]}).then(function(t){e.$store.commit("stopLoading");var n=t.data.responseObject;n.responseStatus&&"success"==n.responseCode?(e.customerId=n.responsePk,e.validateCodeFlag=!1,e.passwordFlag=!0):e.validateCodeError=n.responseMessage}).catch(function(t){e.$store.commit("stopLoading"),console.log("失败:"+t)})}},newPasswordBlur:function(){this.$validator.validateAll(),this.hasError("newPassword")},savePassword:function(){var e=this;if(this.$validator.validateAll(),this.hasError("newPassword"),""===e.newPassword2)return e.newPasswordError2="请确认新密码",!1;if(e.newPasswordError2||e.newPasswordError)return!1;if(e.newPassword===e.newPassword2){e.$store.commit("startLoading");var t={customerId:e.customerId,passwd:e.newPassword};o()({method:"post",url:p.fixSubmit,data:t,transformRequest:[function(e){return e="paramJson="+i()(e)}]}).then(function(t){t.data.responseObject.responseStatus&&(e.loadingShow=!1,e.loginFun(e.mobile,e.newPassword,function(){e.passwordFlag=!1,e.finishFlag=!0;var t=void 0,n=3;e.successfulSecond=n+"S",t=setInterval(function(){n--,e.successfulSecond=n+"S",0==parseInt(e.successfulSecond)&&(clearInterval(t),e.$router.push({path:"/"}))},1e3)}))}).catch(function(e){console.log("更新代码失败！"),console.log(e)})}else e.newPasswordError2="两次密码不一致"},autoLogin:function(){var e=this;e.loginFun(e.mobile,e.newPassword,function(){e.$router.push({path:"/"})})}},mounted:function(){},components:{loading:u.a}}},ht71:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var s=n("Edqs"),i=n.n(s),a=n("3SZ7"),o=n.n(a),r=n("34v0"),c=n.n(r),l=n("/sA3"),u=n("q/Kx"),d=n("pdQW"),p=(n.n(d),n("j94m")),m=(n.n(p),n("tT/V"),n("ZAAc")),f=n.n(m),g=n("uTXi"),h=n.n(g),v=n("KEcs"),y=n("ODK2"),b=n.n(y),w=n("qYbu"),_=n.n(w),S=n("9RxA"),x=n.n(S),C=n("ESSQ"),I=n("wtEF"),k=n("/mv4"),T=this;v.a.filter("timeFormat",function(t,n){var s="",i=new Date,a=i.getFullYear(),o=i.getMonth()+1,r=i.getDate(),c=(i.getHours(),i.getMinutes(),new Date(a+"/"+(o>=10?o:"0"+o)+"/"+(r>=10?r:"0"+r)).getTime()),u=new Date(t.substring(0,10).replace(/-/g,"/")).getTime(),d=new Date(u).getDay();if(c===u)s=t.substring(10,16);else if(parseInt((c/864e5+4)/7)===parseInt((u/864e5+4)/7))s="星期"+l.a.numToChinese(d);else{var p=e(window).width();s=p<=1440?t.substring(5,16):t.substring(0,16)}return s}),v.a.filter("checkState",function(e,t){var n="";switch(parseInt(e.consultationState)){case-1:if(0===e.consultationType){n="待分诊";break}n="待接诊";break;case 0:n="沟通中";break;case 1:n="已结束";break;case 2:n="拒绝接诊";break;case 3:n="超时未接诊";break;case 4:case 5:n="待分诊";break;case 6:n="已上传资料";break;case 7:n="分诊拒绝";break;case 8:n="分诊完成";break;case 9:n="待检查";break;case 10:n="已推荐";break;case 11:n="超时未回复"}return n});var M={onlineUserList:"/call/customer/case/consultation/v1/getMapListByCustomerId/",waitingUserList:"/call/customer/case/consultation/v1/getMapListForCase/",resetUserList:"/call/customer/case/consultation/v1/getMapListForCase/"};t.default={name:"userList",data:function(){return{userListData:"",userListOnline:[],userListWaiting:[],userListReset:[],userWaitingActive:-1,userOnlineActive:-1,userResetActive:-1,questionShow:"",userName:"默认",message:{},userListStatus:{status:"1",first:!0,second:!1,third:!1},noData:!1,data:"",targetData:{account:"",avatar:""},filterMethod:{conType:0},fastRelyStatusParent:!1,waitingTriage:!1,filterFinish:!1,newResetFlag:!1,sortFlag:!1,sortActive:"",popupShow:!1,popupContent:{text:"",hasImg:!1},reTriageShow:!1}},computed:c()({},Object(k.b)(["newWaiting","newOnline","newReset","waitingListRefresh","onlineListRefresh","resetListRefresh"])),components:{record:f.a,communication:h.a,headerList:_.a,footerList:b.a,checkHistory:x.a},watch:{"message.createTime":function(){this.noData=!0,this.$router.push({name:"mainSpeak",params:{num:this.data}})},"$store.state.patientActiveIndex":function(){this.userOnlineActive=0},"$store.state.userId":function(){this.init()},"$store.state.patientList":{handler:function(e,t){T.userListOnline=e},deep:!0},"$store.state.waitingList":{handler:function(e,t){T.userListWaiting=e},deep:!0},"$store.state.resetList":{handler:function(e,t){T.userListReset=e},deep:!0},waitingListRefresh:function(e){e&&(this.getUserList("waiting",this.filterMethod),this.$store.commit("waitingListRefreshFlag",!1))},onlineListRefresh:function(e){e&&(this.getUserList("online",this.filterMethod),this.$store.commit("onlineListRefresh",!1))},resetListRefresh:function(e){e&&(this.getUserList("reset",this.filterMethod),this.$store.commit("resetListRefreshFlag",!1))},newWaiting:function(e){this.redPoint(e)},newOnline:function(e){this.redPoint(e)},newReset:function(e){this.redPoint(e)}},mounted:function(){this.$store.state.userId&&(this.init(),this.$store.commit("setUsedReplyShow",!1),this.$store.commit("setFastReplyShow",!1))},activated:function(){},methods:{init:function(){this.$store.state.searchStatus=!0,this.getUserList("waiting"),this.getUserList("online"),this.getUserList("reset")},transformData:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(I.a.commit("setUsedReplyShow",!1),I.a.commit("setFastReplyShow",!1),this.noData=!0,this.reTriageShow=!1,this.userListStatus.first){this.waitingTriage=!0,this.userWaitingActive=t,I.a.commit("setInputReadOnly",!0);var i=this.$store.state.waitingList;e.messageAlert="",i[t]=e,this.$store.commit("setWaitingList",i);var a=JSON.parse(localStorage.getItem("waitingAlertList"));a&&(delete a["0_"+e.caseId],localStorage.setItem("waitingAlertList",o()(a))),"{}"==localStorage.getItem("waitingAlertList")&&this.$store.commit("setNewWaiting",!1)}else if(this.userListStatus.second){this.waitingTriage=!1,this.userOnlineActive=t,I.a.commit("setInputReadOnly",!1);var r=this.$store.state.patientList;e.messageAlert="",n?(r.removeByValue(e),r.unshift(e),this.$store.commit("setPatientList",r)):(r[t]=e,this.$store.commit("setPatientList",r));var c=JSON.parse(localStorage.getItem("patientAlertList"));c&&(delete c["0_"+e.caseId],localStorage.setItem("patientAlertList",o()(c))),"{}"==localStorage.getItem("patientAlertList")&&this.$store.commit("setNewOnline",!1)}else if(this.userListStatus.third){this.waitingTriage=!0,this.userResetActive=t,I.a.commit("setInputReadOnly",!0);var l=this.$store.state.resetList;e.messageAlert="",n?(l.removeByValue(e),l.unshift(e),this.$store.commit("setResetList",l)):(l[t]=e,this.$store.commit("setResetList",l));var u=JSON.parse(localStorage.getItem("resetAlertList"));u&&(delete u["0_"+e.caseId],localStorage.setItem("resetAlertList",o()(u))),"{}"==localStorage.getItem("resetAlertList")&&this.$store.commit("setNewReset",!1)}this.message=e,this.$store.commit("setPatientId",e.patientId),this.$store.commit("setPatientName",e.patientName),this.$store.commit("setCaseId",e.caseId),localStorage.setItem("caseId",e.caseId),this.$store.commit("setConsultationId",e.consultationId),this.$store.commit("setConsultationState",e.consultationState),this.$store.commit("setCurrentItem",e),s&&(this.$store.commit("setSBIObject",{}),this.$store.commit("videoListObject",{})),this.$store.commit("setMinBtnFlag",!1),this.data=o()(e),this.targetData.account="0_"+e.caseId,this.targetData.avatar=e.logoUrl,this.fastRelyStatusParent=!1,this.$router.push({name:"mainSpeak"}),this.$store.commit("setSendFileShow",!1)},statusChange:function(e){switch(e){case 1:this.userListStatus={status:"1",first:!0,second:!1,third:!1},this.$store.commit("setUserListStatus",this.userListStatus);break;case 2:this.userListStatus={status:"2",first:!1,second:!0,third:!1},this.$store.commit("setUserListStatus",this.userListStatus);break;case 3:this.userListStatus={status:"3",first:!1,second:!1,third:!0},this.$store.commit("setUserListStatus",this.userListStatus)}},getUserList:function(e,t,n){this.$store.commit("startLoading");var s=this;s.userListData="",s.userListLoading=[],s.userListEnd=[],s.userListBack=[];var a={},r="";switch(e){case"online":a=i()({customerId:s.$store.state.userId,triageType:2,conType:0,sortType:-6},t),r=M.onlineUserList;break;case"waiting":a=i()({conType:0,triageType:1,sortType:-6},t),r=M.waitingUserList;break;case"reset":a=i()({conType:0,sortType:-6,triageType:3},t),r=M.resetUserList}u.a.ajax({url:r,method:"POST",data:a,done:function(t){s.$store.commit("startLoading"),t.responseObject.responseData&&t.responseObject.responseStatus&&function(){var n=s.setSelectValue(t.responseObject.responseData.dataList),i={},a={},r={};switch(i=JSON.parse(localStorage.getItem("waitingAlertList")),a=JSON.parse(localStorage.getItem("patientAlertList")),r=JSON.parse(localStorage.getItem("resetAlertList")),e){case"online":if(a&&"{}"!==a){for(var c in a)!function(e){var t=!0;n.forEach(function(n,i){void 0===n.messageAlert&&(n.messageAlert=""),e=="0_"+n.caseId&&(n.messageAlert=a[e],s.$store.commit("setNewOnline",!0),t=!1)}),t&&delete a[e]}(c);localStorage.setItem("patientAlertList",o()(a))}s.$store.commit("setPatientList",n),s.userListOnline=n||[];break;case"waiting":if(i&&"{}"!==i){for(var c in i)!function(e){var t=!0;n.forEach(function(n,a){void 0===n.messageAlert&&(n.messageAlert=""),e=="0_"+n.caseId&&(n.messageAlert=i[e],s.$store.commit("newWaiting",!0),t=!1)}),t&&delete i[e]}(c);localStorage.setItem("waitingAlertList",o()(i))}s.$store.commit("setWaitingList",n),s.userListWaiting=n||[];break;case"reset":if(r&&"{}"!==r){for(var c in r)!function(e){var t=!0;n.forEach(function(n,i){void 0===n.messageAlert&&(n.messageAlert=""),e=="0_"+n.caseId&&(n.messageAlert=r[e],s.$store.commit("newReset",!0),t=!1)}),t&&delete r[e]}(c);localStorage.setItem("resetAlertList",o()(r))}s.$store.commit("setResetList",n),s.userListReset=n||[];break;default:console.log("请求哪个列表的数据？")}}(),n&&n()},fail:function(e){console.log("请求失败："+e)}})},setSelectValue:function(e){var t=[];return e&&e.forEach(function(e,n){t.push(i()(e,{triageSelect:!1}))}),t},searchPatient:function(e){this.filterMethod=i()(this.filterMethod,{selectName:e}),I.a.commit("startLoading"),this.getUserList("waiting",this.filterMethod),this.getUserList("online",this.filterMethod),this.getUserList("reset",this.filterMethod),I.a.commit("stopLoading")},refreshList:function(){this.getUserList("waiting",this.filterMethod),this.getUserList("online",this.filterMethod),this.getUserList("reset",this.filterMethod)},getTriagePatient:function(e,t){var n=this;I.a.commit("startLoading"),Object(C.a)({consultationId:e.consultationId,customerId:this.$store.state.userId},function(){n.getUserList("waiting"),I.a.commit("showPopup",{hasImg:!1,text:"该患者已被其他分诊医生接诊！"})},function(e){n.getUserList("waiting"),I.a.commit("showPopup",{hasImg:!1,text:"您最多可以接诊"+e+"个患者！"})}).then(function(s){I.a.commit("stopLoading"),n.getUserList("waiting"),n.getUserList("reset"),n.statusChange(2),n.getUserList("online",{},function(){var s=n.getBeTriagePatient(e);if(void 0!==s){e.caseId==n.$store.state.caseId?n.transformData(s,t,!0,!1):n.transformData(s,t,!0,!0),I.a.commit("setTriagePatientCaseIdFlag",{caseId:e.caseId,flag:!0}),n.waitingTriage=!1,n.userOnlineActive=0,I.a.commit("setInputReadOnly",!1),I.a.commit("stopLoading")}});var i=JSON.parse(localStorage.getItem("waitingAlertList"));if(i){for(var a in i)a=="0_"+e.caseId&&delete i["0_"+e.caseId];localStorage.setItem("waitingAlertList",o()(i))}"{}"==localStorage.getItem("waitingAlertList")&&(n.newWaiting=!1)}).catch(function(e){console.log("网络异常...")})},getBeTriagePatient:function(e){var t=e.caseId,n=void 0;return this.userListOnline.forEach(function(e,s){e.caseId===t&&(n=e)}),n},selectQuitItem:function(e){this.userListOnline.forEach(function(e,t){e.triageSelect=!1}),e.triageSelect=!0,I.a.commit("setQuitPatientItem",e)},sortShow:function(){this.sortFlag=!this.sortFlag},sort:function(e){var t=this;switch(t.sortActive=e,t.sortFlag=!1,e){case 0:t.getUserList("waiting",{sortType:-6}),t.getUserList("online",{sortType:-6}),t.getUserList("reset",{sortType:-6});break;case 4:t.getUserList("waiting",{sortType:-5}),t.getUserList("online",{sortType:-5}),t.getUserList("reset",{sortType:-5});break;default:t.getUserList("waiting",{sortType:-6}),t.getUserList("online",{sortType:-6}),t.getUserList("reset",{sortType:-6})}},redPoint:function(e){var t=this;this.$store.commit("setMusicPlay",e),setTimeout(function(){t.$store.commit("setMusicPlay",!e)},2e3)}}}}.call(t,n("bXvV"))},ioVp:function(e,t,n){function s(e){n("TByV")}var i=n("eEuR")(n("299Y"),n("rxNA"),s,"data-v-9118c7b6",null);e.exports=i.exports},j4Qe:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",[n("figure",{staticClass:"messageList-item-content"},[n("figure",{staticClass:"messageList-item-img"},[n("img",{attrs:{src:e.$store.state.currentItem.logoUrl,alt:""}})]),e._v(" "),n("figcaption",{staticClass:"messageList-item-text"},[n("span",[e._v(e._s(e.content)+"点击至")]),e._v(" "),n("a",{staticClass:"link",attrs:{href:"#"},on:{click:e.goToCheck}},[e._v('"专科检查"')]),e._v(" "),n("span",[e._v("查看。")]),e._v(" "),"videoTriage"===e.showType||"imageTriage"===e.showType?n("span",[e._v("若视频上传中，请稍候再次点击查看。")]):e._e()])])])},staticRenderFns:[]}},"j8W+":function(e,t,n){function s(e){n("n4Ex")}var i=n("eEuR")(n("CL/u"),n("6tR4"),s,null,null);e.exports=i.exports},j94m:function(e,t,n){(function(e){var t=function(t,n){this.element=e(t),this.config=e.extend(!1,e.fn.downSelector.defaultConfig,n),n?this.init():this.clickOff()};t.prototype={init:function(){var e=this;e.clickEvent(),e.searchEvent()},clickEvent:function(){var t=this;this.element.off().on("click",function(n){e(n.target).hasClass("custom-selector-title")&&t.selectorToggle(t,e(n.target)),e(n.target).hasClass("icon-downArrow")&&t.selectorToggle(t,e(n.target).prev()),e(n.target).parent().hasClass("result-item")?(t.selectItem(t,e(n.target).parent()),t.config.resultCallback&&t.config.resultCallback(e(n.target).parent())):(e(n.target).parent().hasClass("secondListTitle")||e(n.target).parent().hasClass("thirdListTitle")||e(n.target).parent().hasClass("fourListTitle"))&&t.secondListToggle(t,e(n.target).parent())}),e("body").off().on("click",function(t){e(t.target).parents(".userlist-sortType-item").length||e(t.target).parents(".search-sortType-item").length||e("body").find(".custom-selector-second").css("display","none")})},clickOff:function(){this.element.off()},selectorToggle:function(t,n){e(t.config.list).each(function(s,i){0===s?n.hasClass(i.titleName)&&(t.element.find("."+i.listName).is(":visible")?t.element.find("."+i.listName).css("display","none"):(e("body").find(".custom-selector-second").css("display","none"),t.element.find("."+i.listName).css("display","inline-block"))):t.element.find("."+i.listName).css("display","none")})},selectItem:function(t,n){e(t.config.list).each(function(e,s){if(n.addClass("active").siblings().removeClass("active"),0===e){var i=t.element.find(".custom-selector-title").attr("data-select-result");if(n.parent("div").attr("data-down-role")&&t.config.all)if(n.parents(".secondList").length>0){var a=i.split("-");t.element.find("."+s.titleName).attr("data-select-result",a[0]+"-"+n.text()),t.element.find("."+s.titleName).text(a[0]+"-"+n.text()),t.element.find("."+s.titleName).val(a[0]+"-"+n.text())}else t.element.find("."+s.titleName).attr("data-select-result",i?i+"-"+n.text():n.text()),t.element.find("."+s.titleName).text(i?i+"-"+n.text():n.text()),t.element.find("."+s.titleName).val(i?i+"-"+n.text():n.text());else t.element.find("."+s.titleName).attr("data-select-result",n.text()).text(n.text()).val(n.text())}t.element.find("."+s.listName).is(":visible")&&t.element.find("."+s.listName).css("display","none")})},secondListToggle:function(t,n){var s=n.attr("data-down-role");if(n.addClass("active").siblings().removeClass("active"),t.config.all){var i=t.element.find(".custom-selector-title").attr("data-select-result"),a="";if(i)if(n.hasClass("secondListTitle"))a=n.text();else{var o=i.split("-");a=o[0]+"-"+n.text()}else a=n.text();t.element.find(".custom-selector-title").attr("data-select-result",a).text(a).val(a)}e(t.config.list).each(function(e,i){0!==e&&"area-selector"!==n.parents(".custom-selector").attr("id")&&(n.parent().siblings("."+i.listName).css("display","none"),console.log("."+i.listName+"[data-down-role='"+s+"']"),t.element.find("."+i.listName+"[data-down-role='"+s+"']").css("display","inline-block"))})},searchEvent:function(){var t=this;document.onkeydown=function(n){switch(n.keyCode){case 13:t.showSearch(e(".custom-selector-title:focus"))}}},showSearch:function(t){var n=e(t).val()||e(t).text(),s=e(t).next().next().find(".result-item");e.each(s,function(t,s){console.log(e(s).text(),e(s).text().indexOf(n)),e(s).text().indexOf(n)&&e(s).css("display","none")})}},e.fn.downSelector=function(n){return e(this).each(function(e,s){return new t(s,n)})},e.fn.downSelector.defaultConfig={}}).call(t,n("bXvV"))},jPcO:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("aside",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.userListStatus.second&&(6==e.$store.state.currentItem.consultationState||-1==e.$store.state.currentItem.consultationState||0==e.$store.state.currentItem.consultationState||9==e.$store.state.currentItem.consultationState||10==e.$store.state.currentItem.consultationState),expression:"$store.state.userListStatus.second && ($store.state.currentItem.consultationState == 6||$store.state.currentItem.consultationState == -1||$store.state.currentItem.consultationState ==0||$store.state.currentItem.consultationState ==9||$store.state.currentItem.consultationState ==10)"}],staticClass:"medical-record-remark",class:{on:e.showRecord}},[n("header",{staticClass:"medical-record-remark-header"},[n("section",{staticClass:"remark-add"},[n("p",{directives:[{name:"show",rawName:"v-show",value:e.showRecord,expression:"showRecord"}],staticClass:"remark-build",class:{"remark-new":e.showAdd},on:{click:function(t){t.stopPropagation(),e.remarkValue="",e.showAdd=!e.showAdd,e.addType="add",e.showConfirm=!1}}},[n("i"),n("span",[e._v(e._s(e.showAdd?"返回":"添加"))])]),e._v(" "),n("h3",{directives:[{name:"show",rawName:"v-show",value:!e.showRecord,expression:"!showRecord"}],staticClass:"remark-name",on:{click:function(t){t.stopPropagation(),e.showRecord=!0}}},[n("i"),n("span",[e._v("展开添加分诊记录")])]),e._v(" "),n("p",{directives:[{name:"show",rawName:"v-show",value:e.showRecord,expression:"showRecord"}],staticClass:"remark-toggle",on:{click:function(t){t.stopPropagation(),e.showRecord=!1}}},[n("i"),n("span",[e._v("收起分诊记录")])])])]),e._v(" "),n("section",{staticClass:"medical-record-remark-content"},[n("section",{staticClass:"date",class:{active:!e.showAdd}},e._l(e.remarkList,function(t,s){return n("article",{staticClass:"remark-content-item"},[n("p",{staticClass:"text",on:{click:function(n){e.remarkValue=t.remarkContent,e.remarkId=t.id,e.showAdd=!e.showAdd,e.addType="update",e.showConfirm=!1}}},[e._v(e._s(t.remarkContent))]),e._v(" "),n("p",{staticClass:"time"},[e._v(e._s(e.getTime(t)))]),e._v(" "),n("i",{staticClass:"delete",on:{click:function(t){e.showConfirm=!e.showConfirm,e.showConfirmIndex=s}}}),e._v(" "),n("transition",{attrs:{name:"scale"}},[e.showConfirm&&e.showConfirmIndex==s?n("confirm",{attrs:{comfirmContent:e.ConfirmContent},on:{ensureCallback:function(n){e.deleteRemark(t)},cancelCallback:function(t){e.showConfirm=!e.showConfirm}}}):e._e()],1)],1)})),e._v(" "),n("section",{staticClass:"edit",class:{active:e.showAdd}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.remarkValue,expression:"remarkValue"}],staticClass:"J-textArea-remark",attrs:{placeholder:"请填写",maxlength:"200"},domProps:{value:e.remarkValue},on:{input:function(t){t.target.composing||(e.remarkValue=t.target.value)}}}),e._v(" "),n("button",{class:[{active:e.remarkValue.trim()},"saveButton"],on:{click:e.addRemark}},[e._v("保存")])])])])},staticRenderFns:[]}},"jc/4":function(e,t){},jqtm:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"search-sortType-item"},[n("ul",{staticClass:"search-selector"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.resultData,expression:"resultData"}],staticClass:"custom-selector-title firstListTitle",attrs:{value:"",placeholder:e.dataListInfo.placeholderText,readonly:"疾病"!=e.dataListInfo.placeholderText,disabled:e.dataListInfo.disabledFlag},domProps:{value:e.resultData},on:{click:function(t){t.stopPropagation(),e.showData()},keyup:function(t){"疾病"==e.dataListInfo.placeholderText&&e.searchIllness(t)},input:function(t){t.target.composing||(e.resultData=t.target.value)}}}),e._v(" "),n("i",{class:e.iconFlagDown?"icon-upArrow":"icon-downArrow",on:{click:function(t){t.stopPropagation(),e.showData()}}}),e._v(" "),n("section",{directives:[{name:"show",rawName:"v-show",value:e.conIndex===e.currentIndexNow,expression:"conIndex===currentIndexNow"}],staticClass:"search-selector-second-box"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.dataShow,expression:"dataShow"}],staticClass:"custom-selector-second firstList"},[n("li",{directives:[{name:"show",rawName:"v-show",value:"疾病"==e.dataListInfo.placeholderText,expression:"dataListInfo.placeholderText == '疾病'"}],staticClass:"custom-selector-item result-item",on:{click:function(t){t.stopPropagation(),e.selectData()}}},[e._v(e._s(e.noData))]),e._v(" "),e._l(e.dataListInfo.dataList,function(t,s){return n("li",{staticClass:"custom-selector-item result-item",class:{active:s==e.currentIndex},on:{click:function(n){n.stopPropagation(),e.selectData(t,s)}}},["专科"==e.dataListInfo.placeholderText?n("span",[e._v(e._s(e._f("messageFilter")(t)))]):e._e(),e._v(" "),""!=t.illnessName?n("span",[e._v(e._s(t.illnessName))]):e._e(),e._v(" "),""!=t.progressName?n("span",[e._v(e._s(t.progressName))]):e._e(),e._v(" "),""!=t.operationName?n("span",[e._v(e._s(t.operationName))]):e._e()])})],2),e._v(" "),n("div",{staticClass:"custom-selector-second custom-selector-second-list secondList"},e._l(e.dataListInfo.dataList,function(t,s){return n("ul",e._l(t.children,function(t,i){return s==e.currentIndex&&e.secondActive?n("li",{staticClass:"custom-selector-item result-item",class:{active:s==e.oldIndex&&i==e.currentIndexChildren},on:{click:function(n){n.stopPropagation(),e.childrenData(t,i)}}},[n("span",[e._v(e._s(t.operationName))])]):e._e()}))}))])])])},staticRenderFns:[]}},k6na:function(e,t){},kAXa:function(e,t,n){function s(e){n("EFYl")}var i=n("eEuR")(n("wf9I"),n("3Ag6"),s,null,null);e.exports=i.exports},knZd:function(e,t){},l020:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("nav",{staticClass:"userlist-sortType address-selector"},[n("section",{staticClass:"userlist-sortType-item"},[n("section",{staticClass:"custom-selector"},[n("h3",{staticClass:"custom-selector-title firstListTitle",on:{click:function(t){t.stopPropagation(),e.showData()}}},[e._v(e._s(e.showAddress))]),e._v(" "),n("i",{staticClass:"icon-downArrow",on:{click:function(t){t.stopPropagation(),e.showData()}}}),e._v(" "),n("section",{staticClass:"custom-selector-second-box"},[n("ul",{directives:[{name:"show",rawName:"v-show",value:e.provinceFlag,expression:"provinceFlag"}],staticClass:"custom-selector-second firstList"},[n("li",{staticClass:"custom-selector-item secondListTitle",on:{click:function(t){t.stopPropagation(),e.selectProvince()}}},[n("span",[e._v("请选择")])]),e._v(" "),e._l(e.provinceList,function(t){return n("li",{staticClass:"custom-selector-item secondListTitle",on:{click:function(n){n.stopPropagation(),e.selectProvince(t)}}},[n("span",[e._v(e._s(t.regionName))])])})],2),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.cityFlag&&e.conIndex===e.currentIndexNow,expression:"cityFlag&&conIndex===currentIndexNow"}],staticClass:"custom-selector-second secondList custom-selector-second-list "},e._l(e.cityList,function(t,s){return n("ul",{directives:[{name:"show",rawName:"v-show",value:e.dataBack.provinceId==s,expression:"dataBack.provinceId == key"}]},[n("li",{staticClass:"custom-selector-item result-item",on:{click:function(t){t.stopPropagation(),e.selectCity()}}},[n("span",[e._v("不限")])]),e._v(" "),e._l(t,function(t){return n("li",{staticClass:"custom-selector-item thirdListTitle",on:{click:function(n){n.stopPropagation(),e.selectCity(t)}}},[n("span",[e._v(e._s(t.regionName))])])})],2)})),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.districtFlag,expression:"districtFlag"}],staticClass:"custom-selector-second thirdList custom-selector-third-list"},e._l(e.districtList,function(t,s){return n("ul",{directives:[{name:"show",rawName:"v-show",value:e.dataBack.cityId==s,expression:"dataBack.cityId == key"}]},[n("li",{staticClass:"custom-selector-item result-item",on:{click:function(t){e.selectDistrict()}}},[n("span",[e._v("不限")])]),e._v(" "),e._l(t,function(t){return n("li",{staticClass:"custom-selector-item thirdListTitle",on:{click:function(n){e.selectDistrict(t)}}},[n("span",[e._v(e._s(t.regionName))])])})],2)}))])])])])},staticRenderFns:[]}},lHEO:function(e,t,n){function s(e){n("IMHn")}var i=n("eEuR")(n("qTX7"),n("vkcP"),s,null,null);e.exports=i.exports},lRcp:function(e,t){},lZFN:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var s=n("q/Kx");t.default={name:"address-selector",data:function(){return{addressSearch:"/call/comm/data/baseinfo/v1/getRegionList/",provinceList:[],cityList:{},cityFlag:!1,districtList:{},districtFlag:!1,showAddress:"请选择",dataBack:{provinceId:"",provinceName:"",cityId:"",cityName:"",districtId:"",districtName:""}}},props:{dataListInfo:{type:Object},provinceFlag:{type:Boolean}},methods:{init:function(){console.log(this.provinceFlag),""==this.dataListInfo.provinceName||(this.showAddress=this.dataListInfo.provinceName+"-"+this.dataListInfo.cityName+"-"+this.dataListInfo.districtName),this.showProvince()},showProvince:function(){var e=this,t={isValid:1,firstResult:0,maxResult:9999,treeLevel:2};s.a.ajax({url:e.addressSearch,method:"POST",data:t,beforeSend:function(e){},done:function(t){void 0!=t&&""!=t&&0!=t.responseObject.responseStatus&&(e.provinceList=t.responseObject.responseData.dataList)},fail:function(e){console.log("请求失败："+e)}})},showCity:function(){var t=this;t.cityList={};var n={isValid:1,firstResult:0,maxResult:9999,treeLevel:3};s.a.ajax({url:t.addressSearch,method:"POST",data:n,beforeSend:function(e){},done:function(n){if(n.responseObject.responseData.dataList&&0!=n.responseObject.responseStatus){var s=n.responseObject.responseData.dataList;e.each(s,function(e,n){var s=[],i={parentId:"",regionName:"",regionId:""};if(i.parentId=n.parentId,i.regionName=n.regionName,i.regionId=n.regionId,s.push(i),t.cityList[n.parentId]){var a=t.cityList[n.parentId];a.push(i),t.cityList[n.parentId]=a}else t.cityList[n.parentId]=s}),console.log(t.cityList)}},fail:function(e){console.log("请求失败："+e)}})},showDistrict:function(){var t=this,n={isValid:1,firstResult:0,maxResult:9999,treeLevel:4};s.a.ajax({url:t.addressSearch,method:"POST",data:n,beforeSend:function(e){},done:function(n){if(n.responseObject.responseData.dataList&&0!=n.responseObject.responseStatus){var s=n.responseObject.responseData.dataList;e.each(s,function(e,n){var s=[],i={parentId:"",regionName:"",regionId:""};if(i.parentId=n.parentId,i.regionName=n.regionName,i.regionId=n.regionId,s.push(i),t.districtList[n.parentId]){var a=t.districtList[n.parentId];a.push(i),t.districtList[n.parentId]=a}else t.districtList[n.parentId]=s})}},fail:function(e){console.log("请求失败："+e)}})},showData:function(){this.provinceFlag=!this.provinceFlag,this.$emit("update:provinceFlag",!0),this.cityFlag=!1,this.districtFlag=!1},selectProvince:function(e){e?(this.showAddress=e.regionName,this.dataBack.provinceId=e.regionId,this.dataBack.provinceName=e.regionName,this.provinceFlag=!1,this.$emit("update:provinceFlag",this.provinceFlag),this.cityFlag=!1,this.districtFlag=!1,this.$emit("update:dataBack",this.dataBack)):(this.provinceFlag=!1,this.cityFlag=!1,this.districtFlag=!1,this.dataBack.provinceId="",this.dataBack.provinceName="",this.dataBack.cityId="",this.dataBack.cityName="",this.dataBack.districtId="",this.dataBack.districtName="",this.showAddress="请选择",this.$emit("update:dataBack",this.dataBack))},selectCity:function(e){e?(this.dataBack.cityId=e.regionId,this.dataBack.cityName=e.regionName,this.showAddress=e.regionName,this.districtFlag=!0):(this.showAddress=this.dataBack.provinceName+"-未知",this.provinceFlag=!1,this.cityFlag=!1,this.districtFlag=!1,this.$emit("update:dataBack",this.dataBack))},selectDistrict:function(e){e?(this.showAddress=e.regionName,this.dataBack.districtId=e.regionId,this.dataBack.districtName=e.regionName):this.showAddress=this.showAddress+"-未知",this.provinceFlag=!1,this.cityFlag=!1,this.districtFlag=!1,this.$emit("update:dataBack",this.dataBack)}},mounted:function(){this.init()}}}.call(t,n("bXvV"))},le8T:function(e,t){},lecS:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.showFlag?n("section",{staticClass:"sendImg"},[n("input",{attrs:{name:"file",type:"file",multiple:"",id:"sendImg",accept:e.getState()},on:{change:function(t){e.onFileChange(t)}}}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:0===e.fileList.length,expression:"fileList.length === 0"}],staticClass:"btn-click"},[n("img",{attrs:{src:"/static/image/img00/controller/fileUp.png"}}),e._v(" "),n("span",[e._v("选 择 文 件")]),e._v(" "),n("span",[e._v("( JPEG、PNG、BMP、GIF 、JPG、PNG、MP4、PDF)")])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.fileList.length>0,expression:"fileList.length>0"}],staticClass:"imgList"},e._l(e.fileList,function(t,s){return n("div",{staticClass:"imgInfo"},[n("div",{staticClass:"name"},[e._v(e._s(t.name))]),e._v(" "),"image"==e.fileType(t.type)?n("img",{attrs:{src:t.url}}):e._e(),e._v(" "),"video"==e.fileType(t.type)?n("img",{attrs:{src:"/static/image/img00/common/videoPlay.jpg"}}):e._e(),e._v(" "),"file"==e.fileType(t.type)?n("img",{attrs:{src:"/static/image/img00/common/folder.jpg"}}):e._e(),e._v(" "),n("div",{class:[t.sizeWarning?"on":"no","size"]},[n("span",{staticClass:"num"},[e._v(e._s(e.getSize(t,s)))]),n("span")]),e._v(" "),n("div",{staticClass:"remove"},[n("img",{attrs:{src:"/static/image/img00/common/popup_close_activate.png"},on:{click:function(n){e.removeImg(s,t)}}})])])})),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.fileList.length>0,expression:"fileList.length>0"}],staticClass:"send-btn"},[n("a",{attrs:{href:"javascript:;"},on:{click:e.send}},[e._v("发送")])]),e._v(" "),n("div",{staticClass:"closeSend",on:{click:e.closeSend}})]):e._e()},staticRenderFns:[]}},lptC:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("Edqs"),i=n.n(s),a=n("ogYJ"),o=n("q/Kx"),r={deleteTerm:"/call/customer/quick/question/v1/delete/",fixTerm:"/call/customer/quick/question/v1/save/",getTerm:"/call/customer/quick/question/v1/getMapList/"};t.default={name:"fast-reply-config",data:function(){return{termList:[],termShowFlag:{"-1":!1},termFixFlag:{"-1":!1},termFixContent:{"-1":""},addInputContent:"",memberFixFlag:{},memberFixContent:{},deleteTermShowFlag:{},deleteMemberShowFlag:{}}},mounted:function(){this.getConfigList()},methods:{getConfigList:function(){var e=this;Object(a.a)({url:r.getTerm,method:"POST",data:{sessionCustomerId:this.$store.state.userId,isValid:"1",firstResult:"0",maxResult:"1000",sortType:"2",sortPartIdList:""},done:function(t){if(console.log(t),t.responseObject.responseData){var n=t.responseObject.responseData.dataList;n&&0!==n.length&&(e.termList=n,e.baseListInstall(n))}},fail:function(){}})},baseListInstall:function(e){var t=this;e.forEach(function(e,n){t.$set(t.termShowFlag,n,!1),t.$set(t.termFixFlag,n,!1),t.$set(t.termFixContent,n,""),t.$set(t.deleteTermShowFlag,n,!1),t.$set(t.memberFixFlag,n,{"-1":!1}),t.$set(t.memberFixContent,n,{"-1":""}),t.$set(t.deleteMemberShowFlag,n,{}),e.children?e.children.forEach(function(e,s){t.$set(t.memberFixFlag[n],s,!1),t.$set(t.memberFixContent[n],s,""),t.$set(t.deleteMemberShowFlag[n],s,!1)}):e.children=[]})},configCallback:function(e,t,n,s,o){var c=!0,l=this,u={item:t,index:n,cItem:s,cIndex:o},d={customerId:this.$store.state.userId,treeLevel:1,isValid:"1"};switch(e){case"addTerm":this.addInputContent.trim()?d=i()(d,{questionDesc:this.addInputContent,questionType:"2"}):(this.addInputContent="",c=!1);break;case"addMember":this.memberFixContent[n][-1].trim()?d=i()(d,{treeLevel:2,questionDesc:this.memberFixContent[n][-1],parentId:t.questionId,fullPath:t.fullPath,questionType:t.questionType}):(this.memberFixContent[n][-1]="",c=!1);break;case"fixTerm":this.termFixContent[n].trim()?d=i()(d,{id:t.questionId,questionDesc:this.termFixContent[n],questionId:t.questionId,questionType:"2"}):c=!1;break;case"fixMember":this.memberFixContent[n][o].trim()?d=i()(d,{id:s.questionId,questionDesc:this.memberFixContent[n][o],questionId:s.questionId,fullPath:s.fullPath,questionType:t.questionType}):c=!1}c&&(this.$store.state.loadingShow=!0,Object(a.a)({url:r.fixTerm,method:"POST",data:d,done:function(t){if(t.responseObject.responseData){var n=t.responseObject.responseData.dataList;l.$store.state.loadingShow=!1,l.finishCallback(e,n,u)}}}))},finishCallback:function(e,t,n){switch(e){case"addTerm":this.addInputContent="",this.termShowFlag[-1]=!1,this.getConfigList();break;case"addMember":this.termList[n.index].children.unshift(t),this.memberFixContent[n.index][-1]="",this.memberFixFlag[n.index][-1]=!1,this.getConfigList();break;case"fixTerm":this.termList[n.index].questionDesc=this.termFixContent[n.index],this.termFixFlag[n.index]=!1,this.termFixContent[n.index]="";break;case"fixMember":this.termList[n.index].children[n.cIndex].questionDesc=this.memberFixContent[n.index][n.cIndex],this.memberFixContent[n.index][n.cIndex]="",this.memberFixFlag[n.index][n.cIndex]=!1}},deleteShowFlag:function(e){for(var t in this.deleteTermShowFlag){this.deleteTermShowFlag[t]=!1;for(var n in this.deleteMemberShowFlag[t])this.deleteMemberShowFlag[t][n]=!1}this.deleteTermShowFlag[e]=!0},deleteMemberShowSwitch:function(e,t){for(var n in this.deleteMemberShowFlag[e])this.deleteMemberShowFlag[e][n]=!1,this.deleteTermShowFlag[n]=!1;this.deleteMemberShowFlag[e][t]=!0},deleteCallback:function(e,t,n,s,i){var o=this;"term"===e?Object(a.a)({url:r.deleteTerm,method:"POST",data:{isValid:"0",questionId:t.questionId,isBatch:"1"},done:function(e){e.responseObject.responseStatus&&(o.termList.removeByValue(t),o.deleteTermShowFlag[n]=!1)}}):"member"===e&&Object(a.a)({url:r.deleteTerm,method:"POST",data:{isValid:"0",questionId:s.questionId},done:function(e){e.responseObject.responseStatus&&(o.termList[n].children.removeByValue(s),o.deleteMemberShowFlag[n][i]=!1,delete o.deleteMemberShowFlag[n][i])}})},contentLimit:function(e,t,n){"term"===e?(o.a.getByteLen(this.addInputContent)>40||o.a.getByteLen(this.termFixContent[t])>40)&&(-1==t?this.addInputContent=o.a.getStrByteLen(this.addInputContent,40):this.termFixContent[t]=o.a.getStrByteLen(this.termFixContent[t],40)):"member"===e&&o.a.getByteLen(this.memberFixContent[t][n])>200&&(this.memberFixContent[t][n]=o.a.getStrByteLen(this.memberFixContent[t][n],200))}}}},lydH:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("SWMY");n.n(s),n("L2mo");t.default={data:function(){return{exifFlag:!1}},mounted:function(){},computed:{docName:function(){return this.message.custom&&JSON.parse(this.message.custom).docName?JSON.parse(this.message.custom).docName:this.$store.state.userName}},methods:{showPDF:function(e){window.open(e)},getSize:function(e,t){e.size>1024*this.maxSize*1024&&(e.sizeWarning=!0);var n=e.size;return e.size<1048576?(n/1024).toFixed(2)+"KB":(n/1024/1024).toFixed(2)+"MB"},deleteMsg:function(){this.$emit("deleteMsg")}},props:{message:{type:Object},nim:{type:Object}}}},mLLg:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("Iqo+"),i=n.n(s),a=n("9lsl"),o=n.n(a),r=n("dv6L"),c=n.n(r),l=n("EsDz"),u=n.n(l),d=n("G0kZ"),p=n.n(d),m=n("lHEO"),f=n.n(m),g=n("ioVp"),h=n.n(g),v=n("rduQ"),y=n.n(v),b=n("rIT9"),w=n.n(b),_=n("GeFp"),S=n.n(_),x=n("ESSQ"),C=n("8L/s"),I=n("XHg1"),k=n.n(I),T=n("gBLG"),M=n.n(T),N=n("kAXa"),L=n.n(N),O=n("Q9u7"),P=n.n(O),F=n("Nnlo"),A=n.n(F);t.default={name:"communication",data:function(){return{controllerInput:"",controllerInputStatus:0,examineSuggest:"",FirstIndex:-1,SecondIndex:-1,ThirdIndex:-1,FourIndex:-1,testSuggest:"",examineFlag:!1,suggestionFlag:!1,checkSuggestionFlag:!1,tabActive:!0,fastRelyStatus:"",SBIFlag:!1,usedRelyStatus:!1,fastReplyConfig:!1,reTriageContentTips:"确定结束与该患者的沟通吗？",doctorReceive:"该患者已被接诊",inputReadOnly:"",sendFlag:!1,minBtnFlag:!1}},components:{fastRely:c.a,usedRely:u.a,fastReplyConfig:p.a,CheckSuggestion:h.a,ExamineCheck:y.a,ShowBigImg:k.a,ShowVideo:M.a,ShowVideoList:L.a,BaseIm:S.a,SmallConfirm:i.a,PreviewSuggestion:w.a,UsedReplyConfig:f.a,sendFile:P.a,refuse:A.a,doctorReceive:o.a},props:{m:{type:Object},n:{type:Boolean},waitingTriage:{type:Boolean},userListStatus:{type:Object},userWaitingActive:{type:Number},userOnlineActive:{type:Number},reTriageShow:{type:Boolean}},watch:{"$store.state.fastReplyContent":function(e){this.controllerInput=e},"$store.state.usedReplyContent":function(e){this.controllerInput=e},"$store.state.minBtnFlag":function(e){this.minBtnFlag=this.$store.state.minBtnFlag},"$store.state.refuseUserListFlag":function(e){e&&this.userListChange()}},methods:{init:function(){},sendMessage:function(e){var t=this,n=function(){if(0===t.controllerInput.trim().length)return void e.preventDefault();0==t.controllerInputStatus?t.$refs.baseImComponent.sendMessage(t.controllerInput).then(function(e){t.controllerInput="",t.$store.commit("setFastReply",""),t.$store.commit("setUesdReply","")}):(t.$store.commit("videoTriageSender",{flag:!0,data:{content:t.controllerInput,type:t.controllerInputStatus}}),t.controllerInput="",t.controllerInputStatus=0)};e.keyCode?13==e.keyCode&&n():n()},suggestion:function(){this.$store.commit("setCheckSuggestionFlag",!this.$store.state.checkSuggestionFlag)},examine:function(){this.$store.commit("setExamineFlag",!this.$store.state.examineFlag)},fastRely:function(){var e=!0;this.$store.state.fastReplyShow?e=!1:(e=!0,this.$store.commit("setUsedReplyShow",!1)),this.$store.commit("setFastReplyShow",e)},usedRely:function(){var e=!0;this.$store.state.usedReplyShow?e=!1:(e=!0,this.$store.commit("setFastReplyShow",!1)),this.$store.commit("setUsedReplyShow",e)},reTriageConfirm:function(){var e=this;Object(C.a)({customerId:this.$store.state.userId,consultationId:this.$store.state.currentItem.consultationId,consultationState:5}).then(function(t){e.$store.commit("startLoading"),e.reTriageShow=!1,e.$store.commit("setReleasePatientCaseIdFlag",{caseId:e.$store.state.caseId,flag:!0}),e.userListChange(),e.$store.commit("resetListRefreshFlag",!0)})},doctorReceiveFn:function(){this.reTriageShow=!1,this.$emit("update:n",!1),this.$store.commit("waitingListRefreshFlag",!0),this.$store.commit("onlineListRefresh",!0),this.$store.commit("resetListRefreshFlag",!0),this.$store.commit("setCurrentItem",{}),this.$store.commit("setPatientId",""),this.$store.commit("setPatientName",""),this.$store.commit("setCaseId",""),this.$store.commit("setConsultationId",""),this.$store.commit("setConsultationState",""),this.$store.commit("setSBIObject",new Array)},getPatient:function(){var e=this,t=this.$store.state.currentItem,n=this.$store.state.waitingList,s=this.$store.state.patientList;Object(x.a)({consultationId:this.$store.state.consultationId,customerId:this.$store.state.userId}).then(function(i){e.$emit("update:waitingTriage",!1),n.removeByValue(t),s.unshift(t),e.$store.commit("setPatientList",s),e.$store.commit("setWaitingList",n),e.$store.commit("setInputReadOnly",!1),e.$emit("update:userListStatus",{first:!1,second:!0,status:2})}).catch(function(e){console.log("网络异常...")})},sendFile:function(){this.sendFlag=!this.sendFlag,this.$store.commit("setSendFileShow",!0)},minBtnShow:function(){this.minBtnFlag=!this.minBtnFlag,this.$store.commit("setMinBtnFlag",this.minBtnFlag)},refuseEvent:function(){this.$store.commit("setRefuseFlag",!0)},userListChange:function(){var e=this;this.$store.commit("startLoading"),setTimeout(function(){e.$store.commit("startLoading")},100),setTimeout(function(){e.$store.commit("startLoading")},500),setTimeout(function(){e.$store.commit("startLoading");var t=e.$store.state.patientList;t.removeByValue(e.$store.state.currentItem),e.$store.commit("setPatientList",t),e.$store.state.currentItem.triageSelect=!1,e.$store.commit("waitingListRefreshFlag",!0);var n="";if(!(t.length>0))return e.$emit("update:userOnlineActive",-1),e.$emit("update:n",!1),e.$store.commit("setCurrentItem",""),e.$store.commit("setCaseId",""),e.$store.commit("setPatientId",""),void e.$store.commit("setPatientName","");n=e.userOnlineActive<=t.length-1?e.userOnlineActive:t.length-1,e.$emit("update:userOnlineActive",n),e.$emit("update:userWaitingActive",-1);var s=t[parseInt(n)];e.$store.commit("setPatientId",s?s.patientId:""),e.$store.commit("setPatientName",s?s.patientName:""),e.$store.commit("setCaseId",s?s.caseId:""),e.$store.commit("setConsultationId",s?s.consultationId:""),e.$store.commit("setCurrentItem",s||{}),e.$store.commit("setSBIObject",[]),e.$store.commit("stopLoading"),e.$store.commit("setRefuseUserListFlag",!1)},1500)}},mounted:function(){this.init()}}},n4Ex:function(e,t){},nUWs:function(e,t){},ogYJ:function(e,t,n){"use strict";function s(e){r.a.interceptors.request.use(function(t){return document.querySelector(".ev-loading")&&(document.querySelector(".ev-loading").style.display="block",c.a.commit("startLoading")),e.beforeSend&&e.beforeSend(t),t}),r()({url:e.url,method:e.method,data:e.data,transformRequest:[function(e){return"paramJson="+a()(e)}],headers:{"X-Requested-With":"XMLHttpRequest"},timeout:3e4}).then(function(t){e.done(t.data),document.querySelector(".ev-loading")&&(document.querySelector(".ev-loading").style.display="none",c.a.commit("stopLoading"))},function(t){document.querySelector(".ev-loading")&&(document.querySelector(".ev-loading").style.display="none",c.a.commit("stopLoading")),e.fail&&e.fail(t)})}t.a=s;var i=n("3SZ7"),a=n.n(i),o=n("xY2u"),r=n.n(o),c=n("wtEF")},olaC:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"big-confirm-box"},[n("section",{staticClass:"big-confirm-inner"},[n("header",{staticClass:"big-confirm-title"},[n("h4",[e._v(e._s(e.comfirmData.title))]),n("i",{staticClass:"icon-close window-close",on:{click:e.cancel}})]),e._v(" "),n("article",{staticClass:"big-confirm-content"},[n("p",[e._v(e._s(e.comfirmData.content))])]),e._v(" "),n("footer",{staticClass:"big-confirm-btn"},[n("button",{staticClass:"btn-border",on:{click:e.cancel}},[e._v("取消")]),e._v(" "),n("button",{staticClass:"btn-primary",on:{click:e.ensure}},[e._v("确定")])])])])},staticRenderFns:[]}},oxXm:function(e,t){},oynJ:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("figure",{staticClass:"messageList-item-content"},["1_doctor00001"!=e.message.from?n("figure",{staticClass:"messageList-item-img"},[n("img",{attrs:{src:e.$store.state.currentItem.logoUrl,alt:""}})]):e._e(),e._v(" "),n("figcaption",{staticClass:"messageList-item-text",class:{"make-photo-box":e.exifFlag}},[n("img",{ref:"imageElement",staticStyle:{width:"300px"},attrs:{src:e.message.file.url,alt:""},on:{click:function(t){if(t.target!==t.currentTarget)return null;e.showBigImgFunction(e.message.file.url)}}})]),e._v(" "),"1_doctor00001"==e.message.from?n("figure",{staticClass:"messageList-item-img"},[n("div",{staticClass:"messageList-item-nameTop"},[n("p",[e._v(e._s("【分诊医生】"+e.docName))])]),e._v(" "),n("div",{staticClass:"deleteMessage",on:{click:function(t){t.stopPropagation(),e.deleteMsg(t)}}},[e._v("撤回")]),e._v(" "),n("img",{attrs:{src:"/static/image/img00/index/chatting_portrait_system@2x.png",alt:""}})]):e._e()])},staticRenderFns:[]}},"p+Lg":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{on:{click:function(t){e.closeSelect()}}},[e.maskerShow?n("section",{directives:[{name:"show",rawName:"v-show",value:!e.$store.state.previewShow,expression:"!$store.state.previewShow"}],staticClass:"config-suggestion-box"},[n("i",{staticClass:"icon-close window-close",on:{click:e.closeWindow}}),e._v(" "),n("header",{staticClass:"config-suggestion-title"},[n("button",{staticClass:"config-suggestion-back",on:{click:function(t){e.goBackCheck()}}},[n("i",{staticClass:"icon-leftArrow"}),n("span",[e._v("上一步")])]),e._v(" "),e._m(0),e._v(" "),n("button",{staticClass:"jump-box-add-term",class:{"icon-suggestion-preview-gray":e.isLight,forbid:e.isLight,"icon-suggestion-preview":!e.isLight},on:{click:e.previewSuggest}},[n("span",[e._v("预览")])]),e._v(" "),n("button",{staticClass:"jump-box-add-send",class:{forbid:e.isLight},on:{click:function(t){e.submitStatus&&e.sendSuggest()}}},[n("span",[e._v("发送")])])]),e._v(" "),n("section",{staticClass:"config-suggestion-inner scrollTop"},[n("nav",{staticClass:"config-suggestion-tabsBox"},[n("ul",{staticClass:"config-suggestion-tabs"},e._l(e.tabList,function(t,s){return n("li",{staticClass:"config-suggestion-tabs-item",class:{active:e.cutNum==s},on:{click:function(t){e.cutNum=s,e.FirstIndex=-1,e.secondIndex=-1,e.ThirdIndex=-1,e.FourIndex=-1}}},[e._v(e._s(t)+"\n                    ")])}))]),e._v(" "),n("section",{staticClass:"config-suggestion-viewers"},[n("section",{directives:[{name:"show",rawName:"v-show",value:0==e.cutNum,expression:"cutNum == 0"}],staticClass:"config-suggestion-item recommendDoctor"},[n("nav",{staticClass:"mate-and-all"},[n("ul",e._l(e.docTabList,function(t,s){return n("li",{class:{on:e.docCutNum==s},on:{click:function(t){e.docCutNum=s}}},[e._v(e._s(t))])}))]),e._v(" "),n("section",{directives:[{name:"show",rawName:"v-show",value:1==e.docCutNum,expression:"docCutNum==1"}],staticClass:"doc-filter-search-box"},[n("ul",{staticClass:"doc-filter-box",class:{quHighly:!e.viewMore}},e._l(e.tagTabList,function(t,s){return n("li",{class:{on:e.tagCutNum==s},on:{click:function(n){e.getAllDocCustomer({tag:t,type:"filter",num:0,value:1,cutNum:s})}}},[e._v("\n                                "+e._s(e.getTagName(t))+"\n                            ")])})),e._v(" "),n("a",{staticClass:"viewMoreBox",attrs:{href:"javascript:;"},on:{click:function(t){e.viewMore=!e.viewMore}}},[n("button",{staticClass:"viewMore",class:{rotate:e.viewMore}})]),e._v(" "),n("div",{staticClass:"doc-search-box"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.docSearchValue,expression:"docSearchValue"}],staticClass:"doc-search",class:{on:e.docSearchValue.trim().length>0},attrs:{type:"text",placeholder:"医院、医生、医生擅长",maxlength:"20"},domProps:{value:e.docSearchValue},on:{input:function(t){t.target.composing||(e.docSearchValue=t.target.value)}}}),e._v(" "),n("dignosi-address",{attrs:{provinceFlag:e.provinceFlag,dataListInfo:e.addressResult,dataBack:e.addressResult},on:{"update:provinceFlag":function(t){e.provinceFlag=t},"update:dataListInfo":function(t){e.addressResult=t},"update:dataBack":function(t){e.addressResult=t}}}),n("select",{directives:[{name:"model",rawName:"v-model",value:e.doctorType,expression:"doctorType"}],staticClass:"doc-type",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.doctorType=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:""}},[e._v("类型不限")]),e._v(" "),n("option",{attrs:{value:"1"}},[e._v("权威医生")]),e._v(" "),n("option",{attrs:{value:"0"}},[e._v("轻问诊医生")])]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.onlineState,expression:"onlineState"}],staticClass:"doc-type",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.onlineState=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:""}},[e._v("状态不限")]),e._v(" "),n("option",{attrs:{value:"1"}},[e._v("在线")])]),e._v(" "),n("button",{staticClass:"doc-search-btn on",class:{on:e.docSearchValue.trim().length>0},on:{click:function(t){e.getAllDocCustomer({type:"search",num:0,value:1})}}},[e._v("搜索")])],1)]),e._v(" "),e.matchDoc.matchDocList.length>0&&0==e.docCutNum?n("button",{staticClass:"config-suggestion-select icon-select-small",class:{active:e.matchDoc.matchDocState},on:{click:function(t){e.matchDocAllChecked(e.matchDoc.matchDocList,"match")}}},[n("span",[e._v("全选")])]):e._e(),e._v(" "),e.allDoc.allDocList.length>0&&1==e.docCutNum?n("button",{staticClass:"config-suggestion-select icon-select-small",class:{active:e.allDoc.allDocState},on:{click:function(t){e.matchDocAllChecked(e.allDoc.allDocList,"all")}}},[n("span",[e._v("全选")])]):e._e(),e._v(" "),n("section",{staticClass:"doctor-message-box"},[n("section",{directives:[{name:"show",rawName:"v-show",value:0==e.docCutNum,expression:"docCutNum==0"}],staticClass:"doctor-message doctor-message-mate"},[e.matchDoc.matchDocList.length>0?e._l(e.matchDoc.matchDocList,function(t,s){return n("section",{staticClass:"doctor-message-item icon-select-big",class:{active:t.isChecked},on:{click:function(n){n.stopPropagation(),e.changeCheckedState(t,s,"match")}}},[n("figure",{staticClass:"doctor-message-img"},[n("img",{attrs:{src:t.logoUrl?t.logoUrl:"/static/image/img00/common/default_logo.png"}})]),e._v(" "),n("figcaption",{staticClass:"doctor-message-content"},[n("header",{staticClass:"doctor-message-content-head"},[n("h4",[e._v(e._s(t.fullName))]),e._v(" "),n("p",{staticClass:"rate"},[e._v(e._s(1==t.doctorType?"权威医生":"轻问诊医生"))]),e._v(" "),n("span",{staticClass:"netstat",class:{rest:1!=t.adviceStatus}},[e._v(e._s(1==t.adviceStatus?"在线":"不接诊"))]),e._v(" "),n("figure",{staticClass:"doctor-message-tags"},[1==t.isTop?n("span",{staticClass:"tags"},[e._v("全国TOP10骨科医院")]):e._e(),e._v(" "),1==t.isNearest?n("span",{staticClass:"tags"},[e._v("距离最近")]):e._e(),e._v(" "),1==t.isFreeTimes?n("span",{staticClass:"tags",staticStyle:{background:"#FFF1D4",color:"#EB9E00"}},[e._v("首次问诊免费")]):e._e()])]),e._v(" "),n("article",{staticClass:"doctor-message-hospital"},[n("span",{staticClass:"hos-address"},[e._v(e._s(t.province?t.province:"")+"  "+e._s(t.city?t.city:"")+"  "+e._s(t.district?t.district:""))]),e._v(" "),n("span",{staticClass:"hospital"},[e._v(e._s(t.company?t.company:""))]),e._v(" "),n("span",{staticClass:"medical"},[e._v(e._s(t.medicalTitle))])]),e._v(" "),t.remarksContent?n("article",{staticClass:"administrator-message"},[e._v("\n                                            管理员备注："),n("span",[e._v(e._s(t.remarksContent))])]):e._e(),e._v(" "),t.illnessNameList.length>0||t.operationNameList.length>0?n("article",{staticClass:"doctor-message-goodAt"},[e._v("\n                                            擅长："),n("span",{class:{on:e.matchCurrentIndex==s}},[e._v(e._s(t.illnessNameList+t.operationNameList))])]):e._e(),e._v(" "),t.illnessNameList.replace(/[^\u4e00-\u9fa5]/gi,"").length+t.operationNameList.replace(/[^\u4e00-\u9fa5]/gi,"").length>30?n("a",{staticClass:"viewMoreBox",attrs:{href:"javascript:;"},on:{click:function(t){t.stopPropagation(),e.matchCurrent(s,t)}}},[e._v(e._s(e.matchCurrentIndex==s?"收起":"展开"))]):e._e(),e._v(" "),n("article",{staticClass:"doctor-message-num"},[t.generalPrice.length>0?n("span",{staticClass:"price"},[n("i",{staticStyle:{color:"#F23E34"}},[e._v("¥"+e._s(t.generalPrice))]),e._v("/"+e._s(t.generalTimes)+"次起")]):e._e(),e._v(" "),t.adviceNum>0?n("span",{staticClass:"lastNum"},[e._v("仅剩"),n("i",{staticStyle:{color:"#00BEAF"}},[e._v(e._s(t.adviceNum))]),e._v("个名额")]):e._e()])])])}):n("p",{staticClass:"no-mate-doc"},[e._v("未找到最匹配医生,请切换至全部医生进行选择")])],2),e._v(" "),n("section",{directives:[{name:"show",rawName:"v-show",value:1==e.docCutNum,expression:"docCutNum==1"}],staticClass:"doctor-message doctor-message-all"},[n("section",{staticClass:"doctor-message-page-box"},[e._l(e.allDoc.allDocList,function(t,s){return n("section",{staticClass:"doctor-message-item icon-select-big",class:{active:t.isChecked},on:{click:function(n){e.changeCheckedState(t,s,"all")}}},[n("figure",{staticClass:"doctor-message-img"},[n("img",{attrs:{src:t.logoUrl?t.logoUrl:"/static/image/img00/common/default_logo.png"}})]),e._v(" "),n("figcaption",{staticClass:"doctor-message-content"},[n("header",{staticClass:"doctor-message-content-head"},[n("h4",[e._v(e._s(t.fullName))]),e._v(" "),n("p",{staticClass:"rate"},[e._v(e._s(1==t.doctorType?"权威医生":"轻问诊医生"))]),e._v(" "),n("span",{staticClass:"netstat",class:{rest:1!=t.adviceStatus}},[e._v(e._s(1==t.adviceStatus?"在线":"不接诊"))]),e._v(" "),n("figure",{staticClass:"doctor-message-tags"},[n("span"),e._v(" "),1==t.isTop?n("span",{staticClass:"tags"},[e._v("全国TOP10骨科医院")]):e._e(),e._v(" "),1==t.isNearest?n("span",{staticClass:"tags"},[e._v("距离最近")]):e._e(),e._v(" "),1==t.isFreeTimes?n("span",{staticClass:"tags",staticStyle:{background:"#FFF1D4",color:"#EB9E00"}},[e._v("首次问诊免费")]):e._e()])]),e._v(" "),n("article",{staticClass:"doctor-message-hospital"},[n("span",{staticClass:"hos-address"},[e._v(e._s(t.province?t.province:"")+"  "+e._s(t.city?t.city:"")+"  "+e._s(t.district?t.district:""))]),e._v(" "),n("span",{staticClass:"hospital"},[e._v(e._s(t.company?t.company:""))]),e._v(" "),n("span",{staticClass:"medical"},[e._v(e._s(t.medicalTitle))])]),e._v(" "),t.remarksContent?n("article",{staticClass:"administrator-message"},[e._v("\n                                            管理员备注："),n("span",[e._v(e._s(t.remarksContent))])]):e._e(),e._v(" "),t.illnessNameList.length>0||t.operationNameList.length>0?n("article",{staticClass:"doctor-message-goodAt"},[e._v("\n                                            擅长："),n("span",{class:{on:e.allCurrentIndex==s},domProps:{innerHTML:e._s(t.illnessNameList+t.operationNameList)}})]):e._e(),e._v(" "),t.illnessNameList.replace(/[^\u4e00-\u9fa5]/gi,"").length+t.operationNameList.replace(/[^\u4e00-\u9fa5]/gi,"").length>30?n("a",{staticClass:"viewMoreBox",attrs:{href:"javascript:;"},on:{click:function(t){t.stopPropagation(),e.allCurrent(s,t)}}},[e._v(e._s(e.allCurrentIndex==s?"收起":"展开"))]):e._e(),e._v(" "),n("article",{staticClass:"doctor-message-num"},[t.generalPrice.length>0?n("span",{staticClass:"price"},[n("i",{staticStyle:{color:"#F23E34"}},[e._v("¥"+e._s(t.generalPrice))]),e._v("/"+e._s(t.generalTimes)+"次起")]):e._e(),e._v(" "),t.adviceNum>0?n("span",{staticClass:"lastNum"},[e._v("仅剩"),n("i",{staticStyle:{color:"#00BEAF"}},[e._v(e._s(t.adviceNum))]),e._v("个名额")]):e._e()])])])}),e._v(" "),e.noDocData?n("p",{staticClass:"no-mate-doc"},[e._v("没有找到相应的结果")]):e._e()],2),e._v(" "),e.allDoc.totalCount>e.allDoc.pageNum&&e.allDoc.allDocList.length>0?n("div",{staticClass:"page-container"},[n("div",{staticClass:"pagination pager"},[n("ul",{staticClass:"pages"},[n("li",{staticClass:"pgNext",class:{pgEmpty:1==e.allDoc.pageIndex},on:{click:function(t){e.getAllDocCustomer({num:0,value:1})}}},[e._v("首页\n                                        ")]),e._v(" "),n("li",{staticClass:"pgNext",class:{pgEmpty:1==e.allDoc.pageIndex},on:{click:function(t){e.getAllDocCustomer({num:e.allDoc.pageArr.indexOf(e.allDoc.pageIndex)-1,value:e.allDoc.pageArr[e.allDoc.pageArr.indexOf(e.allDoc.pageIndex)-1]})}}},[e._v("上一页\n                                        ")]),e._v(" "),e._l(e.allDoc.pageArr,function(t,s){return n("li",{staticClass:"page-number",class:{pgCurrent:e.allDoc.pageIndex==t},on:{click:function(n){e.getAllDocCustomer({num:s,value:t})}}},[e._v(e._s(t)+"\n                                        ")])}),e._v(" "),n("li",{staticClass:"pgNext",class:{pgEmpty:e.allDoc.pageIndex==Math.ceil(e.allDoc.totalCount/e.allDoc.pageNum)},on:{click:function(t){e.getAllDocCustomer({num:e.allDoc.pageArr.indexOf(e.allDoc.pageIndex)+1,value:e.allDoc.pageArr[e.allDoc.pageArr.indexOf(e.allDoc.pageIndex)+1]})}}},[e._v("下一页\n                                        ")]),e._v(" "),n("li",{staticClass:"pgNext",class:{pgEmpty:e.allDoc.pageIndex==Math.ceil(e.allDoc.totalCount/e.allDoc.pageNum)},on:{click:function(t){e.getAllDocCustomer({num:Math.ceil(e.allDoc.totalCount/e.allDoc.pageNum)-1,value:Math.ceil(e.allDoc.totalCount/e.allDoc.pageNum)})}}},[e._v("\n                                            末页\n                                        ")])],2)])]):e._e()])])]),e._v(" "),n("section",{directives:[{name:"show",rawName:"v-show",value:1==e.cutNum,expression:"cutNum == 1"}],staticClass:"config-suggestion-item teachingKnowledge"},[n("section",{staticClass:"check-project"},[n("section",{staticClass:"check-project-list"},e._l(e.teachingKnowledgeList,function(t,s){return n("article",{staticClass:"check-project-item",on:{click:function(t){t.stopPropagation(),e.showNext("FirstIndex",s)}}},[n("span",{class:{"icon-downArrow-big":t.children.length>0,selected:e.FirstIndex==s}},[e._v(e._s(t.knowledgeName))]),e._v(" "),t.children.length>0?n("section",{staticClass:"check-project-second-box",class:{active:e.FirstIndex==s}},e._l(t.children,function(t,s){return n("section",{staticClass:"check-project-second-item check-project-second-title",class:{"icon-downArrow":t.children.length>0,selected:e.SecondIndex==s},on:{click:function(t){t.stopPropagation(),e.showNext("SecondIndex",s)}}},[n("span",[e._v(e._s(t.knowledgeName))]),e._v(" "),t.children.length>0?n("section",{staticClass:"check-project-second-box",class:{active:e.SecondIndex==s}},e._l(t.children,function(t,s){return n("section",{staticClass:"check-project-second-item select-element",class:{"icon-downArrow":t.children.length>0,active:t.isChecked},on:{click:function(n){n.stopPropagation(),e.selectData(t,1)}}},[n("i",{staticClass:"icon-select-big"}),e._v(" "),n("span",[e._v(e._s(t.knowledgeName))]),e._v(" "),n("i",{staticClass:"icon-detail",on:{click:function(n){n.stopPropagation(),e.knowledgeId=t.knowledgeId,e.configShow=!1,e.teachingDetailsShow=!0}}},[n("span",[e._v("详情")])]),e._v(" "),t.children.length>0?n("section",{staticClass:"check-project-second-box"},e._l(t.children,function(s,i){return n("section",{staticClass:"check-project-second-item select-element",class:{"icon-downArrow":s.children.length>0,active:s.isChecked},on:{click:function(t){t.stopPropagation(),e.selectData(s,1)}}},[n("i",{staticClass:"icon-select-big"}),e._v(" "),n("span",[e._v(e._s(s.knowledgeName))]),e._v(" "),n("i",{staticClass:"icon-detail",on:{click:function(n){n.stopPropagation(),e.knowledgeId=t.knowledgeId,e.configShow=!1,e.teachingDetailsShow=!0}}},[n("span",[e._v("详情")])])])})):e._e()])})):e._e()])})):e._e()])}))])]),e._v(" "),n("section",{directives:[{name:"show",rawName:"v-show",value:2==e.cutNum,expression:"cutNum == 2"}],staticClass:"config-suggestion-item disposeSuggest"},[n("section",{staticClass:"check-project"},[n("section",{staticClass:"check-project-list"},e._l(e.disposeSuggestList,function(t,s){return n("article",{staticClass:"check-project-item",on:{click:function(t){t.stopPropagation(),e.showNext("FirstIndex",s)}}},[n("span",{class:{"icon-downArrow-big":t.children.length>0,selected:e.FirstIndex==s}},[e._v(e._s(t.treatmentName))]),e._v(" "),t.children.length>0?n("section",{staticClass:"check-project-second-box",class:{active:e.FirstIndex==s}},e._l(t.children,function(t,s){return n("section",{staticClass:"check-project-second-item check-project-second-title",class:{"icon-downArrow":t.children.length>0,selected:e.SecondIndex==s},on:{click:function(t){t.stopPropagation(),e.showNext("SecondIndex",s)}}},[n("span",[e._v(e._s(t.treatmentName))]),e._v(" "),t.children.length>0?n("section",{staticClass:"check-project-second-box",class:{active:e.SecondIndex==s}},e._l(t.children,function(t,i){return n("section",{staticClass:"check-project-second-item select-element",class:{"icon-downArrow":t.children.length>0,selected:e.ThirdIndex==i,active:t.isChecked},on:{click:function(t){t.stopPropagation(),e.showNext("ThirdIndex",i)}}},[n("i",{staticClass:"icon-select-big",on:{click:function(n){n.stopPropagation(),e.selectData(t,2)}}}),e._v(" "),n("span",[e._v(e._s(t.treatmentName))]),e._v(" "),t.children.length>0?n("section",{staticClass:"check-project-second-box",class:{active:e.ThirdIndex==s}},e._l(t.children,function(t,s){return n("section",{staticClass:"check-project-second-item select-element",class:{"icon-downArrow":t.children.length>0,selected:e.FourIndex==s,"select-disabled":!t.isSelected,active:t.isChecked}},[n("i",{staticClass:"icon-select-big",on:{click:function(n){n.stopPropagation(),t.isSelected&&e.selectData(t,2)}}}),e._v(" "),n("span",[e._v(e._s(t.treatmentName))])])})):e._e()])})):e._e()])})):e._e()])}))])]),e._v(" "),n("section",{directives:[{name:"show",rawName:"v-show",value:3==e.cutNum,expression:"cutNum == 3"}],staticClass:"config-suggestion-item examineSuggest"},[n("section",{staticClass:"check-project"},[n("section",{staticClass:"check-project-list"},e._l(e.examineSuggestList,function(t,s){return n("article",{staticClass:"check-project-item",on:{click:function(t){t.stopPropagation(),e.showNext("FirstIndex",s)}}},[n("span",{class:{"icon-downArrow-big":t.children.length>0,selected:e.FirstIndex==s}},[e._v(e._s(t.nodeName))]),e._v(" "),t.children.length>0?n("section",{staticClass:"check-project-second-box",class:{active:e.FirstIndex==s}},e._l(t.children,function(t,s){return n("section",{staticClass:"check-project-second-item check-project-second-title",class:{"icon-downArrow":t.children.length>0,selected:e.SecondIndex==s},on:{click:function(t){t.stopPropagation(),e.showNext("SecondIndex",s)}}},[n("span",[e._v(e._s(t.nodeName))]),e._v(" "),t.children.length>0?n("section",{staticClass:"check-project-second-box",class:{active:e.SecondIndex==s}},e._l(t.children,function(t,i){return n("section",{staticClass:"check-project-second-item select-element",class:{"icon-downArrow":t.children.length>0,selected:e.ThirdIndex==i,active:t.isChecked},on:{click:function(t){t.stopPropagation(),e.showNext("ThirdIndex",i)}}},[n("i",{staticClass:"icon-select-big",on:{click:function(n){n.stopPropagation(),e.selectData(t,3)}}}),e._v(" "),n("span",[e._v(e._s(t.nodeName))]),e._v(" "),t.children.length>0?n("section",{staticClass:"check-project-second-box",class:{active:e.ThirdIndex==s}},e._l(t.children,function(t,s){return n("section",{staticClass:"check-project-second-item select-element",class:{"icon-downArrow":t.children.length>0,selected:e.FourIndex==s,"select-disabled":!t.isSelected,active:t.isChecked}},[n("i",{staticClass:"icon-select-big",on:{click:function(n){n.stopPropagation(),t.isSelected&&e.selectData(t,3)}}}),e._v(" "),n("span",[e._v(e._s(t.nodeName))])])})):e._e()])})):e._e()])})):e._e()])}))])]),e._v(" "),n("section",{directives:[{name:"show",rawName:"v-show",value:4==e.cutNum,expression:"cutNum == 4"}],staticClass:"config-suggestion-item testSuggest"},[n("section",{staticClass:"check-project"},[n("section",{staticClass:"check-project-list"},e._l(e.testSuggestList,function(t,s){return n("article",{staticClass:"check-project-item",on:{click:function(t){t.stopPropagation(),e.showNext("FirstIndex",s)}}},[n("span",{class:{"icon-downArrow-big":t.children.length>0,selected:e.FirstIndex==s}},[e._v(e._s(t.inspectionName))]),e._v(" "),t.children.length>0?n("section",{staticClass:"check-project-second-box",class:{active:e.FirstIndex==s}},e._l(t.children,function(t,s){return n("section",{staticClass:"check-project-second-item check-project-second-title",class:{"icon-downArrow":t.children.length>0,selected:e.SecondIndex==s},on:{click:function(t){t.stopPropagation(),e.showNext("SecondIndex",s)}}},[n("span",[e._v(e._s(t.inspectionName))]),e._v(" "),t.children.length>0?n("section",{staticClass:"check-project-second-box",class:{active:e.SecondIndex==s}},e._l(t.children,function(t,i){return n("section",{staticClass:"check-project-second-item select-element",class:{"icon-downArrow":t.children.length>0,selected:e.ThirdIndex==i,active:t.isChecked},on:{click:function(t){t.stopPropagation(),e.showNext("ThirdIndex",i)}}},[n("i",{staticClass:"icon-select-big",on:{click:function(n){n.stopPropagation(),e.selectData(t,4)}}}),e._v(" "),n("span",[e._v(e._s(t.inspectionName))]),e._v(" "),t.children.length>0?n("section",{staticClass:"check-project-second-box",class:{active:e.ThirdIndex==s}},e._l(t.children,function(t,s){return n("section",{staticClass:"check-project-second-item select-element",class:{"icon-downArrow":t.children.length>0,selected:e.FourIndex==s,"select-disabled":!t.isSelected,active:t.isChecked}},[n("i",{staticClass:"icon-select-big",on:{click:function(n){n.stopPropagation(),t.isSelected&&e.selectData(t,4)}}}),e._v(" "),n("span",[e._v(e._s(t.inspectionName))])])})):e._e()])})):e._e()])})):e._e()])}))])])])])]):e._e(),e._v(" "),e.teachingDetailsShow?n("teachingDetail",{attrs:{knowledgeId:e.knowledgeId,knowledgeShow:e.teachingDetailsShow},on:{"update:knowledgeShow":function(t){e.teachingDetailsShow=t},goBack:e.teachingGoBack}}):e._e()],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",[n("h2",[e._v("自定义建议")]),e._v(" "),n("p",[e._v("可通过下列标签选择建议类型")])])}]}},pdQW:function(e,t,n){var s,i;s=[n("bXvV")],void 0!==(i=function(e){var t=function(t){var n={};this.options=e.extend(!0,n,t),this.init()};return t.prototype={init:function(){this.tabsChange(),this.options.addBtn&&this.addTabsViewer()},tabsChange:function(){var t=this,n=this.options.tabsInner.find(".active").attr("data-role");this.options.views.find("[data-role]").hide(),this.options.views.find("[data-role='"+n+"']").show(),this.options.tabsInner.on("click",".tabsItem",function(){var n=e(this).attr("data-role");e(this).addClass("active").siblings().removeClass("active"),t.options.views.find("[data-role]").hide(),t.options.views.find("[data-role="+n+"]").show(),t.options.changeCallback&&t.options.changeCallback()})},addTabsViewer:function(){var t=this;this.options.addBtn.on("click",function(){var n="";if("function"==typeof t.options.newTemplate&&(n=t.options.newTemplate()),Array.isArray(n))e(n).each(function(e,n){var s=t.options.views.find("[data-role]").size()+1;t.elementGenerator(n,s)});else{var s=t.options.views.find("[data-role]").size()+1;t.elementGenerator(n,s)}})},elementGenerator:function(t,n){var s=this.options.tabsInner.children().get(0),i=this.options.views.children().get(0),a=s.nodeName.toLowerCase(),o=i.nodeName.toLowerCase(),r=document.createElement(a),c=document.createElement(o),l=s.className,u=i.className,d=s.getAttribute("data-role").split("-")[0];e(r).addClass(l).attr("data-role",d+"-"+n).html(t.tabs).appendTo(this.options.tabsInner),e(c).addClass(u).attr("data-role",d+"-"+n).html(t.view).appendTo(this.options.views).hide()}},t}.apply(t,s))&&(e.exports=i)},"q/Kx":function(e,t,n){"use strict";function s(){var e={isValid:1,firstResult:0,maxResult:99999,customerId:""};if(f.getPara().openId||(void 0!==f.getPara().patientCustomerId?e.customerId=f.getPara().patientCustomerId:void 0!==f.getPara().customerId?e.customerId=f.getPara().customerId:e.customerId=0),parseInt(e.customerId)>0)return!0;Object(p.a)({url:"/mcall/patient/customer/unite/v1/getById/",method:"POST",data:e,beforeSend:function(){},timeOut:2e3,done:function(t){if(localStorage.setItem("customerBaseInfo_one",y()(t)),t&&t.responseObject&&t.responseObject.responseData&&t.responseObject.responseData.dataList){var n=t.responseObject.responseData.dataList.patientCustomerUnite.mobile;if(n&&n.length>0)return!0;sessionStorage.setItem("loginBack",window.location.href),window.location.href="/dist/login.html?customerId="+e.customerId}}})}var i=n("T7Jh"),a=n.n(i),o=n("Sxqw"),r=n.n(o),c=n("dbJu"),l=n.n(c),u=n("HFN4"),d=n.n(u),p=n("ogYJ"),m=function(){function e(){l()(this,e)}return d()(e,[{key:"getPara",value:function(e){var t=window.location.origin+window.location.pathname+window.location.search,n={},s=void 0,i=void 0;if(t.lastIndexOf(e||"?")>0){s=t.substring(t.lastIndexOf(e||"?")+1,t.length);for(var a=s.split("&"),o=0;o<a.length;o++)i=a[o].split("="),n[i[0]]=decodeURIComponent(i[1])}return n}}]),e}(),f=new m,g=function(){function e(){l()(this,e)}return d()(e,[{key:"checkOpenId",value:function(){var e=localStorage.getItem("openId"),t="";return null!=e?t=!0:(t=!1,sessionStorage.getItem("count")&&sessionStorage.getItem("count").length>0&&sessionStorage.removeItem("count")),t}},{key:"isWXBrowse",value:function(){var e=navigator.userAgent.toLowerCase();return"micromessenger"==e.match(/MicroMessenger/i)&&e.indexOf("iphone")>0?"iphoneWX":"micromessenger"==e.match(/MicroMessenger/i)&&e.indexOf("android")>0?"androidWX":"other"}},{key:"wxGetOpenId",value:function(){var e="",t="",n=window.location.origin+window.location.pathname+window.location.search,s=encodeURIComponent(n),i="";if(window.location.origin.includes("localhost"))return!1;i=window.location.hostname.includes("m1")?2:1,1==i?(e="wxe8384f7b06c169ef",t="http://m.allinmed.cn/mcall/wx/tocure/interact/v1/view/"):2==i&&(e="wxaa5288ad7f627608",t="http://m1.allinmed.cn/mcall/wx/tocure/interact/v1/view/");var a="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+e+"&redirect_uri="+s+"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect";if(f.getPara().code)-1===window.location.href.indexOf("openId")&&(window.location.href=t+"?ref="+localStorage.getItem("currentUrl")+"&response_type=code&scope=snsapi_base&state=pay&code="+f.getPara().code+"#wechat_redirect");else if(-1!==window.location.href.indexOf("openId")){var o=sessionStorage.getItem("count");o||(sessionStorage.setItem("count",1),localStorage.getItem("currentUrl")&&-1!=localStorage.getItem("currentUrl").indexOf("?")?window.location.href=localStorage.getItem("currentUrl")+"&openId="+f.getPara().openId:window.location.href=localStorage.getItem("currentUrl")+"?openId="+f.getPara().openId,localStorage.setItem("openId",f.getPara().openId))}else localStorage.setItem("currentUrl",n),window.location.href=a}}]),e}(),h=new g,v=n("3SZ7"),y=n.n(v),b=(n("5XB1"),function(){function e(){l()(this,e),this.removeByValue=function(e,t){for(var n=0;n<this.length;n++)if(e[n]==val){e.splice(n,1);break}return e}}return d()(e,[{key:"ajax",value:function(e){Object(p.a)(e)}},{key:"getPara",value:function(e){var t=window.location.origin+window.location.pathname+window.location.search,n={},s=void 0,i=void 0;if(t.lastIndexOf(e||"?")>0){s=t.substring(t.lastIndexOf(e||"?")+1,t.length);for(var a=s.split("&"),o=0;o<a.length;o++)i=a[o].split("="),n[i[0]]=decodeURIComponent(i[1])}return n}},{key:"getCookie",value:function(e){var t=void 0,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(n))?decodeURIComponent(t[2]):null}},{key:"removeDub",value:function(e){return[].concat(r()(new a.a(e)))}},{key:"isWXBrowse",value:function(){return h.isWXBrowse()}},{key:"getByteLen",value:function(e){for(var t=0,n=0;n<e.length;n++)null!==e[n].match(/[^\x00-\xff]/gi)?t+=2:t+=1;return t}},{key:"getStrByteLen",value:function(e,t){for(var n="",s=0,i=0;i<e.length&&(e.charCodeAt(i)>128?s+=2:s++,s<=t);i++)n=n.concat(e[i]);return s>t&&(n+=""),n}},{key:"getConnectType",value:function(){var e=navigator.connection||navigator.mozConnection||navigator.webkitConnection||{tyep:"unknown"},t=["unknown","ethernet","wifi","2g","3g","4g","none"],n=this.isWXBrowse(),s=navigator.userAgent;return"number"==typeof e.type?e.type_text=t[e.type]:"androidWX"===n?"WIFI"!==e.type||"wifi"!==e.type?s.indexOf("WIFI")>0?e.type_text="wifi":e.type_text="other":e.type_text=e.type:"iphoneWX"===n?s.indexOf("WIFI")>0?e.type_text="wifi":e.type_text="other":"undefined"!==e.type?e.type_text=e.type:e.type_text="other","number"==typeof e.bandwidth&&(e.bandwidth>10?e.type="wifi":e.bandwidth>2?e.type="3g":e.bandwidth>0?e.type="2g":0==e.bandwidth?e.type="none":e.type="unknown"),"wifi"==e.type_text?1:0}},{key:"checkOpenId",value:function(){return h.checkOpenId()}},{key:"wxGetOpenId",value:function(){h.wxGetOpenId()}},{key:"mobileCheck",value:function(){s()}},{key:"timeFormate",value:function(e){var t=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],n=e.time.substring(0,10).replace(/\-/g,"/"),s=new Date(n).getDay(),i="",a="",o=t[s],r=e.time.substring(11,16);switch(parseInt(e.type)){case 1:i=e.time.substring(0,4)+"年"+e.time.substring(5,7)+"月"+e.time.substring(8,10)+"日",a=e.time.substring(5,7)+"月"+e.time.substring(8,10)+"日";break;case 2:i=e.time.substring(0,4)+"."+e.time.substring(5,7)+"."+e.time.substring(8,10),a=e.time.substring(5,7)+"."+e.time.substring(8,10)}return{year:i,years:a,week:o,hour:r}}},{key:"MillisecondToDate",value:function(e){var t=parseFloat(e)/1e3;return null!=t&&""!=t?t>60&&t<3600?t=parseInt(t/60)+"分钟":t>=3600&&t<86400?t=parseInt(t/3600)+"小时"+parseInt(60*(parseFloat(t/3600)-parseInt(t/3600)))+"分钟":t>=86400&&(t=Math.round(parseInt(t/86400))+"天"):t="0 时 0 分0 秒",t}},{key:"MillisecondToDateNew",value:function(e){var t=parseFloat(e)/1e3;return t=null!=t&&""!=t?t>60&&t<3600?parseInt(t/60)+"分钟":t>=3600&&t<86400?parseInt(t/3600)+"小时":parseInt(t)+"秒":"0 时 0 分0 秒"}}]),e}()),w=new b;!function(){Array.prototype.removeByValue=function(e){for(var t=0;t<this.length;t++)if(this[t]==e){this.splice(t,1);break}}}();t.a=w},qTX7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("ogYJ"),i=n("q/Kx"),a=n("wtEF"),o={usedList:"/call/customer/comm/reply/v1/getMapList/",update:"/call/customer/comm/reply/v1/save/"};t.default={data:function(){return{replyList:[],fixFlagList:{"-1":!1},fixContentList:{"-1":""},fixDeleteList:{"-1":!1}}},mounted:function(){this.getReplyList()},methods:{toggleDeleteModal:function(e){for(var t in this.fixDeleteList)this.fixDeleteList[t]=!1;this.fixDeleteList[e]=!0},getReplyList:function(){var e=this;a.a.commit("startLoading"),Object(s.a)({url:o.usedList,method:"POST",data:{customerId:this.$store.state.userId,isValid:"1",firstResult:"0",maxResult:"9999"},done:function(t){if(t.responseObject.responseData){a.a.commit("stopLoading");var n=t.responseObject.responseData.dataList;n&&0!==n.length&&(e.replyList=n.reverse(),n.forEach(function(t,n){e.$set(e.fixFlagList,n,!1),e.$set(e.fixContentList,n,""),e.$set(e.fixDeleteList,n,!1)}))}}})},contentLimit:function(e){i.a.getByteLen(this.fixContentList[e])>200&&(this.fixContentList[e]=i.a.getStrByteLen(this.fixContentList[e],200))},deleteCallback:function(e,t){var n=this;a.a.commit("startLoading"),Object(s.a)({url:o.update,method:"POST",data:{id:e.id,isValid:"0"},done:function(s){s.responseObject.responseStatus&&(a.a.commit("stopLoading"),n.replyList.removeByValue(e),n.fixDeleteList[t]=!1,delete n.fixContentList[n.replyList.length],delete n.fixFlagList[n.replyList.length])}})},createNewItem:function(e){var t=this,n=this.fixContentList[e],i={};if(0===n.length)return t.fixFlagList[e]=!1,void(t.fixContentList[e]="");i=-1==e?{customerId:this.$store.state.userId,replyContent:n,isValid:"1"}:{id:this.replyList[e].id,replyContent:n,isValid:"1"},a.a.commit("startLoading"),Object(s.a)({url:o.update,method:"POST",data:i,done:function(s){s.responseObject.responseStatus&&(a.a.commit("stopLoading"),-1==e?t.replyList.unshift({replyContent:n,id:s.responseObject.responsePk,customerId:t.$store.state.userId,sortId:s.responseObject.responseData.dataList.sortId}):t.replyList[e].replyContent=n,t.fixFlagList[e]=!1,t.fixContentList[e]="",t.$set(t.fixFlagList,t.replyList.length-1,!1),t.$set(t.fixContentList,t.replyList.length-1,""),t.$set(t.fixDeleteList,t.replyList.length-1,!1))}})}},props:{}}},qW7d:function(e,t){},qYbu:function(e,t,n){function s(e){n("WStQ")}var i=n("eEuR")(n("T//y"),n("fYcu"),s,"data-v-6b7b53ea",null);e.exports=i.exports},rH9I:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"viewItem medical-record-form-item",attrs:{id:"nowSick"}},[n("form",{attrs:{action:""}},[n("section",{staticClass:"main-sick medical-record-main"},[n("input",{staticClass:"J-mainSickId",attrs:{type:"hidden",value:""}}),e._v(" "),n("article",{staticClass:"main-sick-describe"},[n("section",{directives:[{name:"show",rawName:"v-show",value:""!=e.treatmentName,expression:"treatmentName != ''"}],staticClass:"mt20"},[n("span",{staticClass:"main-title"},[e._v("曾就诊情况：")]),n("span",{staticClass:"main-text J-caseMain"},[e._v(e._s(e.treatmentName+" "+e.illnessName))])]),e._v(" "),n("section",{directives:[{name:"show",rawName:"v-show",value:""!=e.takeMedicine,expression:"takeMedicine != ''"}],staticClass:"mt20"},[n("span",{staticClass:"main-title"},[e._v("服用药物：")]),n("span",{staticClass:"main-text J-caseAlong"},[e._v(e._s(e.takeMedicine))])])]),e._v(" "),n("article",{staticClass:"main-sick-product"},[e._m(0),e._v(" "),n("section",[n("ul",[n("li",[n("span",{staticClass:"main-title"},[e._v("产生诱因")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.produceReason,expression:"produceReason"}],staticClass:"main-sick-input J-produceReason",attrs:{type:"text",placeholder:"请填写",maxlength:"50"},domProps:{value:e.produceReason},on:{input:function(t){t.target.composing||(e.produceReason=t.target.value)}}})]),e._v(" "),n("li",[n("span",{staticClass:"main-title"},[e._v("症状")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.produceSymptomsId,expression:"produceSymptomsId"}],staticClass:"select-100 J-produceSymptomsId",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.produceSymptomsId=t.target.multiple?n:n[0]}}},e._l(e.produceSymptomsList,function(t){return n("option",{domProps:{value:t.produceSymptomsId}},[e._v(e._s(t.produceSymptomsName))])}))]),e._v(" "),n("li",[n("span",{staticClass:"main-title"},[e._v("程度")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.produceLevelId,expression:"produceLevelId"}],staticClass:"select-100 J-produceLevelId",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.produceLevelId=t.target.multiple?n:n[0]}}},e._l(e.produceLevelList,function(t){return n("option",{domProps:{value:t.produceLevelId}},[e._v(e._s(t.produceLevelName))])}))]),e._v(" "),n("li",[n("span",{staticClass:"main-title"},[e._v("何时加重")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.produceSharpenId,expression:"produceSharpenId"}],staticClass:"J-produceSharpenId",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.produceSharpenId=t.target.multiple?n:n[0]}}},e._l(e.produceSharpenList,function(t){return n("option",{domProps:{value:t.produceSharpenId}},[e._v(e._s(t.produceSharpenName))])})),n("span",{staticClass:"main-title ml20"},[e._v("何时缓解")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.produceRemitId,expression:"produceRemitId"}],staticClass:"J-produceRemitId",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.produceRemitId=t.target.multiple?n:n[0]}}},e._l(e.produceRemitList,function(t){return n("option",{domProps:{value:t.produceRemitId}},[e._v(e._s(t.produceRemitName))])}))]),e._v(" "),n("li",[n("span",{staticClass:"main-title"},[e._v("治疗情况")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.produceTreatment,expression:"produceTreatment"}],staticClass:"select-120 J-produceTreatment",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.produceTreatment=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"0"}},[e._v("请选择")]),e._v(" "),n("option",{attrs:{value:"1"}},[e._v("没治疗过")]),e._v(" "),n("option",{attrs:{value:"2"}},[e._v("针灸")]),e._v(" "),n("option",{attrs:{value:"3"}},[e._v("理疗")]),e._v(" "),n("option",{attrs:{value:"4"}},[e._v("外敷膏药")]),e._v(" "),n("option",{attrs:{value:"5"}},[e._v("内服药物")]),e._v(" "),n("option",{attrs:{value:"6"}},[e._v("打针")]),e._v(" "),n("option",{attrs:{value:"7"}},[e._v("手术")]),e._v(" "),n("option",{attrs:{value:"8"}},[e._v("其他")])]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.produceTreatment2,expression:"produceTreatment2"}],staticClass:"select-120 ml15 J-produceTreatment-2",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.produceTreatment2=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"0"}},[e._v("请选择")]),e._v(" "),n("option",{attrs:{value:"1"}},[e._v("没有效果")]),e._v(" "),n("option",{attrs:{value:"2"}},[e._v("有轻微好转")]),e._v(" "),n("option",{attrs:{value:"3"}},[e._v("有明显好转")])])])])])]),e._v(" "),n("article",{staticClass:"main-sick-aggravate"},[e._m(1),e._v(" "),n("section",[n("ul",[n("li",[n("span",{staticClass:"main-title"},[e._v("加重诱因")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.aggravateReason,expression:"aggravateReason"}],staticClass:"main-sick-input J-aggravateReason",attrs:{type:"text",placeholder:"请填写",maxlength:"50"},domProps:{value:e.aggravateReason},on:{input:function(t){t.target.composing||(e.aggravateReason=t.target.value)}}})]),e._v(" "),n("li",[n("span",{staticClass:"main-title"},[e._v("症状")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.aggravateSymptomsId,expression:"aggravateSymptomsId"}],staticClass:"J-aggravateSymptomsId",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.aggravateSymptomsId=t.target.multiple?n:n[0]}}},e._l(e.aggravateSymptomsList,function(t){return n("option",{domProps:{value:t.aggravateSymptomsId}},[e._v(e._s(t.aggravateSymptomsName))])})),n("span",{staticClass:"main-title ml20"},[e._v("程度")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.aggravateLevelId,expression:"aggravateLevelId"}],staticClass:"J-aggravateLevelId",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.aggravateLevelId=t.target.multiple?n:n[0]}}},e._l(e.aggravateLevelList,function(t){return n("option",{domProps:{value:t.aggravateLevelId}},[e._v(e._s(t.aggravateLevelName))])}))]),e._v(" "),n("li",[n("span",{staticClass:"main-title"},[e._v("何时加重")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.aggravateSharpenId,expression:"aggravateSharpenId"}],staticClass:"J-aggravateSharpenId",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.aggravateSharpenId=t.target.multiple?n:n[0]}}},e._l(e.aggravateSharpenList,function(t){return n("option",{domProps:{value:t.aggravateSharpenId}},[e._v(e._s(t.aggravateSharpenName))])})),n("span",{staticClass:"main-title ml20"},[e._v("何时缓解")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.aggravateRemitId,expression:"aggravateRemitId"}],staticClass:"J-aggravateRemitId",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.aggravateRemitId=t.target.multiple?n:n[0]}}},e._l(e.aggravateRemitList,function(t){return n("option",{domProps:{value:t.aggravateRemitId}},[e._v(e._s(t.aggravateRemitName))])}))]),e._v(" "),n("li",[n("span",{staticClass:"main-title"},[e._v("治疗情况")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.aggravateTreatment,expression:"aggravateTreatment"}],staticClass:"select-120 J-aggravateTreatment",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.aggravateTreatment=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"0"}},[e._v("请选择")]),e._v(" "),n("option",{attrs:{value:"1"}},[e._v("没治疗过")]),e._v(" "),n("option",{attrs:{value:"2"}},[e._v("针灸")]),e._v(" "),n("option",{attrs:{value:"3"}},[e._v("理疗")]),e._v(" "),n("option",{attrs:{value:"4"}},[e._v("外敷膏药")]),e._v(" "),n("option",{attrs:{value:"5"}},[e._v("内服药物")]),e._v(" "),n("option",{attrs:{value:"6"}},[e._v("打针")]),e._v(" "),n("option",{attrs:{value:"7"}},[e._v("手术")]),e._v(" "),n("option",{attrs:{value:"8"}},[e._v("其他")])]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.aggravateTreatment2,expression:"aggravateTreatment2"}],staticClass:"select-120 ml15 J-aggravateTreatment-2",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.aggravateTreatment2=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"0"}},[e._v("请选择")]),e._v(" "),n("option",{attrs:{value:"1"}},[e._v("没有效果")]),e._v(" "),n("option",{attrs:{value:"2"}},[e._v("有轻微好转")]),e._v(" "),n("option",{attrs:{value:"3"}},[e._v("有明显好转")])])])])])]),e._v(" "),n("article",[e._m(2),e._v(" "),n("section",[n("ul",[n("li",[n("span",{staticClass:"main-title"},[e._v("睡眠状况")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.sleepId,expression:"sleepId"}],staticClass:"J-sleepId",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.sleepId=t.target.multiple?n:n[0]}}},e._l(e.sleepList,function(t){return n("option",{domProps:{value:t.sleepId}},[e._v(e._s(t.sleepName))])})),n("span",{staticClass:"main-title ml20"},[e._v("精神状态")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.spiritId,expression:"spiritId"}],staticClass:"J-spiritId",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.spiritId=t.target.multiple?n:n[0]}}},e._l(e.spiritList,function(t){return n("option",{domProps:{value:t.spiritId}},[e._v(e._s(t.spiritName))])}))]),e._v(" "),n("li",[n("span",{staticClass:"main-title"},[e._v("食欲状况")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.appetiteId,expression:"appetiteId"}],staticClass:"J-appetiteId",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.appetiteId=t.target.multiple?n:n[0]}}},e._l(e.appetiteList,function(t){return n("option",{domProps:{value:t.appetiteId}},[e._v(e._s(t.appetiteName))])})),n("span",{staticClass:"main-title ml20"},[e._v("体重状况")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.weightId,expression:"weightId"}],staticClass:"J-weightId",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.weightId=t.target.multiple?n:n[0]}}},e._l(e.weightList,function(t){return n("option",{domProps:{value:t.weightId}},[e._v(e._s(t.weightName))])}))]),e._v(" "),n("li",[n("span",{staticClass:"main-title"},[e._v("排泄状况")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.excretionId,expression:"excretionId"}],staticClass:"J-excretionId",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.excretionId=t.target.multiple?n:n[0]}}},e._l(e.excretionList,function(t){return n("option",{domProps:{value:t.excretionId}},[e._v(e._s(t.excretionName))])}))])])])]),e._v(" "),n("footer",[n("button",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.userListStatus.second&&(6==e.$store.state.currentItem.consultationState||-1==e.$store.state.currentItem.consultationState||0==e.$store.state.currentItem.consultationState||9==e.$store.state.currentItem.consultationState||10==e.$store.state.currentItem.consultationState),expression:"$store.state.userListStatus.second && ($store.state.currentItem.consultationState == 6||$store.state.currentItem.consultationState == -1||$store.state.currentItem.consultationState ==0||$store.state.currentItem.consultationState ==9||$store.state.currentItem.consultationState ==10)"}],staticClass:"detail-saveBtn",attrs:{type:"button"},on:{click:e.saveData}},[e._v("保存")])])])]),e._v(" "),e.popupShow?n("popup",{attrs:{obj:e.popupObj,payPopupShow:e.popupShow},on:{"update:obj":function(t){e.popupObj=t},"update:payPopupShow":function(t){e.popupShow=t}}}):e._e()],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",[n("h2",[e._v("症状产生")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",[n("h2",[e._v("主要症状加重")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",[n("h2",[e._v("其他信息")])])}]}},rIT9:function(e,t,n){function s(e){n("HOSe")}var i=n("eEuR")(n("Ee/u"),n("4yHy"),s,null,null);e.exports=i.exports},rIed:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("ogYJ"),i=n("Iqo+"),a=n.n(i),o={update:"/call/customer/patient/case/remark/v1/create/",list:"/call/customer/patient/case/remark/v1/getMapList/",deleteList:"/call/customer/patient/case/remark/v1/update/"};t.default={data:function(){return{showRecord:!1,showAdd:!1,showConfirm:!1,showConfirmIndex:"",addType:"add",remarkValue:"",remarkId:"",remarkList:[]}},mounted:function(){this.getRemarkList()},watch:{"$store.state.currentItem":function(){this.showRecord=!1,this.getRemarkList()},showRecord:function(){this.showRecord?(console.log(document.body.clientWidth),document.body.clientWidth<1500?document.querySelector(".medical-record-form").style.cssText="height:30%;":document.querySelector(".medical-record-form").style.cssText="height:45%;"):document.body.clientWidth<1500?document.querySelector(".medical-record-form").style.cssText="height:65%;":document.querySelector(".medical-record-form").style.cssText="height:80%;"}},methods:{getRemarkList:function(){var e=this;Object(s.a)({url:o.list,method:"POST",data:{caseId:e.$store.state.caseId,isValid:"1",firstResult:"0",maxResult:"9999"},done:function(t){t.responseObject.responseData&&(t.responseObject.responseData.dataList&&t.responseObject.responseData.dataList.length>0?e.remarkList=t.responseObject.responseData.dataList.reverse():e.remarkList=[])}})},getTime:function(e){if(e.time)return e.time;var t=e.createTime.replace(/-/g,"/"),n=t.substring(2,10);return n.substring(0,2)+"/"+(0===n.substring(3,5).indexOf("0")?n.substring(4,5):n.substring(3,5))+"/"+n.substring(6,8)+t.substring(10).substring(0,6)},addRemark:function(){var e=this;e.remarkValue.trim()&&("add"==this.addType?Object(s.a)({url:o.update,method:"POST",data:{patientId:e.$store.state.patientId,caseId:e.$store.state.caseId,operatorId:e.$store.state.userId,operatorType:"1",remarkContent:e.remarkValue},done:function(t){if(t.responseObject.responseStatus){var n=new Date,s=n.getFullYear(),i=n.getMonth(),a=n.getDate(),o=n.getHours(),r=n.getMinutes(),c=(s+"").substring(2)+"/"+(0===i?1:i)+"/"+a+" "+o+":"+(1==r.length?"0"+r:r);e.showAdd=!e.showAdd,e.remarkList.unshift({remarkContent:e.remarkValue,time:c,id:t.responseObject.responsePk})}}}):"update"==this.addType&&Object(s.a)({url:o.deleteList,method:"POST",data:{id:e.remarkId,remarkContent:e.remarkValue},done:function(t){t.responseObject.responseStatus&&(e.getRemarkList(),e.showAdd=!e.showAdd)}}))},deleteRemark:function(e){var t=this;Object(s.a)({url:o.deleteList,method:"POST",data:{id:e.id,isValid:"0"},done:function(n){n.responseObject.responseStatus&&(t.showConfirm=!t.showConfirm,t.remarkList.forEach(function(n,s){if(e.id==n.id)return t.remarkList.splice(s,1),!1}))}})}},components:{confirm:a.a},computed:{ConfirmContent:function(){return"确定删除该条分诊记录吗?"}},props:{}}},rduQ:function(e,t,n){function s(e){n("KKg4")}var i=n("eEuR")(n("h/b/"),n("5d7o"),s,"data-v-26f5be7e",null);e.exports=i.exports},rxNA:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"main-masker config-suggestion check-suggestion disease-teach-detail on show",on:{click:function(t){e.closeSelect()}}},[n("section",{directives:[{name:"show",rawName:"v-show",value:e.homePageShow,expression:"homePageShow"}],staticClass:"check-suggestion-box"},[n("i",{staticClass:"icon-close window-close",on:{click:function(t){e.closeWindow()}}}),e._v(" "),e._m(0),e._v(" "),n("section",{staticClass:"check-suggestion-inner"},[e._m(1),e._v(" "),n("nav",{staticClass:"search-sortType"},[n("down-select",{attrs:{dataListInfo:e.partList,dataBack:e.partListResult,iconFlag:e.showIconFlag,conIndex:1,currentIndexNow:e.currentSelectorIndex},on:{"update:dataListInfo":function(t){e.partList=t},"update:dataBack":function(t){e.partListResult=t},"update:iconFlag":function(t){e.showIconFlag=t},"update:currentIndexNow":function(t){e.currentSelectorIndex=t}}}),e._v(" "),n("down-select",{attrs:{dataListInfo:e.sickness,dataBack:e.sicknessResult,iconFlag:e.showIconFlag,conIndex:2,currentIndexNow:e.currentSelectorIndex},on:{"update:dataListInfo":function(t){e.sickness=t},"update:dataBack":function(t){e.sicknessResult=t},"update:iconFlag":function(t){e.showIconFlag=t},"update:currentIndexNow":function(t){e.currentSelectorIndex=t}}}),e._v(" "),n("down-select",{attrs:{dataListInfo:e.progressList,dataBack:e.progressResult,iconFlag:e.showIconFlag,conIndex:3,currentIndexNow:e.currentSelectorIndex},on:{"update:dataListInfo":function(t){e.progressList=t},"update:dataBack":function(t){e.progressResult=t},"update:iconFlag":function(t){e.showIconFlag=t},"update:currentIndexNow":function(t){e.currentSelectorIndex=t}}}),e._v(" "),e.operationShowFlag?n("down-select",{attrs:{dataListInfo:e.operationList,iconFlag:e.showIconFlag,dataBack:e.operationListResult,conIndex:4,currentIndexNow:e.currentSelectorIndex},on:{"update:dataListInfo":function(t){e.operationList=t},"update:iconFlag":function(t){e.showIconFlag=t},"update:dataBack":function(t){e.operationListResult=t},"update:currentIndexNow":function(t){e.currentSelectorIndex=t}}}):e._e(),e._v(" "),e.operationShowFlag?e._e():n("section",{staticClass:"search-sortType-item"},[e._m(2)])],1),e._v(" "),n("section",{staticClass:"search-suggestion-footer"},[n("button",{staticClass:"search-next",class:{disable:e.nextFlag},attrs:{type:"button"},on:{click:function(t){!e.nextFlag&&e.toNextPage()}}},[e._v("下一步")])])])]),e._v(" "),e.nextPageShow?n("diagnosiSecond",{attrs:{maskerShow:e.nextPageShow,checkData:e.nextPageDate},on:{"update:maskerShow":function(t){e.nextPageShow=t},closeWindow:e.closeWindow,goBackCheck:function(t){e.nextPageShow=!1,e.homePageShow=!0}}}):e._e()],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"check-suggestion-title"},[n("article",[n("h2",[e._v("初诊建议")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"check-suggestion-title"},[n("h2",[e._v("初步诊断：")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{staticClass:"search-selector"},[n("input",{staticClass:"custom-selector-title firstListTitle",attrs:{placeholder:"手术建议",readonly:""}}),e._v(" "),n("i",{staticClass:"icon-downArrow"})])}]}},sHKm:function(e,t){},sI63:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"check-history-modules"},[n("section",{staticClass:"maskers infoBox-tips show"},[n("section",{staticClass:"infoBox-inner"},[n("article",{staticClass:"infoBox-content"},[n("section",[n("h2",[e._v(e._s(e.$store.state.patientName)+"咨询历史")])])]),e._v(" "),n("section",{staticClass:"check-history"},[e._m(0),e._v(" "),n("ul",e._l(e.diagnoseHistoryList,function(t,s){return n("li",[n("section",{staticClass:"check-history-info"},[n("span",{staticClass:"check-history-title",on:{click:function(n){if(n.target!==n.currentTarget)return null;e.chatHistoryRecord(0,1,t,s)}}},[n("i",{staticClass:"icon-downArrow",on:{click:function(n){if(n.target!==n.currentTarget)return null;e.chatHistoryRecord(0,1,t,s)}}}),e._v(e._s(t.mainContent.caseMain))]),e._v(" "),n("span",{staticClass:"check-history-text"},[e._v(e._s(e._f("timeFormatCheckHistory")(t.createTime)))])]),e._v(" "),n("article",{directives:[{name:"show",rawName:"v-show",value:e.chatHistoryRecordList.length>0,expression:"chatHistoryRecordList.length >0"}],staticClass:"check-history-show",class:{on:s==e.currentIndex}},[n("h3",[e._v("咨询对话历史")]),e._v(" "),n("section",{staticClass:"check-history-talk"},[n("ul",e._l(e.chatHistoryRecordList,function(t){return n("li",[n("article",["1_doctor00001"==t.fromAccount&&e.filterInfo(t)?n("header",{staticClass:"doctor-letter"},[e._v("\n                                                "+e._s("分诊医生 "+t.createTime.replace(/-/g,"/").substr(0,t.createTime.replace(/-/g,"/").length-2))+"\n                                            ")]):e._e(),e._v(" "),"1_doctor00001"!=t.fromAccount&&e.filterInfo(t)?n("header",[e._v("\n                                                "+e._s(e.$store.state.patientName+" "+t.createTime.replace(/-/g,"/").substr(0,t.createTime.replace(/-/g,"/").length-2))+"\n                                            ")]):e._e(),e._v(" "),"text"===t.msgType.toLowerCase()?n("p",[e._v(e._s(t.body))]):e._e(),e._v(" "),"custom"===t.msgType.toLowerCase()&&"previewSuggestion"==JSON.parse(t.body.substring(1,t.body.length-1)).type?n("figure",{on:{click:function(n){n.stopPropagation(),e.updateShow(t)}}},[n("figcaption",{staticClass:"check-suggestion-message"},[n("header",{staticClass:"check-suggestion-message-title"},[e._v("初诊建议")]),e._v(" "),n("section",{staticClass:"preview-suggestion-content"},[e._m(1,!0),e._v(" "),Array.isArray(JSON.parse(t.body.substring(1,t.body.length-1)).data)?e._l(JSON.parse(t.body.substring(1,t.body.length-1)).data,function(t){return n("section",{staticClass:"preview-suggestion-content-text"},[n("header",{staticClass:"preview-suggestion-title"},[e._v(e._s(t.createTime))]),e._v(" "),n("p",{staticClass:"preview-suggestion-result"},[e._v(e._s(t.illnessName))])])}):e._e(),e._v(" "),JSON.parse(t.body.substring(1,t.body.length-1)).data&&!Array.isArray(JSON.parse(t.body.substring(1,t.body.length-1)).data)?[n("section",{staticClass:"preview-suggestion-content-text"},[n("header",{staticClass:"preview-suggestion-title"},[e._v("\n                                                                    "+e._s(JSON.parse(t.body.substring(1,t.body.length-1)).data.createTime)+"\n                                                                ")]),e._v(" "),n("p",{staticClass:"preview-suggestion-result"},[e._v("\n                                                                    "+e._s(JSON.parse(t.body.substring(1,t.body.length-1)).data.illnessName))])])]:e._e()],2)])]):e._e(),e._v(" "),"custom"===t.msgType.toLowerCase()&&"checkSuggestion"==JSON.parse(t.body.substring(1,t.body.length-1)).type?n("figure",[n("figcaption",{staticClass:"check-suggestion-message"},[n("header",{staticClass:"check-suggestion-message-title"},[e._v("检查/检验建议")]),e._v(" "),"custom"===t.msgType.toLowerCase()?[n("section",{staticClass:"check-suggestion-content"},e._l(JSON.parse(t.body.substring(1,t.body.length-1)).data,function(t){return n("article",{staticClass:"check-suggestion-item"},[n("span",[e._v(e._s(t.adviceName))])])}))]:e._e()],2)]):e._e(),e._v(" "),"custom"===t.msgType.toLowerCase()&&"videoTriage"==JSON.parse(t.body.substring(1,t.body.length-1)).type?n("figure",[n("figcaption",{staticClass:"check-suggestion-message"},[n("header",{staticClass:"check-suggestion-message-title"},[e._v("视诊")]),e._v(" "),n("section",{staticClass:"check-suggestion-content"},[n("article",{staticClass:"check-suggestion-item"},[n("span",[e._v(e._s(JSON.parse(t.body.substring(1,t.body.length-1)).data.content)+" ")])])])])]):e._e(),e._v(" "),"custom"===t.msgType.toLowerCase()&&"ensureOperation"==JSON.parse(t.body.substring(1,t.body.length-1)).type?n("figure",[n("figcaption",{staticClass:"messageList-item-text"},[e._v("你好，分诊医生已收到您的全部信息，正在帮您预约' + "+e._s(t.doctorName)+" + '医生，会在12小时内给您答复。\n                                                    "),n("span",[e._v("立即咨询>")])])]):e._e(),e._v(" "),6==t.messageType?n("figure",[n("figcaption",{staticClass:"messageList-item-text file"},[n("section",{on:{click:function(n){e.showPDF(t.attUrl)}}},[e._m(2,!0),e._v(" "),n("figure",{staticClass:"fileInfo"},[n("p",{staticClass:"fileName"},[e._v(e._s(JSON.parse(t.ext.substring(1,t.ext.length-1)).name))])])])])]):e._e(),e._v(" "),1==t.messageType?n("figure",[n("figcaption",{staticClass:"messageList-item-text"},[n("img",{staticClass:"img-show",attrs:{src:t.attUrl}})])]):e._e(),e._v(" "),38==t.messageType?n("figure",[n("section",{staticClass:"multiple"},[n("div",{staticClass:"multiple-header"},[n("i",{staticClass:"icon-img"}),n("span",[e._v("图片")]),n("span",[e._v(e._s("("+JSON.parse(t.body.substring(1,t.body.length-1)).data.list.length+")"))])]),e._v(" "),JSON.parse(t.body.substring(1,t.body.length-1)).data.list.length>0?n("section",{staticClass:"imgList"},[n("ul",e._l(JSON.parse(t.body.substring(1,t.body.length-1)).data.list,function(e,t){return n("li",[n("img",{attrs:{src:e.url}})])}))]):e._e()])]):e._e(),e._v(" "),3==t.messageType?n("figure",[n("video",{staticStyle:{width:"300px"},attrs:{src:t.attUrl,controls:"controls"}})]):e._e(),e._v(" "),"custom"===t.msgType.toLowerCase()&&"deleteMsgTips"===JSON.parse(t.body.substring(1,t.body.length-1)).type?n("figure",[n("span",{directives:[{name:"show",rawName:"v-show",value:"1_doctor00001"===JSON.parse(t.body.substring(1,t.body.length-1)).data.deleteMsg.from,expression:"JSON.parse(ele.body.substring(1,ele.body.length-1)).data.deleteMsg.from ==='1_doctor00001'"}]},[e._v(e._s(JSON.parse(t.body.substring(1,t.body.length-1)).data.doctorName?JSON.parse(t.body.substring(1,t.body.length-1)).data.doctorName:"您")+"撤回了一条消息！")]),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:"1_doctor00001"!==JSON.parse(t.body.substring(1,t.body.length-1)).data.deleteMsg.from,expression:"JSON.parse(ele.body.substring(1,ele.body.length-1)).data.deleteMsg.from !=='1_doctor00001'"}]},[e._v(e._s(JSON.parse(t.body.substring(1,t.body.length-1)).data.from)+"撤回了一条消息！")])]):e._e(),e._v(" "),"custom"===t.msgType.toLowerCase()&&"triageSendTips"==JSON.parse(t.body.substring(1,t.body.length-1)).type?n("figure",["image"==JSON.parse(t.body.substring(1,t.body.length-1)).data.actionType?n("figcaption",{staticClass:"messageList-item-text"},[e._v("\n                                                    上传图片：患者已上传检查资料，点击至“专科检查”查看。\n                                                ")]):n("figcaption",{staticClass:"messageList-item-text"},[e._v("\n                                                    上传视频：患者已上传视诊资料，点击至“专科检查”查看。若视频上传中，请稍后再次点击查看。\n                                                ")])]):e._e(),e._v(" "),"custom"===t.msgType.toLowerCase()&&"checkSuggestSendTips"==JSON.parse(t.body.substring(1,t.body.length-1)).type?n("figure",["checkSuggest"==JSON.parse(t.body.substring(1,t.body.length-1)).data.actionType?n("figcaption",{staticClass:"messageList-item-text"},[e._v('\n                                                    患者已上传检查资料，点击至 "专科检查" 查看。\n                                                ')]):e._e()]):e._e(),e._v(" "),"custom"===t.msgType.toLowerCase()&&"triagePatientTips"===JSON.parse(t.body.substring(1,t.body.length-1)).type?n("figure",["triage"===JSON.parse(t.body.substring(1,t.body.length-1)).scene?n("span",[e._v("分诊医生“"+e._s(JSON.parse(t.body.substring(1,t.body.length-1)).name)+"”接诊")]):e._e(),e._v(" "),"release"===JSON.parse(t.body.substring(1,t.body.length-1)).scene?n("span",[e._v("分诊医生“"+e._s(JSON.parse(t.body.substring(1,t.body.length-1)).name)+"”退诊")]):e._e()]):e._e(),e._v(" "),"custom"===t.msgType.toLowerCase()&&"refusePatient"===JSON.parse(t.body.substring(1,t.body.length-1)).type?n("figure",[e._v("\n                                                "+e._s(t.body)+"\n                                            ")]):e._e(),e._v(" "),"custom"===t.msgType.toLowerCase()&&"overtimeTip"===JSON.parse(t.body.substring(1,t.body.length-1)).type?n("figure",[n("span",[e._v(e._s((JSON.parse(t.ext.substring(1,t.ext.length-1)).docName?JSON.parse(t.ext.substring(1,t.ext.length-1)).docName:"")+"医生超时未接诊"))])]):e._e(),e._v(" "),"custom"===t.msgType.toLowerCase()&&"chatOvertimeTip"===JSON.parse(t.body.substring(1,t.body.length-1)).type?n("figure",[n("span",[e._v(e._s((JSON.parse(t.ext.substring(1,t.ext.length-1)).docName?JSON.parse(t.ext.substring(1,t.ext.length-1)).docName:"")+"医生接诊后超时未回复"))])]):e._e(),e._v(" "),"custom"===t.msgType.toLowerCase()&&"notification"===JSON.parse(t.body.substring(1,t.body.length-1)).type&&"3"===JSON.parse(t.body.substring(1,t.body.length-1)).data.actionType?n("figure",[n("span",[e._v(e._s("由于"+(JSON.parse(t.ext.substring(1,t.ext.length-1)).reason?JSON.parse(t.ext.substring(1,t.ext.length-1)).reason:"不属于骨科疾病")+"，该患者被"+(JSON.parse(t.ext.substring(1,t.ext.length-1)).docName?JSON.parse(t.ext.substring(1,t.ext.length-1)).docName:"")+"医生退回"))])]):e._e(),e._v(" "),"custom"===t.msgType.toLowerCase()&&"notification"===JSON.parse(t.body.substring(1,t.body.length-1)).type&&"5"===JSON.parse(t.body.substring(1,t.body.length-1)).data.actionType?n("figure",[n("span",[e._v(e._s((JSON.parse(t.ext.substring(1,t.ext.length-1)).docName?JSON.parse(t.ext.substring(1,t.ext.length-1)).docName:"")+"医生接诊"))])]):e._e()])])})),e._v(" "),e.totalCount>e.pageNum&&e.diagnoseHistoryList.length>0?n("div",{staticClass:"page-container"},[n("div",{staticClass:"pagination pager"},[n("ul",{staticClass:"pages"},[n("li",{staticClass:"pgNext",class:{pgEmpty:1==e.pageIndex},on:{click:function(n){n.stopPropagation(),e.chatHistoryRecord(0,1,t)}}},[e._v("首页")]),e._v(" "),n("li",{staticClass:"pgNext",class:{pgEmpty:1==e.pageIndex},on:{click:function(n){n.stopPropagation(),e.chatHistoryRecord(e.pageArr.indexOf(e.pageIndex)-1,e.pageArr[e.pageArr.indexOf(e.pageIndex)-1],t)}}},[e._v("上一页")]),e._v(" "),e._l(e.pageArr,function(s,i){return n("li",{staticClass:"page-number",class:{pgCurrent:e.pageIndex==s},on:{click:function(n){n.stopPropagation(),e.chatHistoryRecord(i,s,t)}}},[e._v(e._s(s)+"\n                                            ")])}),e._v(" "),n("li",{staticClass:"pgNext",class:{pgEmpty:e.pageIndex==Math.ceil(e.totalCount/e.pageNum)},on:{click:function(n){n.stopPropagation(),e.chatHistoryRecord(e.pageArr.indexOf(e.pageIndex)+1,e.pageArr[e.pageArr.indexOf(e.pageIndex)+1],t)}}},[e._v("\n                                                下一页\n                                            ")]),e._v(" "),n("li",{staticClass:"pgNext",class:{pgEmpty:e.pageIndex==Math.ceil(e.totalCount/e.pageNum)},on:{click:function(n){n.stopPropagation(),e.chatHistoryRecord(Math.ceil(e.totalCount/e.pageNum)-1,Math.ceil(e.totalCount/e.pageNum),t)}}},[e._v("末页\n                                            ")])],2)])]):e._e()])])])}))])]),e._v(" "),n("section",{staticClass:"mask-close",on:{click:function(t){e.$store.state.checkHistoryFlag=!1}}})]),e._v(" "),n("section",{staticClass:"mask-background show"}),e._v(" "),e.loadingShow?n("loading"):e._e(),e._v(" "),n("transition",{attrs:{name:"fade-scale"}},[e.popupShow?n("popup",{attrs:{obj:e.popupObj,payPopupShow:e.popupShow},on:{"update:obj":function(t){e.popupObj=t},"update:payPopupShow":function(t){e.popupShow=t}}}):e._e()],1)],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",{staticClass:"check-history-majorTitle"},[n("span",{staticClass:"check-title-left"},[e._v("诊断结论")]),n("span",{staticClass:"check-title-right"},[e._v("患者提交病例时间")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"preview-suggestion-img"},[n("img",{attrs:{src:"/static/image/img00/index/dialog_report.png",alt:""}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("figure",{staticClass:"fileImg"},[n("img",{attrs:{src:"/static/image/img00/common/folder.jpg",alt:""}})])}]}},sMg7:function(e,t,n){function s(e){n("zaNn")}var i=n("eEuR")(n("8F76"),n("olaC"),s,null,null);e.exports=i.exports},"tT/V":function(e,t,n){"use strict";(function(e){}).call(t,n("bXvV"))},thlA:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("3SZ7"),i=n.n(s),a=n("UIuv"),o=n.n(a),r=n("ogYJ"),c=n("IJyU"),l=n.n(c),u=n("wtEF"),d=n("FKXC"),p=n.n(d),m=n("8L/s"),f={getTagData:"/call/comm/data/tag/v1/getMapList/",filterSearchDocMessage:"/call/customer/auth/v1/getMatchCustomerList/",getTeachingKnowledge:"/call/comm/data/knowledge/v1/getMapList/",getDisposeSuggest:"/call/comm/data/treatment/v1/getMapList/",getExamineSuggest:"/call/comm/data/check/v1/getMapList/",getTestSuggest:"/call/comm/data/inspection/v1/getMapList/",saveData:"/call/patient/case/diagnosis/v1/create/",savePreviewSuggest:"/call/patient/recovery/advice/v1/create/",saveRecommendDoc:"/call/patient/recommend/v1/create/"};t.default={data:function(){return{docSearchValue:"",configShow:!0,FirstIndex:-1,SecondIndex:-1,ThirdIndex:-1,FourIndex:-1,isActive:!1,viewMore:!1,isLight:!0,submitStatus:!0,cutNum:0,docCutNum:0,tagCutNum:0,tabList:["推荐医生","患教知识","处置建议","检查建议","检验建议"],docTabList:["匹配医生","全部医生"],tagTabList:[{platformId:"1",id:"",tagName:"全部"}],matchDoc:{matchDocList:[],matchDocState:!1},allDoc:{allDocList:[],allDocState:!1,totalCount:0,pageNum:20,pageIndex:1,pageResult:0,pageArr:[]},noDocData:!1,searchTagName:"",teachingKnowledgeList:[],teachingDetailsShow:!1,knowledgeId:"",disposeSuggestList:[],examineSuggestList:[],testSuggestList:[],previewDiagnoseSuggest:{diagnoseResult:{},doctorList:[],teachingList:[],disposeList:[],examineList:[],testList:[]},previewShow:!1,addressResult:{provinceId:"",provinceName:"",cityId:"",cityName:"",districtId:"",districtName:""},doctorType:"",onlineState:1,matchCurrentIndex:-1,allCurrentIndex:-1,provinceFlag:!1}},mounted:function(){this.getTargetList(),this.getMatchDocCustomer(),this.getAllDocCustomer({num:0,value:1},"1"),this.getFourList({url:f.getTeachingKnowledge,listName:"teachingKnowledgeList"}),this.getFourList({url:f.getDisposeSuggest,listName:"disposeSuggestList"}),this.getFourList({url:f.getExamineSuggest,listName:"examineSuggestList"}),this.getFourList({url:f.getTestSuggest,listName:"testSuggestList"})},methods:{getTargetList:function(){var e=this;this.previewDiagnoseSuggest.diagnoseResult=this.checkData,Object(r.a)({url:f.getTagData,method:"POST",data:{isValid:1,firstResult:0,maxResult:999,treeLevel:"2"},done:function(t){t.responseObject.responseData&&t.responseObject.responseData.data_list.forEach(function(t,n){e.tagTabList.push(t)})}})},getTagName:function(e){return 2==e.platformId?"手外-"+e.tagName:e.tagName},getFourList:function(e){var t=this;u.a.commit("startLoading"),Object(r.a)({url:e.url,method:"POST",data:{isValid:1,firstResult:0,maxResult:9999},done:function(n){if(n.responseObject.responseData){var s=t.setCheckedState(n.responseObject.responseData.dataList);t[e.listName]=s,u.a.commit("stopLoading")}}})},getMatchDocCustomer:function(){var e=this;u.a.commit("startLoading"),Object(r.a)({url:f.filterSearchDocMessage,method:"POST",data:{isMatch:"1",isValid:"1",customerId:e.$store.state.userId,firstResult:0,maxResult:9999,degreeType:e.checkData.degreeType,illnessId:e.checkData.illnessId,areasExpertise:e.checkData.majorId,patientId:e.$store.state.patientId,logoUseFlag:3},done:function(t){if(console.log(t),t.responseObject.responseData&&t.responseObject.responseData.dataList){var n=e.setCheckedState(t.responseObject.responseData.dataList);e.matchDoc.matchDocList=n,u.a.commit("stopLoading")}}})},getAllDocCustomer:function(e,t){if(console.log(e),"•••"==e.value)return!1;u.a.commit("startLoading");var n=this,s="";n.allDoc.pageResult=(e.value-1)*n.allDoc.pageNum,n.allDoc.pageIndex=e.value,"filter"==e.type&&(this.tagCutNum=e.cutNum,this.searchTagName=e.tag.tagName,this.docSearchValue=""),s="全部"==this.searchTagName?"":-1!=this.searchTagName.indexOf("&")?this.searchTagName.replace(/&/g,","):this.searchTagName;var i={isMatch:"0",isValid:"1",logoUseFlag:"3",firstResult:n.allDoc.pageResult,maxResult:n.allDoc.pageNum,illnessId:n.checkData.illnessId,areasExpertise:-1==n.checkData.majorName.indexOf("&")?n.checkData.majorName:n.checkData.majorName.replace(/&/g,","),patientId:n.$store.state.patientId,searchParam:n.docSearchValue.trim(),searchAreasExpertise:s,degreeType:n.checkData.degreeType};this.addressResult.provinceId&&(i.searchRegion=this.addressResult.provinceId),n.doctorType&&(i.searchDoctorType=n.doctorType),n.onlineState&&(i.searchOnlineState=n.onlineState),Object(r.a)({url:f.filterSearchDocMessage,method:"POST",data:i,done:function(s){if(s.responseObject.responseData&&s.responseObject.responseData.dataList){var i=n.setCheckedState(s.responseObject.responseData.dataList);if("search"==e.type){var a=n.docSearchValue.trim().replace(/\s+/g," ").split(" ");a.length>0&&a.forEach(function(e){var t=new RegExp("("+e+")","g");i.forEach(function(n){n.illnessNameList.length>0&&(n.illnessNameList=n.illnessNameList.replace(t,"<span class='high-light-search-text'>"+e+"</span>")),n.operationNameList.length>0&&(n.operationNameList=n.operationNameList.replace(t,"<span class='high-light-search-text'>"+e+"</span>"))})})}n.allDoc.allDocList=n.isChosenTheDoc(i),n.allDoc.allDocState=!1,n.allDoc.totalCount=s.responseObject.responseData.totalCount,n.noDocData=!1,n.matchCurrentIndex=-1,n.allCurrentIndex=-1}else n.allDoc.allDocList=[],n.noDocData=!0,n.matchCurrentIndex=-1,n.allCurrentIndex=-1;document.querySelector(".scrollTop").scrollTop=0,n.pages(t,e.num,e.value),u.a.commit("stopLoading")}})},pages:function(e,t,n){var s=this,i=Math.ceil(s.allDoc.totalCount/s.allDoc.pageNum);if(1==e)if(i>10)s.allDoc.pageArr=[1,2,3,4,5,"•••",i-2,i-1,i];else for(var a=1;a<=Math.ceil(i);a++)s.allDoc.pageArr.push(a);else{var o=void 0;if(i>10){if(1==n||n==Math.ceil(s.allDoc.totalCount/s.allDoc.pageNum))return s.allDoc.pageArr=[1,2,3,4,5,"•••",i-2,i-1,i],!1;if(s.allDoc.pageArr.forEach(function(e,t){"•••"==e&&(o=t)}),o){var r=Number(s.allDoc.pageArr[o-1])+1,c=Number(s.allDoc.pageArr[o+1])-1;t==o-1?(s.allDoc.pageArr.splice(o,0,r),s.allDoc.pageArr.splice(0,1)):0==t&&1!=Number(s.allDoc.pageArr[0])?(s.allDoc.pageArr.unshift(Number(s.allDoc.pageArr[0])-1),s.allDoc.pageArr.splice(o,1)):t==o+1?(s.allDoc.pageArr.splice(o+1,0,c),s.allDoc.pageArr.splice(s.allDoc.pageArr.length-1,1)):t==s.allDoc.pageArr.length-1&&Number(s.allDoc.pageArr[s.allDoc.pageArr.length-1]!=i)&&(s.allDoc.pageArr.push(Number(s.allDoc.pageArr[s.allDoc.pageArr.length-1])+1),s.allDoc.pageArr.splice(o,1)),s.allDoc.pageArr[o+1]-s.allDoc.pageArr[t]!=1&&s.allDoc.pageArr[t]-s.allDoc.pageArr[o-1]!=1||s.allDoc.pageArr.splice(o,1)}else 0==t?(s.allDoc.pageArr.splice(4,1,"•••"),s.allDoc.pageArr.unshift(Number(s.allDoc.pageArr[0])-1)):7==t&&(s.allDoc.pageArr.splice(5,1,"•••"),s.allDoc.pageArr.push(Number(s.allDoc.pageArr[s.allDoc.pageArr.length-1])+1))}else{s.allDoc.pageArr=[];for(var l=1;l<=Math.ceil(i);l++)s.allDoc.pageArr.push(l)}}},setCheckedState:function(e){return e.forEach(function(e,t){e.isChecked=!1,e.children&&e.children.length>0&&e.children.forEach(function(e){e.isChecked=!1,e.children&&e.children.length>0&&e.children.forEach(function(e){e.isChecked=!1,e.isSelected=!0,e.children&&e.children.length>0&&e.children.forEach(function(e){e.isChecked=!1,e.isSelected=!0})})})}),e},matchDocAllChecked:function(e,t){var n=this;"match"==t?this.matchDoc.matchDocState=!this.matchDoc.matchDocState:this.allDoc.allDocState=!this.allDoc.allDocState,this.matchDoc.matchDocState&&"match"==t||this.allDoc.allDocState&&"all"==t?e.forEach(function(e,t){e.isChecked=!0;var s=e.customerId,i=!0;n.previewDiagnoseSuggest.doctorList.forEach(function(e,t){e.customerId==s&&(i=!1,console.log("该医生已被选"))}),i&&(n.previewDiagnoseSuggest.doctorList.push(e),console.log("该医生已添加"))}):e.forEach(function(e,t){e.isChecked=!1;var s=e.customerId;n.previewDiagnoseSuggest.doctorList.forEach(function(e,t){if(e.customerId==s)return n.previewDiagnoseSuggest.doctorList.splice(t,1),console.log("该医生已删除"),!1})})},changeCheckedState:function(e,t,n){var s=!0,i=this;"match"==n?this.matchDoc.matchDocList[t].isChecked=!this.matchDoc.matchDocList[t].isChecked:this.allDoc.allDocList[t].isChecked=!this.allDoc.allDocList[t].isChecked,"match"==n&&this.matchDoc.matchDocList.length>0&&this.matchDoc.matchDocList[t].isChecked||"all"==n&&this.allDoc.allDocList.length>0&&this.allDoc.allDocList[t].isChecked?this.previewDiagnoseSuggest.doctorList.forEach(function(t,n){e.customerId==t.customerId&&(s=!1,console.log("该医生已被选"))}):this.previewDiagnoseSuggest.doctorList.forEach(function(t,n){if(e.customerId==t.customerId)return i.previewDiagnoseSuggest.doctorList.splice(n,1),console.log("该医生已删除"),!1}),("match"==n&&this.matchDoc.matchDocList.length>0&&s&&this.matchDoc.matchDocList[t].isChecked||"all"==n&&s&&this.allDoc.allDocList[t].isChecked)&&(this.previewDiagnoseSuggest.doctorList.push(e),console.log("该匹配医生已添加")),this.matchDocChecked(n)},matchDocChecked:function(e){var t=0,n=0;"match"==e?(this.matchDoc.matchDocList.forEach(function(e,n){e.isChecked&&t++}),t==this.matchDoc.matchDocList.length?this.matchDoc.matchDocState=!0:this.matchDoc.matchDocState=!1):"all"==e&&(this.allDoc.allDocList.forEach(function(e,t){e.isChecked&&n++}),n==this.allDoc.allDocList.length?this.allDoc.allDocState=!0:this.allDoc.allDocState=!1)},isChosenTheDoc:function(e){var t=this;return e.forEach(function(e){var n=e.customerId;t.previewDiagnoseSuggest.doctorList.forEach(function(t){if(t.customerId==n)return e.isChecked=!0,!1})}),e},showNext:function(e,t){"FirstIndex"==e?this.FirstIndex==t?(this.FirstIndex=-1,this.SecondIndex=-1,this.ThirdIndex=-1,this.FourIndex=-1):(this.FirstIndex=t,this.SecondIndex=-1,this.ThirdIndex=-1,this.FourIndex=-1):"SecondIndex"==e?this.SecondIndex==t?(this.SecondIndex=-1,this.ThirdIndex=-1,this.FourIndex=-1):(this.SecondIndex=t,this.ThirdIndex=-1,this.FourIndex=-1):"ThirdIndex"==e?this.ThirdIndex==t?(this.ThirdIndex=-1,this.FourIndex=-1):(this.ThirdIndex=t,this.FourIndex=-1):"FourIndex"==e&&(this.FourIndex==t?this.FourIndex=-1:this.FourIndex=t)},selectData:function(e,t){var n=this;e.isChecked=!e.isChecked,1==t?this.addFourSuggest(e,"teachingList","knowledgeId"):2==t?this.addFourSuggest(e,"disposeList","treatmentId"):3==t?this.addFourSuggest(e,"examineList","nodeId"):4==t&&this.addFourSuggest(e,"testList","inspectionId"),e.children&&e.children.length>0&&e.children.forEach(function(e){e.isSelected=!e.isSelected,e.isChecked=!1,1==t?n.addFourSuggest(e,"teachingList","knowledgeId"):2==t?n.addFourSuggest(e,"disposeList","treatmentId"):3==t?n.addFourSuggest(e,"examineList","nodeId"):4==t&&n.addFourSuggest(e,"testList","inspectionId")})},addFourSuggest:function(e,t,n){var s=this,i=!0;e.isChecked?this.previewDiagnoseSuggest[t].forEach(function(t){e[n]==t[n]&&(i=!1,console.log("该选项已被选"))}):this.previewDiagnoseSuggest[t].forEach(function(i,a){if(e[n]==i[n])return s.previewDiagnoseSuggest[t].splice(a,1),console.log("该选项已删除"),!1}),i&&e.isChecked&&(this.previewDiagnoseSuggest[t].push(e),console.log("该选项已添加"))},teachingGoBack:function(e){e&&(this.configShow=!0)},closeWindow:function(){this.$emit("maskerShow",!1),this.$emit("closeWindow",!0)},goBackCheck:function(){this.configShow=!1,this.$emit("goBackCheck",!0)},previewSuggest:function(){this.isLight||(u.a.commit("setPreviewType",1),u.a.commit("setPreviewData",this.previewDiagnoseSuggest),u.a.commit("setPreviewShow",!0))},closePreview:function(){u.a.commit("setPreviewShow",!1),u.a.commit("setPreviewId",""),u.a.commit("setPreviewType",-1),u.a.commit("setPreviewData",{diagnoseResult:{},doctorList:[],teachingList:[],disposeList:[],examineList:[],testList:[]})},sendSuggest:function(){var e=this;if(this.submitStatus=!1,!this.isLight){var t=[],n=[],s=[];this.previewDiagnoseSuggest.doctorList.length>0&&this.previewDiagnoseSuggest.doctorList.forEach(function(e){var n="";n=1==e.isTop&&1==e.isNearest?2:1==e.isTop?1:0,t.push({recommendType:1,recommendId:e.customerId,recommendCause:n}),s.push({fullName:e.fullName,company:e.company?e.company:"",medicalTitle:e.medicalTitle})}),this.previewDiagnoseSuggest.teachingList.length>0&&this.previewDiagnoseSuggest.teachingList.forEach(function(e){n.push({adviceType:3,adviceId:e.knowledgeId})}),this.previewDiagnoseSuggest.disposeList.length>0&&this.previewDiagnoseSuggest.disposeList.forEach(function(e){n.push({adviceType:0,adviceId:e.treatmentId})}),this.previewDiagnoseSuggest.examineList.length>0&&this.previewDiagnoseSuggest.examineList.forEach(function(e){n.push({adviceType:1,adviceId:e.nodeId})}),this.previewDiagnoseSuggest.testList.length>0&&this.previewDiagnoseSuggest.testList.forEach(function(e){n.push({adviceType:2,adviceId:e.inspectionId})}),Object(r.a)({url:f.saveData,method:"POST",data:e.checkData,done:function(a){if(a.responseObject.responseStatus){console.log("初步诊断保存成功"),e.closeWindow();var c=a.responseObject.responsePk;new o.a(function(s,a){t.length>0&&Object(r.a)({url:f.saveRecommendDoc,method:"POST",data:{caseId:e.$store.state.caseId,patientId:e.$store.state.patientId,customerId:e.$store.state.userId,recommendCustomerList:i()(t),diagnosisId:c,type:1},done:function(e){e.responseObject.responseStatus?(console.log("推荐医生保存成功"),s("保存成功")):a("保存失败")}}),n.length>0&&Object(r.a)({url:f.savePreviewSuggest,method:"POST",data:{caseId:e.$store.state.caseId,patientId:e.$store.state.patientId,customerId:e.$store.state.userId,recoveryAdviceList:i()(n),diagnosisId:c,type:1},done:function(e){e.responseObject.responseStatus?(console.log("四大建议保存成功"),s("保存成功")):a("保存失败")}})}).then(function(t){e.previewDiagnoseSuggest.examineList.length>0||e.previewDiagnoseSuggest.testList.length>0?(console.log("1"),Object(m.a)({customerId:e.$store.state.userId,consultationId:e.$store.state.currentItem.consultationId,consultationState:10}).then(function(t){var n=e.$store.state.currentItem;n.consultationState=10,e.$store.commit("setCurrentItem",n)})):(console.log("2"),Object(m.a)({customerId:e.$store.state.userId,consultationId:e.$store.state.currentItem.consultationId,consultationState:10}).then(function(t){var n=e.$store.state.currentItem;n.consultationState=10,e.$store.commit("setCurrentItem",n)})),console.log(t);var n=e.$store.state.currentItem,i=e.checkData.majorName,a="暂不确定"==e.checkData.illnessName?"":e.checkData.illnessName,o="暂不确定"==e.checkData.operationName?"":e.checkData.operationName;n.diagnosisContent=i+" "+a+" "+o,u.a.commit("setCurrentItem",n);var r=new Date,l=(r.getFullYear()+"."+(r.getMonth()+1<10?"0"+(r.getMonth()+1):r.getMonth()+1)+"."+(r.getDate()<10?"0"+r.getDate():r.getDate())).replace(/-/g,".");e.closePreview(),u.a.commit("previewSuggestionSender",{flag:!0,data:{illnessName:e.checkData.illnessName?e.checkData.illnessName:"暂不确定",customerId:e.$store.state.userId,caseId:e.$store.state.caseId,patientName:e.$store.state.patientName,createTime:l,diagnosisId:c,docNames:s}}),console.log("发送IM成功")}).catch(function(e){console.log(e)})}}})}},matchCurrent:function(e){this.matchCurrentIndex==e?this.matchCurrentIndex=-1:this.matchCurrentIndex=e},allCurrent:function(e){this.allCurrentIndex==e?this.allCurrentIndex=-1:this.allCurrentIndex=e},closeSelect:function(e){this.provinceFlag=!1}},computed:{},watch:{previewDiagnoseSuggest:{handler:function(){this.previewDiagnoseSuggest.doctorList.length>0||this.previewDiagnoseSuggest.teachingList.length>0||this.previewDiagnoseSuggest.disposeList.length>0||this.previewDiagnoseSuggest.examineList.length>0||this.previewDiagnoseSuggest.testList.length>0?this.isLight=!1:this.isLight=!0},deep:!0}},components:{teachingDetail:l.a,dignosiAddress:p.a},props:{maskerShow:{type:Boolean},checkData:{type:Object}}}},tzNQ:function(e,t){},uTXi:function(e,t,n){function s(e){n("75pH")}var i=n("eEuR")(n("mLLg"),n("GQb3"),s,null,null);e.exports=i.exports},"vGy+":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"userList"},[n("header-list",{attrs:{globeSortFlag:e.sortFlag},on:{searchCallback:e.searchPatient,"update:globeSortFlag":function(t){e.sortFlag=t}}}),e._v(" "),n("div",{staticClass:"center-inner",class:{"no-content":!e.noData}},[n("communication",{attrs:{m:e.message,n:e.noData,targetData:e.targetData,fastRelyStatus:e.fastRelyStatusParent,waitingTriage:e.waitingTriage,userListStatus:e.userListStatus,userOnlineActive:e.userOnlineActive,userWaitingActive:e.userWaitingActive,reTriageShow:e.reTriageShow},on:{"update:m":function(t){e.message=t},"update:n":function(t){e.noData=t},"update:targetData":function(t){e.targetData=t},"update:fastRelyStatus":function(t){e.fastRelyStatusParent=t},"update:waitingTriage":function(t){e.waitingTriage=t},"update:userListStatus":function(t){e.userListStatus=t},"update:userOnlineActive":function(t){e.userOnlineActive=t},"update:userWaitingActive":function(t){e.userWaitingActive=t}}}),e._v(" "),n("aside",{staticClass:"center-inner-userList"},[e.filterFinish?n("article",{staticClass:"search-result-tips"},[n("p",[e._v("点击"),n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){t.stopPropagation(),e.filterFinish=!1}}},[e._v("返回全部")]),e._v("，为您找到"),n("span",[e._v("0")]),e._v("条信息\n                ")])]):e._e(),e._v(" "),n("nav",{staticClass:"userList-status"},[n("ul",{staticClass:"userList-status-box tabsInner",attrs:{id:"ev-user-tabs"}},[n("li",{staticClass:"userList-status-item tabsItem",class:{active:e.userListStatus.first,new:e.newWaiting},attrs:{"data-role":"ut-tabs-1"},on:{click:function(t){t.stopPropagation(),e.statusChange(1)}}},[e._v("\n                        待分诊\n                    ")]),e._v(" "),n("li",{staticClass:"userList-status-item tabsItem",class:{active:e.userListStatus.second,new:e.newOnline},attrs:{"data-role":"ut-tabs-2"},on:{click:function(t){t.stopPropagation(),e.statusChange(2)}}},[e._v("沟通中\n                    ")]),e._v(" "),n("li",{staticClass:"userList-status-item tabsItem",class:{active:e.userListStatus.third,new:e.newReset},attrs:{"data-role":"ut-tabs-3"},on:{click:function(t){t.stopPropagation(),e.statusChange(3)}}},[e._v("\n                        重新分诊\n                    ")])]),e._v(" "),n("i",{staticClass:"userList-status-right",on:{click:function(t){t.stopPropagation(),e.sortShow(t)}}}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.sortFlag,expression:"sortFlag"}],staticClass:"userList-status-sortList"},[n("ul",[n("li",{class:{active:0==e.sortActive},on:{click:function(t){t.stopPropagation(),e.sort(0)}}},[e._v("患者最近消息发出时间由近到远")]),e._v(" "),n("li",{class:{active:4==e.sortActive},on:{click:function(t){t.stopPropagation(),e.sort(4)}}},[e._v("患者等待沟通时间从多到少")])])]),e._v(" "),e.$store.state.musicPlay?n("audio",{staticStyle:{display:"none"},attrs:{autoplay:"",src:"/static/image/audio/warningTone.mp3"}}):e._e()]),e._v(" "),n("section",{staticClass:"userList-inner-content viewInner",class:{"search-result":e.filterFinish},attrs:{id:"ev-user-inner"}},[n("section",{directives:[{name:"show",rawName:"v-show",value:1==e.userListStatus.status,expression:"userListStatus.status == 1"}],staticClass:"userList-mainList viewItem",attrs:{"data-role":"ut-tabs-1"}},[e._l(e.userListWaiting,function(t,s){return n("article",{directives:[{name:"show",rawName:"v-show",value:e.userListWaiting.length>0,expression:"userListWaiting.length > 0"}],key:s,class:[{active:e.userWaitingActive==s},"userList-mainList-item"],on:{click:function(n){e.transformData(t,s)}}},[n("figure",{staticClass:"userList-item-img"},[n("img",{attrs:{src:t.logoUrl,alt:""}}),e._v(" "),n("p",{directives:[{name:"show",rawName:"v-show",value:t.messageAlert,expression:"items.messageAlert"}]},[e._v(e._s(t.messageAlert))])]),e._v(" "),n("figcaption",{staticClass:"userList-item-base-msg"},[n("h3",[n("span",{staticClass:"name",attrs:{title:t.patientName}},[e._v(e._s(t.patientName.length>4?t.patientName.substring(0,3)+"...":t.patientName))]),n("span",{directives:[{name:"show",rawName:"v-show",value:5==t.consultationState,expression:"items.consultationState==5"}],staticClass:"category short"},[e._v("待分诊")]),n("span",{directives:[{name:"show",rawName:"v-show",value:5!=t.consultationState,expression:"items.consultationState!=5"}],staticClass:"category short"},[e._v(e._s(e._f("checkState")(t)))])]),e._v(" "),n("article",[n("span",{staticClass:"text"},[e._v(e._s(t.returnReason.length>0?"由于"+t.returnReason+"，该患者被"+t.doctorName+"医生退回":1==t.patientSex?"男":"女")+" | "+e._s(t.patientAge)+" | "+e._s(0===parseInt(t.isAttachment)?"无影像":"有影像")+" | "+e._s(t.partName))])]),e._v(" "),n("button",{staticClass:"get-triage btn-primary-small",on:{click:function(n){n.stopPropagation(),e.getTriagePatient(t,s)}}},[e._v("接诊\n                            ")])]),e._v(" "),n("span",{staticClass:"time"},[e._v(" "+e._s(e._f("timeFormat")(t.createTime)))])])}),e._v(" "),n("p",{directives:[{name:"show",rawName:"v-show",value:0==e.userListWaiting.length,expression:"userListWaiting.length == 0"}],staticClass:"userList-no-data"},[e._v("没有找到相应的患者")])],2),e._v(" "),n("section",{directives:[{name:"show",rawName:"v-show",value:2==e.userListStatus.status,expression:"userListStatus.status == 2"}],staticClass:"userList-mainList viewItem",attrs:{"data-role":"ut-tabs-2"}},[e._l(e.userListOnline,function(t,s){return n("article",{directives:[{name:"show",rawName:"v-show",value:e.userListOnline.length>0,expression:"userListOnline.length > 0"}],key:s,class:[{active:e.userOnlineActive==s},"userList-mainList-item"],on:{click:function(n){e.transformData(t,s)}}},[n("figure",{staticClass:"userList-item-img"},[n("img",{attrs:{src:t.logoUrl,alt:""}}),e._v(" "),n("p",{directives:[{name:"show",rawName:"v-show",value:t.messageAlert,expression:"items.messageAlert"}]},[e._v(e._s(t.messageAlert))])]),e._v(" "),n("figcaption",{staticClass:"userList-item-base-msg"},[n("h3",[n("span",{staticClass:"name",attrs:{title:t.patientName}},[e._v(e._s(t.patientName.length>4?t.patientName.substring(0,3)+"...":t.patientName))]),n("span",{staticClass:"category short"},[e._v(e._s(e._f("checkState")(t)))])]),e._v(" "),n("article",[n("span",{staticClass:"text"},[e._v("\n                                    "+e._s(t.returnReason.length>0?"由于"+t.returnReason+"，该患者被"+t.doctorName+"医生退回":1==t.patientSex?"男":"女")+" | "+e._s(t.patientAge)+" | "+e._s(0===parseInt(t.isAttachment)?"无影像":"有影像")+" | "+e._s(t.partName))])])]),e._v(" "),n("span",{ref:"toTopTime",refInFor:!0,staticClass:"time"},[e._v(" "+e._s(e._f("timeFormat")(t.createTime)))])])}),e._v(" "),n("p",{directives:[{name:"show",rawName:"v-show",value:0==e.userListOnline.length,expression:"userListOnline.length == 0"}],staticClass:"userList-no-data"},[e._v("没有找到相应的患者")])],2),e._v(" "),n("section",{directives:[{name:"show",rawName:"v-show",value:3==e.userListStatus.status,expression:"userListStatus.status == 3"}],staticClass:"userList-mainList viewItem",attrs:{"data-role":"ut-tabs-3"}},[e._l(e.userListReset,function(t,s){return n("article",{directives:[{name:"show",rawName:"v-show",value:e.userListReset.length>0,expression:"userListReset.length > 0"}],key:s,class:[{active:e.userResetActive==s},"userList-mainList-item"],on:{click:function(n){e.transformData(t,s)}}},[n("figure",{staticClass:"userList-item-img"},[n("img",{attrs:{src:t.logoUrl,alt:""}}),e._v(" "),n("p",{directives:[{name:"show",rawName:"v-show",value:t.messageAlert,expression:"items.messageAlert"}]},[e._v(e._s(t.messageAlert))])]),e._v(" "),n("figcaption",{staticClass:"userList-item-base-msg"},[n("h3",[n("span",{staticClass:"name",attrs:{title:t.patientName}},[e._v(e._s(t.patientName.length>4?t.patientName.substring(0,3)+"...":t.patientName))]),n("span",{staticClass:"category short"},[e._v(e._s(e._f("checkState")(t)))])]),e._v(" "),n("article",[n("span",{staticClass:"text"},[e._v("\n                                    "+e._s(t.returnReason.length>0?"由于"+t.returnReason+"，该患者被"+t.doctorName+"医生退回":1==t.patientSex?"男":"女")+" | "+e._s(t.patientAge)+" | "+e._s(0===parseInt(t.isAttachment)?"无影像":"有影像")+" | "+e._s(t.partName))])]),e._v(" "),n("button",{staticClass:"get-triage btn-primary-small",on:{click:function(n){n.stopPropagation(),e.getTriagePatient(t,s)}}},[e._v("接诊")])]),e._v(" "),n("span",{ref:"toTopTime",refInFor:!0,staticClass:"time"},[e._v(" "+e._s(e._f("timeFormat")(t.createTime)))])])}),e._v(" "),n("p",{directives:[{name:"show",rawName:"v-show",value:0===e.userListReset.length,expression:"userListReset.length === 0"}],staticClass:"userList-no-data"},[e._v("没有找到相应的患者")])],2)]),e._v(" "),n("footer",{staticClass:"user-list-footer"},[n("button",{staticClass:"refresh-user-list-btn",on:{click:function(t){e.refreshList()}}},[e._m(0)])])]),e._v(" "),e.noData?n("record",{attrs:{recodrdData:e.message,waitingTriage:e.waitingTriage,userListStatus:e.userListStatus},on:{"update:waitingTriage":function(t){e.waitingTriage=t},"update:userListStatus":function(t){e.userListStatus=t}}}):e._e()],1),e._v(" "),n("footer-list"),e._v(" "),e.$store.state.checkHistoryFlag?n("check-history"):e._e()],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("i",{staticClass:"icon-refresh-btn"},[n("span",[e._v("点击刷新")])])}]}},vKNW:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("figure",{staticClass:"messageList-item-content"},["1_doctor00001"!=e.message.from?n("figure",{staticClass:"messageList-item-img"},[n("img",{attrs:{src:e.$store.state.currentItem.logoUrl,alt:""}})]):e._e(),e._v(" "),n("figcaption",{staticClass:"messageList-item-text video-list",class:{"make-photo-box":e.exifFlag},on:{click:function(t){e.showBigImgFunction(e.message.file.url)}}},[n("img",{attrs:{src:"/static/image/img00/controller/play.png",alt:""}}),e._v(" "),n("video",{ref:"videoElement",staticStyle:{width:"300px"},attrs:{src:e.message.file.url}})]),e._v(" "),"1_doctor00001"==e.message.from?n("figure",{staticClass:"messageList-item-img"},[n("div",{staticClass:"messageList-item-nameTop"},[n("p",[e._v(e._s("【分诊医生】"+e.docName))])]),e._v(" "),n("div",{staticClass:"deleteMessage",on:{click:function(t){t.stopPropagation(),e.deleteMsg(t)}}},[e._v("撤回")]),e._v(" "),n("img",{attrs:{src:"/static/image/img00/index/chatting_portrait_system@2x.png",alt:""}})]):e._e()])},staticRenderFns:[]}},vdOd:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("/sA3"),i=n("qYbu"),a=n.n(i),o=n("wtEF"),r=n("ogYJ");t.default={name:"setting",data:function(){return{userName:"",mobile:"",oldMobile:"",mailBox:"",oldPassword:"",newPassword:"",newPassword2:"",userNameErrorMessage:"",mobileErrorMessage:"",mailBoxErrorMessage:"",oldPasswordErrorMessage:"",newPasswordErrorMessage:"",newPassword2ErrorMessage:""}},components:{headerList:a.a},beforeRouteLeave:function(e,t,n){"home"===e.name&&o.a.commit("enableSearchFn",!0),n(!0)},methods:{init:function(){this.storageGet(),this.$store.state.searchStatus=!1,o.a.commit("enableSearchFn",!1)},storageGet:function(){this.userName=this.$store.state.userName,this.mobile=this.$store.state.mobile,this.oldMobile=this.$store.state.mobile,this.mailBox=this.$store.state.mailBox,this.userId=this.$store.state.userId},nameCheck:function(e){e.has("name")?this.userNameErrorMessage=e.first("name"):e.has("mobile")?this.mobileErrorMessage=e.first("mobile"):e.has("mailBox")&&(this.mailBoxErrorMessage=e.first("mailBox"))},passCheck:function(e,t){e.target.value.length>0&&("ajax"==e.target.dataset.validateInfo&&t.has("passWord")&&(this.oldPasswordErrorMessage=t.first("passWord")),"newPass"==e.target.dataset.validateInfo&&(t.has("newPassword")?this.newPasswordErrorMessage=t.first("newPassword"):this.newPassword2.length>0&&this.newPassword!==this.newPassword2&&(this.newPassword2ErrorMessage="两次密码输入不一致，请重新输入")),"double"==e.target.dataset.validateInfo&&(t.has("newPassword2")?this.newPassword2ErrorMessage=t.first("newPassword2"):this.newPassword!==this.newPassword2&&(this.newPassword2ErrorMessage="两次密码输入不一致，请重新输入")))},save:function(){var e=this;if(!(e.$validator.errors.items.length>0)){if(this.newPassword.length>0&&this.newPassword2.length>0&&this.newPassword==this.newPassword2&&0==this.oldPassword.length)return void(this.oldPasswordErrorMessage="密码不能为空");if(this.oldPassword.length>0){if(0==this.newPassword.length)return void(this.newPasswordErrorMessage="密码不能为空");if(0==this.newPassword2.length)return void(this.newPassword2ErrorMessage="确认密码不能为空");if(this.newPassword!==this.newPassword2)return}var t={customerId:this.userId,nickname:this.userName,email:this.mailBox,oldPasswd:this.oldPassword,newPasswd:this.newPassword,rePasswd:this.newPassword2};this.oldMobile!=this.mobile&&(t.mobile=this.mobile),Object(r.a)({url:"/call/tocure/web/user/updateUniteInfo/",method:"POST",data:t,done:function(t){null!=t&&t.responseObject.responseStatus?"0B0001"==t.responseObject.responseCode?e.mobileErrorMessage=t.responseObject.responseMessage:(e.storageSet(),s.a.popup({hasImg:"true",text:"保存成功"})):(t&&t.responseObject&&t.responseObject.responseCode&&t.responseObject.responseCode.length>0?e.mobileErrorMessage=t.responseObject.responseMessage:e.oldPasswordErrorMessage="密码错误，请重新输入",s.a.popup({hasImg:"true",text:"保存失败"}))},fail:function(e){console.log(e)}})}},storageSet:function(){var e=this;localStorage.setItem("mailBox",e.mailBox),localStorage.setItem("mobile",e.mobile),localStorage.setItem("userName",e.userName)}},mounted:function(){""==this.$store.state.userName?this.$router.push({name:"login"}):this.init()},activated:function(){this.init()}}},vkcP:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"main-masker jump-box-config-box used-reply-config on",on:{click:function(e){e.stopPropagation()}}},[n("section",{staticClass:"jump-box-config"},[n("i",{staticClass:"icon-close window-close",on:{click:function(t){e.$store.state.usedReplyConfig=!1}}}),e._v(" "),n("header",{staticClass:"jump-box-config-title"},[e._m(0),e._v(" "),n("button",{staticClass:"jump-box-add-term icon-add-term",on:{click:function(t){e.fixFlagList[-1]=!0}}},[n("span",[e._v("添加常用回复")])])]),e._v(" "),n("section",{staticClass:"jump-box-term-box",attrs:{id:"ev-used-reply-config-box"}},[e.fixFlagList[-1]?n("section",{staticClass:"jump-box-term-add"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.fixContentList[-1],expression:"fixContentList['-1']",modifiers:{trim:!0}}],staticClass:"add-input",attrs:{type:"text",placeholder:"请输入常用回复"},domProps:{value:e.fixContentList[-1]},on:{input:[function(t){t.target.composing||e.$set(e.fixContentList,"-1",t.target.value.trim())},function(t){e.contentLimit("-1")}],blur:function(t){e.$forceUpdate()}}}),e._v(" "),n("figure",{staticClass:"term-add-button"},[n("button",{staticClass:"btn-primary term-add-save",on:{click:function(t){t.stopPropagation(),e.createNewItem("-1")}}},[e._v("保存")]),e._v(" "),n("p",{staticClass:"term-add-cancel",on:{click:function(t){t.stopPropagation(),e.fixFlagList[-1]=!1}}},[e._v("取消")])])]):e._e(),e._v(" "),e._l(e.replyList,function(t,s){return n("section",{key:s,staticClass:"jump-box-term"},[n("article",{staticClass:"jump-box-term-title"},[e.fixFlagList[s]?e._e():n("h3",[e._v(e._s(t.replyContent))]),e._v(" "),e.fixFlagList[s]?e._e():n("figure",{staticClass:"jump-box-term-button"},[n("p",{staticClass:"fix",on:{click:function(n){n.stopPropagation(),e.fixFlagList[s]=!0,e.fixContentList[s]=t.replyContent}}},[e._v("修改")]),e._v(" "),n("p",{staticClass:"del",on:{click:function(t){t.stopPropagation(),e.toggleDeleteModal(s)}}},[e._v("删除\n\n                            "),e.fixDeleteList[s]?n("section",{staticClass:"modal-confirm show"},[e._m(1,!0),e._v(" "),n("figure",{staticClass:"modal-confirm-button"},[n("button",{staticClass:"btn-ensure modal-confirm-ensure",on:{click:function(n){n.stopPropagation(),e.deleteCallback(t,s)}}},[e._v("确定")]),e._v(" "),n("button",{staticClass:"btn-primary modal-confirm-cancel",on:{click:function(t){t.stopPropagation(),e.fixDeleteList[s]=!1}}},[e._v("取消")])])]):e._e()])]),e._v(" "),e.fixFlagList[s]?n("section",{staticClass:"jump-box-member-config",staticStyle:{display:"block"}},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.fixContentList[s],expression:"fixContentList[index]",modifiers:{trim:!0}}],staticClass:"jump-box-member-input",attrs:{type:"text",placeholder:"请输入常用回复"},domProps:{value:e.fixContentList[s]},on:{input:[function(t){t.target.composing||e.$set(e.fixContentList,s,t.target.value.trim())},function(t){e.contentLimit(s)}],blur:function(t){e.$forceUpdate()}}}),e._v(" "),n("figure",{staticClass:"member-add-button"},[n("button",{staticClass:"btn-primary member-add-save",on:{click:function(t){t.stopPropagation(),e.createNewItem(s)}}},[e._v("保存")]),e._v(" "),n("i",{staticClass:"icon-member-add-cancel",on:{click:function(t){t.stopPropagation(),e.fixFlagList[s]=!1}}})])]):e._e()])])})],2)])])},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",[n("h2",[e._v("编辑常用回复")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",{staticClass:"modal-confirm-content"},[n("p",[e._v("确定删除该回复吗？")])])}]}},wf9I:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=(n("KEcs"),n("ofp/")),i=n.n(s);n("24qD");t.default={name:"show-big-img",data:function(){return{videoList:[],currentVideo:""}},props:{},watch:{"$store.state.videoListFlag":function(e){this.init()}},methods:{init:function(){var e=this;this.videoList=[],this.videoList=this.$store.state.videoListObject[this.$store.state.SBIType],this.videoList.forEach(function(t,n){e.videoList[n].url=e.clipImg(t.url)}),e.currentVideo=this.videoList[0],e.updated()},close:function(){this.$store.commit("setVideoListFlag",!1)},clipImg:function(e){if(-1!=e.indexOf("_c")){return e.substring(0,e.indexOf("_c")+2)+e.substring(e.lastIndexOf("."))}return e},updated:function(){var e=this,t=this.$store.state.SBIIndex?this.$store.state.SBIIndex:0;console.log("999");new i.a(".thumbSwiper",{initialSlide:t,spaceBetween:10,direction:"horizontal",centeredSlides:!0,slidesPerView:"auto",touchRatio:1,slideToClickedSlide:!0,observer:!0,prevButton:".swiper-button-prev",nextButton:".swiper-button-next",loopedSlides:5,paginationType:"",imgElementCallBack:function(e){console.log("为每个指定的图片（会触发大图）单击事件绑定回调函数")},onTap:function(e,t){e.slideTo(e.activeIndex)},onSlideChangeStart:function(t){e.currentVideo=e.videoList[t.activeIndex],console.log(t.activeIndex+"当前索引")}})}},mounted:function(){this.init()}}},wfCL:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("ogYJ"),i={getMapList:"/call/customer/patient/case/v1/getMapById/"};t.default={data:function(){return{medicalReportMsg:{},showBigImageList:[]}},mounted:function(){this.getMedicalReport()},methods:{getMedicalReport:function(){var e=this;Object(s.a)({url:i.getMapList,method:"POST",data:{caseId:this.$store.state.currentItem.caseId,isOrder:0,attUseFlag:6},done:function(t){if(t.responseObject.responseData){var n=t.responseObject.responseData.dataList;n&&n.length&&(e.medicalReportMsg=n[0])}}})},getPatientRelation:function(e){var t="";switch(parseInt(e)){case 0:t="本人";break;case 1:t="配偶";break;case 2:case 11:t="子女";break;case 3:case 4:t="父母";break;case 5:t="爷爷";break;case 6:t="奶奶";break;case 7:t="亲戚";break;case 8:t="朋友";break;case 9:t="邻居";break;case 10:t="其他"}return t},getPainMessage:function(e){var t=void 0;return e&&e.forEach(function(e,n){if("疼痛"===e.optionName)return t=e,!1}),t?{VASShow:!0,VAS:t.refQuestionList[1].symptomOptions[0].optionName.substring(0,2),typeShow:!0,type:t.refQuestionList[0].symptomOptions[0].optionName}:{VASShow:!1,typeShow:!1}},getMRTitle:function(e){var t="";switch(parseInt(e)){case 0:t="咨询";break;case 1:t="复诊";break;case 2:t="预约手术"}return t},showBigImgFunction:function(e){var t=this;t.showBigImageList=[],t.medicalReportMsg.patientCasemap.attachmentList.forEach(function(e,n){t.showBigImageList.push({url:e.caseAttUrl})});var n={};n=t.$store.state.SBIObject,n.medicalReport=t.showBigImageList,t.$store.commit("setSBIObject",n),t.$store.commit("setSBIType","medicalReport"),t.$store.commit("setSBIIndex",e),t.$store.commit("setSBIFlag",!0)}},props:{message:{type:Object}}}},wtEF:function(e,t,n){"use strict";var s=n("KEcs"),i=n("/mv4"),a={userName:"",mobile:"",patientList:"",patientActiveIndex:-1,newOnline:!1,onlineListRefresh:!1,waitingList:"",newWaiting:!1,waitingListRefresh:!1,resetList:[],newReset:!1,resetListRefresh:!1,currentItem:"",caseId:"",patientId:"",patientName:"",consultationId:"",userId:"",mailBox:"",sex:"",consultationState:"",inputReadOnly:!0,userListStatus:{status:"1",first:!0,second:!1},EasyWayTempCache:"",userLoginName:"",key:"",wxBrowseAccessLockOn:"",LOCAL_STORAGE_KEY:"",searchStatus:"",enableSearch:!0,fastReplyConfig:!1,checkHistoryFlag:!1,loadingShow:!1,popupShow:!1,popupContent:{hasImg:!1,text:""},fastReplyContent:"",fastReplyShow:!1,usedReplyConfig:!1,examineFlag:!1,checkSuggestionFlag:!1,usedReplyContent:"",usedReplyShow:!1,quitPatientItem:{},SBIFlag:!1,SBIObject:{},SBIIndex:"",SBIType:"",videoFlag:!1,videoObject:"",videoListFlag:!1,videoListObject:[],previewShow:!1,previewId:"",triageContent:[],previewData:{diagnoseResult:{},doctorList:[],teachingList:[],disposeList:[],examineList:[],testList:[]},previewType:"-1",sendPreviewSuggestionFlag:{flag:!1,data:{}},sendCheckSuggestionFlag:{flag:!1,data:[]},sendVideoTriageFlag:{flag:!1,data:{}},sendFileFlag:{flag:!1,data:{},name:"",type:""},sendFileShow:!1,newSickId:"",musicPlay:!1,beingSend:!0,resendMsgInfo:{},deleteMsgInfo:{},triagePatientCaseIdFlag:{caseId:"",flag:!1},releasePatientCaseIdFlag:{caseId:"",flag:!1},refuseFlag:!1,refuseList:[{flag:!0,refuseContent:"您咨询的病情，不属于骨科疾病，请您去医院直接就诊。"},{flag:!0,refuseContent:"您咨询的病情，非常紧急，不适合使用网络咨询服务，请您尽快去医院就诊。"},{flag:!0,refuseContent:"唯医骨科互联网只进行骨科疾病的相关咨询，您的情况不属于骨科病请咨询。"}],refuseReason:{flag:!1,data:""},refuseUserListFlag:!1,minBtnFlag:!1,isImage:!0,isOrder:!0,isTalk:!0,isDeleteMsg:!0,isVideo:!0,isFile:!0,deleteMsgTime:"2"},o=a,r=n("ogYJ"),c={setPatientActiveIndex:function(e,t){e.patientActiveIndex=t},enableSearchFn:function(e,t){e.enableSearch=t},setInputReadOnly:function(e,t){e.inputReadOnly=t},setUserLoginName:function(e,t){e.userLoginName=t},showUserName:function(e){},setUserListStatus:function(e,t){e.userListStatus=t},stopLoading:function(e){e.loadingShow=!1},startLoading:function(e){e.loadingShow=!0},showPopup:function(e,t){e.popupContent=t,e.popupShow=!0,setTimeout(function(){e.popupShow=!1},3e3)},setFastReply:function(e,t){e.fastReplyContent=t},setUesdReply:function(e,t){e.usedReplyContent=t},setTriageContent:function(e,t){e.triageContent.push(t)},clearTraigeContent:function(e){e.triageContent=[]},setPatientList:function(e,t){e.patientList=t},setPatientId:function(e,t){e.patientId=t},setPatientName:function(e,t){e.patientName=t},setWaitingList:function(e,t){e.waitingList=t},setCaseId:function(e,t){e.caseId=t},setConsultationId:function(e,t){e.consultationId=t},setQuitPatientItem:function(e,t){e.quitPatientItem=t},setCurrentItem:function(e,t){e.currentItem=t},setSBIFlag:function(e,t){e.SBIFlag=t},setSBIObject:function(e,t){e.SBIObject=t},setSBIType:function(e,t){e.SBIType=t},previewSuggestionSender:function(e,t){e.sendPreviewSuggestionFlag=t},checkSuggestionSender:function(e,t){e.sendCheckSuggestionFlag=t},videoTriageSender:function(e,t){e.sendVideoTriageFlag=t},setPreviewShow:function(e,t){e.previewShow=t},setPreviewId:function(e,t){e.previewId=t},setPreviewData:function(e,t){e.previewData=t},setPreviewType:function(e,t){e.previewType=t},setNewWaiting:function(e,t){e.newWaiting=t},setNewOnline:function(e,t){e.newOnline=t},setExamineFlag:function(e,t){e.examineFlag=t},setCheckSuggestionFlag:function(e,t){e.checkSuggestionFlag=t},setFastReplyShow:function(e,t){e.fastReplyShow=t},setUsedReplyShow:function(e,t){e.usedReplyShow=t},setVideoFlag:function(e,t){e.videoFlag=t},setVideoObject:function(e,t){e.videoObject=t},setVideoListFlag:function(e,t){e.videoListFlag=t},videoListObject:function(e,t){e.videoListObject=t},setSBIIndex:function(e,t){e.SBIIndex=t},setNewSickId:function(e,t){e.newSickId=t},setMusicPlay:function(e,t){e.musicPlay=t},setSendStatus:function(e,t){e.beingSend=t},setResendMsgInfo:function(e,t){e.resendMsgInfo=t},setDeleteMsgInfo:function(e,t){e.deleteMsgInfo=t},setTriagePatientCaseIdFlag:function(e,t){e.triagePatientCaseIdFlag=t},setReleasePatientCaseIdFlag:function(e,t){e.releasePatientCaseIdFlag=t},setResetList:function(e,t){e.resetList=t},setRefuseFlag:function(e,t){e.refuseFlag=t},waitingListRefreshFlag:function(e,t){e.waitingListRefresh=t},onlineListRefresh:function(e,t){e.onlineListRefresh=t},resetListRefreshFlag:function(e,t){e.resetListRefresh=t},setRefuseReason:function(e,t){e.refuseReason=t},setRefuseList:function(e,t){e.refuseList=t},setSendFileFlag:function(e,t){e.sendFileFlag=t},setSendFileShow:function(e,t){e.sendFileShow=t},setConsultationState:function(e,t){e.consultationState=t},setNewReset:function(e,t){e.newReset=t},setMinBtnFlag:function(e,t){e.minBtnFlag=t},setRefuseUserListFlag:function(e,t){e.refuseUserListFlag=t},setStateSetting:function(e,t){Object(r.a)({url:"/call/comm/data/tool/v1/getMapList/",method:"POST",data:{deviceType:"PC",sortType:1,visitSiteId:18},done:function(t){t.responseObject.responseData&&t.responseObject.responseData.dataList.forEach(function(t,n){switch(parseInt(t.toolType)){case 1:1==parseInt(t.state)?e.isImage=!0:e.isImage=!1;break;case 2:1==parseInt(t.state)?e.isOrder=!0:e.isOrder=!1;break;case 3:1==parseInt(t.state)?e.isTalk=!0:e.isTalk=!1;break;case 4:if(1==parseInt(t.state)){e.isDeleteMsg=!0,e.deleteMsgTime=t.toolConfig/60;break}e.isDeleteMsg=!1;break;case 5:1==parseInt(t.state)?e.isVideo=!0:e.isVideo=!1;break;case 6:1==parseInt(t.state)?e.isFile=!0:e.isFile=!1}})}}),e.deleteMsgTime=t}},l=c,u={userName:function(e){return e.userName},mobile:function(e){return e.mobile},patientList:function(e){return e.patientList},patientActiveIndex:function(e){return e.patientActiveIndex},newOnline:function(e){return e.newOnline},onlineListRefresh:function(e){return e.onlineListRefresh},waitingList:function(e){return e.waitingList},newWaiting:function(e){return e.newWaiting},waitingListRefresh:function(e){return e.waitingListRefresh},resetList:function(e){return e.resetList},newReset:function(e){return e.newReset},resetListRefresh:function(e){return e.resetListRefresh},currentItem:function(e){return e.currentItem},caseId:function(e){return e.caseId},patientId:function(e){return e.patientId},patientName:function(e){return e.patientName},consultationId:function(e){return e.consultationId},userId:function(e){return e.userId},mailBox:function(e){return e.mailBox},sex:function(e){return e.sex},consultationState:function(e){return e.consultationState},inputReadOnly:function(e){return e.inputReadOnly},userListStatus:function(e){return e.userListStatus},EasyWayTempCache:function(e){return e.EasyWayTempCache},userLoginName:function(e){return e.userLoginName},key:function(e){return e.key},wxBrowseAccessLockOn:function(e){return e.wxBrowseAccessLockOn},LOCAL_STORAGE_KEY:function(e){return e.LOCAL_STORAGE_KEY},searchStatus:function(e){return e.searchStatus},enableSearch:function(e){return e.enableSearch},fastReplyConfig:function(e){return e.fastReplyConfig},checkHistoryFlag:function(e){return e.checkHistoryFlag},loadingShow:function(e){return e.loadingShow},popupShow:function(e){return e.popupShow},popupContent:function(e){return e.popupContent},fastReplyContent:function(e){return e.fastReplyContent},fastReplyShow:function(e){return e.fastReplyShow},usedReplyConfig:function(e){return e.usedReplyConfig},examineFlag:function(e){return e.examineFlag},checkSuggestionFlag:function(e){return e.checkSuggestionFlag},usedReplyContent:function(e){return e.usedReplyContent},usedReplyShow:function(e){return e.usedReplyShow},quitPatientItem:function(e){return e.quitPatientItem},SBIObject:function(e){return e.SBIObject},SBIIndex:function(e){return e.SBIIndex},SBIType:function(e){return e.SBIType},videoFlag:function(e){return e.videoFlag},videoObject:function(e){return e.videoObject},videoListFlag:function(e){return e.videoListFlag},videoListObject:function(e){return e.videoListObject},previewShow:function(e){return e.previewShow},previewId:function(e){return e.previewId},triageContent:function(e){return e.triageContent},previewData:function(e){return e.previewData},previewType:function(e){return e.previewType},sendPreviewSuggestionFlag:function(e){return e.sendPreviewSuggestionFlag},sendCheckSuggestionFlag:function(e){return e.sendCheckSuggestionFlag},sendVideoTriageFlag:function(e){return e.sendVideoTriageFlag},sendFileFlag:function(e){return e.sendFileFlag},sendFileShow:function(e){return e.sendFileShow},newSickId:function(e){return e.newSickId},musicPlay:function(e){return e.musicPlay},beingSend:function(e){return e.beingSend},resendMsgInfo:function(e){return e.resendMsgInfo},deleteMsgInfo:function(e){return e.deleteMsgInfo},triagePatientCaseIdFlag:function(e){return e.triagePatientCaseIdFlag},releasePatientCaseIdFlag:function(e){return e.releasePatientCaseIdFlag},refuseFlag:function(e){return e.refuseFlag},refuseList:function(e){return e.refuseList},refuseReason:function(e){return e.refuseReason},refuseUserListFlag:function(e){return e.refuseUserListFlag},minBtnFlag:function(e){return e.minBtnFlag},isImage:function(e){return e.isImage},isOrder:function(e){return e.isOrder},isTalk:function(e){return e.isTalk},isDeleteMsg:function(e){return e.isDeleteMsg},isVideo:function(e){return e.isVideo},isFile:function(e){return e.isFile},deleteMsgTime:function(e){return e.deleteMsgTime}},d=u;s.a.use(i.a);t.a=new i.a.Store({state:o,mutations:l,getters:d})},xHOV:function(e,t,n){function s(e){n("ND59")}var i=n("eEuR")(n("bx0f"),n("RHdS"),s,null,null);e.exports=i.exports},xTQF:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"slide-top"}},[n("div",{staticClass:"setting"},[n("header-list"),e._v(" "),n("section",{staticClass:"setting-inner "},[n("section",{staticClass:"center-inner"},[n("section",{staticClass:"center-inner-box"},[n("section",{staticClass:"setting-center-form"},[n("section",{staticClass:"setting-form-item"},[n("figure",{staticClass:"setting-form-item-name"},[n("h4",[e._v("姓名")])]),e._v(" "),n("figcaption",{staticClass:"setting-form-item-input"},[n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"text",name:"name"}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.userName,expression:"userName"},{name:"validate",rawName:"v-validate",value:"required|nameSpace|special",expression:"'required|nameSpace|special'"}],staticClass:"setting-form-input-item",attrs:{type:"text",placeholder:"姓名",autocomplete:"off","data-validate-info":"isNoEmpty",name:"name",maxlength:"10"},domProps:{value:e.userName},on:{blur:function(t){e.nameCheck(e.errors)},focus:function(t){e.userNameErrorMessage=""},input:function(t){t.target.composing||(e.userName=t.target.value)}}})]),e._v(" "),n("p",{directives:[{name:"show",rawName:"v-show",value:e.userNameErrorMessage.length>0,expression:"userNameErrorMessage.length>0"}],staticClass:"error-text icon-errorTips"},[n("span",[e._v(e._s(e.userNameErrorMessage))])])]),e._v(" "),n("section",{staticClass:"setting-form-item"},[n("figure",{staticClass:"setting-form-item-name"},[n("h4",[e._v("手机号码")])]),e._v(" "),n("figcaption",{staticClass:"setting-form-item-input"},[n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"text",name:"mobile"}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.mobile,expression:"mobile"},{name:"validate",rawName:"v-validate",value:"required|mobile",expression:"'required|mobile'"}],staticClass:"setting-form-input-item",attrs:{type:"text",placeholder:"手机",autocomplete:"off","data-validate-info":"isMobile",name:"mobile"},domProps:{value:e.mobile},on:{blur:function(t){e.nameCheck(e.errors)},focus:function(t){e.mobileErrorMessage=""},input:function(t){t.target.composing||(e.mobile=t.target.value)}}})]),e._v(" "),n("p",{directives:[{name:"show",rawName:"v-show",value:e.mobileErrorMessage.length>0,expression:"mobileErrorMessage.length>0"}],staticClass:"error-text icon-errorTips mobileTips"},[n("span",[e._v(e._s(e.mobileErrorMessage))])])]),e._v(" "),n("section",{staticClass:"setting-form-item"},[n("figure",{staticClass:"setting-form-item-name"},[n("h4",[e._v("邮箱")])]),e._v(" "),n("figcaption",{staticClass:"setting-form-item-input"},[n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"text",name:"mailBox"}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.mailBox,expression:"mailBox"},{name:"validate",rawName:"v-validate",value:"required|mailBox",expression:"'required|mailBox'"}],staticClass:"setting-form-input-item",attrs:{type:"text",placeholder:"邮箱",autocomplete:"off","data-validate-info":"isMailbox",name:"mailBox"},domProps:{value:e.mailBox},on:{blur:function(t){e.nameCheck(e.errors)},focus:function(t){e.mailBoxErrorMessage=""},input:function(t){t.target.composing||(e.mailBox=t.target.value)}}})]),e._v(" "),n("p",{directives:[{name:"show",rawName:"v-show",value:e.mailBoxErrorMessage.length>0,expression:"mailBoxErrorMessage.length>0"}],staticClass:"error-text icon-errorTips"},[n("span",[e._v(e._s(e.mailBoxErrorMessage))])])]),e._v(" "),n("section",{staticClass:"setting-form-item"},[n("figure",{staticClass:"setting-form-item-name"},[n("h4",[e._v("原密码")])]),e._v(" "),n("figcaption",{staticClass:"setting-form-item-input"},[n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"password",name:"passWord"}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.oldPassword,expression:"oldPassword"},{name:"validate",rawName:"v-validate",value:"passw",expression:"'passw'"}],staticClass:"setting-form-input-item old-password",attrs:{type:"password",placeholder:"当前使用的密码",autocomplete:"off","data-validate-info":"ajax",name:"passWord"},domProps:{value:e.oldPassword},on:{blur:function(t){e.passCheck(t,e.errors)},focus:function(t){e.oldPasswordErrorMessage=""},input:function(t){t.target.composing||(e.oldPassword=t.target.value)}}})]),e._v(" "),n("p",{directives:[{name:"show",rawName:"v-show",value:e.oldPasswordErrorMessage.length>0,expression:"oldPasswordErrorMessage.length>0"}],staticClass:"error-text icon-errorTips oldPassTip"},[n("span",[e._v(e._s(e.oldPasswordErrorMessage))])])]),e._v(" "),n("section",{staticClass:"setting-form-item"},[n("figure",{staticClass:"setting-form-item-name"},[n("h4",[e._v("新密码")])]),e._v(" "),n("figcaption",{staticClass:"setting-form-item-input"},[n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"password",name:"newPassword"}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newPassword,expression:"newPassword"},{name:"validate",rawName:"v-validate",value:"passw",expression:"'passw'"}],staticClass:"setting-form-input-item new-password",attrs:{type:"password",placeholder:"新的密码",autocomplete:"off","data-validate-info":"newPass",name:"newPassword"},domProps:{value:e.newPassword},on:{blur:function(t){e.passCheck(t,e.errors)},focus:function(t){e.newPasswordErrorMessage=""},input:function(t){t.target.composing||(e.newPassword=t.target.value)}}})]),e._v(" "),n("p",{directives:[{name:"show",rawName:"v-show",value:e.newPasswordErrorMessage.length>0,expression:"newPasswordErrorMessage.length>0"}],staticClass:"error-text icon-errorTips newPassTip"},[e._v(e._s(e.newPasswordErrorMessage))]),e._v(" "),n("p",{directives:[{name:"show",rawName:"v-show",value:!e.newPasswordErrorMessage.length>0,expression:"!newPasswordErrorMessage.length>0"}],staticClass:"warn-text"},[n("span",[e._v("6-20位字符")])])]),e._v(" "),n("section",{staticClass:"setting-form-item"},[n("figure",{staticClass:"setting-form-item-name"},[n("h4",[e._v("确认密码")])]),e._v(" "),n("figcaption",{staticClass:"setting-form-item-input"},[n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"password",name:"newPassword2"}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newPassword2,expression:"newPassword2"},{name:"validate",rawName:"v-validate",value:"passw",expression:"'passw'"}],staticClass:"setting-form-input-item double-password",attrs:{type:"password",placeholder:"重新输入新密码",autocomplete:"off","data-validate-info":"double",name:"newPassword2"},domProps:{value:e.newPassword2},on:{blur:function(t){e.passCheck(t,e.errors)},focus:function(t){e.newPassword2ErrorMessage=""},input:function(t){t.target.composing||(e.newPassword2=t.target.value)}}})]),e._v(" "),n("p",{directives:[{name:"show",rawName:"v-show",value:e.newPassword2ErrorMessage.length>0,expression:"newPassword2ErrorMessage.length>0"}],staticClass:"error-text icon-errorTips doublePassTip"},[n("span",[e._v(e._s(e.newPassword2ErrorMessage))])])])]),e._v(" "),n("figure",{staticClass:"setting-form-btn"},[n("button",{staticClass:"btn-primary",on:{click:function(t){e.save()}}},[e._v("保存")])])])])])],1)])},staticRenderFns:[]}},xXdY:function(e,t,n){function s(e){n("qW7d")}var i=n("eEuR")(n("vdOd"),n("xTQF"),s,null,null);e.exports=i.exports},xt3J:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"doctorReceive",data:function(){return{}},mounted:function(){},methods:{ensure:function(){this.$emit("ensureCallback")}},props:{confirmContent:{type:String}}}},yByT:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"checkBody viewItem medical-record-form-item"},[n("form",{attrs:{action:""}},[n("section",{staticClass:"body-check medical-record-main"},[n("article",[n("input",{staticClass:"body-check-id",attrs:{type:"hidden"}}),e._v(" "),n("section",[n("ul",[n("li",[n("span",{staticClass:"medical-title"},[e._v("身高")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.height,expression:"height"}],on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.height=t.target.multiple?n:n[0]},e.changeData]}},e._l(e.heightArea,function(t){return n("option",{domProps:{value:t.value}},[e._v("\n                "+e._s(t.text)+"\n              ")])})),n("span",{staticClass:"medical-title ml20"},[e._v("体重")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.weight,expression:"weight"}],on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.weight=t.target.multiple?n:n[0]},e.changeData]}},e._l(e.weightArea,function(t){return n("option",{domProps:{value:t.value}},[e._v("\n                "+e._s(t.text)+"\n              ")])}))]),e._v(" "),n("li",[n("span",{staticClass:"medical-title"},[e._v("血压")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.bloodPressureHigh,expression:"bloodPressureHigh"}],staticClass:"select-130",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.bloodPressureHigh=t.target.multiple?n:n[0]}}},e._l(e.bloodPressureHighArea,function(t){return n("option",{domProps:{value:t.value}},[e._v("\n                "+e._s(t.text)+"\n              ")])})),n("select",{directives:[{name:"model",rawName:"v-model",value:e.bloodPressureLow,expression:"bloodPressureLow"}],staticClass:"select-130 ml15",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.bloodPressureLow=t.target.multiple?n:n[0]}}},e._l(e.bloodPressureLowArea,function(t){return n("option",{domProps:{value:t.value}},[e._v("\n                "+e._s(t.text)+"\n              ")])}))]),e._v(" "),n("li",[n("span",{staticClass:"medical-title"},[e._v("脉搏")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.pulse,expression:"pulse"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.pulse=t.target.multiple?n:n[0]}}},e._l(e.pulseArea,function(t){return n("option",{domProps:{value:t.value}},[e._v("\n                "+e._s(t.text)+"\n              ")])})),n("span",{staticClass:"medical-title ml20"},[e._v("呼吸")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.breathing,expression:"breathing"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.breathing=t.target.multiple?n:n[0]}}},e._l(e.breathArea,function(t){return n("option",{domProps:{value:t.value}},[e._v("\n                "+e._s(t.text)+"\n              ")])}))]),e._v(" "),n("li",[n("span",{staticClass:"medical-title"},[e._v("体温")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.temperature,expression:"temperature"}],staticClass:"input-95",attrs:{type:"text",placeholder:"请填写",maxlength:"20"},domProps:{value:e.temperature},on:{keyup:function(t){e.formatNumber(e.temperature)},focus:function(t){e.focusEvent(e.temperature,"℃")},blur:function(t){e.blurEvent(e.temperature,"℃")},input:function(t){t.target.composing||(e.temperature=t.target.value)}}}),n("span",{staticClass:"medical-title ml20"},[e._v("BMI")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.bmi,expression:"bmi"}],staticClass:"input-95 J-bmi",attrs:{type:"text",placeholder:"请填写",maxlength:"20",readonly:""},domProps:{value:e.bmi},on:{input:function(t){t.target.composing||(e.bmi=t.target.value)}}})]),e._v(" "),n("li",[n("span",{staticClass:"medical-title"},[e._v("体表面积")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.bodySurfaceArea,expression:"bodySurfaceArea"}],staticClass:"input-95",attrs:{type:"text",placeholder:"请填写",maxlength:"20",readonly:""},domProps:{value:e.bodySurfaceArea},on:{input:function(t){t.target.composing||(e.bodySurfaceArea=t.target.value)}}})]),e._v(" "),n("li",[n("span",{staticClass:"medical-title"},[e._v("其他")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.other,expression:"other"}],staticClass:"J-other",attrs:{placeholder:"请填写",maxlength:"1000"},domProps:{value:e.other},on:{input:function(t){t.target.composing||(e.other=t.target.value)}}})])])]),e._v(" "),n("footer",[n("button",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.userListStatus.second&&(6==e.$store.state.currentItem.consultationState||-1==e.$store.state.currentItem.consultationState||0==e.$store.state.currentItem.consultationState||9==e.$store.state.currentItem.consultationState||10==e.$store.state.currentItem.consultationState),expression:"$store.state.userListStatus.second && ($store.state.currentItem.consultationState == 6||$store.state.currentItem.consultationState == -1||$store.state.currentItem.consultationState ==0||$store.state.currentItem.consultationState ==9||$store.state.currentItem.consultationState ==10)"}],staticClass:"detail-saveBtn",attrs:{type:"button"},on:{click:e.saveData}},[e._v("保存")])])])])]),e._v(" "),n("transition",{attrs:{name:"fade-scale"}},[e.popupShow?n("popup",{attrs:{obj:e.popupObj,payPopupShow:e.popupShow},on:{"update:obj":function(t){e.popupObj=t},"update:payPopupShow":function(t){e.popupShow=t}}}):e._e()],1)],1)},staticRenderFns:[]}},ym7c:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"middle-tip-modal popup"},[n("figure",{staticClass:"middle-tip-box-text"},[n("img",{directives:[{name:"show",rawName:"v-show",value:e.obj.hasImg,expression:"obj.hasImg"}],attrs:{src:"/static/image/img00/login/save_loading.png"}}),e._v(" "),n("p",{staticClass:"popup-text"},[e._v(e._s(e.obj.text))])])])},staticRenderFns:[]}},zAV6:function(e,t,n){function s(e){n("jc/4")}var i=n("eEuR")(n("Lxys"),n("9F6P"),s,null,null);e.exports=i.exports},zERr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("3SZ7"),i=n.n(s);t.default={data:function(){return{content:""}},mounted:function(){this.contentSwitch(this.showType)},methods:{contentSwitch:function(e){var t="";switch(e){case"videoTriage":case"imageTriage":t="患者已上传视诊资料，";break;case"checkSuggestSendTips":t="患者已上传检查资料，"}this.content=t},goToCheck:function(){this.$router.push({path:"/home/majorCheck/",params:{num:i()(this.$store.state.currentItem)}})}},props:{showType:{type:String}}}},zLUy:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",{staticClass:"messageList-item-content",staticStyle:{cursor:"pointer"},on:{click:function(t){t.stopPropagation(),e.updateShow(t)}}},[n("figcaption",{staticClass:"check-suggestion-message"},[n("header",{staticClass:"check-suggestion-message-title previewSuggestion"},[e._v("初诊建议")]),e._v(" "),n("section",{staticClass:"preview-suggestion-content",attrs:{"data-id":"1503473276490"}},[e._m(0),e._v(" "),e._l(e.message.content.data,function(t){return e.message.content.data.length?n("figcaption",{staticClass:"preview-suggestion-content-text"},[n("header",{staticClass:"preview-suggestion-title"},[e._v(" "+e._s(t.patientName+t.createTime))]),e._v(" "),n("p",{staticClass:"preview-suggestion-result"},[e._v("\n          初诊："+e._s(t.illnessName.length>0?t.illnessName:"暂不确定")+"\n        ")]),e._v(" "),t.docNames&&t.docNames.length>0?n("p",{staticClass:"preview-suggestion-result",staticStyle:{"line-height":"1.7"}},[e._v("\n          推荐医生:"),n("br"),e._v(" "),e._l(t.docNames,function(t){return n("span",{staticStyle:{display:"block"}},[n("span",[e._v(e._s(t.fullName))]),e._v(" "),n("span",[e._v("【"+e._s(t.medicalTitle)+"】")]),n("br"),e._v(" "),n("span",[e._v(e._s(t.company))])])})],2):e._e()]):e._e()}),e._v(" "),e.message.content.data.length?e._e():n("figcaption",{staticClass:"preview-suggestion-content-text"},[n("header",{staticClass:"preview-suggestion-title"},[e._v(" "+e._s(e.message.content.data.patientName+e.message.content.data.createTime))]),e._v(" "),n("p",{staticClass:"preview-suggestion-result"},[e._v("\n          初诊："+e._s(e.message.content.data.illnessName.length>0?e.message.content.data.illnessName:"暂不确定")+"\n        ")]),e._v(" "),e.message.content.data.docNames&&e.message.content.data.docNames.length>0?n("p",{staticClass:"preview-suggestion-result",staticStyle:{"line-height":"1.5"}},[e._v("\n          推荐医生"),n("br"),e._v(" "),e._l(e.message.content.data.docNames,function(t){return n("span",{staticStyle:{display:"block"}},[n("span",[e._v(e._s(t.fullName))]),e._v(" "),n("span",[e._v("【"+e._s(t.medicalTitle)+"】")]),n("br"),e._v(" "),n("span",[e._v(e._s(t.company))])])})],2):e._e()])],2)]),e._v(" "),n("figure",{staticClass:"messageList-item-img"},[n("div",{staticClass:"messageList-item-nameTop"},[n("p",[e._v(e._s("【分诊医生】"+e.docName))])]),e._v(" "),n("div",{staticClass:"deleteMessage",on:{click:function(t){t.stopPropagation(),e.deleteMsg(t)}}},[e._v("撤回")]),e._v(" "),n("img",{attrs:{src:"/static/image/img00/index/chatting_portrait_system@2x.png",alt:""}})])])},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("figure",{staticClass:"preview-suggestion-img"},[n("img",{attrs:{src:"/static/image/img00/index/dialog_report.png",alt:""}})])}]}},zaNn:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.06b6ba957adf09004511.js.map